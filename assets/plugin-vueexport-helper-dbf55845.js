var $r=Object.defineProperty;var o=(e,t)=>$r(e,"name",{value:t,configurable:!0});import{i as Mr}from"./i18n-c4b3ca93.js";var Ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}o(Pr,"unwrapExports");function We(e,t){return t={exports:{}},e(t,t.exports),t.exports}o(We,"createCommonjsModule");var ge=1e3,pe=ge*60,ye=pe*60,ue=ye*24,Ir=ue*7,Ur=ue*365.25,jr=o(function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return Nr(e);if(r==="number"&&isFinite(e))return t.long?Dr(e):Lr(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},"ms");function Nr(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*Ur;case"weeks":case"week":case"w":return r*Ir;case"days":case"day":case"d":return r*ue;case"hours":case"hour":case"hrs":case"hr":case"h":return r*ye;case"minutes":case"minute":case"mins":case"min":case"m":return r*pe;case"seconds":case"second":case"secs":case"sec":case"s":return r*ge;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}o(Nr,"parse");function Lr(e){var t=Math.abs(e);return t>=ue?Math.round(e/ue)+"d":t>=ye?Math.round(e/ye)+"h":t>=pe?Math.round(e/pe)+"m":t>=ge?Math.round(e/ge)+"s":e+"ms"}o(Lr,"fmtShort");function Dr(e){var t=Math.abs(e);return t>=ue?Le(e,t,ue,"day"):t>=ye?Le(e,t,ye,"hour"):t>=pe?Le(e,t,pe,"minute"):t>=ge?Le(e,t,ge,"second"):e+" ms"}o(Dr,"fmtLong");function Le(e,t,r,i){var a=t>=r*1.5;return Math.round(e/r)+" "+i+(a?"s":"")}o(Le,"plural");function zr(e){r.debug=r,r.default=r,r.coerce=l,r.disable=u,r.enable=a,r.enabled=d,r.humanize=jr,r.destroy=g,Object.keys(e).forEach(h=>{r[h]=e[h]}),r.names=[],r.skips=[],r.formatters={};function t(h){let p=0;for(let m=0;m<h.length;m++)p=(p<<5)-p+h.charCodeAt(m),p|=0;return r.colors[Math.abs(p)%r.colors.length]}o(t,"selectColor"),r.selectColor=t;function r(h){let p,m=null;function w(...x){if(!w.enabled)return;const M=w,q=Number(new Date),be=q-(p||q);M.diff=be,M.prev=p,M.curr=q,p=q,x[0]=r.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let O=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(te,fe)=>{if(te==="%%")return"%";O++;const G=r.formatters[fe];if(typeof G=="function"){const ne=x[O];te=G.call(M,ne),x.splice(O,1),O--}return te}),r.formatArgs.call(M,x),(M.log||r.log).apply(M,x)}return o(w,"debug"),w.namespace=h,w.useColors=r.useColors(),w.color=r.selectColor(h),w.extend=i,w.destroy=r.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>m===null?r.enabled(h):m,set:x=>{m=x}}),typeof r.init=="function"&&r.init(w),w}o(r,"createDebug");function i(h,p){const m=r(this.namespace+(typeof p>"u"?":":p)+h);return m.log=this.log,m}o(i,"extend");function a(h){r.save(h),r.names=[],r.skips=[];let p;const m=(typeof h=="string"?h:"").split(/[\s,]+/),w=m.length;for(p=0;p<w;p++)m[p]&&(h=m[p].replace(/\*/g,".*?"),h[0]==="-"?r.skips.push(new RegExp("^"+h.substr(1)+"$")):r.names.push(new RegExp("^"+h+"$")))}o(a,"enable");function u(){const h=[...r.names.map(y),...r.skips.map(y).map(p=>"-"+p)].join(",");return r.enable(""),h}o(u,"disable");function d(h){if(h[h.length-1]==="*")return!0;let p,m;for(p=0,m=r.skips.length;p<m;p++)if(r.skips[p].test(h))return!1;for(p=0,m=r.names.length;p<m;p++)if(r.names[p].test(h))return!0;return!1}o(d,"enabled");function y(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}o(y,"toNamespace");function l(h){return h instanceof Error?h.stack||h.message:h}o(l,"coerce");function g(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o(g,"destroy"),r.enable(r.load()),r}o(zr,"setup");var Br=zr,L=We(function(e,t){t.formatArgs=i,t.save=a,t.load=u,t.useColors=r,t.storage=d(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}o(r,"useColors");function i(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const g="color: "+this.color;l.splice(1,0,g,"color: inherit");let h=0,p=0;l[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(h++,m==="%c"&&(p=h))}),l.splice(p,0,g)}o(i,"formatArgs"),t.log=console.debug||console.log||(()=>{});function a(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}o(a,"save");function u(){let l;try{l=t.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l={}.DEBUG),l}o(u,"load");function d(){try{return localStorage}catch{}}o(d,"localstorage"),e.exports=Br(t);const{formatters:y}=e.exports;y.j=function(l){try{return JSON.stringify(l)}catch(g){return"[UnexpectedJSONParseError]: "+g.message}}});L.formatArgs;L.save;L.load;L.useColors;L.storage;L.destroy;L.colors;L.log;let Ht,Be="default",it="";const ot=o(()=>{Ht=L(it?`fetch-mock:${Be}:${it}`:`fetch-mock:${Be}`)},"newDebug"),qr=o(e=>L(`fetch-mock:${Be}:${e}`),"newDebugSandbox");ot();var le={debug:(...e)=>{Ht(...e)},setDebugNamespace:e=>{it=e,ot()},setDebugPhase:e=>{Be=e||"default",ot()},getDebug:e=>qr(e)};const{debug:Gr,setDebugPhase:Wt}=le,j={};j.mock=function(...e){return Wt("setup"),e.length&&this.addRoute(e),this._mock()};j.addRoute=function(e){Gr("Adding route",e);const t=this.compileRoute(e),r=this.routes.filter(({identifier:i,method:a})=>(typeof i=="function"?i===t.identifier:String(i)===String(t.identifier))&&(!a||!t.method||a===t.method));if(this.getOption("overwriteRoutes",t)===!1||!r.length)return this._uncompiledRoutes.push(e),this.routes.push(t);if(this.getOption("overwriteRoutes",t)===!0)return r.forEach(i=>{const a=this.routes.indexOf(i);this._uncompiledRoutes.splice(a,1,e),this.routes.splice(a,1,t)}),this.routes;if(r.length)throw new Error("fetch-mock: Adding route with same name or matcher as existing route. See `overwriteRoutes` option.");this._uncompiledRoutes.push(e),this.routes.push(t)};j._mock=function(){return this.isSandbox||(this.realFetch=this.realFetch||this.global.fetch,this.global.fetch=this.fetchHandler),Wt(),this};j.catch=function(e){return this.fallbackResponse&&console.warn("calling fetchMock.catch() twice - are you sure you want to overwrite the previous fallback response"),this.fallbackResponse=e||"ok",this._mock()};j.spy=function(e){return this._mock(),e?this.mock(e,this.getNativeFetch()):this.catch(this.getNativeFetch())};const qe=o((e,t,r)=>{j[e]=function(i,a,u){return this[t](i,a,Object.assign(u||{},r))}},"defineShorthand"),Ge=o((e,t)=>{j[e]=function(r,i){return this[t]({},r,i)}},"defineGreedyShorthand");qe("sticky","mock",{sticky:!0});qe("once","mock",{repeat:1});Ge("any","mock");Ge("anyOnce","once");["get","post","put","delete","head","patch"].forEach(e=>{qe(e,"mock",{method:e}),qe(`${e}Once`,"once",{method:e}),Ge(`${e}Any`,e),Ge(`${e}AnyOnce`,`${e}Once`)});const kr=o(e=>{typeof e=="function"&&(console.warn("Deprecated: Passing fetch-mock reset methods\ndirectly in as handlers for before/after test runner hooks.\nWrap in an arrow function instead e.g. `() => fetchMock.restore()`"),e())},"mochaAsyncHookWorkaround"),Hr=o(({sticky:e})=>t=>e?[]:t.filter(({sticky:r})=>r),"getRouteRemover");j.resetBehavior=function(e={}){kr(e);const t=Hr(e);return this.routes=t(this.routes),this._uncompiledRoutes=t(this._uncompiledRoutes),this.realFetch&&!this.routes.length&&(this.global.fetch=this.realFetch,this.realFetch=void 0),this.fallbackResponse=void 0,this};j.resetHistory=function(){return this._calls=[],this._holdingPromises=[],this.routes.forEach(e=>e.reset&&e.reset()),this};j.restore=j.reset=function(e){return this.resetBehavior(e),this.resetHistory(),this};var Wr=j;const{getDebug:Jr}=le,jt=["body","headers","throws","status","redirectUrl"];class Jt{constructor(t){this.debug=Jr("ResponseBuilder()"),this.debug("Response builder created with options",t),Object.assign(this,t)}exec(){this.debug("building response"),this.normalizeResponseConfig(),this.constructFetchOpts(),this.constructResponseBody();const t=new this.fetchMock.config.Response(this.body,this.options),r=this.buildObservableResponse(t);return[t,r]}sendAsObject(){return jt.some(t=>this.responseConfig[t])?!Object.keys(this.responseConfig).every(t=>jt.includes(t)):!0}normalizeResponseConfig(){typeof this.responseConfig=="number"?(this.debug("building response using status",this.responseConfig),this.responseConfig={status:this.responseConfig}):(typeof this.responseConfig=="string"||this.sendAsObject())&&(this.debug("building text response from",this.responseConfig),this.responseConfig={body:this.responseConfig})}validateStatus(t){if(!t)return this.debug("No status provided. Defaulting to 200"),200;if(typeof t=="number"&&parseInt(t,10)!==t&&t>=200||t<600)return this.debug("Valid status provided",t),t;throw new TypeError(`fetch-mock: Invalid status ${t} passed on response object.
To respond with a JSON object that has status as a property assign the object to body
e.g. {"body": {"status: "registered"}}`)}constructFetchOpts(){this.options=this.responseConfig.options||{},this.options.url=this.responseConfig.redirectUrl||this.url,this.options.status=this.validateStatus(this.responseConfig.status),this.options.statusText=this.fetchMock.statusTextMap[String(this.options.status)],this.options.headers=new this.fetchMock.config.Headers(this.responseConfig.headers||{})}getOption(t){return this.fetchMock.getOption(t,this.route)}convertToJson(){this.getOption("sendAsJson")&&this.responseConfig.body!=null&&typeof this.body=="object"&&(this.debug("Stringifying JSON response body"),this.body=JSON.stringify(this.body),this.options.headers.has("Content-Type")||this.options.headers.set("Content-Type","application/json"))}setContentLength(){this.getOption("includeContentLength")&&typeof this.body=="string"&&!this.options.headers.has("Content-Length")&&(this.debug("Setting content-length header:",this.body.length.toString()),this.options.headers.set("Content-Length",this.body.length.toString()))}constructResponseBody(){if(this.body=this.responseConfig.body,this.convertToJson(),this.setContentLength(),this.Stream){this.debug("Creating response stream");const t=new this.Stream.Readable;this.body!=null&&t.push(this.body,"utf-8"),t.push(null),this.body=t}this.body=this.body}buildObservableResponse(t){const r=this.fetchMock;return t._fmResults={},this.debug("Wrapping Response in ES proxy for observability"),new Proxy(t,{get:(i,a)=>{if(this.responseConfig.redirectUrl){if(a==="url")return this.debug("Retrieving redirect url",this.responseConfig.redirectUrl),this.responseConfig.redirectUrl;if(a==="redirected")return this.debug("Retrieving redirected status",!0),!0}return typeof i[a]=="function"?(this.debug("Wrapping body promises in ES proxies for observability"),new Proxy(i[a],{apply:(u,d,y)=>{this.debug(`Calling res.${a}`);const l=u.apply(t,y);return l.then&&(r._holdingPromises.push(l.catch(()=>null)),i._fmResults[a]=l),l}})):i[a]}})}}o(Jt,"ResponseBuilder");var Kr=o(e=>new Jt(e).exec(),"responseBuilder");let Q;const at=new RegExp("^[a-z]+://","i"),Xr=new RegExp("^//","i"),Nt=o(e=>typeof e.raw=="function"?Object.entries(e.raw()):e[Symbol.iterator]?[...e]:Object.entries(e),"headersToArray"),Lt=o(e=>e.reduce((t,[r,i])=>Object.assign(t,{[r]:i}),{}),"zipObject"),st=o(e=>{if(typeof e=="function"||e instanceof RegExp||/^(begin|end|glob|express|path)\:/.test(e))return e;if(at.test(e))return new Q(e).href;if(Xr.test(e))return new Q(e,"http://dummy").href;{const t=new Q(e,"http://dummy");return t.pathname+t.search}},"normalizeUrl"),Zr=o(async e=>{try{return"body"in e?e.body.toString():e.clone().text()}catch{}},"extractBody");var Je={setUrlImplementation:e=>{Q=e},normalizeRequest:(e,t,r)=>{if(r.prototype.isPrototypeOf(e)){const i={method:e.method},a=Zr(e);typeof a<"u"&&(i.body=a);const u={url:st(e.url),options:Object.assign(i,t),request:e,signal:t&&t.signal||e.signal},d=Nt(e.headers);return d.length&&(u.options.headers=Lt(d)),u}else{if(typeof e=="string"||typeof e=="object"&&"href"in e)return{url:st(e),options:t,signal:t&&t.signal};throw typeof e=="object"?new TypeError("fetch-mock: Unrecognised Request object. Read the Config and Installation sections of the docs"):new TypeError("fetch-mock: Invalid arguments passed to fetch")}},normalizeUrl:st,getPath:e=>(at.test(e)?new Q(e):new Q(e,"http://dummy")).pathname,getQuery:e=>{const t=at.test(e)?new Q(e):new Q(e,"http://dummy");return t.search?t.search.substr(1):""},headers:{normalize:e=>Lt(Nt(e)),toLowerCase:e=>Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{}),equal:(e,t)=>(e=Array.isArray(e)?e:[e],t=Array.isArray(t)?t:[t],e.length!==t.length?!1:e.every((r,i)=>r===t[i]))}};const{debug:Te,setDebugPhase:Kt,getDebug:Ke}=le,D={};class Xt extends Error{constructor(){super(...arguments),this.name="AbortError",this.message="The operation was aborted.",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}o(Xt,"AbortError");const Qr=o(e=>typeof navigator>"u"||!navigator.vendor||navigator.vendor!=="Apple Computer, Inc."?e:async t=>{const{method:r}=t;if(!["POST","PUT","PATCH"].includes(r))return e(t);const i=await t.clone().text(),{cache:a,credentials:u,headers:d,integrity:y,mode:l,redirect:g,referrer:h}=t,p={body:i,cache:a,credentials:u,headers:d,integrity:y,mode:l,redirect:g,referrer:h,method:r};return e(t.url,p)},"patchNativeFetchForSafari"),Yr=o(async({response:e,responseIsFetch:t=!1},r,i,a)=>{const u=Ke("resolve()");for(u("Recursively resolving function and promise responses");;)if(typeof e=="function"){if(u("  Response is a function"),t)return a?(u("  -> Calling fetch with Request instance"),e(a)):(u("  -> Calling fetch with url and options"),e(r,i));u("  -> Calling response function"),e=e(r,i,a)}else if(typeof e.then=="function")u("  Response is a promise"),u("  -> Resolving promise"),e=await e;else return u("  Response is not a function or a promise"),u("  -> Exiting response resolution recursion"),e},"resolve");D.needsAsyncBodyExtraction=function({request:e}){return e&&this.routes.some(({usesBody:t})=>t)};D.fetchHandler=function(e,t){Kt("handle");const r=Ke("fetchHandler()");r("fetch called with:",e,t);const i=Je.normalizeRequest(e,t,this.config.Request);return r("Request normalised"),r("  url",i.url),r("  options",i.options),r("  request",i.request),r("  signal",i.signal),this.needsAsyncBodyExtraction(i)?(r("Need to wait for Body to be streamed before calling router: switching to async mode"),this._extractBodyThenHandle(i)):this._fetchHandler(i)};D._extractBodyThenHandle=async function(e){return e.options.body=await e.options.body,this._fetchHandler(e)};D._fetchHandler=function({url:e,options:t,request:r,signal:i}){const{route:a,callLog:u}=this.executeRouter(e,t,r);this.recordCall(u);let d;return this._holdingPromises.push(new this.config.Promise(y=>d=y)),new this.config.Promise((y,l)=>{if(i){Te("signal exists - enabling fetch abort");const g=o(()=>{Te("aborting fetch"),l(typeof DOMException<"u"?new DOMException("The operation was aborted.","AbortError"):new Xt),d()},"abort");i.aborted&&(Te("signal is already aborted - aborting the fetch"),g()),i.addEventListener("abort",g)}this.generateResponse({route:a,url:e,options:t,request:r,callLog:u}).then(y,l).then(d,d).then(()=>{Kt()})})};D.fetchHandler.isMock=!0;D.executeRouter=function(e,t,r){const i=Ke("executeRouter()"),a={url:e,options:t,request:r,isUnmatched:!0};if(i("Attempting to match request to a route"),this.getOption("fallbackToNetwork")==="always")return i("  Configured with fallbackToNetwork=always - passing through to fetch"),{route:{response:this.getNativeFetch(),responseIsFetch:!0}};const u=this.router(e,t,r);if(u)return i("  Matching route found"),{route:u,callLog:{url:e,options:t,request:r,identifier:u.identifier}};if(this.getOption("warnOnFallback")&&console.warn(`Unmatched ${t&&t.method||"GET"} to ${e}`),this.fallbackResponse)return i("  No matching route found - using fallbackResponse"),{route:{response:this.fallbackResponse},callLog:a};if(!this.getOption("fallbackToNetwork"))throw new Error(`fetch-mock: No fallback response defined for ${t&&t.method||"GET"} to ${e}`);return i("  Configured to fallbackToNetwork - passing through to fetch"),{route:{response:this.getNativeFetch(),responseIsFetch:!0},callLog:a}};D.generateResponse=async function({route:e,url:t,options:r,request:i,callLog:a={}}){const u=Ke("generateResponse()"),d=await Yr(e,t,r,i);if(d.throws&&typeof d!="function")throw u("response.throws is defined - throwing an error"),d.throws;if(this.config.Response.prototype.isPrototypeOf(d))return u("response is already a Response instance - returning it"),a.response=d,d;const[y,l]=Kr({url:t,responseConfig:d,fetchMock:this,route:e});return a.response=y,l};D.router=function(e,t,r){const i=this.routes.find((a,u)=>(Te(`Trying to match route ${u}`),a.matcher(e,t,r)));if(i)return i};D.getNativeFetch=function(){const e=this.realFetch||this.isSandbox&&this.config.fetch;if(!e)throw new Error("fetch-mock: Falling back to network only available on global fetch-mock, or by setting config.fetch on sandboxed fetch-mock");return Qr(e)};D.recordCall=function(e){Te("Recording fetch call",e),e&&this._calls.push(e)};var Vr=D,es=o(function(e,t){if(typeof e!="string")throw new TypeError("Expected a string");for(var r=String(e),i="",a=t?!!t.extended:!1,u=t?!!t.globstar:!1,d=!1,y=t&&typeof t.flags=="string"?t.flags:"",l,g=0,h=r.length;g<h;g++)switch(l=r[g],l){case"/":case"$":case"^":case"+":case".":case"(":case")":case"=":case"!":case"|":i+="\\"+l;break;case"?":if(a){i+=".";break}case"[":case"]":if(a){i+=l;break}case"{":if(a){d=!0,i+="(";break}case"}":if(a){d=!1,i+=")";break}case",":if(d){i+="|";break}i+="\\"+l;break;case"*":for(var p=r[g-1],m=1;r[g+1]==="*";)m++,g++;var w=r[g+1];if(!u)i+=".*";else{var x=m>1&&(p==="/"||p===void 0)&&(w==="/"||w===void 0);x?(i+="((?:[^/]*(?:/|$))*)",g++):i+="([^/]*)"}break;default:i+=l}return(!y||!~y.indexOf("g"))&&(i="^"+i+"$"),new RegExp(i,y)},"globToRegexp"),me=tn,ts=ut,ns=os,rs=Yt,ss=en,Zt="/",Qt="./",is=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function ut(e,t){for(var r=[],i=0,a=0,u="",d=t&&t.delimiter||Zt,y=t&&t.delimiters||Qt,l=!1,g;(g=is.exec(e))!==null;){var h=g[0],p=g[1],m=g.index;if(u+=e.slice(a,m),a=m+h.length,p){u+=p[1],l=!0;continue}var w="",x=e[a],M=g[2],q=g[3],be=g[4],O=g[5];if(!l&&u.length){var ee=u.length-1;y.indexOf(u[ee])>-1&&(w=u[ee],u=u.slice(0,ee))}u&&(r.push(u),u="",l=!1);var te=w!==""&&x!==void 0&&x!==w,fe=O==="+"||O==="*",G=O==="?"||O==="*",ne=w||d,Fe=q||be;r.push({name:M||i++,prefix:w,delimiter:ne,optional:G,repeat:fe,partial:te,pattern:Fe?as(Fe):"[^"+Z(ne)+"]+?"})}return(u||a<e.length)&&r.push(u+e.substr(a)),r}o(ut,"parse$1");function os(e,t){return Yt(ut(e,t))}o(os,"compile");function Yt(e){for(var t=new Array(e.length),r=0;r<e.length;r++)typeof e[r]=="object"&&(t[r]=new RegExp("^(?:"+e[r].pattern+")$"));return function(i,a){for(var u="",d=a&&a.encode||encodeURIComponent,y=0;y<e.length;y++){var l=e[y];if(typeof l=="string"){u+=l;continue}var g=i?i[l.name]:void 0,h;if(Array.isArray(g)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but got array');if(g.length===0){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var p=0;p<g.length;p++){if(h=d(g[p],l),!t[y].test(h))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'"');u+=(p===0?l.prefix:l.delimiter)+h}continue}if(typeof g=="string"||typeof g=="number"||typeof g=="boolean"){if(h=d(String(g),l),!t[y].test(h))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but got "'+h+'"');u+=l.prefix+h;continue}if(l.optional){l.partial&&(u+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be '+(l.repeat?"an array":"a string"))}return u}}o(Yt,"tokensToFunction");function Z(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}o(Z,"escapeString");function as(e){return e.replace(/([=!:$/()])/g,"\\$1")}o(as,"escapeGroup");function Vt(e){return e&&e.sensitive?"":"i"}o(Vt,"flags");function cs(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var i=0;i<r.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return e}o(cs,"regexpToRegexp");function us(e,t,r){for(var i=[],a=0;a<e.length;a++)i.push(tn(e[a],t,r).source);return new RegExp("(?:"+i.join("|")+")",Vt(r))}o(us,"arrayToRegexp");function ls(e,t,r){return en(ut(e,r),t,r)}o(ls,"stringToRegexp");function en(e,t,r){r=r||{};for(var i=r.strict,a=r.start!==!1,u=r.end!==!1,d=Z(r.delimiter||Zt),y=r.delimiters||Qt,l=[].concat(r.endsWith||[]).map(Z).concat("$").join("|"),g=a?"^":"",h=e.length===0,p=0;p<e.length;p++){var m=e[p];if(typeof m=="string")g+=Z(m),h=p===e.length-1&&y.indexOf(m[m.length-1])>-1;else{var w=m.repeat?"(?:"+m.pattern+")(?:"+Z(m.delimiter)+"(?:"+m.pattern+"))*":m.pattern;t&&t.push(m),m.optional?m.partial?g+=Z(m.prefix)+"("+w+")?":g+="(?:"+Z(m.prefix)+"("+w+"))?":g+=Z(m.prefix)+"("+w+")"}}return u?(i||(g+="(?:"+d+")?"),g+=l==="$"?"$":"(?="+l+")"):(i||(g+="(?:"+d+"(?="+l+"))?"),h||(g+="(?="+d+"|"+l+")")),new RegExp(g,Vt(r))}o(en,"tokensToRegExp");function tn(e,t,r){return e instanceof RegExp?cs(e,t):Array.isArray(e)?us(e,t,r):ls(e,t,r)}o(tn,"pathToRegexp");me.parse=ts;me.compile=ns;me.tokensToFunction=rs;me.tokensToRegExp=ss;function fs(e,t){return Object.prototype.hasOwnProperty.call(e,t)}o(fs,"hasOwnProperty");var hs=o(function(e,t,r,i){t=t||"&",r=r||"=";var a={};if(typeof e!="string"||e.length===0)return a;var u=/\+/g;e=e.split(t);var d=1e3;i&&typeof i.maxKeys=="number"&&(d=i.maxKeys);var y=e.length;d>0&&y>d&&(y=d);for(var l=0;l<y;++l){var g=e[l].replace(u,"%20"),h=g.indexOf(r),p,m,w,x;h>=0?(p=g.substr(0,h),m=g.substr(h+1)):(p=g,m=""),w=decodeURIComponent(p),x=decodeURIComponent(m),fs(a,w)?Array.isArray(a[w])?a[w].push(x):a[w]=[a[w],x]:a[w]=x}return a},"decode"),Re=o(function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},"stringifyPrimitive"),ds=o(function(e,t,r,i){return t=t||"&",r=r||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(a){var u=encodeURIComponent(Re(a))+r;return Array.isArray(e[a])?e[a].map(function(d){return u+encodeURIComponent(Re(d))}).join(t):u+encodeURIComponent(Re(e[a]))}).join(t):i?encodeURIComponent(Re(i))+r+encodeURIComponent(Re(e)):""},"encode"),ce=We(function(e,t){t.decode=t.parse=hs,t.encode=t.stringify=ds});ce.decode;ce.parse;ce.encode;ce.stringify;var nn=We(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(i){function a(u,d){return i.apply(this,arguments)}return o(a,"isSubset"),a.toString=function(){return i.toString()},a}(function(i,a){return typeof i!="object"||i===null||typeof a!="object"||a===null?!1:Object.keys(a).every(function(u){if(!i.propertyIsEnumerable(u))return!1;var d=a[u],y=i[u];return!(typeof d=="object"&&d!==null?!r(y,d):y!==d)})});t.default=r,e.exports=t.default});Pr(nn);var rn=We(function(e,t){var r=200,i="__lodash_hash_undefined__",a=1,u=2,d=9007199254740991,y="[object Arguments]",l="[object Array]",g="[object AsyncFunction]",h="[object Boolean]",p="[object Date]",m="[object Error]",w="[object Function]",x="[object GeneratorFunction]",M="[object Map]",q="[object Number]",be="[object Null]",O="[object Object]",ee="[object Promise]",te="[object Proxy]",fe="[object RegExp]",G="[object Set]",ne="[object String]",Fe="[object Symbol]",an="[object Undefined]",Xe="[object WeakMap]",ft="[object ArrayBuffer]",Ee="[object DataView]",cn="[object Float32Array]",un="[object Float64Array]",ln="[object Int8Array]",fn="[object Int16Array]",hn="[object Int32Array]",dn="[object Uint8Array]",gn="[object Uint8ClampedArray]",pn="[object Uint16Array]",yn="[object Uint32Array]",mn=/[\\^$.*+?()[\]{}|]/g,bn=/^\[object .+?Constructor\]$/,vn=/^(?:0|[1-9]\d*)$/,_={};_[cn]=_[un]=_[ln]=_[fn]=_[hn]=_[dn]=_[gn]=_[pn]=_[yn]=!0,_[y]=_[l]=_[ft]=_[h]=_[Ee]=_[p]=_[m]=_[w]=_[M]=_[q]=_[O]=_[fe]=_[G]=_[ne]=_[Xe]=!1;var ht=typeof Ne=="object"&&Ne&&Ne.Object===Object&&Ne,wn=typeof self=="object"&&self&&self.Object===Object&&self,k=ht||wn||Function("return this")(),dt=t&&!t.nodeType&&t,gt=dt&&!0&&e&&!e.nodeType&&e,pt=gt&&gt.exports===dt,Ze=pt&&ht.process,yt=function(){try{return Ze&&Ze.binding&&Ze.binding("util")}catch{}}(),mt=yt&&yt.isTypedArray;function Cn(n,s){for(var c=-1,f=n==null?0:n.length,R=0,v=[];++c<f;){var A=n[c];s(A,c,n)&&(v[R++]=A)}return v}o(Cn,"arrayFilter");function _n(n,s){for(var c=-1,f=s.length,R=n.length;++c<f;)n[R+c]=s[c];return n}o(_n,"arrayPush");function Rn(n,s){for(var c=-1,f=n==null?0:n.length;++c<f;)if(s(n[c],c,n))return!0;return!1}o(Rn,"arraySome");function xn(n,s){for(var c=-1,f=Array(n);++c<n;)f[c]=s(c);return f}o(xn,"baseTimes");function Tn(n){return function(s){return n(s)}}o(Tn,"baseUnary");function An(n,s){return n.has(s)}o(An,"cacheHas");function Fn(n,s){return n==null?void 0:n[s]}o(Fn,"getValue");function En(n){var s=-1,c=Array(n.size);return n.forEach(function(f,R){c[++s]=[R,f]}),c}o(En,"mapToArray");function On(n,s){return function(c){return n(s(c))}}o(On,"overArg");function Sn(n){var s=-1,c=Array(n.size);return n.forEach(function(f){c[++s]=f}),c}o(Sn,"setToArray");var $n=Array.prototype,Mn=Function.prototype,Oe=Object.prototype,Qe=k["__core-js_shared__"],bt=Mn.toString,z=Oe.hasOwnProperty,vt=function(){var n=/[^.]+$/.exec(Qe&&Qe.keys&&Qe.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),wt=Oe.toString,Pn=RegExp("^"+bt.call(z).replace(mn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ct=pt?k.Buffer:void 0,Se=k.Symbol,_t=k.Uint8Array,Rt=Oe.propertyIsEnumerable,In=$n.splice,re=Se?Se.toStringTag:void 0,xt=Object.getOwnPropertySymbols,Un=Ct?Ct.isBuffer:void 0,jn=On(Object.keys,Object),Ye=he(k,"DataView"),ve=he(k,"Map"),Ve=he(k,"Promise"),et=he(k,"Set"),tt=he(k,"WeakMap"),we=he(Object,"create"),Nn=oe(Ye),Ln=oe(ve),Dn=oe(Ve),zn=oe(et),Bn=oe(tt),Tt=Se?Se.prototype:void 0,nt=Tt?Tt.valueOf:void 0;function se(n){var s=-1,c=n==null?0:n.length;for(this.clear();++s<c;){var f=n[s];this.set(f[0],f[1])}}o(se,"Hash");function qn(){this.__data__=we?we(null):{},this.size=0}o(qn,"hashClear");function Gn(n){var s=this.has(n)&&delete this.__data__[n];return this.size-=s?1:0,s}o(Gn,"hashDelete");function kn(n){var s=this.__data__;if(we){var c=s[n];return c===i?void 0:c}return z.call(s,n)?s[n]:void 0}o(kn,"hashGet");function Hn(n){var s=this.__data__;return we?s[n]!==void 0:z.call(s,n)}o(Hn,"hashHas");function Wn(n,s){var c=this.__data__;return this.size+=this.has(n)?0:1,c[n]=we&&s===void 0?i:s,this}o(Wn,"hashSet"),se.prototype.clear=qn,se.prototype.delete=Gn,se.prototype.get=kn,se.prototype.has=Hn,se.prototype.set=Wn;function H(n){var s=-1,c=n==null?0:n.length;for(this.clear();++s<c;){var f=n[s];this.set(f[0],f[1])}}o(H,"ListCache");function Jn(){this.__data__=[],this.size=0}o(Jn,"listCacheClear");function Kn(n){var s=this.__data__,c=Me(s,n);if(c<0)return!1;var f=s.length-1;return c==f?s.pop():In.call(s,c,1),--this.size,!0}o(Kn,"listCacheDelete");function Xn(n){var s=this.__data__,c=Me(s,n);return c<0?void 0:s[c][1]}o(Xn,"listCacheGet");function Zn(n){return Me(this.__data__,n)>-1}o(Zn,"listCacheHas");function Qn(n,s){var c=this.__data__,f=Me(c,n);return f<0?(++this.size,c.push([n,s])):c[f][1]=s,this}o(Qn,"listCacheSet"),H.prototype.clear=Jn,H.prototype.delete=Kn,H.prototype.get=Xn,H.prototype.has=Zn,H.prototype.set=Qn;function ie(n){var s=-1,c=n==null?0:n.length;for(this.clear();++s<c;){var f=n[s];this.set(f[0],f[1])}}o(ie,"MapCache");function Yn(){this.size=0,this.__data__={hash:new se,map:new(ve||H),string:new se}}o(Yn,"mapCacheClear");function Vn(n){var s=Pe(this,n).delete(n);return this.size-=s?1:0,s}o(Vn,"mapCacheDelete");function er(n){return Pe(this,n).get(n)}o(er,"mapCacheGet");function tr(n){return Pe(this,n).has(n)}o(tr,"mapCacheHas");function nr(n,s){var c=Pe(this,n),f=c.size;return c.set(n,s),this.size+=c.size==f?0:1,this}o(nr,"mapCacheSet"),ie.prototype.clear=Yn,ie.prototype.delete=Vn,ie.prototype.get=er,ie.prototype.has=tr,ie.prototype.set=nr;function $e(n){var s=-1,c=n==null?0:n.length;for(this.__data__=new ie;++s<c;)this.add(n[s])}o($e,"SetCache");function rr(n){return this.__data__.set(n,i),this}o(rr,"setCacheAdd");function sr(n){return this.__data__.has(n)}o(sr,"setCacheHas"),$e.prototype.add=$e.prototype.push=rr,$e.prototype.has=sr;function J(n){var s=this.__data__=new H(n);this.size=s.size}o(J,"Stack");function ir(){this.__data__=new H,this.size=0}o(ir,"stackClear");function or(n){var s=this.__data__,c=s.delete(n);return this.size=s.size,c}o(or,"stackDelete");function ar(n){return this.__data__.get(n)}o(ar,"stackGet");function cr(n){return this.__data__.has(n)}o(cr,"stackHas");function ur(n,s){var c=this.__data__;if(c instanceof H){var f=c.__data__;if(!ve||f.length<r-1)return f.push([n,s]),this.size=++c.size,this;c=this.__data__=new ie(f)}return c.set(n,s),this.size=c.size,this}o(ur,"stackSet"),J.prototype.clear=ir,J.prototype.delete=or,J.prototype.get=ar,J.prototype.has=cr,J.prototype.set=ur;function lr(n,s){var c=Ie(n),f=!c&&Tr(n),R=!c&&!f&&rt(n),v=!c&&!f&&!R&&It(n),A=c||f||R||v,F=A?xn(n.length,String):[],E=F.length;for(var T in n)(s||z.call(n,T))&&!(A&&(T=="length"||R&&(T=="offset"||T=="parent")||v&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||wr(T,E)))&&F.push(T);return F}o(lr,"arrayLikeKeys");function Me(n,s){for(var c=n.length;c--;)if(St(n[c][0],s))return c;return-1}o(Me,"assocIndexOf");function fr(n,s,c){var f=s(n);return Ie(n)?f:_n(f,c(n))}o(fr,"baseGetAllKeys");function Ce(n){return n==null?n===void 0?an:be:re&&re in Object(n)?br(n):xr(n)}o(Ce,"baseGetTag");function At(n){return _e(n)&&Ce(n)==y}o(At,"baseIsArguments");function Ft(n,s,c,f,R){return n===s?!0:n==null||s==null||!_e(n)&&!_e(s)?n!==n&&s!==s:hr(n,s,c,f,Ft,R)}o(Ft,"baseIsEqual");function hr(n,s,c,f,R,v){var A=Ie(n),F=Ie(s),E=A?l:K(n),T=F?l:K(s);E=E==y?O:E,T=T==y?O:T;var P=E==O,N=T==O,S=E==T;if(S&&rt(n)){if(!rt(s))return!1;A=!0,P=!1}if(S&&!P)return v||(v=new J),A||It(n)?Et(n,s,c,f,R,v):yr(n,s,E,c,f,R,v);if(!(c&a)){var I=P&&z.call(n,"__wrapped__"),U=N&&z.call(s,"__wrapped__");if(I||U){var X=I?n.value():n,W=U?s.value():s;return v||(v=new J),R(X,W,c,f,v)}}return S?(v||(v=new J),mr(n,s,c,f,R,v)):!1}o(hr,"baseIsEqualDeep");function dr(n){if(!Pt(n)||_r(n))return!1;var s=$t(n)?Pn:bn;return s.test(oe(n))}o(dr,"baseIsNative");function gr(n){return _e(n)&&Mt(n.length)&&!!_[Ce(n)]}o(gr,"baseIsTypedArray");function pr(n){if(!Rr(n))return jn(n);var s=[];for(var c in Object(n))z.call(n,c)&&c!="constructor"&&s.push(c);return s}o(pr,"baseKeys");function Et(n,s,c,f,R,v){var A=c&a,F=n.length,E=s.length;if(F!=E&&!(A&&E>F))return!1;var T=v.get(n);if(T&&v.get(s))return T==s;var P=-1,N=!0,S=c&u?new $e:void 0;for(v.set(n,s),v.set(s,n);++P<F;){var I=n[P],U=s[P];if(f)var X=A?f(U,I,P,s,n,v):f(I,U,P,n,s,v);if(X!==void 0){if(X)continue;N=!1;break}if(S){if(!Rn(s,function(W,ae){if(!An(S,ae)&&(I===W||R(I,W,c,f,v)))return S.push(ae)})){N=!1;break}}else if(!(I===U||R(I,U,c,f,v))){N=!1;break}}return v.delete(n),v.delete(s),N}o(Et,"equalArrays");function yr(n,s,c,f,R,v,A){switch(c){case Ee:if(n.byteLength!=s.byteLength||n.byteOffset!=s.byteOffset)return!1;n=n.buffer,s=s.buffer;case ft:return!(n.byteLength!=s.byteLength||!v(new _t(n),new _t(s)));case h:case p:case q:return St(+n,+s);case m:return n.name==s.name&&n.message==s.message;case fe:case ne:return n==s+"";case M:var F=En;case G:var E=f&a;if(F||(F=Sn),n.size!=s.size&&!E)return!1;var T=A.get(n);if(T)return T==s;f|=u,A.set(n,s);var P=Et(F(n),F(s),f,R,v,A);return A.delete(n),P;case Fe:if(nt)return nt.call(n)==nt.call(s)}return!1}o(yr,"equalByTag");function mr(n,s,c,f,R,v){var A=c&a,F=Ot(n),E=F.length,T=Ot(s),P=T.length;if(E!=P&&!A)return!1;for(var N=E;N--;){var S=F[N];if(!(A?S in s:z.call(s,S)))return!1}var I=v.get(n);if(I&&v.get(s))return I==s;var U=!0;v.set(n,s),v.set(s,n);for(var X=A;++N<E;){S=F[N];var W=n[S],ae=s[S];if(f)var Ut=A?f(ae,W,S,s,n,v):f(W,ae,S,n,s,v);if(!(Ut===void 0?W===ae||R(W,ae,c,f,v):Ut)){U=!1;break}X||(X=S=="constructor")}if(U&&!X){var Ue=n.constructor,je=s.constructor;Ue!=je&&"constructor"in n&&"constructor"in s&&!(typeof Ue=="function"&&Ue instanceof Ue&&typeof je=="function"&&je instanceof je)&&(U=!1)}return v.delete(n),v.delete(s),U}o(mr,"equalObjects");function Ot(n){return fr(n,Er,vr)}o(Ot,"getAllKeys");function Pe(n,s){var c=n.__data__;return Cr(s)?c[typeof s=="string"?"string":"hash"]:c.map}o(Pe,"getMapData");function he(n,s){var c=Fn(n,s);return dr(c)?c:void 0}o(he,"getNative");function br(n){var s=z.call(n,re),c=n[re];try{n[re]=void 0;var f=!0}catch{}var R=wt.call(n);return f&&(s?n[re]=c:delete n[re]),R}o(br,"getRawTag");var vr=xt?function(n){return n==null?[]:(n=Object(n),Cn(xt(n),function(s){return Rt.call(n,s)}))}:Or,K=Ce;(Ye&&K(new Ye(new ArrayBuffer(1)))!=Ee||ve&&K(new ve)!=M||Ve&&K(Ve.resolve())!=ee||et&&K(new et)!=G||tt&&K(new tt)!=Xe)&&(K=o(function(n){var s=Ce(n),c=s==O?n.constructor:void 0,f=c?oe(c):"";if(f)switch(f){case Nn:return Ee;case Ln:return M;case Dn:return ee;case zn:return G;case Bn:return Xe}return s},"getTag"));function wr(n,s){return s=s??d,!!s&&(typeof n=="number"||vn.test(n))&&n>-1&&n%1==0&&n<s}o(wr,"isIndex");function Cr(n){var s=typeof n;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?n!=="__proto__":n===null}o(Cr,"isKeyable");function _r(n){return!!vt&&vt in n}o(_r,"isMasked");function Rr(n){var s=n&&n.constructor,c=typeof s=="function"&&s.prototype||Oe;return n===c}o(Rr,"isPrototype");function xr(n){return wt.call(n)}o(xr,"objectToString");function oe(n){if(n!=null){try{return bt.call(n)}catch{}try{return n+""}catch{}}return""}o(oe,"toSource");function St(n,s){return n===s||n!==n&&s!==s}o(St,"eq");var Tr=At(function(){return arguments}())?At:function(n){return _e(n)&&z.call(n,"callee")&&!Rt.call(n,"callee")},Ie=Array.isArray;function Ar(n){return n!=null&&Mt(n.length)&&!$t(n)}o(Ar,"isArrayLike");var rt=Un||Sr;function Fr(n,s){return Ft(n,s)}o(Fr,"isEqual");function $t(n){if(!Pt(n))return!1;var s=Ce(n);return s==w||s==x||s==g||s==te}o($t,"isFunction");function Mt(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=d}o(Mt,"isLength");function Pt(n){var s=typeof n;return n!=null&&(s=="object"||s=="function")}o(Pt,"isObject");function _e(n){return n!=null&&typeof n=="object"}o(_e,"isObjectLike");var It=mt?Tn(mt):gr;function Er(n){return Ar(n)?lr(n):pr(n)}o(Er,"keys");function Or(){return[]}o(Or,"stubArray");function Sr(){return!1}o(Sr,"stubFalse"),e.exports=Fr});const{debug:b}=le,{headers:De,getPath:ct,getQuery:gs,normalizeUrl:Dt}=Je,xe=o(e=>t=>(b("Actual url:",t),e(t)),"debuggableUrlFunc"),zt={begin:e=>xe(t=>t.indexOf(e)===0),end:e=>xe(t=>t.substr(-e.length)===e),glob:e=>{const t=es(e);return xe(r=>t.test(r))},express:e=>{const t=me(e);return xe(r=>t.test(ct(r)))},path:e=>xe(t=>ct(t)===e)},ps=o(({headers:e})=>{if(b("Generating header matcher"),!e){b("  No header expectations defined - skipping");return}const t=De.toLowerCase(e);return b("  Expected headers:",t),(r,{headers:i={}})=>{b("Attempting to match headers");const a=De.toLowerCase(De.normalize(i));return b("  Expected headers:",t),b("  Actual headers:",a),Object.keys(t).every(u=>De.equal(a[u],t[u]))}},"getHeaderMatcher"),ys=o(({method:e})=>{if(b("Generating method matcher"),!e){b("  No method expectations defined - skipping");return}return b("  Expected method:",e),(t,{method:r})=>{b("Attempting to match method");const i=r?r.toLowerCase():"get";return b("  Expected method:",e),b("  Actual method:",i),e===i}},"getMethodMatcher"),ms=o(({query:e})=>{if(b("Generating query parameters matcher"),!e){b("  No query parameters expectations defined - skipping");return}const t=ce.parse(ce.stringify(e));b("  Expected query parameters:",e);const r=Object.keys(t);return i=>{b("Attempting to match query parameters");const a=ce.parse(gs(i));return b("  Expected query parameters:",t),b("  Actual query parameters:",a),r.every(u=>Array.isArray(a[u])?Array.isArray(t[u])?rn(a[u].sort(),t[u].sort()):!1:a[u]===t[u])}},"getQueryStringMatcher"),bs=o(({params:e,url:t})=>{if(b("Generating path parameters matcher"),!e){b("  No path parameters expectations defined - skipping");return}if(!/express:/.test(t))throw new Error("fetch-mock: matching on params is only possible when using an express: matcher");b("  Expected path parameters:",e);const r=Object.keys(e),i=[],a=me(t.replace(/^express:/,""),i);return u=>{b("Attempting to match path parameters");const d=a.exec(ct(u))||[];d.shift();const y=i.reduce((l,{name:g},h)=>d[h]?Object.assign(l,{[g]:d[h]}):l,{});return b("  Expected path parameters:",e),b("  Actual path parameters:",y),r.every(l=>y[l]===e[l])}},"getParamsMatcher"),vs=o((e,t)=>{const r=t.getOption("matchPartialBody",e),{body:i}=e;return b("Generating body matcher"),(a,{body:u,method:d="get"})=>{if(b("Attempting to match body"),d.toLowerCase()==="get")return b("  GET request - skip matching body"),!0;let y;try{b("  Parsing request body as JSON"),y=JSON.parse(u)}catch(l){b("  Failed to parse request body as JSON",l)}return b("Expected body:",i),b("Actual body:",y),r&&b("matchPartialBody is true - checking for partial match only"),y&&(r?nn(y,i):rn(y,i))}},"getBodyMatcher"),Bt=o((e,t,r)=>{b("  Matching using full url",t);const i=Dt(t);return b("  Normalised url to:",t),e.identifier===t&&(b("  Updating route identifier to match normalized url:",t),e.identifier=i),a=>(b("Expected url:",i),b("Actual url:",a),r&&i.indexOf("?")?(b("Ignoring query string when matching url"),a.indexOf(i)===0):Dt(a)===i)},"getFullUrlMatcher"),ws=o(({functionMatcher:e})=>(b("Detected user defined function matcher",e),(...t)=>(b("Calling function matcher with arguments",t),e(...t))),"getFunctionMatcher"),Cs=o(e=>{b("Generating url matcher");const{url:t,query:r}=e;if(t==="*")return b("  Using universal * rule to match any url"),()=>!0;if(t instanceof RegExp)return b("  Using regular expression to match url:",t),i=>t.test(i);if(t.href)return b("  Using URL object to match url",t),Bt(e,t.href,r);for(const i in zt)if(t.indexOf(i+":")===0){b(`  Using ${i}: pattern to match url`,t);const a=t.replace(new RegExp(`^${i}:`),"");return zt[i](a)}return Bt(e,t,r)},"getUrlMatcher");var _s=[{name:"query",matcher:ms},{name:"method",matcher:ys},{name:"headers",matcher:ps},{name:"params",matcher:bs},{name:"body",matcher:vs,usesBody:!0},{name:"functionMatcher",matcher:ws},{name:"url",matcher:Cs}];const{debug:qt,setDebugNamespace:Gt,getDebug:ze}=le,kt=o(e=>e instanceof RegExp||typeof e=="string"||typeof e=="object"&&"href"in e,"isUrlMatcher"),Rs=o(e=>typeof e=="function","isFunctionMatcher");class Y{constructor(t,r){this.fetchMock=r,ze("compileRoute()")("Compiling route"),this.init(t),this.sanitize(),this.validate(),this.generateMatcher(),this.limit(),this.delayResponse()}validate(){if(!("response"in this))throw new Error("fetch-mock: Each route must define a response");if(!Y.registeredMatchers.some(({name:t})=>t in this))throw new Error("fetch-mock: Each route must specify some criteria for matching calls to fetch. To match all calls use '*'")}init(t){const[r,i,a={}]=t,u={};kt(r)||Rs(r)?u.matcher=r:Object.assign(u,r),typeof i<"u"&&(u.response=i),Object.assign(u,a),Object.assign(this,u)}sanitize(){const t=ze("sanitize()");t("Sanitizing route properties"),this.method&&(t(`Converting method ${this.method} to lower case`),this.method=this.method.toLowerCase()),kt(this.matcher)&&(t("Mock uses a url matcher",this.matcher),this.url=this.matcher,delete this.matcher),this.functionMatcher=this.matcher||this.functionMatcher,t("Setting route.identifier..."),t(`  route.name is ${this.name}`),t(`  route.url is ${this.url}`),t(`  route.functionMatcher is ${this.functionMatcher}`),this.identifier=this.name||this.url||this.functionMatcher,t(`  -> route.identifier set to ${this.identifier}`)}generateMatcher(){Gt("generateMatcher()"),qt("Compiling matcher for route");const t=Y.registeredMatchers.map(({name:r,matcher:i,usesBody:a})=>this[r]&&{matcher:i(this,this.fetchMock),usesBody:a}).filter(r=>!!r);this.usesBody=t.some(({usesBody:r})=>r),qt("Compiled matcher for route"),Gt(),this.matcher=(r,i={},a)=>t.every(({matcher:u})=>u(r,i,a))}limit(){const t=ze("limit()");if(t("Limiting number of requests to handle by route"),!this.repeat){t("  No `repeat` value set on route. Will match any number of requests");return}t(`  Route set to repeat ${this.repeat} times`);const r=this.matcher;let i=this.repeat;this.matcher=(a,u)=>{if(i&&r(a,u))return i--,!0},this.reset=()=>i=this.repeat}delayResponse(){const t=ze("delayResponse()");if(t("Applying response delay settings"),this.delay){t(`  Wrapping response in delay of ${this.delay} miliseconds`);const r=this.response;this.response=()=>(t(`Delaying response by ${this.delay} miliseconds`),new Promise(i=>setTimeout(()=>i(r),this.delay)))}else t("  No delay set on route. Will respond 'immediately' (but asynchronously)")}static addMatcher(t){Y.registeredMatchers.push(t)}}o(Y,"Route");Y.registeredMatchers=[];_s.forEach(Y.addMatcher);var lt=Y;const{setDebugPhase:ke,setDebugNamespace:He,debug:C}=le,{normalizeUrl:sn}=Je,B={},xs=o(e=>typeof e=="string"&&/^[\da-zA-Z\-]+$/.test(e),"isName"),Ts=o(function(e,t={},r){return{matcher:e}=new lt([Object.assign({matcher:e,response:"ok"},t)],this),r.filter(({url:i,options:a})=>e(sn(i),a))},"filterCallsWithMatcher"),V=o(e=>function(...t){ke("inspect");const r=e.call(this,...t);return ke(),r},"formatDebug"),As=o(e=>{if(!e)return;const{url:t,options:r,request:i,identifier:a,isUnmatched:u,response:d}=e,y=[t,r];return y.request=i,y.identifier=a,y.isUnmatched=u,y.response=d,y},"callObjToArray");B.filterCalls=function(e,t){C("Filtering fetch calls");let r=this._calls,i="*";return[!0,"matched"].includes(e)?(C(`Filter provided is ${e}. Returning matched calls only`),r=r.filter(({isUnmatched:a})=>!a)):[!1,"unmatched"].includes(e)?(C(`Filter provided is ${e}. Returning unmatched calls only`),r=r.filter(({isUnmatched:a})=>a)):typeof e>"u"?(C("Filter provided is undefined. Returning all calls"),r=r):xs(e)?(C("Filter provided, looks like the name of a named route. Returning only calls handled by that route"),r=r.filter(({identifier:a})=>a===e)):(i=e==="*"?"*":sn(e),this.routes.some(({identifier:a})=>a===i)&&(C(`Filter provided, ${e}, identifies a route. Returning only calls handled by that route`),r=r.filter(a=>a.identifier===i))),(t||i!=="*")&&r.length&&(typeof t=="string"&&(t={method:t}),C("Compiling filter and options to route in order to filter all calls",e),r=Ts.call(this,i,t,r)),C(`Retrieved ${r.length} calls`),r.map(As)};B.calls=V(function(e,t){return C("retrieving matching calls"),this.filterCalls(e,t)});B.lastCall=V(function(e,t){return C("retrieving last matching call"),[...this.filterCalls(e,t)].pop()});B.lastUrl=V(function(e,t){return C("retrieving url of last matching call"),(this.lastCall(e,t)||[])[0]});B.lastOptions=V(function(e,t){return C("retrieving options of last matching call"),(this.lastCall(e,t)||[])[1]});B.lastResponse=V(function(e,t){C("retrieving respose of last matching call"),console.warn(`When doing all the following:
- using node-fetch
- responding with a real network response (using spy() or fallbackToNetwork)
- using \`fetchMock.LastResponse()\`
- awaiting the body content
... the response will hang unless your source code also awaits the response body.
This is an unavoidable consequence of the nodejs implementation of streams.
`);const r=(this.lastCall(e,t)||[]).response;try{return r.clone()}catch{return Object.entries(r._fmResults).forEach(([a,u])=>{r[a]=()=>u}),r}});B.called=V(function(e,t){return C("checking if matching call was made"),!!this.filterCalls(e,t).length});B.flush=V(async function(e){He("flush"),C(`flushing all fetch calls. ${e?"":"Not "}waiting for response bodies to complete download`);const t=this._holdingPromises;this._holdingPromises=[],C(`${t.length} fetch calls to be awaited`),await Promise.all(t),C("All fetch calls have completed"),e&&this._holdingPromises.length&&(C("Awaiting all fetch bodies to download"),await this.flush(e),C("All fetch bodies have completed downloading")),He()});B.done=V(function(e){ke("inspect"),He("done"),C("Checking to see if expected calls have been made");let t;e&&typeof e!="boolean"?(C("Checking to see if expected calls have been made for single route:",e),t=[{identifier:e}]):(C("Checking to see if expected calls have been made for all routes"),t=this.routes);const r=t.map(({identifier:i})=>{if(!this.called(i))return C("No calls made for route:",i),console.warn(`Warning: ${i} not called`),!1;const a=(this.routes.find(d=>d.identifier===i)||{}).repeat;if(!a)return C("Route has been called at least once, and no expectation of more set:",i),!0;const u=this.filterCalls(i).length;return C(`Route called ${u} times:`,i),a>u?(C(`Route called ${u} times, but expected ${a}:`,i),console.warn(`Warning: ${i} only called ${u} times, but ${a} expected`),!1):!0}).every(i=>i);return He(),ke(),r});var Fs=B;const{debug:on}=le,$=Object.assign({},Vr,Wr,Fs);$.addMatcher=function(e){lt.addMatcher(e)};$.config={fallbackToNetwork:!1,includeContentLength:!0,sendAsJson:!0,warnOnFallback:!0,overwriteRoutes:void 0};$.createInstance=function(){on("Creating fetch-mock instance");const e=Object.create($);return e._uncompiledRoutes=(this._uncompiledRoutes||[]).slice(),e.routes=e._uncompiledRoutes.map(t=>this.compileRoute(t)),e.fallbackResponse=this.fallbackResponse||void 0,e.config=Object.assign({},this.config||$.config),e._calls=[],e._holdingPromises=[],e.bindMethods(),e};$.compileRoute=function(e){return new lt(e,this)};$.bindMethods=function(){this.fetchHandler=$.fetchHandler.bind(this),this.reset=this.restore=$.reset.bind(this),this.resetHistory=$.resetHistory.bind(this),this.resetBehavior=$.resetBehavior.bind(this)};$.sandbox=function(){on("Creating sandboxed fetch-mock instance");const t=Object.assign(o((r,i)=>t.fetchHandler(r,i),"fetchMockProxy"),$,this.createInstance(),{Headers:this.config.Headers,Request:this.config.Request,Response:this.config.Response});return t.bindMethods(),t.isSandbox=!0,t.default=t,t};$.getOption=function(e,t={}){return e in t?t[e]:this.config[e]};var Ae=$;const Es={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};var Os=Es;const de=typeof window<"u"?window:self,{setUrlImplementation:Ss}=Je;Ss(de.URL);Ae.global=de;Ae.statusTextMap=Os;Ae.config=Object.assign(Ae.config,{Promise:de.Promise,Request:de.Request,Response:de.Response,Headers:de.Headers});var Ps=Ae.createInstance();function Is(e){let t=0;for(;e>=1024;)e/=1024,++t;const r=Mr.global.t(`units[${t}]`);return`${e.toFixed(2)} ${r}`}o(Is,"humanizedSize");async function Us(e,t){const r=await fetch(e,{headers:{"Content-Type":"application/json"},...t});if(r.status>=200&&r.status<300)return r.json();throw new Error(r.statusText)}o(Us,"doRequest");const js=o((e,t)=>{const r=e.__vccOpts||e;for(const[i,a]of t)r[i]=a;return r},"_export_sfc");export{js as _,Ps as c,Us as d,Is as h};
//# sourceMappingURL=plugin-vueexport-helper-dbf55845.js.map
