(function(w,a){typeof exports=="object"&&typeof module<"u"?a(require("@vue/runtime-dom"),require("vue-i18n"),require("vue")):typeof define=="function"&&define.amd?define(["@vue/runtime-dom","vue-i18n","vue"],a):(w=typeof globalThis<"u"?globalThis:w||self,a(w.Vue,w.VueI18n,w.Vue))})(this,function(runtimeDom,vueI18n,vue){"use strict";var sn=Object.defineProperty;var rn=(w,a,Y)=>a in w?sn(w,a,{enumerable:!0,configurable:!0,writable:!0,value:Y}):w[a]=Y;var Ve=(w,a,Y)=>(rn(w,typeof a!="symbol"?a+"":a,Y),Y),wt=(w,a,Y)=>{if(!a.has(w))throw TypeError("Cannot "+Y)};var u=(w,a,Y)=>(wt(w,a,"read from private field"),Y?Y.call(w):a.get(w)),Q=(w,a,Y)=>{if(a.has(w))throw TypeError("Cannot add the same private member more than once");a instanceof WeakSet?a.add(w):a.set(w,Y)},be=(w,a,Y,S)=>(wt(w,a,"write to private field"),S?S.call(w,Y):a.set(w,Y),Y),ct=(w,a,Y,S)=>({set _(I){be(w,a,I,Y)},get _(){return u(w,a,S)}}),ee=(w,a,Y)=>(wt(w,a,"access private method"),Y);const resource$1={uploader:{specific_nb_drag_n_drop_label:w=>{const{normalize:a,interpolate:Y,named:S,plural:I}=w;return I([a(["Glissez-déposez ici un fichier"]),a(["Glissez-déposez ici ",Y(S("count"))," fichiers"])])},min_max_drag_n_drop_label:w=>{const{normalize:a,interpolate:Y,named:S}=w;return a(["Glissez-déposez ici entre ",Y(S("min"))," et ",Y(S("max"))," fichiers"])},min_drag_n_drop_label:w=>{const{normalize:a,interpolate:Y,named:S,plural:I}=w;return I([a(["Glissez-déposez ici au-moins un fichier"]),a(["Glissez-déposez ici au-moins ",Y(S("count"))," fichiers"])])},max_drag_n_drop_label:w=>{const{normalize:a,interpolate:Y,named:S,plural:I}=w;return I([a(["Glissez-déposez ici votre fichier"]),a(["Glissez-déposez ici vos fichiers (maximum ",Y(S("count")),")"])])},drag_n_drop_label:w=>{const{normalize:a}=w;return a(["Glissez-déposez ici vos fichiers"])},add_file_label:w=>{const{normalize:a}=w;return a(["ou cliquez-ici"])},max_size_label:w=>{const{normalize:a,interpolate:Y,named:S}=w;return a(["(taille maximum ",Y(S("size")),")"])},trigger_upload:w=>{const{normalize:a}=w;return a(["Transférer"])}},upload_entry:{completion:w=>{const{normalize:a,interpolate:Y,named:S}=w;return a([Y(S("progress")),"% transférés"])},too_large:w=>{const{normalize:a}=w;return a(["Le fichier est trop lourd"])},wrong_type:w=>{const{normalize:a,interpolate:Y,named:S,plural:I}=w;return I([a(['Le fichier doit être du type "',Y(S("types")),'"']),a([`Le fichier doit être d'un des types suivants : "`,Y(S("types")),'"'])])},crop_header:w=>{const{normalize:a}=w;return a(["Veuillez choisir la partie à garder."])},crop:w=>{const{normalize:a}=w;return a(["Recadrer"])},cancel:w=>{const{normalize:a}=w;return a(["Annuler"])}},view_entry:{rotate_left:w=>{const{normalize:a}=w;return a(["Faire pivoter l'image à gauche"])},rotate_right:w=>{const{normalize:a}=w;return a(["Faire pivoter l'image à droite"])},loading:w=>{const{normalize:a}=w;return a(["Chargement..."])},close:w=>{const{normalize:a}=w;return a(["Fermer"])},save:w=>{const{normalize:a}=w;return a(["Enregistrer"])},file_infected:w=>{const{normalize:a}=w;return a(["Le fichier référencé semble infecté par un virus"])}},editor:{pagination:w=>{const{normalize:a,interpolate:Y,named:S}=w;return a([Y(S("currentPage"))," de ",Y(S("pages"))])},zoom:{auto:w=>{const{normalize:a}=w;return a(["Zoom automatique"])},"page-width":w=>{const{normalize:a}=w;return a(["Pleine largeur"])},"page-fit":w=>{const{normalize:a}=w;return a(["Page entière"])},"page-actual":w=>{const{normalize:a}=w;return a(["Taille réelle"])}},colors:{warning:w=>{const{normalize:a}=w;return a(["Jaune"])},danger:w=>{const{normalize:a}=w;return a(["Rouge"])},info:w=>{const{normalize:a}=w;return a(["Bleu"])},success:w=>{const{normalize:a}=w;return a(["Vert"])},muted:w=>{const{normalize:a}=w;return a(["Blanc"])}}},error:w=>{const{normalize:a,interpolate:Y,named:S}=w;return a(["Erreur : ",Y(S("error"))])},request_error:w=>{const{normalize:a,interpolate:Y,named:S}=w;return a(["Erreur lors de la requête : ",Y(S("error"))])},units:[w=>{const{normalize:a}=w;return a(["o"])},w=>{const{normalize:a}=w;return a(["Ko"])},w=>{const{normalize:a}=w;return a(["Mo"])},w=>{const{normalize:a}=w;return a(["Go"])},w=>{const{normalize:a}=w;return a(["To"])}]},resource={uploader:{specific_nb_drag_n_drop_label:w=>{const{normalize:a,interpolate:Y,named:S,plural:I}=w;return I([a(["Drag and drop one file here"]),a(["Drag and drop ",Y(S("count"))," files here"])])},min_max_drag_n_drop_label:w=>{const{normalize:a,interpolate:Y,named:S}=w;return a(["Drag and drop between ",Y(S("min"))," and ",Y(S("max"))," files here"])},min_drag_n_drop_label:w=>{const{normalize:a,interpolate:Y,named:S,plural:I}=w;return I([a(["Drag and drop at least one file here"]),a(["Drag and drop at least ",Y(S("count"))," files here"])])},max_drag_n_drop_label:w=>{const{normalize:a,interpolate:Y,named:S,plural:I}=w;return I([a(["Drag and drop your file here"]),a(["Drag and drop your files here (maximum ",Y(S("count")),")"])])},drag_n_drop_label:w=>{const{normalize:a}=w;return a(["Drag and drop your files here"])},add_file_label:w=>{const{normalize:a}=w;return a(["or click here"])},max_size_label:w=>{const{normalize:a,interpolate:Y,named:S}=w;return a(["(max size ",Y(S("size")),")"])},trigger_upload:w=>{const{normalize:a}=w;return a(["Upload"])}},upload_entry:{completion:w=>{const{normalize:a,interpolate:Y,named:S}=w;return a([Y(S("progress")),"% uploaded"])},too_large:w=>{const{normalize:a}=w;return a(["File is too large"])},wrong_type:w=>{const{normalize:a,interpolate:Y,named:S,plural:I}=w;return I([a(['The file must have the following type: "',Y(S("types")),'"']),a(['The file must have one of the following types: "',Y(S("types")),'"'])])},crop_header:w=>{const{normalize:a}=w;return a(["Please choose the part you want to keep."])},crop:w=>{const{normalize:a}=w;return a(["Crop"])},cancel:w=>{const{normalize:a}=w;return a(["Cancel"])}},view_entry:{rotate_left:w=>{const{normalize:a}=w;return a(["Rotate image left"])},rotate_right:w=>{const{normalize:a}=w;return a(["Rotate image right"])},loading:w=>{const{normalize:a}=w;return a(["Loading..."])},close:w=>{const{normalize:a}=w;return a(["Close"])},save:w=>{const{normalize:a}=w;return a(["Save"])},file_infected:w=>{const{normalize:a}=w;return a(["The referenced file appears to be infected with a virus"])}},editor:{pagination:w=>{const{normalize:a,interpolate:Y,named:S}=w;return a([Y(S("currentPage"))," of ",Y(S("pages"))])},zoom:{auto:w=>{const{normalize:a}=w;return a(["Automatic Zoom"])},"page-width":w=>{const{normalize:a}=w;return a(["Page Width"])},"page-fit":w=>{const{normalize:a}=w;return a(["Page Fit"])},"page-actual":w=>{const{normalize:a}=w;return a(["Actual Size"])}},colors:{warning:w=>{const{normalize:a}=w;return a(["Yellow"])},danger:w=>{const{normalize:a}=w;return a(["Red"])},info:w=>{const{normalize:a}=w;return a(["Blue"])},success:w=>{const{normalize:a}=w;return a(["Green"])},muted:w=>{const{normalize:a}=w;return a(["White"])}}},error:w=>{const{normalize:a,interpolate:Y,named:S}=w;return a(["Error: ",Y(S("error"))])},request_error:w=>{const{normalize:a,interpolate:Y,named:S}=w;return a(["Request error: ",Y(S("error"))])},units:[w=>{const{normalize:a}=w;return a(["B"])},w=>{const{normalize:a}=w;return a(["KB"])},w=>{const{normalize:a}=w;return a(["MB"])},w=>{const{normalize:a}=w;return a(["GB"])},w=>{const{normalize:a}=w;return a(["TB"])}]},i18n=vueI18n.createI18n({locale:document.documentElement.lang||"en",allowComposition:!0,messages:{en:resource,fr:resource$1}}),_hoisted_1$4={class:"btn-group dropup annotation-dropdown"},_hoisted_2$4=vue.createElementVNode("button",{type:"button",class:"btn btn-default dropdown-toggle","data-toggle":"dropdown"},[vue.createElementVNode("span",{class:"caret"})],-1),_hoisted_3$4={class:"dropdown-menu"},_hoisted_4$4=["onClick"],_sfc_main$4=vue.defineComponent({__name:"ToolbarAnnotation",props:{isActivated:{type:Boolean},color:null,classPrefix:null,icon:null,colors:null},emits:["onChange"],setup(w){return(a,Y)=>(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$4,[vue.createElementVNode("button",{class:vue.normalizeClass(["btn",w.isActivated?"btn-primary":"btn-default"]),type:"button",onClick:Y[0]||(Y[0]=S=>a.$emit("onChange",w.isActivated?"":w.color||Object.values(w.colors)[0]))},[vue.createElementVNode("span",{class:vue.normalizeClass(["fas",w.icon])},null,2)],2),_hoisted_2$4,vue.createElementVNode("ul",_hoisted_3$4,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(w.colors,(S,I)=>(vue.openBlock(),vue.createElementBlock("li",{key:I,class:vue.normalizeClass(`${w.classPrefix}-${I}`)},[vue.createElementVNode("a",{href:"#",class:vue.normalizeClass(`${w.classPrefix}-${I}`),onClick:vue.withModifiers(ue=>a.$emit("onChange",S),["prevent"])},vue.toDisplayString(a.$t(`editor.colors.${I}`)),11,_hoisted_4$4)],2))),128))])]))}}),ToolbarAnnotation_vue_vue_type_style_index_0_lang="",_hoisted_1$3={class:"btn-group"},_hoisted_2$3=vue.createElementVNode("span",{class:"fas fa-magnifying-glass-plus"},null,-1),_hoisted_3$3=[_hoisted_2$3],_hoisted_4$3={class:"btn-group dropup",role:"group"},_hoisted_5$3={type:"button",class:"btn btn-default dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},_hoisted_6$2=vue.createElementVNode("span",{class:"caret"},null,-1),_hoisted_7$1={class:"dropdown-menu"},_hoisted_8=["value"],_hoisted_9=["onClick"],_hoisted_10=vue.createElementVNode("span",{class:"fas fa-magnifying-glass-minus"},null,-1),_hoisted_11=[_hoisted_10],_sfc_main$3=vue.defineComponent({__name:"ToolbarZoom",props:{currentZoom:null},emits:["onZoomIn","onZoomOut","onSetScale"],setup(w){const{t:a}=vueI18n.useI18n(),Y=["auto","page-actual","page-fit","page-width","0.5","0.75","1","1.25","1.5","2","3","4"];function S(I){return isNaN(parseFloat(I))?a(`editor.zoom.${I}`):`${Math.ceil(parseFloat(I)*100)}%`}return(I,ue)=>(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$3,[vue.createElementVNode("button",{class:"btn btn-default",type:"button",onClick:ue[0]||(ue[0]=q=>I.$emit("onZoomIn"))},_hoisted_3$3),vue.createElementVNode("div",_hoisted_4$3,[vue.createElementVNode("button",_hoisted_5$3,[vue.createTextVNode(vue.toDisplayString(S(w.currentZoom))+" ",1),_hoisted_6$2]),vue.createElementVNode("ul",_hoisted_7$1,[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList(Y,q=>vue.createElementVNode("li",{key:q,value:q,class:vue.normalizeClass(w.currentZoom==q?"active":"")},[vue.createElementVNode("a",{href:"#",onClick:vue.withModifiers(L=>I.$emit("onSetScale",q),["prevent"])},vue.toDisplayString(S(q)),9,_hoisted_9)],10,_hoisted_8)),64))])]),vue.createElementVNode("button",{class:"btn btn-default",type:"button",onClick:ue[1]||(ue[1]=q=>I.$emit("onZoomOut"))},_hoisted_11)]))}}),_hoisted_1$2={class:"btn-group"},_hoisted_2$2=vue.createElementVNode("span",{class:"fas fa-rotate-left"},null,-1),_hoisted_3$2=[_hoisted_2$2],_hoisted_4$2=vue.createElementVNode("span",{class:"fas fa-rotate-right"},null,-1),_hoisted_5$2=[_hoisted_4$2],_sfc_main$2=vue.defineComponent({__name:"ToolbarRotation",props:{currentRotation:null},emits:["onRotate"],setup(w){return(a,Y)=>(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$2,[vue.createElementVNode("button",{type:"button",class:"btn btn-default",onClick:Y[0]||(Y[0]=S=>a.$emit("onRotate",(w.currentRotation-90)%360))},_hoisted_3$2),vue.createElementVNode("button",{type:"button",class:"btn btn-default",onClick:Y[1]||(Y[1]=S=>a.$emit("onRotate",(w.currentRotation+90)%360))},_hoisted_5$2)]))}}),_hoisted_1$1={class:"btn-group"},_hoisted_2$1=vue.createElementVNode("span",{class:"fas fa-angle-up"},null,-1),_hoisted_3$1=[_hoisted_2$1],_hoisted_4$1={class:"btn btn-default disabled",role:"button"},_hoisted_5$1=vue.createElementVNode("span",{class:"fas fa-angle-down"},null,-1),_hoisted_6$1=[_hoisted_5$1],_sfc_main$1=vue.defineComponent({__name:"ToolbarPagination",props:{currentPage:null,pages:null},emits:["onChangeCurrentPage"],setup(w){return(a,Y)=>(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$1,[vue.createElementVNode("button",{class:vue.normalizeClass(["btn btn-default",{disabled:w.currentPage==1}]),type:"button",onClick:Y[0]||(Y[0]=S=>w.currentPage!=1&&a.$emit("onChangeCurrentPage",w.currentPage-1))},_hoisted_3$1,2),vue.createElementVNode("a",_hoisted_4$1,vue.toDisplayString(a.$t("editor.pagination",{currentPage:w.currentPage,pages:w.pages})),1),vue.createElementVNode("button",{class:vue.normalizeClass(["btn btn-default",{disabled:w.currentPage==w.pages}]),type:"button",onClick:Y[1]||(Y[1]=S=>w.currentPage!=w.pages&&a.$emit("onChangeCurrentPage",w.currentPage+1))},_hoisted_6$1,2)]))}});async function doRequest(w,a){const Y=await fetch(w,{headers:{"Content-Type":"application/json"},...a});if(Y.status>=200&&Y.status<300)return Y.json();throw new Error(Y.statusText)}function getAugmentedNamespace(w){if(w.__esModule)return w;var a=w.default;if(typeof a=="function"){var Y=function S(){if(this instanceof S){var I=[null];I.push.apply(I,arguments);var ue=Function.bind.apply(a,I);return new ue}return a.apply(this,arguments)};Y.prototype=a.prototype}else Y={};return Object.defineProperty(Y,"__esModule",{value:!0}),Object.keys(w).forEach(function(S){var I=Object.getOwnPropertyDescriptor(w,S);Object.defineProperty(Y,S,I.get?I:{enumerable:!0,get:function(){return w[S]}})}),Y}function commonjsRequire(w){throw new Error('Could not dynamically require "'+w+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdfExports$1={},pdf={get exports(){return pdfExports$1},set exports(w){pdfExports$1=w}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,function(module,exports){(function(a,Y){module.exports=Y()})(globalThis,()=>(()=>{var __webpack_modules__=[,(w,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.VerbosityLevel=a.Util=a.UnknownErrorException=a.UnexpectedResponseException=a.TextRenderingMode=a.RenderingIntentFlag=a.PermissionFlag=a.PasswordResponses=a.PasswordException=a.PageActionEventType=a.OPS=a.MissingPDFException=a.MAX_IMAGE_SIZE_TO_CACHE=a.LINE_FACTOR=a.LINE_DESCENT_FACTOR=a.InvalidPDFException=a.ImageKind=a.IDENTITY_MATRIX=a.FormatError=a.FeatureTest=a.FONT_IDENTITY_MATRIX=a.DocumentActionEventType=a.CMapCompressionType=a.BaseException=a.BASELINE_FACTOR=a.AnnotationType=a.AnnotationStateModelType=a.AnnotationReviewState=a.AnnotationReplyType=a.AnnotationMode=a.AnnotationMarkedState=a.AnnotationFlag=a.AnnotationFieldFlag=a.AnnotationEditorType=a.AnnotationEditorPrefix=a.AnnotationEditorParamsType=a.AnnotationBorderStyleType=a.AnnotationActionEventType=a.AbortException=void 0,a.assert=oe,a.bytesToString=B,a.createPromiseCapability=re,a.createValidAbsoluteUrl=A,a.getModificationDate=T,a.getVerbosityLevel=de,a.info=Z,a.isArrayBuffer=Ee,a.isArrayEqual=Me,a.objectFromMap=k,a.objectSize=y,a.setVerbosityLevel=ae,a.shadow=v,a.string32=_,a.stringToBytes=o,a.stringToPDFString=ce,a.stringToUTF8String=me,a.unreachable=Se,a.utf8StringToString=Ae,a.warn=ge;const Y=[1,0,0,1,0,0];a.IDENTITY_MATRIX=Y;const S=[.001,0,0,.001,0,0];a.FONT_IDENTITY_MATRIX=S;const I=1e7;a.MAX_IMAGE_SIZE_TO_CACHE=I;const ue=1.35;a.LINE_FACTOR=ue;const q=.35;a.LINE_DESCENT_FACTOR=q;const L=q/ue;a.BASELINE_FACTOR=L;const F={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};a.RenderingIntentFlag=F;const f={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};a.AnnotationMode=f;const c="pdfjs_internal_editor_";a.AnnotationEditorPrefix=c;const x={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};a.AnnotationEditorType=x;const P={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};a.AnnotationEditorParamsType=P;const g={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};a.PermissionFlag=g;const i={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};a.TextRenderingMode=i;const d={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};a.ImageKind=d;const n={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};a.AnnotationType=n;const l={MARKED:"Marked",REVIEW:"Review"};a.AnnotationStateModelType=l;const E={MARKED:"Marked",UNMARKED:"Unmarked"};a.AnnotationMarkedState=E;const b={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};a.AnnotationReviewState=b;const p={GROUP:"Group",REPLY:"R"};a.AnnotationReplyType=p;const e={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};a.AnnotationFlag=e;const t={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};a.AnnotationFieldFlag=t;const r={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};a.AnnotationBorderStyleType=r;const s={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};a.AnnotationActionEventType=s;const m={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};a.DocumentActionEventType=m;const C={O:"PageOpen",C:"PageClose"};a.PageActionEventType=C;const h={ERRORS:0,WARNINGS:1,INFOS:5};a.VerbosityLevel=h;const D={NONE:0,BINARY:1};a.CMapCompressionType=D;const te={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};a.OPS=te;const le={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};a.PasswordResponses=le;let X=h.WARNINGS;function ae(M){Number.isInteger(M)&&(X=M)}function de(){return X}function Z(M){X>=h.INFOS&&console.log(`Info: ${M}`)}function ge(M){X>=h.WARNINGS&&console.log(`Warning: ${M}`)}function Se(M){throw new Error(M)}function oe(M,O){M||Se(O)}function H(M){if(!M)return!1;switch(M.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function A(M,O=null,z=null){if(!M)return null;try{if(z&&typeof M=="string"){if(z.addDefaultProtocol&&M.startsWith("www.")){const we=M.match(/\./g);we&&we.length>=2&&(M=`http://${M}`)}if(z.tryConvertEncoding)try{M=me(M)}catch{}}const _e=O?new URL(M,O):new URL(M);if(H(_e))return _e}catch{}return null}function v(M,O,z,_e=!1){return Object.defineProperty(M,O,{value:z,enumerable:!_e,configurable:!0,writable:!1}),z}const R=function(){function O(z,_e){this.constructor===O&&Se("Cannot initialize BaseException."),this.message=z,this.name=_e}return O.prototype=new Error,O.constructor=O,O}();a.BaseException=R;class $ extends R{constructor(O,z){super(O,"PasswordException"),this.code=z}}a.PasswordException=$;class j extends R{constructor(O,z){super(O,"UnknownErrorException"),this.details=z}}a.UnknownErrorException=j;class se extends R{constructor(O){super(O,"InvalidPDFException")}}a.InvalidPDFException=se;class N extends R{constructor(O){super(O,"MissingPDFException")}}a.MissingPDFException=N;class K extends R{constructor(O,z){super(O,"UnexpectedResponseException"),this.status=z}}a.UnexpectedResponseException=K;class ne extends R{constructor(O){super(O,"FormatError")}}a.FormatError=ne;class U extends R{constructor(O){super(O,"AbortException")}}a.AbortException=U;function B(M){(typeof M!="object"||M===null||M.length===void 0)&&Se("Invalid argument for bytesToString");const O=M.length,z=8192;if(O<z)return String.fromCharCode.apply(null,M);const _e=[];for(let we=0;we<O;we+=z){const ie=Math.min(we+z,O),ve=M.subarray(we,ie);_e.push(String.fromCharCode.apply(null,ve))}return _e.join("")}function o(M){typeof M!="string"&&Se("Invalid argument for stringToBytes");const O=M.length,z=new Uint8Array(O);for(let _e=0;_e<O;++_e)z[_e]=M.charCodeAt(_e)&255;return z}function _(M){return String.fromCharCode(M>>24&255,M>>16&255,M>>8&255,M&255)}function y(M){return Object.keys(M).length}function k(M){const O=Object.create(null);for(const[z,_e]of M)O[z]=_e;return O}function V(){const M=new Uint8Array(4);return M[0]=1,new Uint32Array(M.buffer,0,1)[0]===1}function W(){try{return new Function(""),!0}catch{return!1}}class he{static get isLittleEndian(){return v(this,"isLittleEndian",V())}static get isEvalSupported(){return v(this,"isEvalSupported",W())}static get isOffscreenCanvasSupported(){return v(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?v(this,"platform",{isWin:!1,isMac:!1}):v(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}a.FeatureTest=he;const G=[...Array(256).keys()].map(M=>M.toString(16).padStart(2,"0"));class J{static makeHexColor(O,z,_e){return`#${G[O]}${G[z]}${G[_e]}`}static scaleMinMax(O,z){let _e;O[0]?(O[0]<0&&(_e=z[0],z[0]=z[1],z[1]=_e),z[0]*=O[0],z[1]*=O[0],O[3]<0&&(_e=z[2],z[2]=z[3],z[3]=_e),z[2]*=O[3],z[3]*=O[3]):(_e=z[0],z[0]=z[2],z[2]=_e,_e=z[1],z[1]=z[3],z[3]=_e,O[1]<0&&(_e=z[2],z[2]=z[3],z[3]=_e),z[2]*=O[1],z[3]*=O[1],O[2]<0&&(_e=z[0],z[0]=z[1],z[1]=_e),z[0]*=O[2],z[1]*=O[2]),z[0]+=O[4],z[1]+=O[4],z[2]+=O[5],z[3]+=O[5]}static transform(O,z){return[O[0]*z[0]+O[2]*z[1],O[1]*z[0]+O[3]*z[1],O[0]*z[2]+O[2]*z[3],O[1]*z[2]+O[3]*z[3],O[0]*z[4]+O[2]*z[5]+O[4],O[1]*z[4]+O[3]*z[5]+O[5]]}static applyTransform(O,z){const _e=O[0]*z[0]+O[1]*z[2]+z[4],we=O[0]*z[1]+O[1]*z[3]+z[5];return[_e,we]}static applyInverseTransform(O,z){const _e=z[0]*z[3]-z[1]*z[2],we=(O[0]*z[3]-O[1]*z[2]+z[2]*z[5]-z[4]*z[3])/_e,ie=(-O[0]*z[1]+O[1]*z[0]+z[4]*z[1]-z[5]*z[0])/_e;return[we,ie]}static getAxialAlignedBoundingBox(O,z){const _e=J.applyTransform(O,z),we=J.applyTransform(O.slice(2,4),z),ie=J.applyTransform([O[0],O[3]],z),ve=J.applyTransform([O[2],O[1]],z);return[Math.min(_e[0],we[0],ie[0],ve[0]),Math.min(_e[1],we[1],ie[1],ve[1]),Math.max(_e[0],we[0],ie[0],ve[0]),Math.max(_e[1],we[1],ie[1],ve[1])]}static inverseTransform(O){const z=O[0]*O[3]-O[1]*O[2];return[O[3]/z,-O[1]/z,-O[2]/z,O[0]/z,(O[2]*O[5]-O[4]*O[3])/z,(O[4]*O[1]-O[5]*O[0])/z]}static singularValueDecompose2dScale(O){const z=[O[0],O[2],O[1],O[3]],_e=O[0]*z[0]+O[1]*z[2],we=O[0]*z[1]+O[1]*z[3],ie=O[2]*z[0]+O[3]*z[2],ve=O[2]*z[1]+O[3]*z[3],xe=(_e+ve)/2,pe=Math.sqrt((_e+ve)**2-4*(_e*ve-ie*we))/2,ye=xe+pe||1,Pe=xe-pe||1;return[Math.sqrt(ye),Math.sqrt(Pe)]}static normalizeRect(O){const z=O.slice(0);return O[0]>O[2]&&(z[0]=O[2],z[2]=O[0]),O[1]>O[3]&&(z[1]=O[3],z[3]=O[1]),z}static intersect(O,z){const _e=Math.max(Math.min(O[0],O[2]),Math.min(z[0],z[2])),we=Math.min(Math.max(O[0],O[2]),Math.max(z[0],z[2]));if(_e>we)return null;const ie=Math.max(Math.min(O[1],O[3]),Math.min(z[1],z[3])),ve=Math.min(Math.max(O[1],O[3]),Math.max(z[1],z[3]));return ie>ve?null:[_e,ie,we,ve]}static bezierBoundingBox(O,z,_e,we,ie,ve,xe,pe){const ye=[],Pe=[[],[]];let Te,Ce,ke,Re,Fe,Le,Ie,De;for(let Ue=0;Ue<2;++Ue){if(Ue===0?(Ce=6*O-12*_e+6*ie,Te=-3*O+9*_e-9*ie+3*xe,ke=3*_e-3*O):(Ce=6*z-12*we+6*ve,Te=-3*z+9*we-9*ve+3*pe,ke=3*we-3*z),Math.abs(Te)<1e-12){if(Math.abs(Ce)<1e-12)continue;Re=-ke/Ce,0<Re&&Re<1&&ye.push(Re);continue}Ie=Ce*Ce-4*ke*Te,De=Math.sqrt(Ie),!(Ie<0)&&(Fe=(-Ce+De)/(2*Te),0<Fe&&Fe<1&&ye.push(Fe),Le=(-Ce-De)/(2*Te),0<Le&&Le<1&&ye.push(Le))}let Be=ye.length,Oe;const Ne=Be;for(;Be--;)Re=ye[Be],Oe=1-Re,Pe[0][Be]=Oe*Oe*Oe*O+3*Oe*Oe*Re*_e+3*Oe*Re*Re*ie+Re*Re*Re*xe,Pe[1][Be]=Oe*Oe*Oe*z+3*Oe*Oe*Re*we+3*Oe*Re*Re*ve+Re*Re*Re*pe;return Pe[0][Ne]=O,Pe[1][Ne]=z,Pe[0][Ne+1]=xe,Pe[1][Ne+1]=pe,Pe[0].length=Pe[1].length=Ne+2,[Math.min(...Pe[0]),Math.min(...Pe[1]),Math.max(...Pe[0]),Math.max(...Pe[1])]}}a.Util=J;const fe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ce(M){if(M[0]>="ï"){let z;if(M[0]==="þ"&&M[1]==="ÿ"?z="utf-16be":M[0]==="ÿ"&&M[1]==="þ"?z="utf-16le":M[0]==="ï"&&M[1]==="»"&&M[2]==="¿"&&(z="utf-8"),z)try{const _e=new TextDecoder(z,{fatal:!0}),we=o(M);return _e.decode(we)}catch(_e){ge(`stringToPDFString: "${_e}".`)}}const O=[];for(let z=0,_e=M.length;z<_e;z++){const we=fe[M.charCodeAt(z)];O.push(we?String.fromCharCode(we):M.charAt(z))}return O.join("")}function me(M){return decodeURIComponent(escape(M))}function Ae(M){return unescape(encodeURIComponent(M))}function Ee(M){return typeof M=="object"&&M!==null&&M.byteLength!==void 0}function Me(M,O){if(M.length!==O.length)return!1;for(let z=0,_e=M.length;z<_e;z++)if(M[z]!==O[z])return!1;return!0}function T(M=new Date){return[M.getUTCFullYear().toString(),(M.getUTCMonth()+1).toString().padStart(2,"0"),M.getUTCDate().toString().padStart(2,"0"),M.getUTCHours().toString().padStart(2,"0"),M.getUTCMinutes().toString().padStart(2,"0"),M.getUTCSeconds().toString().padStart(2,"0")].join("")}function re(){const M=Object.create(null);let O=!1;return Object.defineProperty(M,"settled",{get(){return O}}),M.promise=new Promise(function(z,_e){M.resolve=function(we){O=!0,z(we)},M.reject=function(we){O=!0,_e(we)}}),M}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var w,Y,S,I,nt,q,mt,F,f,c,x,P,g,i,d,Tt,l,E,xt,p,e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:r,NodeCMapReaderFactory:s,NodeFilterFactory:m,NodeStandardFontDataFactory:C}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=r,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=s,exports.DefaultFilterFactory=DefaultFilterFactory=m,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=C}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:r}=__w_pdfjs_require__(21);createPDFNetworkStream=s=>new r(s)}else{const{PDFNetworkStream:r}=__w_pdfjs_require__(24),{PDFFetchStream:s}=__w_pdfjs_require__(25);createPDFNetworkStream=m=>(0,_display_utils.isValidFetchUrl)(m.url)?new s(m):new r(m)}function getDocument(r){if(typeof r=="string"||r instanceof URL?r={url:r}:(0,_util.isArrayBuffer)(r)&&(r={data:r}),typeof r!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!r.url&&!r.data&&!r.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const s=new PDFDocumentLoadingTask,{docId:m}=s,C=r.url?getUrlProp(r.url):null,h=r.data?getDataProp(r.data):null,D=r.httpHeaders||null,te=r.withCredentials===!0,le=r.password??null,X=r.range instanceof PDFDataRangeTransport?r.range:null,ae=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let de=r.worker instanceof PDFWorker?r.worker:null;const Z=r.verbosity,ge=typeof r.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(r.docBaseUrl)?r.docBaseUrl:null,Se=typeof r.cMapUrl=="string"?r.cMapUrl:null,oe=r.cMapPacked!==!1,H=r.CMapReaderFactory||DefaultCMapReaderFactory,A=typeof r.standardFontDataUrl=="string"?r.standardFontDataUrl:null,v=r.StandardFontDataFactory||DefaultStandardFontDataFactory,R=r.stopAtErrors!==!0,$=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,j=r.isEvalSupported!==!1,se=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!_is_node.isNodeJS,N=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,K=typeof r.disableFontFace=="boolean"?r.disableFontFace:_is_node.isNodeJS,ne=r.fontExtraProperties===!0,U=r.enableXfa===!0,B=r.ownerDocument||globalThis.document,o=r.disableRange===!0,_=r.disableStream===!0,y=r.disableAutoFetch===!0,k=r.pdfBug===!0,V=X?X.length:r.length??NaN,W=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!_is_node.isNodeJS&&!K,he=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:H===_display_utils.DOMCMapReaderFactory&&v===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(Se,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(A,document.baseURI),G=r.canvasFactory||new DefaultCanvasFactory({ownerDocument:B}),J=r.filterFactory||new DefaultFilterFactory({docId:m,ownerDocument:B}),fe=null;(0,_util.setVerbosityLevel)(Z);const ce={canvasFactory:G,filterFactory:J};if(he||(ce.cMapReaderFactory=new H({baseUrl:Se,isCompressed:oe}),ce.standardFontDataFactory=new v({baseUrl:A})),!de){const Ee={verbosity:Z,port:_worker_options.GlobalWorkerOptions.workerPort};de=Ee.port?PDFWorker.fromPort(Ee):new PDFWorker(Ee),s._worker=de}const me={docId:m,apiVersion:"3.5.141",data:h,password:le,disableAutoFetch:y,rangeChunkSize:ae,length:V,docBaseUrl:ge,enableXfa:U,evaluatorOptions:{maxImageSize:$,disableFontFace:K,ignoreErrors:R,isEvalSupported:j,isOffscreenCanvasSupported:se,canvasMaxAreaInBytes:N,fontExtraProperties:ne,useSystemFonts:W,cMapUrl:he?Se:null,standardFontDataUrl:he?A:null}},Ae={ignoreErrors:R,isEvalSupported:j,disableFontFace:K,fontExtraProperties:ne,enableXfa:U,ownerDocument:B,disableAutoFetch:y,pdfBug:k,styleElement:fe};return de.promise.then(function(){if(s.destroyed)throw new Error("Loading aborted");const Ee=_fetchDocument(de,me),Me=new Promise(function(T){let re;X?re=new _transport_stream.PDFDataTransportStream({length:V,initialData:X.initialData,progressiveDone:X.progressiveDone,contentDispositionFilename:X.contentDispositionFilename,disableRange:o,disableStream:_},X):h||(re=createPDFNetworkStream({url:C,length:V,httpHeaders:D,withCredentials:te,rangeChunkSize:ae,disableRange:o,disableStream:_})),T(re)});return Promise.all([Ee,Me]).then(function([T,re]){if(s.destroyed)throw new Error("Loading aborted");const M=new _message_handler.MessageHandler(m,T,de.port),O=new WorkerTransport(M,s,re,Ae,ce);s._transport=O,M.send("Ready",null)})}).catch(s._capability.reject),s}async function _fetchDocument(r,s){if(r.destroyed)throw new Error("Worker was destroyed");const m=await r.messageHandler.sendWithPromise("GetDocRequest",s,s.data?[s.data.buffer]:null);if(r.destroyed)throw new Error("Worker was destroyed");return m}function getUrlProp(r){if(r instanceof URL)return r.href;try{return new URL(r,window.location).href}catch{if(_is_node.isNodeJS&&typeof r=="string")return r}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(r){if(_is_node.isNodeJS&&typeof Buffer<"u"&&r instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(r);if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return(0,_util.stringToBytes)(r);if(typeof r=="object"&&!isNaN(r==null?void 0:r.length)||(0,_util.isArrayBuffer)(r))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const a=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${ct(a,w)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var s;this.destroyed=!0,await((s=this._transport)==null?void 0:s.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=a;w=new WeakMap,Q(PDFDocumentLoadingTask,w,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(s,m,C=!1,h=null){this.length=s,this.initialData=m,this.progressiveDone=C,this.contentDispositionFilename=h,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(s){this._rangeListeners.push(s)}addProgressListener(s){this._progressListeners.push(s)}addProgressiveReadListener(s){this._progressiveReadListeners.push(s)}addProgressiveDoneListener(s){this._progressiveDoneListeners.push(s)}onDataRange(s,m){for(const C of this._rangeListeners)C(s,m)}onDataProgress(s,m){this._readyCapability.promise.then(()=>{for(const C of this._progressListeners)C(s,m)})}onDataProgressiveRead(s){this._readyCapability.promise.then(()=>{for(const m of this._progressiveReadListeners)m(s)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const s of this._progressiveDoneListeners)s()})}transportReady(){this._readyCapability.resolve()}requestDataRange(s,m){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(s,m){this._pdfInfo=s,this._transport=m}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(s){return this._transport.getPage(s)}getPageIndex(s){return this._transport.getPageIndex(s)}getDestinations(){return this._transport.getDestinations()}getDestination(s){return this._transport.getDestination(s)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(s=!1){return this._transport.startCleanup(s||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(s,m,C,h=!1){Q(this,I);Q(this,q);Q(this,Y,null);Q(this,S,!1);this._pageIndex=s,this._pageInfo=m,this._transport=C,this._stats=h?new _display_utils.StatTimer:null,this._pdfBug=h,this.commonObjs=C.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:s,rotation:m=this.rotate,offsetX:C=0,offsetY:h=0,dontFlip:D=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:s,rotation:m,offsetX:C,offsetY:h,dontFlip:D})}getAnnotations({intent:s="display"}={}){const m=this._transport.getRenderingIntent(s);return this._transport.getAnnotations(this._pageIndex,m.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var s;return((s=this._transport._htmlForXfa)==null?void 0:s.children[this._pageIndex])||null}render({canvasContext:s,viewport:m,intent:C="display",annotationMode:h=_util.AnnotationMode.ENABLE,transform:D=null,background:te=null,optionalContentConfigPromise:le=null,annotationCanvasMap:X=null,pageColors:ae=null,printAnnotationStorage:de=null}){var v,R,$;if((v=arguments[0])!=null&&v.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(R=this._stats)==null||R.time("Overall");const Z=this._transport.getRenderingIntent(C,h,de);be(this,S,!1),ee(this,q,mt).call(this),le||(le=this._transport.getOptionalContentConfig());let ge=this._intentStates.get(Z.cacheKey);ge||(ge=Object.create(null),this._intentStates.set(Z.cacheKey,ge)),ge.streamReaderCancelTimeout&&(clearTimeout(ge.streamReaderCancelTimeout),ge.streamReaderCancelTimeout=null);const Se=!!(Z.renderingIntent&_util.RenderingIntentFlag.PRINT);ge.displayReadyCapability||(ge.displayReadyCapability=(0,_util.createPromiseCapability)(),ge.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},($=this._stats)==null||$.time("Page Request"),this._pumpOperatorList(Z));const oe=j=>{var se,N;ge.renderTasks.delete(H),(this._maybeCleanupAfterRender||Se)&&be(this,S,!0),ee(this,I,nt).call(this,!Se),j?(H.capability.reject(j),this._abortOperatorList({intentState:ge,reason:j instanceof Error?j:new Error(j)})):H.capability.resolve(),(se=this._stats)==null||se.timeEnd("Rendering"),(N=this._stats)==null||N.timeEnd("Overall")},H=new InternalRenderTask({callback:oe,params:{canvasContext:s,viewport:m,transform:D,background:te},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:X,operatorList:ge.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Se,pdfBug:this._pdfBug,pageColors:ae});(ge.renderTasks||(ge.renderTasks=new Set)).add(H);const A=H.task;return Promise.all([ge.displayReadyCapability.promise,le]).then(([j,se])=>{var N;if(u(this,S)){oe();return}(N=this._stats)==null||N.time("Rendering"),H.initializeGraphics({transparency:j,optionalContentConfig:se}),H.operatorListChanged()}).catch(oe),A}getOperatorList({intent:s="display",annotationMode:m=_util.AnnotationMode.ENABLE,printAnnotationStorage:C=null}={}){var X;function h(){te.operatorList.lastChunk&&(te.opListReadCapability.resolve(te.operatorList),te.renderTasks.delete(le))}const D=this._transport.getRenderingIntent(s,m,C,!0);let te=this._intentStates.get(D.cacheKey);te||(te=Object.create(null),this._intentStates.set(D.cacheKey,te));let le;return te.opListReadCapability||(le=Object.create(null),le.operatorListChanged=h,te.opListReadCapability=(0,_util.createPromiseCapability)(),(te.renderTasks||(te.renderTasks=new Set)).add(le),te.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(X=this._stats)==null||X.time("Page Request"),this._pumpOperatorList(D)),te.opListReadCapability.promise}streamTextContent({includeMarkedContent:s=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:s===!0},{highWaterMark:100,size(C){return C.items.length}})}getTextContent(s={}){if(this._transport._htmlForXfa)return this.getXfa().then(C=>_xfa_text.XfaText.textContent(C));const m=this.streamTextContent(s);return new Promise(function(C,h){function D(){te.read().then(function({value:X,done:ae}){if(ae){C(le);return}Object.assign(le.styles,X.styles),le.items.push(...X.items),D()},h)}const te=m.getReader(),le={items:[],styles:Object.create(null)};D()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const s=[];for(const m of this._intentStates.values())if(this._abortOperatorList({intentState:m,reason:new Error("Page was destroyed."),force:!0}),!m.opListReadCapability)for(const C of m.renderTasks)s.push(C.completed),C.cancel();return this.objs.clear(),be(this,S,!1),ee(this,q,mt).call(this),Promise.all(s)}cleanup(s=!1){be(this,S,!0);const m=ee(this,I,nt).call(this,!1);return s&&m&&this._stats&&(this._stats=new _display_utils.StatTimer),m}_startRenderPage(s,m){var h,D;const C=this._intentStates.get(m);C&&((h=this._stats)==null||h.timeEnd("Page Request"),(D=C.displayReadyCapability)==null||D.resolve(s))}_renderPageChunk(s,m){for(let C=0,h=s.length;C<h;C++)m.operatorList.fnArray.push(s.fnArray[C]),m.operatorList.argsArray.push(s.argsArray[C]);m.operatorList.lastChunk=s.lastChunk,m.operatorList.separateAnnots=s.separateAnnots;for(const C of m.renderTasks)C.operatorListChanged();s.lastChunk&&ee(this,I,nt).call(this,!0)}_pumpOperatorList({renderingIntent:s,cacheKey:m,annotationStorageMap:C}){const D=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:s,cacheKey:m,annotationStorage:C}).getReader(),te=this._intentStates.get(m);te.streamReader=D;const le=()=>{D.read().then(({value:X,done:ae})=>{if(ae){te.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(X,te),le())},X=>{if(te.streamReader=null,!this._transport.destroyed){if(te.operatorList){te.operatorList.lastChunk=!0;for(const ae of te.renderTasks)ae.operatorListChanged();ee(this,I,nt).call(this,!0)}if(te.displayReadyCapability)te.displayReadyCapability.reject(X);else if(te.opListReadCapability)te.opListReadCapability.reject(X);else throw X}})};le()}_abortOperatorList({intentState:s,reason:m,force:C=!1}){if(s.streamReader){if(s.streamReaderCancelTimeout&&(clearTimeout(s.streamReaderCancelTimeout),s.streamReaderCancelTimeout=null),!C){if(s.renderTasks.size>0)return;if(m instanceof _display_utils.RenderingCancelledException){let h=RENDERING_CANCELLED_TIMEOUT;m.extraDelay>0&&m.extraDelay<1e3&&(h+=m.extraDelay),s.streamReaderCancelTimeout=setTimeout(()=>{s.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:s,reason:m,force:!0})},h);return}}if(s.streamReader.cancel(new _util.AbortException(m.message)).catch(()=>{}),s.streamReader=null,!this._transport.destroyed){for(const[h,D]of this._intentStates)if(D===s){this._intentStates.delete(h);break}this.cleanup()}}}get stats(){return this._stats}}Y=new WeakMap,S=new WeakMap,I=new WeakSet,nt=function(s=!1){if(ee(this,q,mt).call(this),!u(this,S))return!1;if(s)return be(this,Y,setTimeout(()=>{be(this,Y,null),ee(this,I,nt).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:m,operatorList:C}of this._intentStates.values())if(m.size>0||!C.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),be(this,S,!1),!0},q=new WeakSet,mt=function(){u(this,Y)&&(clearTimeout(u(this,Y)),be(this,Y,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){Q(this,F,new Set);Q(this,f,Promise.resolve())}postMessage(s,m){const C={data:structuredClone(s,m?{transfer:m}:null)};u(this,f).then(()=>{for(const h of u(this,F))h.call(this,C)})}addEventListener(s,m){u(this,F).add(m)}removeEventListener(s,m){u(this,F).delete(m)}terminate(){u(this,F).clear()}}F=new WeakMap,f=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const r=(c=document==null?void 0:document.currentScript)==null?void 0:c.src;r&&(PDFWorkerUtil.fallbackWorkerSrc=r.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(r,s){let m;try{if(m=new URL(r),!m.origin||m.origin==="null")return!1}catch{return!1}const C=new URL(s,m);return m.origin===C.origin},PDFWorkerUtil.createCDNWrapper=function(r){const s=`importScripts("${r}");`;return URL.createObjectURL(new Blob([s]))}}const _PDFWorker=class{constructor({name:r=null,port:s=null,verbosity:m=(0,_util.getVerbosityLevel)()}={}){if(s&&u(_PDFWorker,x).has(s))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=r,this.destroyed=!1,this.verbosity=m,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,s){u(_PDFWorker,x).set(s,this),this._initializeFromPort(s);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(r){this._port=r,this._messageHandler=new _message_handler.MessageHandler("main","worker",r),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:r}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,r)||(r=PDFWorkerUtil.createCDNWrapper(new URL(r,window.location).href));const s=new Worker(r),m=new _message_handler.MessageHandler("main","worker",s),C=()=>{s.removeEventListener("error",h),m.destroy(),s.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},h=()=>{this._webWorker||C()};s.addEventListener("error",h),m.on("test",te=>{if(s.removeEventListener("error",h),this.destroyed){C();return}te?(this._messageHandler=m,this._port=s,this._webWorker=s,this._readyCapability.resolve(),m.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),m.destroy(),s.terminate())}),m.on("ready",te=>{if(s.removeEventListener("error",h),this.destroyed){C();return}try{D()}catch{this._setupFakeWorker()}});const D=()=>{const te=new Uint8Array;m.send("test",te,[te.buffer])};D();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(r=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const s=new LoopbackPort;this._port=s;const m=`fake${PDFWorkerUtil.fakeWorkerId++}`,C=new _message_handler.MessageHandler(m+"_worker",m,s);r.setup(C,s);const h=new _message_handler.MessageHandler(m,m+"_worker",s);this._messageHandler=h,this._readyCapability.resolve(),h.send("configure",{verbosity:this.verbosity})}).catch(r=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${r.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),u(_PDFWorker,x).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(r){if(!(r!=null&&r.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return u(this,x).has(r.port)?u(this,x).get(r.port):new _PDFWorker(r)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var r;try{return((r=globalThis.pdfjsWorker)==null?void 0:r.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;x=new WeakMap,Q(PDFWorker,x,new WeakMap),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(s,m,C,h,D){Q(this,d);Q(this,P,new Map);Q(this,g,new Map);Q(this,i,new Map);this.messageHandler=s,this.loadingTask=m,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:h.ownerDocument,styleElement:h.styleElement}),this._params=h,this.canvasFactory=D.canvasFactory,this.filterFactory=D.filterFactory,this.cMapReaderFactory=D.cMapReaderFactory,this.standardFontDataFactory=D.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=C,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(s,m=_util.AnnotationMode.ENABLE,C=null,h=!1){let D=_util.RenderingIntentFlag.DISPLAY,te=null;switch(s){case"any":D=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":D=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${s}`)}switch(m){case _util.AnnotationMode.DISABLE:D+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:D+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:D+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,te=(D&_util.RenderingIntentFlag.PRINT&&C instanceof _annotation_storage.PrintAnnotationStorage?C:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${m}`)}return h&&(D+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:D,cacheKey:`${D}_${_annotation_storage.AnnotationStorage.getHash(te)}`,annotationStorageMap:te}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const s=[];for(const C of u(this,g).values())s.push(C._destroy());u(this,g).clear(),u(this,i).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const m=this.messageHandler.sendWithPromise("Terminate",null);return s.push(m),Promise.all(s).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),u(this,P).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:s,loadingTask:m}=this;s.on("GetReader",(C,h)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=D=>{this._lastProgress={loaded:D.loaded,total:D.total}},h.onPull=()=>{this._fullReader.read().then(function({value:D,done:te}){if(te){h.close();return}(0,_util.assert)(D instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),h.enqueue(new Uint8Array(D),1,[D])}).catch(D=>{h.error(D)})},h.onCancel=D=>{this._fullReader.cancel(D),h.ready.catch(te=>{if(!this.destroyed)throw te})}}),s.on("ReaderHeadersReady",C=>{const h=(0,_util.createPromiseCapability)(),D=this._fullReader;return D.headersReady.then(()=>{var te;(!D.isStreamingSupported||!D.isRangeSupported)&&(this._lastProgress&&((te=m.onProgress)==null||te.call(m,this._lastProgress)),D.onProgress=le=>{var X;(X=m.onProgress)==null||X.call(m,{loaded:le.loaded,total:le.total})}),h.resolve({isStreamingSupported:D.isStreamingSupported,isRangeSupported:D.isRangeSupported,contentLength:D.contentLength})},h.reject),h.promise}),s.on("GetRangeReader",(C,h)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const D=this._networkStream.getRangeReader(C.begin,C.end);if(!D){h.close();return}h.onPull=()=>{D.read().then(function({value:te,done:le}){if(le){h.close();return}(0,_util.assert)(te instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),h.enqueue(new Uint8Array(te),1,[te])}).catch(te=>{h.error(te)})},h.onCancel=te=>{D.cancel(te),h.ready.catch(le=>{if(!this.destroyed)throw le})}}),s.on("GetDoc",({pdfInfo:C})=>{this._numPages=C.numPages,this._htmlForXfa=C.htmlForXfa,delete C.htmlForXfa,m._capability.resolve(new PDFDocumentProxy(C,this))}),s.on("DocException",function(C){let h;switch(C.name){case"PasswordException":h=new _util.PasswordException(C.message,C.code);break;case"InvalidPDFException":h=new _util.InvalidPDFException(C.message);break;case"MissingPDFException":h=new _util.MissingPDFException(C.message);break;case"UnexpectedResponseException":h=new _util.UnexpectedResponseException(C.message,C.status);break;case"UnknownErrorException":h=new _util.UnknownErrorException(C.message,C.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}m._capability.reject(h)}),s.on("PasswordRequest",C=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),m.onPassword){const h=D=>{D instanceof Error?this._passwordCapability.reject(D):this._passwordCapability.resolve({password:D})};try{m.onPassword(h,C.code)}catch(D){this._passwordCapability.reject(D)}}else this._passwordCapability.reject(new _util.PasswordException(C.message,C.code));return this._passwordCapability.promise}),s.on("DataLoaded",C=>{var h;(h=m.onProgress)==null||h.call(m,{loaded:C.length,total:C.length}),this.downloadInfoCapability.resolve(C)}),s.on("StartRenderPage",C=>{if(this.destroyed)return;u(this,g).get(C.pageIndex)._startRenderPage(C.transparency,C.cacheKey)}),s.on("commonobj",([C,h,D])=>{var te;if(!this.destroyed&&!this.commonObjs.has(C))switch(h){case"Font":const le=this._params;if("error"in D){const de=D.error;(0,_util.warn)(`Error during font loading: ${de}`),this.commonObjs.resolve(C,de);break}const X=le.pdfBug&&((te=globalThis.FontInspector)!=null&&te.enabled)?(de,Z)=>globalThis.FontInspector.fontAdded(de,Z):null,ae=new _font_loader.FontFaceObject(D,{isEvalSupported:le.isEvalSupported,disableFontFace:le.disableFontFace,ignoreErrors:le.ignoreErrors,inspectFont:X});this.fontLoader.bind(ae).catch(de=>s.sendWithPromise("FontFallback",{id:C})).finally(()=>{!le.fontExtraProperties&&ae.data&&(ae.data=null),this.commonObjs.resolve(C,ae)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(C,D);break;default:throw new Error(`Got unknown common object type ${h}`)}}),s.on("obj",([C,h,D,te])=>{var X;if(this.destroyed)return;const le=u(this,g).get(h);if(!le.objs.has(C))switch(D){case"Image":if(le.objs.resolve(C,te),te){let ae;if(te.bitmap){const{width:de,height:Z}=te;ae=de*Z*4}else ae=((X=te.data)==null?void 0:X.length)||0;ae>_util.MAX_IMAGE_SIZE_TO_CACHE&&(le._maybeCleanupAfterRender=!0)}break;case"Pattern":le.objs.resolve(C,te);break;default:throw new Error(`Got unknown object type ${D}`)}}),s.on("DocProgress",C=>{var h;this.destroyed||(h=m.onProgress)==null||h.call(m,{loaded:C.loaded,total:C.total})}),s.on("FetchBuiltInCMap",C=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(C):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),s.on("FetchStandardFontData",C=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(C):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((s=this._fullReader)==null?void 0:s.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(s){if(!Number.isInteger(s)||s<=0||s>this._numPages)return Promise.reject(new Error("Invalid page request."));const m=s-1,C=u(this,i).get(m);if(C)return C;const h=this.messageHandler.sendWithPromise("GetPage",{pageIndex:m}).then(D=>{if(this.destroyed)throw new Error("Transport destroyed");const te=new PDFPageProxy(m,D,this,this._params.pdfBug);return u(this,g).set(m,te),te});return u(this,i).set(m,h),h}getPageIndex(s){return typeof s!="object"||s===null||!Number.isInteger(s.num)||s.num<0||!Number.isInteger(s.gen)||s.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:s.num,gen:s.gen})}getAnnotations(s,m){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:s,intent:m})}getFieldObjects(){return ee(this,d,Tt).call(this,"GetFieldObjects")}hasJSActions(){return ee(this,d,Tt).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(s){return typeof s!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:s})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(s){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:s})}getStructTree(s){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:s})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(s=>new _optional_content_config.OptionalContentConfig(s))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const s="GetMetadata",m=u(this,P).get(s);if(m)return m;const C=this.messageHandler.sendWithPromise(s,null).then(h=>{var D,te;return{info:h[0],metadata:h[1]?new _metadata.Metadata(h[1]):null,contentDispositionFilename:((D=this._fullReader)==null?void 0:D.filename)??null,contentLength:((te=this._fullReader)==null?void 0:te.contentLength)??null}});return u(this,P).set(s,C),C}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(s=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const m of u(this,g).values())if(!m.cleanup())throw new Error(`startCleanup: Page ${m.pageNumber} is currently rendering.`);this.commonObjs.clear(),s||this.fontLoader.clear(),u(this,P).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:s,enableXfa:m}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:s,enableXfa:m})}}P=new WeakMap,g=new WeakMap,i=new WeakMap,d=new WeakSet,Tt=function(s,m=null){const C=u(this,P).get(s);if(C)return C;const h=this.messageHandler.sendWithPromise(s,m);return u(this,P).set(s,h),h};class PDFObjects{constructor(){Q(this,E);Q(this,l,Object.create(null))}get(s,m=null){if(m){const h=ee(this,E,xt).call(this,s);return h.capability.promise.then(()=>m(h.data)),null}const C=u(this,l)[s];if(!(C!=null&&C.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${s}.`);return C.data}has(s){const m=u(this,l)[s];return(m==null?void 0:m.capability.settled)||!1}resolve(s,m=null){const C=ee(this,E,xt).call(this,s);C.data=m,C.capability.resolve()}clear(){var s;for(const m in u(this,l)){const{data:C}=u(this,l)[m];(s=C==null?void 0:C.bitmap)==null||s.close()}be(this,l,Object.create(null))}}l=new WeakMap,E=new WeakSet,xt=function(s){const m=u(this,l)[s];return m||(u(this,l)[s]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(s){Q(this,p,null);be(this,p,s),this.onContinue=null}get promise(){return u(this,p).capability.promise}cancel(s=0){u(this,p).cancel(null,s)}get separateAnnots(){const{separateAnnots:s}=u(this,p).operatorList;if(!s)return!1;const{annotationCanvasMap:m}=u(this,p);return s.form||s.canvas&&(m==null?void 0:m.size)>0}}p=new WeakMap,exports.RenderTask=RenderTask;const t=class{constructor({callback:s,params:m,objs:C,commonObjs:h,annotationCanvasMap:D,operatorList:te,pageIndex:le,canvasFactory:X,filterFactory:ae,useRequestAnimationFrame:de=!1,pdfBug:Z=!1,pageColors:ge=null}){this.callback=s,this.params=m,this.objs=C,this.commonObjs=h,this.annotationCanvasMap=D,this.operatorListIdx=null,this.operatorList=te,this._pageIndex=le,this.canvasFactory=X,this.filterFactory=ae,this._pdfBug=Z,this.pageColors=ge,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=de===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=m.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:s=!1,optionalContentConfig:m}){var le,X;if(this.cancelled)return;if(this._canvas){if(u(t,e).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(t,e).add(this._canvas)}this._pdfBug&&((le=globalThis.StepperManager)!=null&&le.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:C,viewport:h,transform:D,background:te}=this.params;this.gfx=new _canvas.CanvasGraphics(C,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:m},this.annotationCanvasMap),this.gfx.beginDrawing({transform:D,viewport:h,transparency:s,background:te}),this.operatorListIdx=0,this.graphicsReady=!0,(X=this.graphicsReadyCallback)==null||X.call(this)}cancel(s=null,m=0){var C;this.running=!1,this.cancelled=!0,(C=this.gfx)==null||C.endDrawing(this.pageColors),this._canvas&&u(t,e).delete(this._canvas),this.callback(s||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",m))}operatorListChanged(){var s;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(s=this.stepper)==null||s.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&u(t,e).delete(this._canvas),this.callback())))}};let InternalRenderTask=t;e=new WeakMap,Q(InternalRenderTask,e,new WeakSet);const version="3.5.141";exports.version=version;const build="be0f6ee08";exports.build=build},(w,a,Y)=>{var F,f,c,pi,P;Object.defineProperty(a,"__esModule",{value:!0}),a.PrintAnnotationStorage=a.AnnotationStorage=void 0;var S=Y(1),I=Y(4),ue=Y(8);class q{constructor(){Q(this,c);Q(this,F,!1);Q(this,f,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(i,d){const n=u(this,f).get(i);return n===void 0?d:Object.assign(d,n)}getRawValue(i){return u(this,f).get(i)}remove(i){if(u(this,f).delete(i),u(this,f).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const d of u(this,f).values())if(d instanceof I.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(i,d){const n=u(this,f).get(i);let l=!1;if(n!==void 0)for(const[E,b]of Object.entries(d))n[E]!==b&&(l=!0,n[E]=b);else l=!0,u(this,f).set(i,d);l&&ee(this,c,pi).call(this),d instanceof I.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(d.constructor._type)}has(i){return u(this,f).has(i)}getAll(){return u(this,f).size>0?(0,S.objectFromMap)(u(this,f)):null}setAll(i){for(const[d,n]of Object.entries(i))this.setValue(d,n)}get size(){return u(this,f).size}resetModified(){u(this,F)&&(be(this,F,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new L(this)}get serializable(){if(u(this,f).size===0)return null;const i=new Map;for(const[d,n]of u(this,f)){const l=n instanceof I.AnnotationEditor?n.serialize():n;l&&i.set(d,l)}return i}static getHash(i){if(!i)return"";const d=new ue.MurmurHash3_64;for(const[n,l]of i)d.update(`${n}:${JSON.stringify(l)}`);return d.hexdigest()}}F=new WeakMap,f=new WeakMap,c=new WeakSet,pi=function(){u(this,F)||(be(this,F,!0),typeof this.onSetModified=="function"&&this.onSetModified())},a.AnnotationStorage=q;class L extends q{constructor(d){super();Q(this,P,null);be(this,P,structuredClone(d.serializable))}get print(){(0,S.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,P)}}P=new WeakMap,a.PrintAnnotationStorage=L},(w,a,Y)=>{var q,L,F,f,c,x;Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationEditor=void 0;var S=Y(5),I=Y(1);const P=class{constructor(i){Q(this,q,this.focusin.bind(this));Q(this,L,this.focusout.bind(this));Q(this,F,!1);Q(this,f,!1);Q(this,c,!1);Ve(this,"_uiManager",null);Q(this,x,P._zIndex++);this.constructor===P&&(0,I.unreachable)("Cannot initialize AnnotationEditor."),this.parent=i.parent,this.id=i.id,this.width=this.height=null,this.pageIndex=i.parent.pageIndex,this.name=i.name,this.div=null,this._uiManager=i.uiManager;const{rotation:d,rawDims:{pageWidth:n,pageHeight:l,pageX:E,pageY:b}}=this.parent.viewport;this.rotation=d,this.pageDimensions=[n,l],this.pageTranslation=[E,b];const[p,e]=this.parentDimensions;this.x=i.x/p,this.y=i.y/e,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,I.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(i){this._uiManager.addCommands(i)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,x)}setParent(i){i!==null&&(this.pageIndex=i.pageIndex,this.pageDimensions=i.pageDimensions),this.parent=i}focusin(i){u(this,F)?be(this,F,!1):this.parent.setSelected(this)}focusout(i){var n;if(!this.isAttachedToDOM)return;const d=i.relatedTarget;d!=null&&d.closest(`#${this.id}`)||(i.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(i){const d=this.parent.div.getBoundingClientRect();this.startX=i.clientX-d.x,this.startY=i.clientY-d.y,i.dataTransfer.setData("text/plain",this.id),i.dataTransfer.effectAllowed="move"}setAt(i,d,n,l){const[E,b]=this.parentDimensions;[n,l]=this.screenToPageTranslation(n,l),this.x=(i+n)/E,this.y=(d+l)/b,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(i,d){const[n,l]=this.parentDimensions;[i,d]=this.screenToPageTranslation(i,d),this.x+=i/n,this.y+=d/l,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(i,d){switch(this.parentRotation){case 90:return[d,-i];case 180:return[-i,-d];case 270:return[-d,i];default:return[i,d]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return this._uiManager.viewParameters.rotation}get parentDimensions(){const{realScale:i}=this._uiManager.viewParameters,[d,n]=this.pageDimensions;return[d*i,n*i]}setDims(i,d){const[n,l]=this.parentDimensions;this.div.style.width=`${100*i/n}%`,this.div.style.height=`${100*d/l}%`}fixDims(){const{style:i}=this.div,{height:d,width:n}=i,l=n.endsWith("%"),E=d.endsWith("%");if(l&&E)return;const[b,p]=this.parentDimensions;l||(i.width=`${100*parseFloat(n)/b}%`),E||(i.height=`${100*parseFloat(d)/p}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",u(this,q)),this.div.addEventListener("focusout",u(this,L));const[i,d]=this.getInitialTranslation();return this.translate(i,d),(0,S.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(i){const{isMac:d}=I.FeatureTest.platform;if(i.button!==0||i.ctrlKey&&d){i.preventDefault();return}i.ctrlKey&&!d||i.shiftKey||i.metaKey&&d?this.parent.toggleSelected(this):this.parent.setSelected(this),be(this,F,!0)}getRect(i,d){const n=this.parentScale,[l,E]=this.pageDimensions,[b,p]=this.pageTranslation,e=i/n,t=d/n,r=this.x*l,s=this.y*E,m=this.width*l,C=this.height*E;switch(this.rotation){case 0:return[r+e+b,E-s-t-C+p,r+e+m+b,E-s-t+p];case 90:return[r+t+b,E-s+e+p,r+t+C+b,E-s+e+m+p];case 180:return[r-e-m+b,E-s+t+p,r-e+b,E-s+t+C+p];case 270:return[r-t-C+b,E-s-e-m+p,r-t+b,E-s-e+p];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(i,d){const[n,l,E,b]=i,p=E-n,e=b-l;switch(this.rotation){case 0:return[n,d-b,p,e];case 90:return[n,d-l,e,p];case 180:return[E,d-l,p,e];case 270:return[E,d-b,e,p];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){be(this,c,!0)}disableEditMode(){be(this,c,!1)}isInEditMode(){return u(this,c)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var i;(i=this.div)==null||i.addEventListener("focusin",u(this,q))}serialize(){(0,I.unreachable)("An editor must be serializable")}static deserialize(i,d,n){const l=new this.prototype.constructor({parent:d,id:d.getNextId(),uiManager:n});l.rotation=i.rotation;const[E,b]=l.pageDimensions,[p,e,t,r]=l.getRectInCurrentCoords(i.rect,b);return l.x=p/E,l.y=e/b,l.width=t/E,l.height=r/b,l}remove(){this.div.removeEventListener("focusin",u(this,q)),this.div.removeEventListener("focusout",u(this,L)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var i;(i=this.div)==null||i.classList.add("selectedEditor")}unselect(){var i;(i=this.div)==null||i.classList.remove("selectedEditor")}updateParams(i,d){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return u(this,f)}set isEditing(i){be(this,f,i),i?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let ue=P;q=new WeakMap,L=new WeakMap,F=new WeakMap,f=new WeakMap,c=new WeakMap,x=new WeakMap,Ve(ue,"_colorManager",new S.ColorManager),Ve(ue,"_zIndex",1),a.AnnotationEditor=ue},(w,a,Y)=>{var P,g,i,d,n,l,gi,p,e,t,r,s,m,C,h,D,te,le,X,ae,de,Z,ge,Se,oe,H,A,v,R,$,j,mi,N,Mt,ne,_i,B,bi,_,Xe,k,ht,W,vi,G,yi,fe,Rt,me,dt,Ee,kt;Object.defineProperty(a,"__esModule",{value:!0}),a.KeyboardManager=a.CommandManager=a.ColorManager=a.AnnotationEditorUIManager=void 0,a.bindEvents=ue,a.opacityToHex=q;var S=Y(1),I=Y(6);function ue(re,M,O){for(const z of O)M.addEventListener(z,re[z].bind(re))}function q(re){return Math.round(Math.min(255,Math.max(1,255*re))).toString(16).padStart(2,"0")}class L{constructor(){Q(this,P,0)}getId(){return`${S.AnnotationEditorPrefix}${ct(this,P)._++}`}}P=new WeakMap;class F{constructor(M=128){Q(this,g,[]);Q(this,i,!1);Q(this,d,void 0);Q(this,n,-1);be(this,d,M)}add({cmd:M,undo:O,mustExec:z,type:_e=NaN,overwriteIfSameType:we=!1,keepUndo:ie=!1}){if(z&&M(),u(this,i))return;const ve={cmd:M,undo:O,type:_e};if(u(this,n)===-1){u(this,g).length>0&&(u(this,g).length=0),be(this,n,0),u(this,g).push(ve);return}if(we&&u(this,g)[u(this,n)].type===_e){ie&&(ve.undo=u(this,g)[u(this,n)].undo),u(this,g)[u(this,n)]=ve;return}const xe=u(this,n)+1;xe===u(this,d)?u(this,g).splice(0,1):(be(this,n,xe),xe<u(this,g).length&&u(this,g).splice(xe)),u(this,g).push(ve)}undo(){u(this,n)!==-1&&(be(this,i,!0),u(this,g)[u(this,n)].undo(),be(this,i,!1),be(this,n,u(this,n)-1))}redo(){u(this,n)<u(this,g).length-1&&(be(this,n,u(this,n)+1),be(this,i,!0),u(this,g)[u(this,n)].cmd(),be(this,i,!1))}hasSomethingToUndo(){return u(this,n)!==-1}hasSomethingToRedo(){return u(this,n)<u(this,g).length-1}destroy(){be(this,g,null)}}g=new WeakMap,i=new WeakMap,d=new WeakMap,n=new WeakMap,a.CommandManager=F;class f{constructor(M){Q(this,l);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:O}=S.FeatureTest.platform;for(const[z,_e]of M)for(const we of z){const ie=we.startsWith("mac+");O&&ie?(this.callbacks.set(we.slice(4),_e),this.allKeys.add(we.split("+").at(-1))):!O&&!ie&&(this.callbacks.set(we,_e),this.allKeys.add(we.split("+").at(-1)))}}exec(M,O){if(!this.allKeys.has(O.key))return;const z=this.callbacks.get(ee(this,l,gi).call(this,O));z&&(z.bind(M)(),O.stopPropagation(),O.preventDefault())}}l=new WeakSet,gi=function(M){M.altKey&&this.buffer.push("alt"),M.ctrlKey&&this.buffer.push("ctrl"),M.metaKey&&this.buffer.push("meta"),M.shiftKey&&this.buffer.push("shift"),this.buffer.push(M.key);const O=this.buffer.join("+");return this.buffer.length=0,O},a.KeyboardManager=f;const b=class{get _colors(){const M=new Map([["CanvasText",null],["Canvas",null]]);return(0,I.getColorValues)(M),(0,S.shadow)(this,"_colors",M)}convert(M){const O=(0,I.getRGB)(M);if(!window.matchMedia("(forced-colors: active)").matches)return O;for(const[z,_e]of this._colors)if(_e.every((we,ie)=>we===O[ie]))return b._colorsMapping.get(z);return O}getHexCode(M){const O=this._colors.get(M);return O?S.Util.makeHexColor(...O):M}};let c=b;Ve(c,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),a.ColorManager=c;const T=class{constructor(M,O,z){Q(this,j);Q(this,N);Q(this,ne);Q(this,B);Q(this,_);Q(this,k);Q(this,W);Q(this,G);Q(this,fe);Q(this,me);Q(this,Ee);Q(this,p,null);Q(this,e,new Map);Q(this,t,new Map);Q(this,r,null);Q(this,s,new F);Q(this,m,0);Q(this,C,null);Q(this,h,new Set);Q(this,D,null);Q(this,te,new L);Q(this,le,!1);Q(this,X,S.AnnotationEditorType.NONE);Q(this,ae,new Set);Q(this,de,this.copy.bind(this));Q(this,Z,this.cut.bind(this));Q(this,ge,this.paste.bind(this));Q(this,Se,this.keydown.bind(this));Q(this,oe,this.onEditingAction.bind(this));Q(this,H,this.onPageChanging.bind(this));Q(this,A,this.onScaleChanging.bind(this));Q(this,v,this.onRotationChanging.bind(this));Q(this,R,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Q(this,$,null);be(this,$,M),be(this,D,O),u(this,D)._on("editingaction",u(this,oe)),u(this,D)._on("pagechanging",u(this,H)),u(this,D)._on("scalechanging",u(this,A)),u(this,D)._on("rotationchanging",u(this,v)),be(this,r,z),this.viewParameters={realScale:I.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){ee(this,N,Mt).call(this),u(this,D)._off("editingaction",u(this,oe)),u(this,D)._off("pagechanging",u(this,H)),u(this,D)._off("scalechanging",u(this,A)),u(this,D)._off("rotationchanging",u(this,v));for(const M of u(this,t).values())M.destroy();u(this,t).clear(),u(this,e).clear(),u(this,h).clear(),be(this,p,null),u(this,ae).clear(),u(this,s).destroy()}onPageChanging({pageNumber:M}){be(this,m,M-1)}focusMainContainer(){u(this,$).focus()}addShouldRescale(M){u(this,h).add(M)}removeShouldRescale(M){u(this,h).delete(M)}onScaleChanging({scale:M}){this.commitOrRemove(),this.viewParameters.realScale=M*I.PixelsPerInch.PDF_TO_CSS_UNITS;for(const O of u(this,h))O.onScaleChanging()}onRotationChanging({pagesRotation:M}){this.commitOrRemove(),this.viewParameters.rotation=M}addToAnnotationStorage(M){!M.isEmpty()&&u(this,r)&&!u(this,r).has(M.id)&&u(this,r).setValue(M.id,M)}copy(M){if(M.preventDefault(),u(this,p)&&u(this,p).commitOrRemove(),!this.hasSelection)return;const O=[];for(const z of u(this,ae))z.isEmpty()||O.push(z.serialize());O.length!==0&&M.clipboardData.setData("application/pdfjs",JSON.stringify(O))}cut(M){this.copy(M),this.delete()}paste(M){M.preventDefault();let O=M.clipboardData.getData("application/pdfjs");if(!O)return;try{O=JSON.parse(O)}catch(_e){(0,S.warn)(`paste: "${_e.message}".`);return}if(!Array.isArray(O))return;this.unselectAll();const z=u(this,t).get(u(this,m));try{const _e=[];for(const ve of O){const xe=z.deserialize(ve);if(!xe)return;_e.push(xe)}const we=()=>{for(const ve of _e)ee(this,fe,Rt).call(this,ve);ee(this,Ee,kt).call(this,_e)},ie=()=>{for(const ve of _e)ve.remove()};this.addCommands({cmd:we,undo:ie,mustExec:!0})}catch(_e){(0,S.warn)(`paste: "${_e.message}".`)}}keydown(M){var O;(O=this.getActive())!=null&&O.shouldGetKeyboardEvents()||T._keyboardManager.exec(this,M)}onEditingAction(M){["undo","redo","delete","selectAll"].includes(M.name)&&this[M.name]()}setEditingState(M){M?(ee(this,j,mi).call(this),ee(this,ne,_i).call(this),ee(this,_,Xe).call(this,{isEditing:u(this,X)!==S.AnnotationEditorType.NONE,isEmpty:ee(this,me,dt).call(this),hasSomethingToUndo:u(this,s).hasSomethingToUndo(),hasSomethingToRedo:u(this,s).hasSomethingToRedo(),hasSelectedEditor:!1})):(ee(this,N,Mt).call(this),ee(this,B,bi).call(this),ee(this,_,Xe).call(this,{isEditing:!1}))}registerEditorTypes(M){if(!u(this,C)){be(this,C,M);for(const O of u(this,C))ee(this,k,ht).call(this,O.defaultPropertiesToUpdate)}}getId(){return u(this,te).getId()}get currentLayer(){return u(this,t).get(u(this,m))}get currentPageIndex(){return u(this,m)}addLayer(M){u(this,t).set(M.pageIndex,M),u(this,le)?M.enable():M.disable()}removeLayer(M){u(this,t).delete(M.pageIndex)}updateMode(M){if(be(this,X,M),M===S.AnnotationEditorType.NONE)this.setEditingState(!1),ee(this,G,yi).call(this);else{this.setEditingState(!0),ee(this,W,vi).call(this);for(const O of u(this,t).values())O.updateMode(M)}}updateToolbar(M){M!==u(this,X)&&u(this,D).dispatch("switchannotationeditormode",{source:this,mode:M})}updateParams(M,O){if(u(this,C)){for(const z of u(this,ae))z.updateParams(M,O);for(const z of u(this,C))z.updateDefaultParams(M,O)}}getEditors(M){const O=[];for(const z of u(this,e).values())z.pageIndex===M&&O.push(z);return O}getEditor(M){return u(this,e).get(M)}addEditor(M){u(this,e).set(M.id,M)}removeEditor(M){var O;u(this,e).delete(M.id),this.unselect(M),(O=u(this,r))==null||O.remove(M.id)}setActiveEditor(M){u(this,p)!==M&&(be(this,p,M),M&&ee(this,k,ht).call(this,M.propertiesToUpdate))}toggleSelected(M){if(u(this,ae).has(M)){u(this,ae).delete(M),M.unselect(),ee(this,_,Xe).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,ae).add(M),M.select(),ee(this,k,ht).call(this,M.propertiesToUpdate),ee(this,_,Xe).call(this,{hasSelectedEditor:!0})}setSelected(M){for(const O of u(this,ae))O!==M&&O.unselect();u(this,ae).clear(),u(this,ae).add(M),M.select(),ee(this,k,ht).call(this,M.propertiesToUpdate),ee(this,_,Xe).call(this,{hasSelectedEditor:!0})}isSelected(M){return u(this,ae).has(M)}unselect(M){M.unselect(),u(this,ae).delete(M),ee(this,_,Xe).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,ae).size!==0}undo(){u(this,s).undo(),ee(this,_,Xe).call(this,{hasSomethingToUndo:u(this,s).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ee(this,me,dt).call(this)})}redo(){u(this,s).redo(),ee(this,_,Xe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,s).hasSomethingToRedo(),isEmpty:ee(this,me,dt).call(this)})}addCommands(M){u(this,s).add(M),ee(this,_,Xe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ee(this,me,dt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const M=[...u(this,ae)],O=()=>{for(const _e of M)_e.remove()},z=()=>{for(const _e of M)ee(this,fe,Rt).call(this,_e)};this.addCommands({cmd:O,undo:z,mustExec:!0})}commitOrRemove(){var M;(M=u(this,p))==null||M.commitOrRemove()}selectAll(){for(const M of u(this,ae))M.commit();ee(this,Ee,kt).call(this,u(this,e).values())}unselectAll(){if(u(this,p)){u(this,p).commitOrRemove();return}if(u(this,ae).size!==0){for(const M of u(this,ae))M.unselect();u(this,ae).clear(),ee(this,_,Xe).call(this,{hasSelectedEditor:!1})}}isActive(M){return u(this,p)===M}getActive(){return u(this,p)}getMode(){return u(this,X)}};let x=T;p=new WeakMap,e=new WeakMap,t=new WeakMap,r=new WeakMap,s=new WeakMap,m=new WeakMap,C=new WeakMap,h=new WeakMap,D=new WeakMap,te=new WeakMap,le=new WeakMap,X=new WeakMap,ae=new WeakMap,de=new WeakMap,Z=new WeakMap,ge=new WeakMap,Se=new WeakMap,oe=new WeakMap,H=new WeakMap,A=new WeakMap,v=new WeakMap,R=new WeakMap,$=new WeakMap,j=new WeakSet,mi=function(){u(this,$).addEventListener("keydown",u(this,Se))},N=new WeakSet,Mt=function(){u(this,$).removeEventListener("keydown",u(this,Se))},ne=new WeakSet,_i=function(){document.addEventListener("copy",u(this,de)),document.addEventListener("cut",u(this,Z)),document.addEventListener("paste",u(this,ge))},B=new WeakSet,bi=function(){document.removeEventListener("copy",u(this,de)),document.removeEventListener("cut",u(this,Z)),document.removeEventListener("paste",u(this,ge))},_=new WeakSet,Xe=function(M){Object.entries(M).some(([z,_e])=>u(this,R)[z]!==_e)&&u(this,D).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,R),M)})},k=new WeakSet,ht=function(M){u(this,D).dispatch("annotationeditorparamschanged",{source:this,details:M})},W=new WeakSet,vi=function(){if(!u(this,le)){be(this,le,!0);for(const M of u(this,t).values())M.enable()}},G=new WeakSet,yi=function(){if(this.unselectAll(),u(this,le)){be(this,le,!1);for(const M of u(this,t).values())M.disable()}},fe=new WeakSet,Rt=function(M){const O=u(this,t).get(M.pageIndex);O?O.addOrRebuild(M):this.addEditor(M)},me=new WeakSet,dt=function(){if(u(this,e).size===0)return!0;if(u(this,e).size===1)for(const M of u(this,e).values())return M.isEmpty();return!1},Ee=new WeakSet,kt=function(M){u(this,ae).clear();for(const O of M)O.isEmpty()||(u(this,ae).add(O),O.select());ee(this,_,Xe).call(this,{hasSelectedEditor:!0})},Ve(x,"_keyboardManager",new f([[["ctrl+a","mac+meta+a"],T.prototype.selectAll],[["ctrl+z","mac+meta+z"],T.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],T.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],T.prototype.delete],[["Escape","mac+Escape"],T.prototype.unselectAll]])),a.AnnotationEditorUIManager=x},(w,a,Y)=>{var de,Z,ge,Se,oe,H,A,v,R,st,j,Je,N,qe;Object.defineProperty(a,"__esModule",{value:!0}),a.StatTimer=a.RenderingCancelledException=a.PixelsPerInch=a.PageViewport=a.PDFDateString=a.DOMStandardFontDataFactory=a.DOMSVGFactory=a.DOMFilterFactory=a.DOMCanvasFactory=a.DOMCMapReaderFactory=a.AnnotationPrefix=void 0,a.deprecated=r,a.getColorValues=D,a.getCurrentTransform=te,a.getCurrentTransformInverse=le,a.getFilenameFromUrl=E,a.getPdfFilenameFromUrl=b,a.getRGB=h,a.getXfaPageViewport=C,a.isDataScheme=n,a.isPdfFile=l,a.isValidFetchUrl=e,a.loadScript=t,a.setLayerDimensions=X;var S=Y(7),I=Y(1);const ue="http://www.w3.org/2000/svg",q="pdfjs_internal_id_";a.AnnotationPrefix=q;const ae=class{};let L=ae;Ve(L,"CSS",96),Ve(L,"PDF",72),Ve(L,"PDF_TO_CSS_UNITS",ae.CSS/ae.PDF),a.PixelsPerInch=L;class F extends S.BaseFilterFactory{constructor({docId:B,ownerDocument:o=globalThis.document}={}){super();Q(this,R);Q(this,j);Q(this,N);Q(this,de,void 0);Q(this,Z,void 0);Q(this,ge,void 0);Q(this,Se,void 0);Q(this,oe,void 0);Q(this,H,void 0);Q(this,A,void 0);Q(this,v,0);be(this,ge,B),be(this,Se,o)}addFilter(B){if(!B)return"none";let o=u(this,R,st).get(B);if(o)return o;let _,y,k,V;if(B.length===1){const fe=B[0],ce=new Array(256);for(let me=0;me<256;me++)ce[me]=fe[me]/255;V=_=y=k=ce.join(",")}else{const[fe,ce,me]=B,Ae=new Array(256),Ee=new Array(256),Me=new Array(256);for(let T=0;T<256;T++)Ae[T]=fe[T]/255,Ee[T]=ce[T]/255,Me[T]=me[T]/255;_=Ae.join(","),y=Ee.join(","),k=Me.join(","),V=`${_}${y}${k}`}if(o=u(this,R,st).get(V),o)return u(this,R,st).set(B,o),o;const W=`g_${u(this,ge)}_transfer_map_${ct(this,v)._++}`,he=`url(#${W})`;u(this,R,st).set(B,he),u(this,R,st).set(V,he);const G=u(this,Se).createElementNS(ue,"filter",ue);G.setAttribute("id",W),G.setAttribute("color-interpolation-filters","sRGB");const J=u(this,Se).createElementNS(ue,"feComponentTransfer");return G.append(J),ee(this,N,qe).call(this,J,"feFuncR",_),ee(this,N,qe).call(this,J,"feFuncG",y),ee(this,N,qe).call(this,J,"feFuncB",k),u(this,j,Je).append(G),he}addHCMFilter(B,o){var me;const _=`${B}-${o}`;if(u(this,H)===_)return u(this,A);if(be(this,H,_),be(this,A,"none"),(me=u(this,oe))==null||me.remove(),!B||!o)return u(this,A);u(this,j,Je).style.color=B,B=getComputedStyle(u(this,j,Je)).getPropertyValue("color");const y=h(B);B=I.Util.makeHexColor(...y),u(this,j,Je).style.color=o,o=getComputedStyle(u(this,j,Je)).getPropertyValue("color");const k=h(o);if(o=I.Util.makeHexColor(...k),u(this,j,Je).style.color="",B==="#000000"&&o==="#ffffff"||B===o)return u(this,A);const V=new Array(256);for(let Ae=0;Ae<=255;Ae++){const Ee=Ae/255;V[Ae]=Ee<=.03928?Ee/12.92:((Ee+.055)/1.055)**2.4}const W=V.join(","),he=`g_${u(this,ge)}_hcm_filter`,G=be(this,oe,u(this,Se).createElementNS(ue,"filter",ue));G.setAttribute("id",he),G.setAttribute("color-interpolation-filters","sRGB");let J=u(this,Se).createElementNS(ue,"feComponentTransfer");G.append(J),ee(this,N,qe).call(this,J,"feFuncR",W),ee(this,N,qe).call(this,J,"feFuncG",W),ee(this,N,qe).call(this,J,"feFuncB",W);const fe=u(this,Se).createElementNS(ue,"feColorMatrix");fe.setAttribute("type","matrix"),fe.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),G.append(fe),J=u(this,Se).createElementNS(ue,"feComponentTransfer"),G.append(J);const ce=(Ae,Ee)=>{const Me=y[Ae]/255,T=k[Ae]/255,re=new Array(Ee+1);for(let M=0;M<=Ee;M++)re[M]=Me+M/Ee*(T-Me);return re.join(",")};return ee(this,N,qe).call(this,J,"feFuncR",ce(0,5)),ee(this,N,qe).call(this,J,"feFuncG",ce(1,5)),ee(this,N,qe).call(this,J,"feFuncB",ce(2,5)),u(this,j,Je).append(G),be(this,A,`url(#${he})`),u(this,A)}destroy(B=!1){B&&u(this,A)||(u(this,Z)&&(u(this,Z).parentNode.parentNode.remove(),be(this,Z,null)),u(this,de)&&(u(this,de).clear(),be(this,de,null)),be(this,v,0))}}de=new WeakMap,Z=new WeakMap,ge=new WeakMap,Se=new WeakMap,oe=new WeakMap,H=new WeakMap,A=new WeakMap,v=new WeakMap,R=new WeakSet,st=function(){return u(this,de)||be(this,de,new Map)},j=new WeakSet,Je=function(){if(!u(this,Z)){const B=u(this,Se).createElement("div"),{style:o}=B;o.visibility="hidden",o.contain="strict",o.width=o.height=0,o.position="absolute",o.top=o.left=0,o.zIndex=-1;const _=u(this,Se).createElementNS(ue,"svg");_.setAttribute("width",0),_.setAttribute("height",0),be(this,Z,u(this,Se).createElementNS(ue,"defs")),B.append(_),_.append(u(this,Z)),u(this,Se).body.append(B)}return u(this,Z)},N=new WeakSet,qe=function(B,o,_){const y=u(this,Se).createElementNS(ue,o);y.setAttribute("type","discrete"),y.setAttribute("tableValues",_),B.append(y)},a.DOMFilterFactory=F;class f extends S.BaseCanvasFactory{constructor({ownerDocument:U=globalThis.document}={}){super(),this._document=U}_createCanvas(U,B){const o=this._document.createElement("canvas");return o.width=U,o.height=B,o}}a.DOMCanvasFactory=f;async function c(ne,U=!1){if(e(ne,document.baseURI)){const B=await fetch(ne);if(!B.ok)throw new Error(B.statusText);return U?new Uint8Array(await B.arrayBuffer()):(0,I.stringToBytes)(await B.text())}return new Promise((B,o)=>{const _=new XMLHttpRequest;_.open("GET",ne,!0),U&&(_.responseType="arraybuffer"),_.onreadystatechange=()=>{if(_.readyState===XMLHttpRequest.DONE){if(_.status===200||_.status===0){let y;if(U&&_.response?y=new Uint8Array(_.response):!U&&_.responseText&&(y=(0,I.stringToBytes)(_.responseText)),y){B(y);return}}o(new Error(_.statusText))}},_.send(null)})}class x extends S.BaseCMapReaderFactory{_fetchData(U,B){return c(U,this.isCompressed).then(o=>({cMapData:o,compressionType:B}))}}a.DOMCMapReaderFactory=x;class P extends S.BaseStandardFontDataFactory{_fetchData(U){return c(U,!0)}}a.DOMStandardFontDataFactory=P;class g extends S.BaseSVGFactory{_createSVG(U){return document.createElementNS(ue,U)}}a.DOMSVGFactory=g;class i{constructor({viewBox:U,scale:B,rotation:o,offsetX:_=0,offsetY:y=0,dontFlip:k=!1}){this.viewBox=U,this.scale=B,this.rotation=o,this.offsetX=_,this.offsetY=y;const V=(U[2]+U[0])/2,W=(U[3]+U[1])/2;let he,G,J,fe;switch(o%=360,o<0&&(o+=360),o){case 180:he=-1,G=0,J=0,fe=1;break;case 90:he=0,G=1,J=1,fe=0;break;case 270:he=0,G=-1,J=-1,fe=0;break;case 0:he=1,G=0,J=0,fe=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}k&&(J=-J,fe=-fe);let ce,me,Ae,Ee;he===0?(ce=Math.abs(W-U[1])*B+_,me=Math.abs(V-U[0])*B+y,Ae=(U[3]-U[1])*B,Ee=(U[2]-U[0])*B):(ce=Math.abs(V-U[0])*B+_,me=Math.abs(W-U[1])*B+y,Ae=(U[2]-U[0])*B,Ee=(U[3]-U[1])*B),this.transform=[he*B,G*B,J*B,fe*B,ce-he*B*V-J*B*W,me-G*B*V-fe*B*W],this.width=Ae,this.height=Ee}get rawDims(){const{viewBox:U}=this;return(0,I.shadow)(this,"rawDims",{pageWidth:U[2]-U[0],pageHeight:U[3]-U[1],pageX:U[0],pageY:U[1]})}clone({scale:U=this.scale,rotation:B=this.rotation,offsetX:o=this.offsetX,offsetY:_=this.offsetY,dontFlip:y=!1}={}){return new i({viewBox:this.viewBox.slice(),scale:U,rotation:B,offsetX:o,offsetY:_,dontFlip:y})}convertToViewportPoint(U,B){return I.Util.applyTransform([U,B],this.transform)}convertToViewportRectangle(U){const B=I.Util.applyTransform([U[0],U[1]],this.transform),o=I.Util.applyTransform([U[2],U[3]],this.transform);return[B[0],B[1],o[0],o[1]]}convertToPdfPoint(U,B){return I.Util.applyInverseTransform([U,B],this.transform)}}a.PageViewport=i;class d extends I.BaseException{constructor(U,B,o=0){super(U,"RenderingCancelledException"),this.type=B,this.extraDelay=o}}a.RenderingCancelledException=d;function n(ne){const U=ne.length;let B=0;for(;B<U&&ne[B].trim()==="";)B++;return ne.substring(B,B+5).toLowerCase()==="data:"}function l(ne){return typeof ne=="string"&&/\.pdf$/i.test(ne)}function E(ne,U=!1){return U||([ne]=ne.split(/[#?]/,1)),ne.substring(ne.lastIndexOf("/")+1)}function b(ne,U="document.pdf"){if(typeof ne!="string")return U;if(n(ne))return(0,I.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),U;const B=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,o=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,_=B.exec(ne);let y=o.exec(_[1])||o.exec(_[2])||o.exec(_[3]);if(y&&(y=y[0],y.includes("%")))try{y=o.exec(decodeURIComponent(y))[0]}catch{}return y||U}class p{constructor(){Ve(this,"started",Object.create(null));Ve(this,"times",[])}time(U){U in this.started&&(0,I.warn)(`Timer is already running for ${U}`),this.started[U]=Date.now()}timeEnd(U){U in this.started||(0,I.warn)(`Timer has not been started for ${U}`),this.times.push({name:U,start:this.started[U],end:Date.now()}),delete this.started[U]}toString(){const U=[];let B=0;for(const{name:o}of this.times)B=Math.max(o.length,B);for(const{name:o,start:_,end:y}of this.times)U.push(`${o.padEnd(B)} ${y-_}ms
`);return U.join("")}}a.StatTimer=p;function e(ne,U){try{const{protocol:B}=U?new URL(ne,U):new URL(ne);return B==="http:"||B==="https:"}catch{return!1}}function t(ne,U=!1){return new Promise((B,o)=>{const _=document.createElement("script");_.src=ne,_.onload=function(y){U&&_.remove(),B(y)},_.onerror=function(){o(new Error(`Cannot load script at: ${_.src}`))},(document.head||document.documentElement).append(_)})}function r(ne){console.log("Deprecated API usage: "+ne)}let s;class m{static toDateObject(U){if(!U||typeof U!="string")return null;s||(s=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const B=s.exec(U);if(!B)return null;const o=parseInt(B[1],10);let _=parseInt(B[2],10);_=_>=1&&_<=12?_-1:0;let y=parseInt(B[3],10);y=y>=1&&y<=31?y:1;let k=parseInt(B[4],10);k=k>=0&&k<=23?k:0;let V=parseInt(B[5],10);V=V>=0&&V<=59?V:0;let W=parseInt(B[6],10);W=W>=0&&W<=59?W:0;const he=B[7]||"Z";let G=parseInt(B[8],10);G=G>=0&&G<=23?G:0;let J=parseInt(B[9],10)||0;return J=J>=0&&J<=59?J:0,he==="-"?(k+=G,V+=J):he==="+"&&(k-=G,V-=J),new Date(Date.UTC(o,_,y,k,V,W))}}a.PDFDateString=m;function C(ne,{scale:U=1,rotation:B=0}){const{width:o,height:_}=ne.attributes.style,y=[0,0,parseInt(o),parseInt(_)];return new i({viewBox:y,scale:U,rotation:B})}function h(ne){if(ne.startsWith("#")){const U=parseInt(ne.slice(1),16);return[(U&16711680)>>16,(U&65280)>>8,U&255]}return ne.startsWith("rgb(")?ne.slice(4,-1).split(",").map(U=>parseInt(U)):ne.startsWith("rgba(")?ne.slice(5,-1).split(",").map(U=>parseInt(U)).slice(0,3):((0,I.warn)(`Not a valid color format: "${ne}"`),[0,0,0])}function D(ne){const U=document.createElement("span");U.style.visibility="hidden",document.body.append(U);for(const B of ne.keys()){U.style.color=B;const o=window.getComputedStyle(U).color;ne.set(B,h(o))}U.remove()}function te(ne){const{a:U,b:B,c:o,d:_,e:y,f:k}=ne.getTransform();return[U,B,o,_,y,k]}function le(ne){const{a:U,b:B,c:o,d:_,e:y,f:k}=ne.getTransform().invertSelf();return[U,B,o,_,y,k]}function X(ne,U,B=!1,o=!0){if(U instanceof i){const{pageWidth:_,pageHeight:y}=U.rawDims,{style:k}=ne,V=`calc(var(--scale-factor) * ${_}px)`,W=`calc(var(--scale-factor) * ${y}px)`;!B||U.rotation%180===0?(k.width=V,k.height=W):(k.width=W,k.height=V)}o&&ne.setAttribute("data-main-rotation",U.rotation)}},(w,a,Y)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BaseStandardFontDataFactory=a.BaseSVGFactory=a.BaseFilterFactory=a.BaseCanvasFactory=a.BaseCMapReaderFactory=void 0;var S=Y(1);class I{constructor(){this.constructor===I&&(0,S.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(c){return"none"}addHCMFilter(c,x){return"none"}destroy(c=!1){}}a.BaseFilterFactory=I;class ue{constructor(){this.constructor===ue&&(0,S.unreachable)("Cannot initialize BaseCanvasFactory.")}create(c,x){if(c<=0||x<=0)throw new Error("Invalid canvas size");const P=this._createCanvas(c,x);return{canvas:P,context:P.getContext("2d")}}reset(c,x,P){if(!c.canvas)throw new Error("Canvas is not specified");if(x<=0||P<=0)throw new Error("Invalid canvas size");c.canvas.width=x,c.canvas.height=P}destroy(c){if(!c.canvas)throw new Error("Canvas is not specified");c.canvas.width=0,c.canvas.height=0,c.canvas=null,c.context=null}_createCanvas(c,x){(0,S.unreachable)("Abstract method `_createCanvas` called.")}}a.BaseCanvasFactory=ue;class q{constructor({baseUrl:c=null,isCompressed:x=!0}){this.constructor===q&&(0,S.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=c,this.isCompressed=x}async fetch({name:c}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!c)throw new Error("CMap name must be specified.");const x=this.baseUrl+c+(this.isCompressed?".bcmap":""),P=this.isCompressed?S.CMapCompressionType.BINARY:S.CMapCompressionType.NONE;return this._fetchData(x,P).catch(g=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${x}`)})}_fetchData(c,x){(0,S.unreachable)("Abstract method `_fetchData` called.")}}a.BaseCMapReaderFactory=q;class L{constructor({baseUrl:c=null}){this.constructor===L&&(0,S.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=c}async fetch({filename:c}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!c)throw new Error("Font filename must be specified.");const x=`${this.baseUrl}${c}`;return this._fetchData(x).catch(P=>{throw new Error(`Unable to load font data at: ${x}`)})}_fetchData(c){(0,S.unreachable)("Abstract method `_fetchData` called.")}}a.BaseStandardFontDataFactory=L;class F{constructor(){this.constructor===F&&(0,S.unreachable)("Cannot initialize BaseSVGFactory.")}create(c,x,P=!1){if(c<=0||x<=0)throw new Error("Invalid SVG dimensions");const g=this._createSVG("svg:svg");return g.setAttribute("version","1.1"),P||(g.setAttribute("width",`${c}px`),g.setAttribute("height",`${x}px`)),g.setAttribute("preserveAspectRatio","none"),g.setAttribute("viewBox",`0 0 ${c} ${x}`),g}createElement(c){if(typeof c!="string")throw new Error("Invalid SVG element type");return this._createSVG(c)}_createSVG(c){(0,S.unreachable)("Abstract method `_createSVG` called.")}}a.BaseSVGFactory=F},(w,a,Y)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.MurmurHash3_64=void 0;var S=Y(1);const I=3285377520,ue=4294901760,q=65535;class L{constructor(f){this.h1=f?f&4294967295:I,this.h2=f?f&4294967295:I}update(f){let c,x;if(typeof f=="string"){c=new Uint8Array(f.length*2),x=0;for(let r=0,s=f.length;r<s;r++){const m=f.charCodeAt(r);m<=255?c[x++]=m:(c[x++]=m>>>8,c[x++]=m&255)}}else if((0,S.isArrayBuffer)(f))c=f.slice(),x=c.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const P=x>>2,g=x-P*4,i=new Uint32Array(c.buffer,0,P);let d=0,n=0,l=this.h1,E=this.h2;const b=3432918353,p=461845907,e=b&q,t=p&q;for(let r=0;r<P;r++)r&1?(d=i[r],d=d*b&ue|d*e&q,d=d<<15|d>>>17,d=d*p&ue|d*t&q,l^=d,l=l<<13|l>>>19,l=l*5+3864292196):(n=i[r],n=n*b&ue|n*e&q,n=n<<15|n>>>17,n=n*p&ue|n*t&q,E^=n,E=E<<13|E>>>19,E=E*5+3864292196);switch(d=0,g){case 3:d^=c[P*4+2]<<16;case 2:d^=c[P*4+1]<<8;case 1:d^=c[P*4],d=d*b&ue|d*e&q,d=d<<15|d>>>17,d=d*p&ue|d*t&q,P&1?l^=d:E^=d}this.h1=l,this.h2=E}hexdigest(){let f=this.h1,c=this.h2;return f^=c>>>1,f=f*3981806797&ue|f*36045&q,c=c*4283543511&ue|((c<<16|f>>>16)*2950163797&ue)>>>16,f^=c>>>1,f=f*444984403&ue|f*60499&q,c=c*3301882366&ue|((c<<16|f>>>16)*3120437893&ue)>>>16,f^=c>>>1,(f>>>0).toString(16).padStart(8,"0")+(c>>>0).toString(16).padStart(8,"0")}}a.MurmurHash3_64=L},(w,a,Y)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FontLoader=a.FontFaceObject=void 0;var S=Y(1),I=Y(10);class ue{constructor({ownerDocument:F=globalThis.document,styleElement:f=null}){this._document=F,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(F){this.nativeFontFaces.push(F),this._document.fonts.add(F)}insertRule(F){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const f=this.styleElement.sheet;f.insertRule(F,f.cssRules.length)}clear(){for(const F of this.nativeFontFaces)this._document.fonts.delete(F);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(F){if(F.attached||F.missingFile)return;if(F.attached=!0,this.isFontLoadingAPISupported){const c=F.createNativeFontFace();if(c){this.addNativeFontFace(c);try{await c.loaded}catch(x){throw(0,S.warn)(`Failed to load font '${c.family}': '${x}'.`),F.disableFontFace=!0,x}}return}const f=F.createFontFaceRule();if(f){if(this.insertRule(f),this.isSyncFontLoadingSupported)return;await new Promise(c=>{const x=this._queueLoadingCallback(c);this._prepareFontLoadEvent(F,x)})}}get isFontLoadingAPISupported(){var f;const F=!!((f=this._document)!=null&&f.fonts);return(0,S.shadow)(this,"isFontLoadingAPISupported",F)}get isSyncFontLoadingSupported(){let F=!1;return(I.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(F=!0),(0,S.shadow)(this,"isSyncFontLoadingSupported",F)}_queueLoadingCallback(F){function f(){for((0,S.assert)(!x.done,"completeRequest() cannot be called twice."),x.done=!0;c.length>0&&c[0].done;){const P=c.shift();setTimeout(P.callback,0)}}const{loadingRequests:c}=this,x={done:!1,complete:f,callback:F};return c.push(x),x}get _loadTestFont(){const F=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,S.shadow)(this,"_loadTestFont",F)}_prepareFontLoadEvent(F,f){function c(h,D){return h.charCodeAt(D)<<24|h.charCodeAt(D+1)<<16|h.charCodeAt(D+2)<<8|h.charCodeAt(D+3)&255}function x(h,D,te,le){const X=h.substring(0,D),ae=h.substring(D+te);return X+le+ae}let P,g;const i=this._document.createElement("canvas");i.width=1,i.height=1;const d=i.getContext("2d");let n=0;function l(h,D){if(++n>30){(0,S.warn)("Load test font never loaded."),D();return}if(d.font="30px "+h,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(l.bind(null,h,D))}const E=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=x(b,976,E.length,E);const e=16,t=1482184792;let r=c(b,e);for(P=0,g=E.length-3;P<g;P+=4)r=r-t+c(E,P)|0;P<E.length&&(r=r-t+c(E+"XXX",P)|0),b=x(b,e,4,(0,S.string32)(r));const s=`url(data:font/opentype;base64,${btoa(b)});`,m=`@font-face {font-family:"${E}";src:${s}}`;this.insertRule(m);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const h of[F.loadedName,E]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=h,C.append(D)}this._document.body.append(C),l(E,()=>{C.remove(),f.complete()})}}a.FontLoader=ue;class q{constructor(F,{isEvalSupported:f=!0,disableFontFace:c=!1,ignoreErrors:x=!1,inspectFont:P=null}){this.compiledGlyphs=Object.create(null);for(const g in F)this[g]=F[g];this.isEvalSupported=f!==!1,this.disableFontFace=c===!0,this.ignoreErrors=x===!0,this._inspectFont=P}createNativeFontFace(){var f;if(!this.data||this.disableFontFace)return null;let F;if(!this.cssFontInfo)F=new FontFace(this.loadedName,this.data,{});else{const c={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(c.style=`oblique ${this.cssFontInfo.italicAngle}deg`),F=new FontFace(this.cssFontInfo.fontFamily,this.data,c)}return(f=this._inspectFont)==null||f.call(this,this),F}createFontFaceRule(){var x;if(!this.data||this.disableFontFace)return null;const F=(0,S.bytesToString)(this.data),f=`url(data:${this.mimetype};base64,${btoa(F)});`;let c;if(!this.cssFontInfo)c=`@font-face {font-family:"${this.loadedName}";src:${f}}`;else{let P=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(P+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),c=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${P}src:${f}}`}return(x=this._inspectFont)==null||x.call(this,this,f),c}getPathGenerator(F,f){if(this.compiledGlyphs[f]!==void 0)return this.compiledGlyphs[f];let c;try{c=F.get(this.loadedName+"_path_"+f)}catch(x){if(!this.ignoreErrors)throw x;return(0,S.warn)(`getPathGenerator - ignoring character: "${x}".`),this.compiledGlyphs[f]=function(P,g){}}if(this.isEvalSupported&&S.FeatureTest.isEvalSupported){const x=[];for(const P of c){const g=P.args!==void 0?P.args.join(","):"";x.push("c.",P.cmd,"(",g,`);
`)}return this.compiledGlyphs[f]=new Function("c","size",x.join(""))}return this.compiledGlyphs[f]=function(x,P){for(const g of c)g.cmd==="scale"&&(g.args=[P,-P]),x[g.cmd].apply(x,g.args)}}}a.FontFaceObject=q},(w,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isNodeJS=void 0;const Y=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");a.isNodeJS=Y},(w,a,Y)=>{var ge,Lt;Object.defineProperty(a,"__esModule",{value:!0}),a.CanvasGraphics=void 0;var S=Y(1),I=Y(6),ue=Y(12),q=Y(13),L=Y(10);const F=16,f=100,c=4096,x=15,P=10,g=1e3,i=16;function d(H,A){if(H._removeMirroring)throw new Error("Context is already forwarding operations.");H.__originalSave=H.save,H.__originalRestore=H.restore,H.__originalRotate=H.rotate,H.__originalScale=H.scale,H.__originalTranslate=H.translate,H.__originalTransform=H.transform,H.__originalSetTransform=H.setTransform,H.__originalResetTransform=H.resetTransform,H.__originalClip=H.clip,H.__originalMoveTo=H.moveTo,H.__originalLineTo=H.lineTo,H.__originalBezierCurveTo=H.bezierCurveTo,H.__originalRect=H.rect,H.__originalClosePath=H.closePath,H.__originalBeginPath=H.beginPath,H._removeMirroring=()=>{H.save=H.__originalSave,H.restore=H.__originalRestore,H.rotate=H.__originalRotate,H.scale=H.__originalScale,H.translate=H.__originalTranslate,H.transform=H.__originalTransform,H.setTransform=H.__originalSetTransform,H.resetTransform=H.__originalResetTransform,H.clip=H.__originalClip,H.moveTo=H.__originalMoveTo,H.lineTo=H.__originalLineTo,H.bezierCurveTo=H.__originalBezierCurveTo,H.rect=H.__originalRect,H.closePath=H.__originalClosePath,H.beginPath=H.__originalBeginPath,delete H._removeMirroring},H.save=function(){A.save(),this.__originalSave()},H.restore=function(){A.restore(),this.__originalRestore()},H.translate=function(R,$){A.translate(R,$),this.__originalTranslate(R,$)},H.scale=function(R,$){A.scale(R,$),this.__originalScale(R,$)},H.transform=function(R,$,j,se,N,K){A.transform(R,$,j,se,N,K),this.__originalTransform(R,$,j,se,N,K)},H.setTransform=function(R,$,j,se,N,K){A.setTransform(R,$,j,se,N,K),this.__originalSetTransform(R,$,j,se,N,K)},H.resetTransform=function(){A.resetTransform(),this.__originalResetTransform()},H.rotate=function(R){A.rotate(R),this.__originalRotate(R)},H.clip=function(R){A.clip(R),this.__originalClip(R)},H.moveTo=function(v,R){A.moveTo(v,R),this.__originalMoveTo(v,R)},H.lineTo=function(v,R){A.lineTo(v,R),this.__originalLineTo(v,R)},H.bezierCurveTo=function(v,R,$,j,se,N){A.bezierCurveTo(v,R,$,j,se,N),this.__originalBezierCurveTo(v,R,$,j,se,N)},H.rect=function(v,R,$,j){A.rect(v,R,$,j),this.__originalRect(v,R,$,j)},H.closePath=function(){A.closePath(),this.__originalClosePath()},H.beginPath=function(){A.beginPath(),this.__originalBeginPath()}}class n{constructor(A){this.canvasFactory=A,this.cache=Object.create(null)}getCanvas(A,v,R){let $;return this.cache[A]!==void 0?($=this.cache[A],this.canvasFactory.reset($,v,R)):($=this.canvasFactory.create(v,R),this.cache[A]=$),$}delete(A){delete this.cache[A]}clear(){for(const A in this.cache){const v=this.cache[A];this.canvasFactory.destroy(v),delete this.cache[A]}}}function l(H,A,v,R,$,j,se,N,K,ne){const[U,B,o,_,y,k]=(0,I.getCurrentTransform)(H);if(B===0&&o===0){const he=se*U+y,G=Math.round(he),J=N*_+k,fe=Math.round(J),ce=(se+K)*U+y,me=Math.abs(Math.round(ce)-G)||1,Ae=(N+ne)*_+k,Ee=Math.abs(Math.round(Ae)-fe)||1;return H.setTransform(Math.sign(U),0,0,Math.sign(_),G,fe),H.drawImage(A,v,R,$,j,0,0,me,Ee),H.setTransform(U,B,o,_,y,k),[me,Ee]}if(U===0&&_===0){const he=N*o+y,G=Math.round(he),J=se*B+k,fe=Math.round(J),ce=(N+ne)*o+y,me=Math.abs(Math.round(ce)-G)||1,Ae=(se+K)*B+k,Ee=Math.abs(Math.round(Ae)-fe)||1;return H.setTransform(0,Math.sign(B),Math.sign(o),0,G,fe),H.drawImage(A,v,R,$,j,0,0,Ee,me),H.setTransform(U,B,o,_,y,k),[Ee,me]}H.drawImage(A,v,R,$,j,se,N,K,ne);const V=Math.hypot(U,B),W=Math.hypot(o,_);return[V*K,W*ne]}function E(H){const{width:A,height:v}=H;if(A>g||v>g)return null;const R=1e3,$=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),j=A+1;let se=new Uint8Array(j*(v+1)),N,K,ne;const U=A+7&-8;let B=new Uint8Array(U*v),o=0;for(const W of H.data){let he=128;for(;he>0;)B[o++]=W&he?0:255,he>>=1}let _=0;for(o=0,B[o]!==0&&(se[0]=1,++_),K=1;K<A;K++)B[o]!==B[o+1]&&(se[K]=B[o]?2:1,++_),o++;for(B[o]!==0&&(se[K]=2,++_),N=1;N<v;N++){o=N*U,ne=N*j,B[o-U]!==B[o]&&(se[ne]=B[o]?1:8,++_);let W=(B[o]?4:0)+(B[o-U]?8:0);for(K=1;K<A;K++)W=(W>>2)+(B[o+1]?4:0)+(B[o-U+1]?8:0),$[W]&&(se[ne+K]=$[W],++_),o++;if(B[o-U]!==B[o]&&(se[ne+K]=B[o]?2:4,++_),_>R)return null}for(o=U*(v-1),ne=N*j,B[o]!==0&&(se[ne]=8,++_),K=1;K<A;K++)B[o]!==B[o+1]&&(se[ne+K]=B[o]?4:8,++_),o++;if(B[o]!==0&&(se[ne+K]=4,++_),_>R)return null;const y=new Int32Array([0,j,-1,0,-j,0,0,0,1]),k=new Path2D;for(N=0;_&&N<=v;N++){let W=N*j;const he=W+A;for(;W<he&&!se[W];)W++;if(W===he)continue;k.moveTo(W%j,N);const G=W;let J=se[W];do{const fe=y[J];do W+=fe;while(!se[W]);const ce=se[W];ce!==5&&ce!==10?(J=ce,se[W]=0):(J=ce&51*J>>4,se[W]&=J>>2|J<<2),k.lineTo(W%j,W/j|0),se[W]||--_}while(G!==W);--N}return B=null,se=null,function(W){W.save(),W.scale(1/A,-1/v),W.translate(0,-v),W.fill(k),W.beginPath(),W.restore()}}class b{constructor(A,v){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=S.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=S.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=S.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,A,v])}clone(){const A=Object.create(this);return A.clipBox=this.clipBox.slice(),A}setCurrentPoint(A,v){this.x=A,this.y=v}updatePathMinMax(A,v,R){[v,R]=S.Util.applyTransform([v,R],A),this.minX=Math.min(this.minX,v),this.minY=Math.min(this.minY,R),this.maxX=Math.max(this.maxX,v),this.maxY=Math.max(this.maxY,R)}updateRectMinMax(A,v){const R=S.Util.applyTransform(v,A),$=S.Util.applyTransform(v.slice(2),A);this.minX=Math.min(this.minX,R[0],$[0]),this.minY=Math.min(this.minY,R[1],$[1]),this.maxX=Math.max(this.maxX,R[0],$[0]),this.maxY=Math.max(this.maxY,R[1],$[1])}updateScalingPathMinMax(A,v){S.Util.scaleMinMax(A,v),this.minX=Math.min(this.minX,v[0]),this.maxX=Math.max(this.maxX,v[1]),this.minY=Math.min(this.minY,v[2]),this.maxY=Math.max(this.maxY,v[3])}updateCurvePathMinMax(A,v,R,$,j,se,N,K,ne,U){const B=S.Util.bezierBoundingBox(v,R,$,j,se,N,K,ne);if(U){U[0]=Math.min(U[0],B[0],B[2]),U[1]=Math.max(U[1],B[0],B[2]),U[2]=Math.min(U[2],B[1],B[3]),U[3]=Math.max(U[3],B[1],B[3]);return}this.updateRectMinMax(A,B)}getPathBoundingBox(A=ue.PathType.FILL,v=null){const R=[this.minX,this.minY,this.maxX,this.maxY];if(A===ue.PathType.STROKE){v||(0,S.unreachable)("Stroke bounding box must include transform.");const $=S.Util.singularValueDecompose2dScale(v),j=$[0]*this.lineWidth/2,se=$[1]*this.lineWidth/2;R[0]-=j,R[1]-=se,R[2]+=j,R[3]+=se}return R}updateClipFromPath(){const A=S.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(A||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(A){this.clipBox=A,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(A=ue.PathType.FILL,v=null){return S.Util.intersect(this.clipBox,this.getPathBoundingBox(A,v))}}function p(H,A){if(typeof ImageData<"u"&&A instanceof ImageData){H.putImageData(A,0,0);return}const v=A.height,R=A.width,$=v%i,j=(v-$)/i,se=$===0?j:j+1,N=H.createImageData(R,i);let K=0,ne;const U=A.data,B=N.data;let o,_,y,k;if(A.kind===S.ImageKind.GRAYSCALE_1BPP){const V=U.byteLength,W=new Uint32Array(B.buffer,0,B.byteLength>>2),he=W.length,G=R+7>>3,J=4294967295,fe=S.FeatureTest.isLittleEndian?4278190080:255;for(o=0;o<se;o++){for(y=o<j?i:$,ne=0,_=0;_<y;_++){const ce=V-K;let me=0;const Ae=ce>G?R:ce*8-7,Ee=Ae&-8;let Me=0,T=0;for(;me<Ee;me+=8)T=U[K++],W[ne++]=T&128?J:fe,W[ne++]=T&64?J:fe,W[ne++]=T&32?J:fe,W[ne++]=T&16?J:fe,W[ne++]=T&8?J:fe,W[ne++]=T&4?J:fe,W[ne++]=T&2?J:fe,W[ne++]=T&1?J:fe;for(;me<Ae;me++)Me===0&&(T=U[K++],Me=128),W[ne++]=T&Me?J:fe,Me>>=1}for(;ne<he;)W[ne++]=0;H.putImageData(N,0,o*i)}}else if(A.kind===S.ImageKind.RGBA_32BPP){for(_=0,k=R*i*4,o=0;o<j;o++)B.set(U.subarray(K,K+k)),K+=k,H.putImageData(N,0,_),_+=i;o<se&&(k=R*$*4,B.set(U.subarray(K,K+k)),H.putImageData(N,0,_))}else if(A.kind===S.ImageKind.RGB_24BPP)for(y=i,k=R*y,o=0;o<se;o++){for(o>=j&&(y=$,k=R*y),ne=0,_=k;_--;)B[ne++]=U[K++],B[ne++]=U[K++],B[ne++]=U[K++],B[ne++]=255;H.putImageData(N,0,o*i)}else throw new Error(`bad image kind: ${A.kind}`)}function e(H,A){if(A.bitmap){H.drawImage(A.bitmap,0,0);return}const v=A.height,R=A.width,$=v%i,j=(v-$)/i,se=$===0?j:j+1,N=H.createImageData(R,i);let K=0;const ne=A.data,U=N.data;for(let B=0;B<se;B++){const o=B<j?i:$;({srcPos:K}=(0,q.convertBlackAndWhiteToRGBA)({src:ne,srcPos:K,dest:U,width:R,height:o,nonBlackColor:0})),H.putImageData(N,0,B*i)}}function t(H,A){const v=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const R of v)H[R]!==void 0&&(A[R]=H[R]);H.setLineDash!==void 0&&(A.setLineDash(H.getLineDash()),A.lineDashOffset=H.lineDashOffset)}function r(H){H.strokeStyle=H.fillStyle="#000000",H.fillRule="nonzero",H.globalAlpha=1,H.lineWidth=1,H.lineCap="butt",H.lineJoin="miter",H.miterLimit=10,H.globalCompositeOperation="source-over",H.font="10px sans-serif",H.setLineDash!==void 0&&(H.setLineDash([]),H.lineDashOffset=0),L.isNodeJS||(H.filter="none")}function s(H,A,v,R){const $=H.length;for(let j=3;j<$;j+=4){const se=H[j];if(se===0)H[j-3]=A,H[j-2]=v,H[j-1]=R;else if(se<255){const N=255-se;H[j-3]=H[j-3]*se+A*N>>8,H[j-2]=H[j-2]*se+v*N>>8,H[j-1]=H[j-1]*se+R*N>>8}}}function m(H,A,v){const R=H.length,$=1/255;for(let j=3;j<R;j+=4){const se=v?v[H[j]]:H[j];A[j]=A[j]*se*$|0}}function C(H,A,v){const R=H.length;for(let $=3;$<R;$+=4){const j=H[$-3]*77+H[$-2]*152+H[$-1]*28;A[$]=v?A[$]*v[j>>8]>>8:A[$]*j>>16}}function h(H,A,v,R,$,j,se,N,K,ne,U){const B=!!j,o=B?j[0]:0,_=B?j[1]:0,y=B?j[2]:0;let k;$==="Luminosity"?k=C:k=m;const W=Math.min(R,Math.ceil(1048576/v));for(let he=0;he<R;he+=W){const G=Math.min(W,R-he),J=H.getImageData(N-ne,he+(K-U),v,G),fe=A.getImageData(N,he+K,v,G);B&&s(J.data,o,_,y),k(J.data,fe.data,se),A.putImageData(fe,N,he+K)}}function D(H,A,v,R){const $=R[0],j=R[1],se=R[2]-$,N=R[3]-j;se===0||N===0||(h(A.context,v,se,N,A.subtype,A.backdrop,A.transferMap,$,j,A.offsetX,A.offsetY),H.save(),H.globalAlpha=1,H.globalCompositeOperation="source-over",H.setTransform(1,0,0,1,0,0),H.drawImage(v.canvas,0,0),H.restore())}function te(H,A){const v=S.Util.singularValueDecompose2dScale(H);v[0]=Math.fround(v[0]),v[1]=Math.fround(v[1]);const R=Math.fround((globalThis.devicePixelRatio||1)*I.PixelsPerInch.PDF_TO_CSS_UNITS);return A!==void 0?A:v[0]<=R||v[1]<=R}const le=["butt","round","square"],X=["miter","round","bevel"],ae={},de={},oe=class{constructor(A,v,R,$,j,{optionalContentConfig:se,markedContentStack:N=null},K){Q(this,ge);this.ctx=A,this.current=new b(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=v,this.objs=R,this.canvasFactory=$,this.filterFactory=j,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=N||[],this.optionalContentConfig=se,this.cachedCanvases=new n(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=K,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(A,v=null){return typeof A=="string"?A.startsWith("g_")?this.commonObjs.get(A):this.objs.get(A):v}beginDrawing({transform:A,viewport:v,transparency:R=!1,background:$=null}){const j=this.ctx.canvas.width,se=this.ctx.canvas.height,N=this.ctx.fillStyle;if(this.ctx.fillStyle=$||"#ffffff",this.ctx.fillRect(0,0,j,se),this.ctx.fillStyle=N,R){const K=this.cachedCanvases.getCanvas("transparent",j,se);this.compositeCtx=this.ctx,this.transparentCanvas=K.canvas,this.ctx=K.context,this.ctx.save(),this.ctx.transform(...(0,I.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),r(this.ctx),A&&(this.ctx.transform(...A),this.outputScaleX=A[0],this.outputScaleY=A[0]),this.ctx.transform(...v.transform),this.viewportScale=v.scale,this.baseTransform=(0,I.getCurrentTransform)(this.ctx)}executeOperatorList(A,v,R,$){const j=A.argsArray,se=A.fnArray;let N=v||0;const K=j.length;if(K===N)return N;const ne=K-N>P&&typeof R=="function",U=ne?Date.now()+x:0;let B=0;const o=this.commonObjs,_=this.objs;let y;for(;;){if($!==void 0&&N===$.nextBreakPoint)return $.breakIt(N,R),N;if(y=se[N],y!==S.OPS.dependency)this[y].apply(this,j[N]);else for(const k of j[N]){const V=k.startsWith("g_")?o:_;if(!V.has(k))return V.get(k,R),N}if(N++,N===K)return N;if(ne&&++B>P){if(Date.now()>U)return R(),N;B=0}}}endDrawing(A=null){ee(this,ge,Lt).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const v of this._cachedBitmapsMap.values()){for(const R of v.values())typeof HTMLCanvasElement<"u"&&R instanceof HTMLCanvasElement&&(R.width=R.height=0);v.clear()}if(this._cachedBitmapsMap.clear(),A){const v=this.filterFactory.addHCMFilter(A.foreground,A.background);if(v!=="none"){const R=this.ctx.filter;this.ctx.filter=v,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=R}}}_scaleImage(A,v){const R=A.width,$=A.height;let j=Math.max(Math.hypot(v[0],v[1]),1),se=Math.max(Math.hypot(v[2],v[3]),1),N=R,K=$,ne="prescale1",U,B;for(;j>2&&N>1||se>2&&K>1;){let o=N,_=K;j>2&&N>1&&(o=N>=16384?Math.floor(N/2)-1||1:Math.ceil(N/2),j/=N/o),se>2&&K>1&&(_=K>=16384?Math.floor(K/2)-1||1:Math.ceil(K)/2,se/=K/_),U=this.cachedCanvases.getCanvas(ne,o,_),B=U.context,B.clearRect(0,0,o,_),B.drawImage(A,0,0,N,K,0,0,o,_),A=U.canvas,N=o,K=_,ne=ne==="prescale1"?"prescale2":"prescale1"}return{img:A,paintWidth:N,paintHeight:K}}_createMaskCanvas(A){const v=this.ctx,{width:R,height:$}=A,j=this.current.fillColor,se=this.current.patternFill,N=(0,I.getCurrentTransform)(v);let K,ne,U,B;if((A.bitmap||A.data)&&A.count>1){const me=A.bitmap||A.data.buffer;ne=JSON.stringify(se?N:[N.slice(0,4),j]),K=this._cachedBitmapsMap.get(me),K||(K=new Map,this._cachedBitmapsMap.set(me,K));const Ae=K.get(ne);if(Ae&&!se){const Ee=Math.round(Math.min(N[0],N[2])+N[4]),Me=Math.round(Math.min(N[1],N[3])+N[5]);return{canvas:Ae,offsetX:Ee,offsetY:Me}}U=Ae}U||(B=this.cachedCanvases.getCanvas("maskCanvas",R,$),e(B.context,A));let o=S.Util.transform(N,[1/R,0,0,-1/$,0,0]);o=S.Util.transform(o,[1,0,0,1,0,-$]);const _=S.Util.applyTransform([0,0],o),y=S.Util.applyTransform([R,$],o),k=S.Util.normalizeRect([_[0],_[1],y[0],y[1]]),V=Math.round(k[2]-k[0])||1,W=Math.round(k[3]-k[1])||1,he=this.cachedCanvases.getCanvas("fillCanvas",V,W),G=he.context,J=Math.min(_[0],y[0]),fe=Math.min(_[1],y[1]);G.translate(-J,-fe),G.transform(...o),U||(U=this._scaleImage(B.canvas,(0,I.getCurrentTransformInverse)(G)),U=U.img,K&&se&&K.set(ne,U)),G.imageSmoothingEnabled=te((0,I.getCurrentTransform)(G),A.interpolate),l(G,U,0,0,U.width,U.height,0,0,R,$),G.globalCompositeOperation="source-in";const ce=S.Util.transform((0,I.getCurrentTransformInverse)(G),[1,0,0,1,-J,-fe]);return G.fillStyle=se?j.getPattern(v,this,ce,ue.PathType.FILL):j,G.fillRect(0,0,R,$),K&&!se&&(this.cachedCanvases.delete("fillCanvas"),K.set(ne,he.canvas)),{canvas:he.canvas,offsetX:Math.round(J),offsetY:Math.round(fe)}}setLineWidth(A){A!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=A,this.ctx.lineWidth=A}setLineCap(A){this.ctx.lineCap=le[A]}setLineJoin(A){this.ctx.lineJoin=X[A]}setMiterLimit(A){this.ctx.miterLimit=A}setDash(A,v){const R=this.ctx;R.setLineDash!==void 0&&(R.setLineDash(A),R.lineDashOffset=v)}setRenderingIntent(A){}setFlatness(A){}setGState(A){for(const[v,R]of A)switch(v){case"LW":this.setLineWidth(R);break;case"LC":this.setLineCap(R);break;case"LJ":this.setLineJoin(R);break;case"ML":this.setMiterLimit(R);break;case"D":this.setDash(R[0],R[1]);break;case"RI":this.setRenderingIntent(R);break;case"FL":this.setFlatness(R);break;case"Font":this.setFont(R[0],R[1]);break;case"CA":this.current.strokeAlpha=R;break;case"ca":this.current.fillAlpha=R,this.ctx.globalAlpha=R;break;case"BM":this.ctx.globalCompositeOperation=R;break;case"SMask":this.current.activeSMask=R?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(R);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const A=this.inSMaskMode;this.current.activeSMask&&!A?this.beginSMaskMode():!this.current.activeSMask&&A&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const A=this.ctx.canvas.width,v=this.ctx.canvas.height,R="smaskGroupAt"+this.groupLevel,$=this.cachedCanvases.getCanvas(R,A,v);this.suspendedCtx=this.ctx,this.ctx=$.context;const j=this.ctx;j.setTransform(...(0,I.getCurrentTransform)(this.suspendedCtx)),t(this.suspendedCtx,j),d(j,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),t(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(A){if(!this.current.activeSMask)return;A?(A[0]=Math.floor(A[0]),A[1]=Math.floor(A[1]),A[2]=Math.ceil(A[2]),A[3]=Math.ceil(A[3])):A=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const v=this.current.activeSMask,R=this.suspendedCtx;D(R,v,this.ctx,A),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(t(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const A=this.current;this.stateStack.push(A),this.current=A.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),t(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(A,v,R,$,j,se){this.ctx.transform(A,v,R,$,j,se),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(A,v,R){const $=this.ctx,j=this.current;let se=j.x,N=j.y,K,ne;const U=(0,I.getCurrentTransform)($),B=U[0]===0&&U[3]===0||U[1]===0&&U[2]===0,o=B?R.slice(0):null;for(let _=0,y=0,k=A.length;_<k;_++)switch(A[_]|0){case S.OPS.rectangle:se=v[y++],N=v[y++];const V=v[y++],W=v[y++],he=se+V,G=N+W;$.moveTo(se,N),V===0||W===0?$.lineTo(he,G):($.lineTo(he,N),$.lineTo(he,G),$.lineTo(se,G)),B||j.updateRectMinMax(U,[se,N,he,G]),$.closePath();break;case S.OPS.moveTo:se=v[y++],N=v[y++],$.moveTo(se,N),B||j.updatePathMinMax(U,se,N);break;case S.OPS.lineTo:se=v[y++],N=v[y++],$.lineTo(se,N),B||j.updatePathMinMax(U,se,N);break;case S.OPS.curveTo:K=se,ne=N,se=v[y+4],N=v[y+5],$.bezierCurveTo(v[y],v[y+1],v[y+2],v[y+3],se,N),j.updateCurvePathMinMax(U,K,ne,v[y],v[y+1],v[y+2],v[y+3],se,N,o),y+=6;break;case S.OPS.curveTo2:K=se,ne=N,$.bezierCurveTo(se,N,v[y],v[y+1],v[y+2],v[y+3]),j.updateCurvePathMinMax(U,K,ne,se,N,v[y],v[y+1],v[y+2],v[y+3],o),se=v[y+2],N=v[y+3],y+=4;break;case S.OPS.curveTo3:K=se,ne=N,se=v[y+2],N=v[y+3],$.bezierCurveTo(v[y],v[y+1],se,N,se,N),j.updateCurvePathMinMax(U,K,ne,v[y],v[y+1],se,N,se,N,o),y+=4;break;case S.OPS.closePath:$.closePath();break}B&&j.updateScalingPathMinMax(U,o),j.setCurrentPoint(se,N)}closePath(){this.ctx.closePath()}stroke(A=!0){const v=this.ctx,R=this.current.strokeColor;v.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof R=="object"&&(R!=null&&R.getPattern)?(v.save(),v.strokeStyle=R.getPattern(v,this,(0,I.getCurrentTransformInverse)(v),ue.PathType.STROKE),this.rescaleAndStroke(!1),v.restore()):this.rescaleAndStroke(!0)),A&&this.consumePath(this.current.getClippedPathBoundingBox()),v.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(A=!0){const v=this.ctx,R=this.current.fillColor,$=this.current.patternFill;let j=!1;$&&(v.save(),v.fillStyle=R.getPattern(v,this,(0,I.getCurrentTransformInverse)(v),ue.PathType.FILL),j=!0);const se=this.current.getClippedPathBoundingBox();this.contentVisible&&se!==null&&(this.pendingEOFill?(v.fill("evenodd"),this.pendingEOFill=!1):v.fill()),j&&v.restore(),A&&this.consumePath(se)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ae}eoClip(){this.pendingClip=de}beginText(){this.current.textMatrix=S.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const A=this.pendingTextPaths,v=this.ctx;if(A===void 0){v.beginPath();return}v.save(),v.beginPath();for(const R of A)v.setTransform(...R.transform),v.translate(R.x,R.y),R.addToPath(v,R.fontSize);v.restore(),v.clip(),v.beginPath(),delete this.pendingTextPaths}setCharSpacing(A){this.current.charSpacing=A}setWordSpacing(A){this.current.wordSpacing=A}setHScale(A){this.current.textHScale=A/100}setLeading(A){this.current.leading=-A}setFont(A,v){const R=this.commonObjs.get(A),$=this.current;if(!R)throw new Error(`Can't find font for ${A}`);if($.fontMatrix=R.fontMatrix||S.FONT_IDENTITY_MATRIX,($.fontMatrix[0]===0||$.fontMatrix[3]===0)&&(0,S.warn)("Invalid font matrix for font "+A),v<0?(v=-v,$.fontDirection=-1):$.fontDirection=1,this.current.font=R,this.current.fontSize=v,R.isType3Font)return;const j=R.loadedName||"sans-serif";let se="normal";R.black?se="900":R.bold&&(se="bold");const N=R.italic?"italic":"normal",K=`"${j}", ${R.fallbackName}`;let ne=v;v<F?ne=F:v>f&&(ne=f),this.current.fontSizeScale=v/ne,this.ctx.font=`${N} ${se} ${ne}px ${K}`}setTextRenderingMode(A){this.current.textRenderingMode=A}setTextRise(A){this.current.textRise=A}moveText(A,v){this.current.x=this.current.lineX+=A,this.current.y=this.current.lineY+=v}setLeadingMoveText(A,v){this.setLeading(-v),this.moveText(A,v)}setTextMatrix(A,v,R,$,j,se){this.current.textMatrix=[A,v,R,$,j,se],this.current.textMatrixScale=Math.hypot(A,v),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(A,v,R,$){const j=this.ctx,se=this.current,N=se.font,K=se.textRenderingMode,ne=se.fontSize/se.fontSizeScale,U=K&S.TextRenderingMode.FILL_STROKE_MASK,B=!!(K&S.TextRenderingMode.ADD_TO_PATH_FLAG),o=se.patternFill&&!N.missingFile;let _;(N.disableFontFace||B||o)&&(_=N.getPathGenerator(this.commonObjs,A)),N.disableFontFace||o?(j.save(),j.translate(v,R),j.beginPath(),_(j,ne),$&&j.setTransform(...$),(U===S.TextRenderingMode.FILL||U===S.TextRenderingMode.FILL_STROKE)&&j.fill(),(U===S.TextRenderingMode.STROKE||U===S.TextRenderingMode.FILL_STROKE)&&j.stroke(),j.restore()):((U===S.TextRenderingMode.FILL||U===S.TextRenderingMode.FILL_STROKE)&&j.fillText(A,v,R),(U===S.TextRenderingMode.STROKE||U===S.TextRenderingMode.FILL_STROKE)&&j.strokeText(A,v,R)),B&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,I.getCurrentTransform)(j),x:v,y:R,fontSize:ne,addToPath:_})}get isFontSubpixelAAEnabled(){const{context:A}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);A.scale(1.5,1),A.fillText("I",0,10);const v=A.getImageData(0,0,10,10).data;let R=!1;for(let $=3;$<v.length;$+=4)if(v[$]>0&&v[$]<255){R=!0;break}return(0,S.shadow)(this,"isFontSubpixelAAEnabled",R)}showText(A){const v=this.current,R=v.font;if(R.isType3Font)return this.showType3Text(A);const $=v.fontSize;if($===0)return;const j=this.ctx,se=v.fontSizeScale,N=v.charSpacing,K=v.wordSpacing,ne=v.fontDirection,U=v.textHScale*ne,B=A.length,o=R.vertical,_=o?1:-1,y=R.defaultVMetrics,k=$*v.fontMatrix[0],V=v.textRenderingMode===S.TextRenderingMode.FILL&&!R.disableFontFace&&!v.patternFill;j.save(),j.transform(...v.textMatrix),j.translate(v.x,v.y+v.textRise),ne>0?j.scale(U,-1):j.scale(U,1);let W;if(v.patternFill){j.save();const ce=v.fillColor.getPattern(j,this,(0,I.getCurrentTransformInverse)(j),ue.PathType.FILL);W=(0,I.getCurrentTransform)(j),j.restore(),j.fillStyle=ce}let he=v.lineWidth;const G=v.textMatrixScale;if(G===0||he===0){const ce=v.textRenderingMode&S.TextRenderingMode.FILL_STROKE_MASK;(ce===S.TextRenderingMode.STROKE||ce===S.TextRenderingMode.FILL_STROKE)&&(he=this.getSinglePixelWidth())}else he/=G;if(se!==1&&(j.scale(se,se),he/=se),j.lineWidth=he,R.isInvalidPDFjsFont){const ce=[];let me=0;for(const Ae of A)ce.push(Ae.unicode),me+=Ae.width;j.fillText(ce.join(""),0,0),v.x+=me*k*U,j.restore(),this.compose();return}let J=0,fe;for(fe=0;fe<B;++fe){const ce=A[fe];if(typeof ce=="number"){J+=_*ce*$/1e3;continue}let me=!1;const Ae=(ce.isSpace?K:0)+N,Ee=ce.fontChar,Me=ce.accent;let T,re,M=ce.width;if(o){const z=ce.vmetric||y,_e=-(ce.vmetric?z[1]:M*.5)*k,we=z[2]*k;M=z?-z[0]:M,T=_e/se,re=(J+we)/se}else T=J/se,re=0;if(R.remeasure&&M>0){const z=j.measureText(Ee).width*1e3/$*se;if(M<z&&this.isFontSubpixelAAEnabled){const _e=M/z;me=!0,j.save(),j.scale(_e,1),T/=_e}else M!==z&&(T+=(M-z)/2e3*$/se)}if(this.contentVisible&&(ce.isInFont||R.missingFile)){if(V&&!Me)j.fillText(Ee,T,re);else if(this.paintChar(Ee,T,re,W),Me){const z=T+$*Me.offset.x/se,_e=re-$*Me.offset.y/se;this.paintChar(Me.fontChar,z,_e,W)}}let O;o?O=M*k-Ae*ne:O=M*k+Ae*ne,J+=O,me&&j.restore()}o?v.y-=J:v.x+=J*U,j.restore(),this.compose()}showType3Text(A){const v=this.ctx,R=this.current,$=R.font,j=R.fontSize,se=R.fontDirection,N=$.vertical?1:-1,K=R.charSpacing,ne=R.wordSpacing,U=R.textHScale*se,B=R.fontMatrix||S.FONT_IDENTITY_MATRIX,o=A.length,_=R.textRenderingMode===S.TextRenderingMode.INVISIBLE;let y,k,V,W;if(!(_||j===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,v.save(),v.transform(...R.textMatrix),v.translate(R.x,R.y),v.scale(U,se),y=0;y<o;++y){if(k=A[y],typeof k=="number"){W=N*k*j/1e3,this.ctx.translate(W,0),R.x+=W*U;continue}const he=(k.isSpace?ne:0)+K,G=$.charProcOperatorList[k.operatorListId];if(!G){(0,S.warn)(`Type3 character "${k.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=k,this.save(),v.scale(j,j),v.transform(...B),this.executeOperatorList(G),this.restore()),V=S.Util.applyTransform([k.width,0],B)[0]*j+he,v.translate(V,0),R.x+=V*U}v.restore(),this.processingType3=null}}setCharWidth(A,v){}setCharWidthAndBounds(A,v,R,$,j,se){this.ctx.rect(R,$,j-R,se-$),this.ctx.clip(),this.endPath()}getColorN_Pattern(A){let v;if(A[0]==="TilingPattern"){const R=A[1],$=this.baseTransform||(0,I.getCurrentTransform)(this.ctx),j={createCanvasGraphics:se=>new oe(se,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};v=new ue.TilingPattern(A,R,this.ctx,j,$)}else v=this._getPattern(A[1],A[2]);return v}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(A,v,R){const $=S.Util.makeHexColor(A,v,R);this.ctx.strokeStyle=$,this.current.strokeColor=$}setFillRGBColor(A,v,R){const $=S.Util.makeHexColor(A,v,R);this.ctx.fillStyle=$,this.current.fillColor=$,this.current.patternFill=!1}_getPattern(A,v=null){let R;return this.cachedPatterns.has(A)?R=this.cachedPatterns.get(A):(R=(0,ue.getShadingPattern)(this.getObject(A)),this.cachedPatterns.set(A,R)),v&&(R.matrix=v),R}shadingFill(A){if(!this.contentVisible)return;const v=this.ctx;this.save();const R=this._getPattern(A);v.fillStyle=R.getPattern(v,this,(0,I.getCurrentTransformInverse)(v),ue.PathType.SHADING);const $=(0,I.getCurrentTransformInverse)(v);if($){const j=v.canvas,se=j.width,N=j.height,K=S.Util.applyTransform([0,0],$),ne=S.Util.applyTransform([0,N],$),U=S.Util.applyTransform([se,0],$),B=S.Util.applyTransform([se,N],$),o=Math.min(K[0],ne[0],U[0],B[0]),_=Math.min(K[1],ne[1],U[1],B[1]),y=Math.max(K[0],ne[0],U[0],B[0]),k=Math.max(K[1],ne[1],U[1],B[1]);this.ctx.fillRect(o,_,y-o,k-_)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,S.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,S.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(A,v){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(A)&&A.length===6&&this.transform(...A),this.baseTransform=(0,I.getCurrentTransform)(this.ctx),v)){const R=v[2]-v[0],$=v[3]-v[1];this.ctx.rect(v[0],v[1],R,$),this.current.updateRectMinMax((0,I.getCurrentTransform)(this.ctx),v),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(A){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const v=this.ctx;A.isolated||(0,S.info)("TODO: Support non-isolated groups."),A.knockout&&(0,S.warn)("Knockout groups not supported.");const R=(0,I.getCurrentTransform)(v);if(A.matrix&&v.transform(...A.matrix),!A.bbox)throw new Error("Bounding box is required.");let $=S.Util.getAxialAlignedBoundingBox(A.bbox,(0,I.getCurrentTransform)(v));const j=[0,0,v.canvas.width,v.canvas.height];$=S.Util.intersect($,j)||[0,0,0,0];const se=Math.floor($[0]),N=Math.floor($[1]);let K=Math.max(Math.ceil($[2])-se,1),ne=Math.max(Math.ceil($[3])-N,1),U=1,B=1;K>c&&(U=K/c,K=c),ne>c&&(B=ne/c,ne=c),this.current.startNewPathAndClipBox([0,0,K,ne]);let o="groupAt"+this.groupLevel;A.smask&&(o+="_smask_"+this.smaskCounter++%2);const _=this.cachedCanvases.getCanvas(o,K,ne),y=_.context;y.scale(1/U,1/B),y.translate(-se,-N),y.transform(...R),A.smask?this.smaskStack.push({canvas:_.canvas,context:y,offsetX:se,offsetY:N,scaleX:U,scaleY:B,subtype:A.smask.subtype,backdrop:A.smask.backdrop,transferMap:A.smask.transferMap||null,startTransformInverse:null}):(v.setTransform(1,0,0,1,0,0),v.translate(se,N),v.scale(U,B),v.save()),t(v,y),this.ctx=y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(v),this.groupLevel++}endGroup(A){if(!this.contentVisible)return;this.groupLevel--;const v=this.ctx,R=this.groupStack.pop();if(this.ctx=R,this.ctx.imageSmoothingEnabled=!1,A.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const $=(0,I.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...$);const j=S.Util.getAxialAlignedBoundingBox([0,0,v.canvas.width,v.canvas.height],$);this.ctx.drawImage(v.canvas,0,0),this.ctx.restore(),this.compose(j)}}beginAnnotation(A,v,R,$,j){if(ee(this,ge,Lt).call(this),r(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(v)&&v.length===4){const se=v[2]-v[0],N=v[3]-v[1];if(j&&this.annotationCanvasMap){R=R.slice(),R[4]-=v[0],R[5]-=v[1],v=v.slice(),v[0]=v[1]=0,v[2]=se,v[3]=N;const[K,ne]=S.Util.singularValueDecompose2dScale((0,I.getCurrentTransform)(this.ctx)),{viewportScale:U}=this,B=Math.ceil(se*this.outputScaleX*U),o=Math.ceil(N*this.outputScaleY*U);this.annotationCanvas=this.canvasFactory.create(B,o);const{canvas:_,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(A,_),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.setTransform(K,0,0,-ne,0,N*ne),r(this.ctx)}else r(this.ctx),this.ctx.rect(v[0],v[1],se,N),this.ctx.clip(),this.endPath()}this.current=new b(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...R),this.transform(...$)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(A){if(!this.contentVisible)return;const v=A.count;A=this.getObject(A.data,A),A.count=v;const R=this.ctx,$=this.processingType3;if($&&($.compiled===void 0&&($.compiled=E(A)),$.compiled)){$.compiled(R);return}const j=this._createMaskCanvas(A),se=j.canvas;R.save(),R.setTransform(1,0,0,1,0,0),R.drawImage(se,j.offsetX,j.offsetY),R.restore(),this.compose()}paintImageMaskXObjectRepeat(A,v,R=0,$=0,j,se){if(!this.contentVisible)return;A=this.getObject(A.data,A);const N=this.ctx;N.save();const K=(0,I.getCurrentTransform)(N);N.transform(v,R,$,j,0,0);const ne=this._createMaskCanvas(A);N.setTransform(1,0,0,1,ne.offsetX-K[4],ne.offsetY-K[5]);for(let U=0,B=se.length;U<B;U+=2){const o=S.Util.transform(K,[v,R,$,j,se[U],se[U+1]]),[_,y]=S.Util.applyTransform([0,0],o);N.drawImage(ne.canvas,_,y)}N.restore(),this.compose()}paintImageMaskXObjectGroup(A){if(!this.contentVisible)return;const v=this.ctx,R=this.current.fillColor,$=this.current.patternFill;for(const j of A){const{data:se,width:N,height:K,transform:ne}=j,U=this.cachedCanvases.getCanvas("maskCanvas",N,K),B=U.context;B.save();const o=this.getObject(se,j);e(B,o),B.globalCompositeOperation="source-in",B.fillStyle=$?R.getPattern(B,this,(0,I.getCurrentTransformInverse)(v),ue.PathType.FILL):R,B.fillRect(0,0,N,K),B.restore(),v.save(),v.transform(...ne),v.scale(1,-1),l(v,U.canvas,0,0,N,K,0,-1,1,1),v.restore()}this.compose()}paintImageXObject(A){if(!this.contentVisible)return;const v=this.getObject(A);if(!v){(0,S.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(v)}paintImageXObjectRepeat(A,v,R,$){if(!this.contentVisible)return;const j=this.getObject(A);if(!j){(0,S.warn)("Dependent image isn't ready yet");return}const se=j.width,N=j.height,K=[];for(let ne=0,U=$.length;ne<U;ne+=2)K.push({transform:[v,0,0,R,$[ne],$[ne+1]],x:0,y:0,w:se,h:N});this.paintInlineImageXObjectGroup(j,K)}applyTransferMapsToCanvas(A){return this.current.transferMaps!=="none"&&(A.filter=this.current.transferMaps,A.drawImage(A.canvas,0,0),A.filter="none"),A.canvas}applyTransferMapsToBitmap(A){if(this.current.transferMaps==="none")return A.bitmap;const{bitmap:v,width:R,height:$}=A,j=this.cachedCanvases.getCanvas("inlineImage",R,$),se=j.context;return se.filter=this.current.transferMaps,se.drawImage(v,0,0),se.filter="none",j.canvas}paintInlineImageXObject(A){if(!this.contentVisible)return;const v=A.width,R=A.height,$=this.ctx;this.save(),L.isNodeJS||($.filter="none"),$.scale(1/v,-1/R);let j;if(A.bitmap)j=this.applyTransferMapsToBitmap(A);else if(typeof HTMLElement=="function"&&A instanceof HTMLElement||!A.data)j=A;else{const K=this.cachedCanvases.getCanvas("inlineImage",v,R).context;p(K,A),j=this.applyTransferMapsToCanvas(K)}const se=this._scaleImage(j,(0,I.getCurrentTransformInverse)($));$.imageSmoothingEnabled=te((0,I.getCurrentTransform)($),A.interpolate),l($,se.img,0,0,se.paintWidth,se.paintHeight,0,-R,v,R),this.compose(),this.restore()}paintInlineImageXObjectGroup(A,v){if(!this.contentVisible)return;const R=this.ctx;let $;if(A.bitmap)$=A.bitmap;else{const j=A.width,se=A.height,K=this.cachedCanvases.getCanvas("inlineImage",j,se).context;p(K,A),$=this.applyTransferMapsToCanvas(K)}for(const j of v)R.save(),R.transform(...j.transform),R.scale(1,-1),l(R,$,j.x,j.y,j.w,j.h,0,-1,1,1),R.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(A){}markPointProps(A,v){}beginMarkedContent(A){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(A,v){A==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(v)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(A){const v=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(A);const R=this.ctx;this.pendingClip&&(v||(this.pendingClip===de?R.clip("evenodd"):R.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),R.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const A=(0,I.getCurrentTransform)(this.ctx);if(A[1]===0&&A[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(A[0]),Math.abs(A[3]));else{const v=Math.abs(A[0]*A[3]-A[2]*A[1]),R=Math.hypot(A[0],A[2]),$=Math.hypot(A[1],A[3]);this._cachedGetSinglePixelWidth=Math.max(R,$)/v}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:A}=this.current,v=(0,I.getCurrentTransform)(this.ctx);let R,$;if(v[1]===0&&v[2]===0){const j=Math.abs(v[0]),se=Math.abs(v[3]);if(A===0)R=1/j,$=1/se;else{const N=j*A,K=se*A;R=N<1?1/N:1,$=K<1?1/K:1}}else{const j=Math.abs(v[0]*v[3]-v[2]*v[1]),se=Math.hypot(v[0],v[1]),N=Math.hypot(v[2],v[3]);if(A===0)R=N/j,$=se/j;else{const K=A*j;R=N>K?N/K:1,$=se>K?se/K:1}}this._cachedScaleForStroking=[R,$]}return this._cachedScaleForStroking}rescaleAndStroke(A){const{ctx:v}=this,{lineWidth:R}=this.current,[$,j]=this.getScaleForStroking();if(v.lineWidth=R||1,$===1&&j===1){v.stroke();return}let se,N,K;A&&(se=(0,I.getCurrentTransform)(v),N=v.getLineDash().slice(),K=v.lineDashOffset),v.scale($,j);const ne=Math.max($,j);v.setLineDash(v.getLineDash().map(U=>U/ne)),v.lineDashOffset/=ne,v.stroke(),A&&(v.setTransform(...se),v.setLineDash(N),v.lineDashOffset=K)}isContentVisible(){for(let A=this.markedContentStack.length-1;A>=0;A--)if(!this.markedContentStack[A].visible)return!1;return!0}};let Z=oe;ge=new WeakSet,Lt=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},a.CanvasGraphics=Z;for(const H in S.OPS)Z.prototype[H]!==void 0&&(Z.prototype[S.OPS[H]]=Z.prototype[H])},(w,a,Y)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TilingPattern=a.PathType=void 0,a.getShadingPattern=g;var S=Y(1),I=Y(6);const ue={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};a.PathType=ue;function q(n,l){if(!l)return;const E=l[2]-l[0],b=l[3]-l[1],p=new Path2D;p.rect(l[0],l[1],E,b),n.clip(p)}class L{constructor(){this.constructor===L&&(0,S.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,S.unreachable)("Abstract method `getPattern` called.")}}class F extends L{constructor(l){super(),this._type=l[1],this._bbox=l[2],this._colorStops=l[3],this._p0=l[4],this._p1=l[5],this._r0=l[6],this._r1=l[7],this.matrix=null}_createGradient(l){let E;this._type==="axial"?E=l.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(E=l.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const b of this._colorStops)E.addColorStop(b[0],b[1]);return E}getPattern(l,E,b,p){let e;if(p===ue.STROKE||p===ue.FILL){const t=E.current.getClippedPathBoundingBox(p,(0,I.getCurrentTransform)(l))||[0,0,0,0],r=Math.ceil(t[2]-t[0])||1,s=Math.ceil(t[3]-t[1])||1,m=E.cachedCanvases.getCanvas("pattern",r,s,!0),C=m.context;C.clearRect(0,0,C.canvas.width,C.canvas.height),C.beginPath(),C.rect(0,0,C.canvas.width,C.canvas.height),C.translate(-t[0],-t[1]),b=S.Util.transform(b,[1,0,0,1,t[0],t[1]]),C.transform(...E.baseTransform),this.matrix&&C.transform(...this.matrix),q(C,this._bbox),C.fillStyle=this._createGradient(C),C.fill(),e=l.createPattern(m.canvas,"no-repeat");const h=new DOMMatrix(b);e.setTransform(h)}else q(l,this._bbox),e=this._createGradient(l);return e}}function f(n,l,E,b,p,e,t,r){const s=l.coords,m=l.colors,C=n.data,h=n.width*4;let D;s[E+1]>s[b+1]&&(D=E,E=b,b=D,D=e,e=t,t=D),s[b+1]>s[p+1]&&(D=b,b=p,p=D,D=t,t=r,r=D),s[E+1]>s[b+1]&&(D=E,E=b,b=D,D=e,e=t,t=D);const te=(s[E]+l.offsetX)*l.scaleX,le=(s[E+1]+l.offsetY)*l.scaleY,X=(s[b]+l.offsetX)*l.scaleX,ae=(s[b+1]+l.offsetY)*l.scaleY,de=(s[p]+l.offsetX)*l.scaleX,Z=(s[p+1]+l.offsetY)*l.scaleY;if(le>=Z)return;const ge=m[e],Se=m[e+1],oe=m[e+2],H=m[t],A=m[t+1],v=m[t+2],R=m[r],$=m[r+1],j=m[r+2],se=Math.round(le),N=Math.round(Z);let K,ne,U,B,o,_,y,k;for(let V=se;V<=N;V++){if(V<ae){let fe;V<le?fe=0:fe=(le-V)/(le-ae),K=te-(te-X)*fe,ne=ge-(ge-H)*fe,U=Se-(Se-A)*fe,B=oe-(oe-v)*fe}else{let fe;V>Z?fe=1:ae===Z?fe=0:fe=(ae-V)/(ae-Z),K=X-(X-de)*fe,ne=H-(H-R)*fe,U=A-(A-$)*fe,B=v-(v-j)*fe}let W;V<le?W=0:V>Z?W=1:W=(le-V)/(le-Z),o=te-(te-de)*W,_=ge-(ge-R)*W,y=Se-(Se-$)*W,k=oe-(oe-j)*W;const he=Math.round(Math.min(K,o)),G=Math.round(Math.max(K,o));let J=h*V+he*4;for(let fe=he;fe<=G;fe++)W=(K-fe)/(K-o),W<0?W=0:W>1&&(W=1),C[J++]=ne-(ne-_)*W|0,C[J++]=U-(U-y)*W|0,C[J++]=B-(B-k)*W|0,C[J++]=255}}function c(n,l,E){const b=l.coords,p=l.colors;let e,t;switch(l.type){case"lattice":const r=l.verticesPerRow,s=Math.floor(b.length/r)-1,m=r-1;for(e=0;e<s;e++){let C=e*r;for(let h=0;h<m;h++,C++)f(n,E,b[C],b[C+1],b[C+r],p[C],p[C+1],p[C+r]),f(n,E,b[C+r+1],b[C+1],b[C+r],p[C+r+1],p[C+1],p[C+r])}break;case"triangles":for(e=0,t=b.length;e<t;e+=3)f(n,E,b[e],b[e+1],b[e+2],p[e],p[e+1],p[e+2]);break;default:throw new Error("illegal figure")}}class x extends L{constructor(l){super(),this._coords=l[2],this._colors=l[3],this._figures=l[4],this._bounds=l[5],this._bbox=l[7],this._background=l[8],this.matrix=null}_createMeshCanvas(l,E,b){const r=Math.floor(this._bounds[0]),s=Math.floor(this._bounds[1]),m=Math.ceil(this._bounds[2])-r,C=Math.ceil(this._bounds[3])-s,h=Math.min(Math.ceil(Math.abs(m*l[0]*1.1)),3e3),D=Math.min(Math.ceil(Math.abs(C*l[1]*1.1)),3e3),te=m/h,le=C/D,X={coords:this._coords,colors:this._colors,offsetX:-r,offsetY:-s,scaleX:1/te,scaleY:1/le},ae=h+2*2,de=D+2*2,Z=b.getCanvas("mesh",ae,de,!1),ge=Z.context,Se=ge.createImageData(h,D);if(E){const H=Se.data;for(let A=0,v=H.length;A<v;A+=4)H[A]=E[0],H[A+1]=E[1],H[A+2]=E[2],H[A+3]=255}for(const H of this._figures)c(Se,H,X);return ge.putImageData(Se,2,2),{canvas:Z.canvas,offsetX:r-2*te,offsetY:s-2*le,scaleX:te,scaleY:le}}getPattern(l,E,b,p){q(l,this._bbox);let e;if(p===ue.SHADING)e=S.Util.singularValueDecompose2dScale((0,I.getCurrentTransform)(l));else if(e=S.Util.singularValueDecompose2dScale(E.baseTransform),this.matrix){const r=S.Util.singularValueDecompose2dScale(this.matrix);e=[e[0]*r[0],e[1]*r[1]]}const t=this._createMeshCanvas(e,p===ue.SHADING?null:this._background,E.cachedCanvases);return p!==ue.SHADING&&(l.setTransform(...E.baseTransform),this.matrix&&l.transform(...this.matrix)),l.translate(t.offsetX,t.offsetY),l.scale(t.scaleX,t.scaleY),l.createPattern(t.canvas,"no-repeat")}}class P extends L{getPattern(){return"hotpink"}}function g(n){switch(n[0]){case"RadialAxial":return new F(n);case"Mesh":return new x(n);case"Dummy":return new P}throw new Error(`Unknown IR type: ${n[0]}`)}const i={COLORED:1,UNCOLORED:2};class d{static get MAX_PATTERN_SIZE(){return(0,S.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(l,E,b,p,e){this.operatorList=l[2],this.matrix=l[3]||[1,0,0,1,0,0],this.bbox=l[4],this.xstep=l[5],this.ystep=l[6],this.paintType=l[7],this.tilingType=l[8],this.color=E,this.ctx=b,this.canvasGraphicsFactory=p,this.baseTransform=e}createPatternCanvas(l){const E=this.operatorList,b=this.bbox,p=this.xstep,e=this.ystep,t=this.paintType,r=this.tilingType,s=this.color,m=this.canvasGraphicsFactory;(0,S.info)("TilingType: "+r);const C=b[0],h=b[1],D=b[2],te=b[3],le=S.Util.singularValueDecompose2dScale(this.matrix),X=S.Util.singularValueDecompose2dScale(this.baseTransform),ae=[le[0]*X[0],le[1]*X[1]],de=this.getSizeAndScale(p,this.ctx.canvas.width,ae[0]),Z=this.getSizeAndScale(e,this.ctx.canvas.height,ae[1]),ge=l.cachedCanvases.getCanvas("pattern",de.size,Z.size,!0),Se=ge.context,oe=m.createCanvasGraphics(Se);oe.groupLevel=l.groupLevel,this.setFillAndStrokeStyleToContext(oe,t,s);let H=C,A=h,v=D,R=te;return C<0&&(H=0,v+=Math.abs(C)),h<0&&(A=0,R+=Math.abs(h)),Se.translate(-(de.scale*H),-(Z.scale*A)),oe.transform(de.scale,0,0,Z.scale,0,0),Se.save(),this.clipBbox(oe,H,A,v,R),oe.baseTransform=(0,I.getCurrentTransform)(oe.ctx),oe.executeOperatorList(E),oe.endDrawing(),{canvas:ge.canvas,scaleX:de.scale,scaleY:Z.scale,offsetX:H,offsetY:A}}getSizeAndScale(l,E,b){l=Math.abs(l);const p=Math.max(d.MAX_PATTERN_SIZE,E);let e=Math.ceil(l*b);return e>=p?e=p:b=e/l,{scale:b,size:e}}clipBbox(l,E,b,p,e){const t=p-E,r=e-b;l.ctx.rect(E,b,t,r),l.current.updateRectMinMax((0,I.getCurrentTransform)(l.ctx),[E,b,p,e]),l.clip(),l.endPath()}setFillAndStrokeStyleToContext(l,E,b){const p=l.ctx,e=l.current;switch(E){case i.COLORED:const t=this.ctx;p.fillStyle=t.fillStyle,p.strokeStyle=t.strokeStyle,e.fillColor=t.fillStyle,e.strokeColor=t.strokeStyle;break;case i.UNCOLORED:const r=S.Util.makeHexColor(b[0],b[1],b[2]);p.fillStyle=r,p.strokeStyle=r,e.fillColor=r,e.strokeColor=r;break;default:throw new S.FormatError(`Unsupported paint type: ${E}`)}}getPattern(l,E,b,p){let e=b;p!==ue.SHADING&&(e=S.Util.transform(e,E.baseTransform),this.matrix&&(e=S.Util.transform(e,this.matrix)));const t=this.createPatternCanvas(E);let r=new DOMMatrix(e);r=r.translate(t.offsetX,t.offsetY),r=r.scale(1/t.scaleX,1/t.scaleY);const s=l.createPattern(t.canvas,"repeat");return s.setTransform(r),s}}a.TilingPattern=d},(w,a,Y)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.convertBlackAndWhiteToRGBA=ue,a.convertToRGBA=I,a.grayToRGBA=L;var S=Y(1);function I(F){switch(F.kind){case S.ImageKind.GRAYSCALE_1BPP:return ue(F);case S.ImageKind.RGB_24BPP:return q(F)}return null}function ue({src:F,srcPos:f=0,dest:c,width:x,height:P,nonBlackColor:g=4294967295,inverseDecode:i=!1}){const d=S.FeatureTest.isLittleEndian?4278190080:255,[n,l]=i?[g,d]:[d,g],E=x>>3,b=x&7,p=F.length;c=new Uint32Array(c.buffer);let e=0;for(let t=0;t<P;t++){for(const s=f+E;f<s;f++){const m=f<p?F[f]:255;c[e++]=m&128?l:n,c[e++]=m&64?l:n,c[e++]=m&32?l:n,c[e++]=m&16?l:n,c[e++]=m&8?l:n,c[e++]=m&4?l:n,c[e++]=m&2?l:n,c[e++]=m&1?l:n}if(b===0)continue;const r=f<p?F[f++]:255;for(let s=0;s<b;s++)c[e++]=r&1<<7-s?l:n}return{srcPos:f,destPos:e}}function q({src:F,srcPos:f=0,dest:c,destPos:x=0,width:P,height:g}){let i=0;const d=F.length>>2,n=new Uint32Array(F.buffer,f,d);if(S.FeatureTest.isLittleEndian){for(;i<d-2;i+=3,x+=4){const l=n[i],E=n[i+1],b=n[i+2];c[x]=l|4278190080,c[x+1]=l>>>24|E<<8|4278190080,c[x+2]=E>>>16|b<<16|4278190080,c[x+3]=b>>>8|4278190080}for(let l=i*4,E=F.length;l<E;l+=3)c[x++]=F[l]|F[l+1]<<8|F[l+2]<<16|4278190080}else{for(;i<d-2;i+=3,x+=4){const l=n[i],E=n[i+1],b=n[i+2];c[x]=l|255,c[x+1]=l<<24|E>>>8|255,c[x+2]=E<<16|b>>>16|255,c[x+3]=b<<8|255}for(let l=i*4,E=F.length;l<E;l+=3)c[x++]=F[l]<<24|F[l+1]<<16|F[l+2]<<8|255}return{srcPos:f,destPos:x}}function L(F,f){if(S.FeatureTest.isLittleEndian)for(let c=0,x=F.length;c<x;c++)f[c]=F[c]*65793|4278190080;else for(let c=0,x=F.length;c<x;c++)f[c]=F[c]*16843008|255}},(w,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.GlobalWorkerOptions=void 0;const Y=Object.create(null);a.GlobalWorkerOptions=Y,Y.workerPort=null,Y.workerSrc=""},(w,a,Y)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.MessageHandler=void 0;var S=Y(1);const I={UNKNOWN:0,DATA:1,ERROR:2},ue={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function q(F){switch(F instanceof Error||typeof F=="object"&&F!==null||(0,S.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),F.name){case"AbortException":return new S.AbortException(F.message);case"MissingPDFException":return new S.MissingPDFException(F.message);case"PasswordException":return new S.PasswordException(F.message,F.code);case"UnexpectedResponseException":return new S.UnexpectedResponseException(F.message,F.status);case"UnknownErrorException":return new S.UnknownErrorException(F.message,F.details);default:return new S.UnknownErrorException(F.message,F.toString())}}class L{constructor(f,c,x){this.sourceName=f,this.targetName=c,this.comObj=x,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=P=>{const g=P.data;if(g.targetName!==this.sourceName)return;if(g.stream){this._processStreamMessage(g);return}if(g.callback){const d=g.callbackId,n=this.callbackCapabilities[d];if(!n)throw new Error(`Cannot resolve callback ${d}`);if(delete this.callbackCapabilities[d],g.callback===I.DATA)n.resolve(g.data);else if(g.callback===I.ERROR)n.reject(q(g.reason));else throw new Error("Unexpected callback case");return}const i=this.actionHandler[g.action];if(!i)throw new Error(`Unknown action from worker: ${g.action}`);if(g.callbackId){const d=this.sourceName,n=g.sourceName;new Promise(function(l){l(i(g.data))}).then(function(l){x.postMessage({sourceName:d,targetName:n,callback:I.DATA,callbackId:g.callbackId,data:l})},function(l){x.postMessage({sourceName:d,targetName:n,callback:I.ERROR,callbackId:g.callbackId,reason:q(l)})});return}if(g.streamId){this._createStreamSink(g);return}i(g.data)},x.addEventListener("message",this._onComObjOnMessage)}on(f,c){const x=this.actionHandler;if(x[f])throw new Error(`There is already an actionName called "${f}"`);x[f]=c}send(f,c,x){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:f,data:c},x)}sendWithPromise(f,c,x){const P=this.callbackId++,g=(0,S.createPromiseCapability)();this.callbackCapabilities[P]=g;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:f,callbackId:P,data:c},x)}catch(i){g.reject(i)}return g.promise}sendWithStream(f,c,x,P){const g=this.streamId++,i=this.sourceName,d=this.targetName,n=this.comObj;return new ReadableStream({start:l=>{const E=(0,S.createPromiseCapability)();return this.streamControllers[g]={controller:l,startCall:E,pullCall:null,cancelCall:null,isClosed:!1},n.postMessage({sourceName:i,targetName:d,action:f,streamId:g,data:c,desiredSize:l.desiredSize},P),E.promise},pull:l=>{const E=(0,S.createPromiseCapability)();return this.streamControllers[g].pullCall=E,n.postMessage({sourceName:i,targetName:d,stream:ue.PULL,streamId:g,desiredSize:l.desiredSize}),E.promise},cancel:l=>{(0,S.assert)(l instanceof Error,"cancel must have a valid reason");const E=(0,S.createPromiseCapability)();return this.streamControllers[g].cancelCall=E,this.streamControllers[g].isClosed=!0,n.postMessage({sourceName:i,targetName:d,stream:ue.CANCEL,streamId:g,reason:q(l)}),E.promise}},x)}_createStreamSink(f){const c=f.streamId,x=this.sourceName,P=f.sourceName,g=this.comObj,i=this,d=this.actionHandler[f.action],n={enqueue(l,E=1,b){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=E,p>0&&this.desiredSize<=0&&(this.sinkCapability=(0,S.createPromiseCapability)(),this.ready=this.sinkCapability.promise),g.postMessage({sourceName:x,targetName:P,stream:ue.ENQUEUE,streamId:c,chunk:l},b)},close(){this.isCancelled||(this.isCancelled=!0,g.postMessage({sourceName:x,targetName:P,stream:ue.CLOSE,streamId:c}),delete i.streamSinks[c])},error(l){(0,S.assert)(l instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,g.postMessage({sourceName:x,targetName:P,stream:ue.ERROR,streamId:c,reason:q(l)}))},sinkCapability:(0,S.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:f.desiredSize,ready:null};n.sinkCapability.resolve(),n.ready=n.sinkCapability.promise,this.streamSinks[c]=n,new Promise(function(l){l(d(f.data,n))}).then(function(){g.postMessage({sourceName:x,targetName:P,stream:ue.START_COMPLETE,streamId:c,success:!0})},function(l){g.postMessage({sourceName:x,targetName:P,stream:ue.START_COMPLETE,streamId:c,reason:q(l)})})}_processStreamMessage(f){const c=f.streamId,x=this.sourceName,P=f.sourceName,g=this.comObj,i=this.streamControllers[c],d=this.streamSinks[c];switch(f.stream){case ue.START_COMPLETE:f.success?i.startCall.resolve():i.startCall.reject(q(f.reason));break;case ue.PULL_COMPLETE:f.success?i.pullCall.resolve():i.pullCall.reject(q(f.reason));break;case ue.PULL:if(!d){g.postMessage({sourceName:x,targetName:P,stream:ue.PULL_COMPLETE,streamId:c,success:!0});break}d.desiredSize<=0&&f.desiredSize>0&&d.sinkCapability.resolve(),d.desiredSize=f.desiredSize,new Promise(function(n){n(d.onPull&&d.onPull())}).then(function(){g.postMessage({sourceName:x,targetName:P,stream:ue.PULL_COMPLETE,streamId:c,success:!0})},function(n){g.postMessage({sourceName:x,targetName:P,stream:ue.PULL_COMPLETE,streamId:c,reason:q(n)})});break;case ue.ENQUEUE:if((0,S.assert)(i,"enqueue should have stream controller"),i.isClosed)break;i.controller.enqueue(f.chunk);break;case ue.CLOSE:if((0,S.assert)(i,"close should have stream controller"),i.isClosed)break;i.isClosed=!0,i.controller.close(),this._deleteStreamController(i,c);break;case ue.ERROR:(0,S.assert)(i,"error should have stream controller"),i.controller.error(q(f.reason)),this._deleteStreamController(i,c);break;case ue.CANCEL_COMPLETE:f.success?i.cancelCall.resolve():i.cancelCall.reject(q(f.reason)),this._deleteStreamController(i,c);break;case ue.CANCEL:if(!d)break;new Promise(function(n){n(d.onCancel&&d.onCancel(q(f.reason)))}).then(function(){g.postMessage({sourceName:x,targetName:P,stream:ue.CANCEL_COMPLETE,streamId:c,success:!0})},function(n){g.postMessage({sourceName:x,targetName:P,stream:ue.CANCEL_COMPLETE,streamId:c,reason:q(n)})}),d.sinkCapability.reject(q(f.reason)),d.isCancelled=!0,delete this.streamSinks[c];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(f,c){await Promise.allSettled([f.startCall&&f.startCall.promise,f.pullCall&&f.pullCall.promise,f.cancelCall&&f.cancelCall.promise]),delete this.streamControllers[c]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}a.MessageHandler=L},(w,a,Y)=>{var ue,q;Object.defineProperty(a,"__esModule",{value:!0}),a.Metadata=void 0;var S=Y(1);class I{constructor({parsedData:F,rawData:f}){Q(this,ue,void 0);Q(this,q,void 0);be(this,ue,F),be(this,q,f)}getRaw(){return u(this,q)}get(F){return u(this,ue).get(F)??null}getAll(){return(0,S.objectFromMap)(u(this,ue))}has(F){return u(this,ue).has(F)}}ue=new WeakMap,q=new WeakMap,a.Metadata=I},(w,a,Y)=>{var F,f,c,x,P,g,Ft;Object.defineProperty(a,"__esModule",{value:!0}),a.OptionalContentConfig=void 0;var S=Y(1),I=Y(8);const ue=Symbol("INTERNAL");class q{constructor(n,l){Q(this,F,!0);this.name=n,this.intent=l}get visible(){return u(this,F)}_setVisible(n,l){n!==ue&&(0,S.unreachable)("Internal method `_setVisible` called."),be(this,F,l)}}F=new WeakMap;class L{constructor(n){Q(this,g);Q(this,f,null);Q(this,c,new Map);Q(this,x,null);Q(this,P,null);if(this.name=null,this.creator=null,n!==null){this.name=n.name,this.creator=n.creator,be(this,P,n.order);for(const l of n.groups)u(this,c).set(l.id,new q(l.name,l.intent));if(n.baseState==="OFF")for(const l of u(this,c).values())l._setVisible(ue,!1);for(const l of n.on)u(this,c).get(l)._setVisible(ue,!0);for(const l of n.off)u(this,c).get(l)._setVisible(ue,!1);be(this,x,this.getHash())}}isVisible(n){if(u(this,c).size===0)return!0;if(!n)return(0,S.warn)("Optional content group not defined."),!0;if(n.type==="OCG")return u(this,c).has(n.id)?u(this,c).get(n.id).visible:((0,S.warn)(`Optional content group not found: ${n.id}`),!0);if(n.type==="OCMD"){if(n.expression)return ee(this,g,Ft).call(this,n.expression);if(!n.policy||n.policy==="AnyOn"){for(const l of n.ids){if(!u(this,c).has(l))return(0,S.warn)(`Optional content group not found: ${l}`),!0;if(u(this,c).get(l).visible)return!0}return!1}else if(n.policy==="AllOn"){for(const l of n.ids){if(!u(this,c).has(l))return(0,S.warn)(`Optional content group not found: ${l}`),!0;if(!u(this,c).get(l).visible)return!1}return!0}else if(n.policy==="AnyOff"){for(const l of n.ids){if(!u(this,c).has(l))return(0,S.warn)(`Optional content group not found: ${l}`),!0;if(!u(this,c).get(l).visible)return!0}return!1}else if(n.policy==="AllOff"){for(const l of n.ids){if(!u(this,c).has(l))return(0,S.warn)(`Optional content group not found: ${l}`),!0;if(u(this,c).get(l).visible)return!1}return!0}return(0,S.warn)(`Unknown optional content policy ${n.policy}.`),!0}return(0,S.warn)(`Unknown group type ${n.type}.`),!0}setVisibility(n,l=!0){if(!u(this,c).has(n)){(0,S.warn)(`Optional content group not found: ${n}`);return}u(this,c).get(n)._setVisible(ue,!!l),be(this,f,null)}get hasInitialVisibility(){return this.getHash()===u(this,x)}getOrder(){return u(this,c).size?u(this,P)?u(this,P).slice():[...u(this,c).keys()]:null}getGroups(){return u(this,c).size>0?(0,S.objectFromMap)(u(this,c)):null}getGroup(n){return u(this,c).get(n)||null}getHash(){if(u(this,f)!==null)return u(this,f);const n=new I.MurmurHash3_64;for(const[l,E]of u(this,c))n.update(`${l}:${E.visible}`);return be(this,f,n.hexdigest())}}f=new WeakMap,c=new WeakMap,x=new WeakMap,P=new WeakMap,g=new WeakSet,Ft=function(n){const l=n.length;if(l<2)return!0;const E=n[0];for(let b=1;b<l;b++){const p=n[b];let e;if(Array.isArray(p))e=ee(this,g,Ft).call(this,p);else if(u(this,c).has(p))e=u(this,c).get(p).visible;else return(0,S.warn)(`Optional content group not found: ${p}`),!0;switch(E){case"And":if(!e)return!1;break;case"Or":if(e)return!0;break;case"Not":return!e;default:return!0}}return E==="And"},a.OptionalContentConfig=L},(w,a,Y)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFDataTransportStream=void 0;var S=Y(1),I=Y(6);class ue{constructor({length:f,initialData:c,progressiveDone:x=!1,contentDispositionFilename:P=null,disableRange:g=!1,disableStream:i=!1},d){if((0,S.assert)(d,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=x,this._contentDispositionFilename=P,(c==null?void 0:c.length)>0){const n=c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength?c.buffer:new Uint8Array(c).buffer;this._queuedChunks.push(n)}this._pdfDataRangeTransport=d,this._isStreamingSupported=!i,this._isRangeSupported=!g,this._contentLength=f,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((n,l)=>{this._onReceiveData({begin:n,chunk:l})}),this._pdfDataRangeTransport.addProgressListener((n,l)=>{this._onProgress({loaded:n,total:l})}),this._pdfDataRangeTransport.addProgressiveReadListener(n=>{this._onReceiveData({chunk:n})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:f,chunk:c}){const x=c instanceof Uint8Array&&c.byteLength===c.buffer.byteLength?c.buffer:new Uint8Array(c).buffer;if(f===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(x):this._queuedChunks.push(x);else{const P=this._rangeReaders.some(function(g){return g._begin!==f?!1:(g._enqueue(x),!0)});(0,S.assert)(P,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var f;return((f=this._fullRequestReader)==null?void 0:f._loaded)??0}_onProgress(f){var c,x,P,g;f.total===void 0?(x=(c=this._rangeReaders[0])==null?void 0:c.onProgress)==null||x.call(c,{loaded:f.loaded}):(g=(P=this._fullRequestReader)==null?void 0:P.onProgress)==null||g.call(P,{loaded:f.loaded,total:f.total})}_onProgressiveDone(){var f;(f=this._fullRequestReader)==null||f.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(f){const c=this._rangeReaders.indexOf(f);c>=0&&this._rangeReaders.splice(c,1)}getFullReader(){(0,S.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const f=this._queuedChunks;return this._queuedChunks=null,new q(this,f,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(f,c){if(c<=this._progressiveDataLength)return null;const x=new L(this,f,c);return this._pdfDataRangeTransport.requestDataRange(f,c),this._rangeReaders.push(x),x}cancelAllRequests(f){var c;(c=this._fullRequestReader)==null||c.cancel(f);for(const x of this._rangeReaders.slice(0))x.cancel(f);this._pdfDataRangeTransport.abort()}}a.PDFDataTransportStream=ue;class q{constructor(f,c,x=!1,P=null){this._stream=f,this._done=x||!1,this._filename=(0,I.isPdfFile)(P)?P:null,this._queuedChunks=c||[],this._loaded=0;for(const g of this._queuedChunks)this._loaded+=g.byteLength;this._requests=[],this._headersReady=Promise.resolve(),f._fullRequestReader=this,this.onProgress=null}_enqueue(f){this._done||(this._requests.length>0?this._requests.shift().resolve({value:f,done:!1}):this._queuedChunks.push(f),this._loaded+=f.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const f=(0,S.createPromiseCapability)();return this._requests.push(f),f.promise}cancel(f){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class L{constructor(f,c,x){this._stream=f,this._begin=c,this._end=x,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(f){if(!this._done){if(this._requests.length===0)this._queuedChunk=f;else{this._requests.shift().resolve({value:f,done:!1});for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const c=this._queuedChunk;return this._queuedChunk=null,{value:c,done:!1}}if(this._done)return{value:void 0,done:!0};const f=(0,S.createPromiseCapability)();return this._requests.push(f),f.promise}cancel(f){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(w,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.XfaText=void 0;class Y{static textContent(I){const ue=[],q={items:ue,styles:Object.create(null)};function L(F){var x;if(!F)return;let f=null;const c=F.name;if(c==="#text")f=F.value;else if(Y.shouldBuildText(c))(x=F==null?void 0:F.attributes)!=null&&x.textContent?f=F.attributes.textContent:F.value&&(f=F.value);else return;if(f!==null&&ue.push({str:f}),!!F.children)for(const P of F.children)L(P)}return L(I),q}static shouldBuildText(I){return!(I==="textarea"||I==="input"||I==="option"||I==="select")}}a.XfaText=Y},(w,a,Y)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.NodeStandardFontDataFactory=a.NodeFilterFactory=a.NodeCanvasFactory=a.NodeCMapReaderFactory=void 0;var S=Y(7);const I=function(f){return new Promise((c,x)=>{require$$5.readFile(f,(g,i)=>{if(g||!i){x(new Error(g));return}c(new Uint8Array(i))})})};class ue extends S.BaseFilterFactory{}a.NodeFilterFactory=ue;class q extends S.BaseCanvasFactory{_createCanvas(c,x){return require$$5.createCanvas(c,x)}}a.NodeCanvasFactory=q;class L extends S.BaseCMapReaderFactory{_fetchData(c,x){return I(c).then(P=>({cMapData:P,compressionType:x}))}}a.NodeCMapReaderFactory=L;class F extends S.BaseStandardFontDataFactory{_fetchData(c){return I(c)}}a.NodeStandardFontDataFactory=F},(w,a,Y)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFNodeStream=void 0;var S=Y(1),I=Y(22);const ue=require$$5,q=require$$5,L=require$$5,F=require$$5,f=/^file:\/\/\/[a-zA-Z]:\//;function c(b){const p=F.parse(b);return p.protocol==="file:"||p.host?p:/^[a-z]:[/\\]/i.test(b)?F.parse(`file:///${b}`):(p.host||(p.protocol="file:"),p)}class x{constructor(p){this.source=p,this.url=c(p.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&p.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var p;return((p=this._fullRequestReader)==null?void 0:p._loaded)??0}getFullReader(){return(0,S.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new l(this):new d(this),this._fullRequestReader}getRangeReader(p,e){if(e<=this._progressiveDataLength)return null;const t=this.isFsUrl?new E(this,p,e):new n(this,p,e);return this._rangeRequestReaders.push(t),t}cancelAllRequests(p){var e;(e=this._fullRequestReader)==null||e.cancel(p);for(const t of this._rangeRequestReaders.slice(0))t.cancel(p)}}a.PDFNodeStream=x;class P{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=p.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=(0,S.createPromiseCapability)(),this._headersCapability=(0,S.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=(0,S.createPromiseCapability)(),this.read()):(this._loaded+=p.length,(t=this.onProgress)==null||t.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new S.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class g{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,S.createPromiseCapability)();const e=p.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=(0,S.createPromiseCapability)(),this.read()):(this._loaded+=p.length,(t=this.onProgress)==null||t.call(this,{loaded:this._loaded}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function i(b,p){return{protocol:b.protocol,auth:b.auth,host:b.hostname,port:b.port,path:b.path,method:"GET",headers:p}}class d extends P{constructor(p){super(p);const e=t=>{if(t.statusCode===404){const C=new S.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=C,this._headersCapability.reject(C);return}this._headersCapability.resolve(),this._setReadableStream(t);const r=C=>this._readableStream.headers[C.toLowerCase()],{allowRangeRequests:s,suggestedLength:m}=(0,I.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:p.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=m||this._contentLength,this._filename=(0,I.extractFilenameFromHeader)(r)};this._request=null,this._url.protocol==="http:"?this._request=q.request(i(this._url,p.httpHeaders),e):this._request=L.request(i(this._url,p.httpHeaders),e),this._request.on("error",t=>{this._storedError=t,this._headersCapability.reject(t)}),this._request.end()}}class n extends g{constructor(p,e,t){super(p),this._httpHeaders={};for(const s in p.httpHeaders){const m=p.httpHeaders[s];m!==void 0&&(this._httpHeaders[s]=m)}this._httpHeaders.Range=`bytes=${e}-${t-1}`;const r=s=>{if(s.statusCode===404){const m=new S.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=m;return}this._setReadableStream(s)};this._request=null,this._url.protocol==="http:"?this._request=q.request(i(this._url,this._httpHeaders),r):this._request=L.request(i(this._url,this._httpHeaders),r),this._request.on("error",s=>{this._storedError=s}),this._request.end()}}class l extends P{constructor(p){super(p);let e=decodeURIComponent(this._url.path);f.test(this._url.href)&&(e=e.replace(/^\//,"")),ue.lstat(e,(t,r)=>{if(t){t.code==="ENOENT"&&(t=new S.MissingPDFException(`Missing PDF "${e}".`)),this._storedError=t,this._headersCapability.reject(t);return}this._contentLength=r.size,this._setReadableStream(ue.createReadStream(e)),this._headersCapability.resolve()})}}class E extends g{constructor(p,e,t){super(p);let r=decodeURIComponent(this._url.path);f.test(this._url.href)&&(r=r.replace(/^\//,"")),this._setReadableStream(ue.createReadStream(r,{start:e,end:t-1}))}}},(w,a,Y)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createResponseStatusError=F,a.extractFilenameFromHeader=L,a.validateRangeRequestCapabilities=q,a.validateResponseStatus=f;var S=Y(1),I=Y(23),ue=Y(6);function q({getResponseHeader:c,isHttp:x,rangeChunkSize:P,disableRange:g}){const i={allowRangeRequests:!1,suggestedLength:void 0},d=parseInt(c("Content-Length"),10);return!Number.isInteger(d)||(i.suggestedLength=d,d<=2*P)||g||!x||c("Accept-Ranges")!=="bytes"||(c("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function L(c){const x=c("Content-Disposition");if(x){let P=(0,I.getFilenameFromContentDispositionHeader)(x);if(P.includes("%"))try{P=decodeURIComponent(P)}catch{}if((0,ue.isPdfFile)(P))return P}return null}function F(c,x){return c===404||c===0&&x.startsWith("file:")?new S.MissingPDFException('Missing PDF "'+x+'".'):new S.UnexpectedResponseException(`Unexpected server response (${c}) while retrieving PDF "${x}".`,c)}function f(c){return c===200||c===206}},(w,a,Y)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getFilenameFromContentDispositionHeader=I;var S=Y(1);function I(ue){let q=!0,L=F("filename\\*","i").exec(ue);if(L){L=L[1];let d=P(L);return d=unescape(d),d=g(d),d=i(d),c(d)}if(L=x(ue),L){const d=i(L);return c(d)}if(L=F("filename","i").exec(ue),L){L=L[1];let d=P(L);return d=i(d),c(d)}function F(d,n){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',n)}function f(d,n){if(d){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const l=new TextDecoder(d,{fatal:!0}),E=(0,S.stringToBytes)(n);n=l.decode(E),q=!1}catch{}}return n}function c(d){return q&&/[\x80-\xff]/.test(d)&&(d=f("utf-8",d),q&&(d=f("iso-8859-1",d))),d}function x(d){const n=[];let l;const E=F("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(l=E.exec(d))!==null;){let[,p,e,t]=l;if(p=parseInt(p,10),p in n){if(p===0)break;continue}n[p]=[e,t]}const b=[];for(let p=0;p<n.length&&p in n;++p){let[e,t]=n[p];t=P(t),e&&(t=unescape(t),p===0&&(t=g(t))),b.push(t)}return b.join("")}function P(d){if(d.startsWith('"')){const n=d.slice(1).split('\\"');for(let l=0;l<n.length;++l){const E=n[l].indexOf('"');E!==-1&&(n[l]=n[l].slice(0,E),n.length=l+1),n[l]=n[l].replaceAll(/\\(.)/g,"$1")}d=n.join('"')}return d}function g(d){const n=d.indexOf("'");if(n===-1)return d;const l=d.slice(0,n),b=d.slice(n+1).replace(/^[^']*'/,"");return f(l,b)}function i(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(n,l,E,b){if(E==="q"||E==="Q")return b=b.replaceAll("_"," "),b=b.replaceAll(/=([0-9a-fA-F]{2})/g,function(p,e){return String.fromCharCode(parseInt(e,16))}),f(l,b);try{b=atob(b)}catch{}return f(l,b)})}return""}},(w,a,Y)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFNetworkStream=void 0;var S=Y(1),I=Y(22);const ue=200,q=206;function L(P){const g=P.response;return typeof g!="string"?g:(0,S.stringToBytes)(g).buffer}class F{constructor(g,i={}){this.url=g,this.isHttp=/^https?:/i.test(g),this.httpHeaders=this.isHttp&&i.httpHeaders||Object.create(null),this.withCredentials=i.withCredentials||!1,this.getXhr=i.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(g,i,d){const n={begin:g,end:i};for(const l in d)n[l]=d[l];return this.request(n)}requestFull(g){return this.request(g)}request(g){const i=this.getXhr(),d=this.currXhrId++,n=this.pendingRequests[d]={xhr:i};i.open("GET",this.url),i.withCredentials=this.withCredentials;for(const l in this.httpHeaders){const E=this.httpHeaders[l];E!==void 0&&i.setRequestHeader(l,E)}return this.isHttp&&"begin"in g&&"end"in g?(i.setRequestHeader("Range",`bytes=${g.begin}-${g.end-1}`),n.expectedStatus=q):n.expectedStatus=ue,i.responseType="arraybuffer",g.onError&&(i.onerror=function(l){g.onError(i.status)}),i.onreadystatechange=this.onStateChange.bind(this,d),i.onprogress=this.onProgress.bind(this,d),n.onHeadersReceived=g.onHeadersReceived,n.onDone=g.onDone,n.onError=g.onError,n.onProgress=g.onProgress,i.send(null),d}onProgress(g,i){var n;const d=this.pendingRequests[g];d&&((n=d.onProgress)==null||n.call(d,i))}onStateChange(g,i){var p,e,t;const d=this.pendingRequests[g];if(!d)return;const n=d.xhr;if(n.readyState>=2&&d.onHeadersReceived&&(d.onHeadersReceived(),delete d.onHeadersReceived),n.readyState!==4||!(g in this.pendingRequests))return;if(delete this.pendingRequests[g],n.status===0&&this.isHttp){(p=d.onError)==null||p.call(d,n.status);return}const l=n.status||ue;if(!(l===ue&&d.expectedStatus===q)&&l!==d.expectedStatus){(e=d.onError)==null||e.call(d,n.status);return}const b=L(n);if(l===q){const r=n.getResponseHeader("Content-Range"),s=/bytes (\d+)-(\d+)\/(\d+)/.exec(r);d.onDone({begin:parseInt(s[1],10),chunk:b})}else b?d.onDone({begin:0,chunk:b}):(t=d.onError)==null||t.call(d,n.status)}getRequestXhr(g){return this.pendingRequests[g].xhr}isPendingRequest(g){return g in this.pendingRequests}abortRequest(g){const i=this.pendingRequests[g].xhr;delete this.pendingRequests[g],i.abort()}}class f{constructor(g){this._source=g,this._manager=new F(g.url,{httpHeaders:g.httpHeaders,withCredentials:g.withCredentials}),this._rangeChunkSize=g.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(g){const i=this._rangeRequestReaders.indexOf(g);i>=0&&this._rangeRequestReaders.splice(i,1)}getFullReader(){return(0,S.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new c(this._manager,this._source),this._fullRequestReader}getRangeReader(g,i){const d=new x(this._manager,g,i);return d.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(d),d}cancelAllRequests(g){var i;(i=this._fullRequestReader)==null||i.cancel(g);for(const d of this._rangeRequestReaders.slice(0))d.cancel(g)}}a.PDFNetworkStream=f;class c{constructor(g,i){this._manager=g;const d={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=i.url,this._fullRequestId=g.requestFull(d),this._headersReceivedCapability=(0,S.createPromiseCapability)(),this._disableRange=i.disableRange||!1,this._contentLength=i.length,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const g=this._fullRequestId,i=this._manager.getRequestXhr(g),d=E=>i.getResponseHeader(E),{allowRangeRequests:n,suggestedLength:l}=(0,I.validateRangeRequestCapabilities)({getResponseHeader:d,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=(0,I.extractFilenameFromHeader)(d),this._isRangeSupported&&this._manager.abortRequest(g),this._headersReceivedCapability.resolve()}_onDone(g){if(g&&(this._requests.length>0?this._requests.shift().resolve({value:g.chunk,done:!1}):this._cachedChunks.push(g.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(g){this._storedError=(0,I.createResponseStatusError)(g,this._url),this._headersReceivedCapability.reject(this._storedError);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(g){var i;(i=this.onProgress)==null||i.call(this,{loaded:g.loaded,total:g.lengthComputable?g.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const g=(0,S.createPromiseCapability)();return this._requests.push(g),g.promise}cancel(g){this._done=!0,this._headersReceivedCapability.reject(g);for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class x{constructor(g,i,d){this._manager=g;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=g.url,this._requestId=g.requestRange(i,d,n),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var g;(g=this.onClosed)==null||g.call(this,this)}_onDone(g){const i=g.chunk;this._requests.length>0?this._requests.shift().resolve({value:i,done:!1}):this._queuedChunk=i,this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(g){this._storedError=(0,I.createResponseStatusError)(g,this._url);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(g){var i;this.isStreamingSupported||(i=this.onProgress)==null||i.call(this,{loaded:g.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const g=(0,S.createPromiseCapability)();return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(w,a,Y)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PDFFetchStream=void 0;var S=Y(1),I=Y(22);function ue(x,P,g){return{method:"GET",headers:x,signal:g.signal,mode:"cors",credentials:P?"include":"same-origin",redirect:"follow"}}function q(x){const P=new Headers;for(const g in x){const i=x[g];i!==void 0&&P.append(g,i)}return P}function L(x){return x instanceof Uint8Array?x.buffer:x instanceof ArrayBuffer?x:((0,S.warn)(`getArrayBuffer - unexpected data format: ${x}`),new Uint8Array(x).buffer)}class F{constructor(P){this.source=P,this.isHttp=/^https?:/i.test(P.url),this.httpHeaders=this.isHttp&&P.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var P;return((P=this._fullRequestReader)==null?void 0:P._loaded)??0}getFullReader(){return(0,S.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new f(this),this._fullRequestReader}getRangeReader(P,g){if(g<=this._progressiveDataLength)return null;const i=new c(this,P,g);return this._rangeRequestReaders.push(i),i}cancelAllRequests(P){var g;(g=this._fullRequestReader)==null||g.cancel(P);for(const i of this._rangeRequestReaders.slice(0))i.cancel(P)}}a.PDFFetchStream=F;class f{constructor(P){this._stream=P,this._reader=null,this._loaded=0,this._filename=null;const g=P.source;this._withCredentials=g.withCredentials||!1,this._contentLength=g.length,this._headersCapability=(0,S.createPromiseCapability)(),this._disableRange=g.disableRange||!1,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!g.disableStream,this._isRangeSupported=!g.disableRange,this._headers=q(this._stream.httpHeaders);const i=g.url;fetch(i,ue(this._headers,this._withCredentials,this._abortController)).then(d=>{if(!(0,I.validateResponseStatus)(d.status))throw(0,I.createResponseStatusError)(d.status,i);this._reader=d.body.getReader(),this._headersCapability.resolve();const n=b=>d.headers.get(b),{allowRangeRequests:l,suggestedLength:E}=(0,I.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=E||this._contentLength,this._filename=(0,I.extractFilenameFromHeader)(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new S.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:P,done:g}=await this._reader.read();return g?{value:P,done:g}:(this._loaded+=P.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:L(P),done:!1})}cancel(P){var g;(g=this._reader)==null||g.cancel(P),this._abortController.abort()}}class c{constructor(P,g,i){this._stream=P,this._reader=null,this._loaded=0;const d=P.source;this._withCredentials=d.withCredentials||!1,this._readCapability=(0,S.createPromiseCapability)(),this._isStreamingSupported=!d.disableStream,this._abortController=new AbortController,this._headers=q(this._stream.httpHeaders),this._headers.append("Range",`bytes=${g}-${i-1}`);const n=d.url;fetch(n,ue(this._headers,this._withCredentials,this._abortController)).then(l=>{if(!(0,I.validateResponseStatus)(l.status))throw(0,I.createResponseStatusError)(l.status,n);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:P,done:g}=await this._reader.read();return g?{value:P,done:g}:(this._loaded+=P.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:L(P),done:!1})}cancel(P){var g;(g=this._reader)==null||g.cancel(P),this._abortController.abort()}}},(w,a,Y)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TextLayerRenderTask=void 0,a.renderTextLayer=d,a.updateTextLayer=n;var S=Y(1),I=Y(6);const ue=1e5,q=30,L=.8,F=new Map;function f(l,E){let b;if(E&&S.FeatureTest.isOffscreenCanvasSupported)b=new OffscreenCanvas(l,l).getContext("2d",{alpha:!1});else{const p=document.createElement("canvas");p.width=p.height=l,b=p.getContext("2d",{alpha:!1})}return b}function c(l,E){const b=F.get(l);if(b)return b;const p=f(q,E);p.font=`${q}px ${l}`;const e=p.measureText("");let t=e.fontBoundingBoxAscent,r=Math.abs(e.fontBoundingBoxDescent);if(t){const m=t/(t+r);return F.set(l,m),p.canvas.width=p.canvas.height=0,m}p.strokeStyle="red",p.clearRect(0,0,q,q),p.strokeText("g",0,0);let s=p.getImageData(0,0,q,q).data;r=0;for(let m=s.length-1-3;m>=0;m-=4)if(s[m]>0){r=Math.ceil(m/4/q);break}p.clearRect(0,0,q,q),p.strokeText("A",0,q),s=p.getImageData(0,0,q,q).data,t=0;for(let m=0,C=s.length;m<C;m+=4)if(s[m]>0){t=q-Math.floor(m/4/q);break}if(p.canvas.width=p.canvas.height=0,t){const m=t/(t+r);return F.set(l,m),m}return F.set(l,L),L}function x(l,E,b){const p=document.createElement("span"),e={angle:0,canvasWidth:0,hasText:E.str!=="",hasEOL:E.hasEOL,fontSize:0};l._textDivs.push(p);const t=S.Util.transform(l._transform,E.transform);let r=Math.atan2(t[1],t[0]);const s=b[E.fontName];s.vertical&&(r+=Math.PI/2);const m=Math.hypot(t[2],t[3]),C=m*c(s.fontFamily,l._isOffscreenCanvasSupported);let h,D;r===0?(h=t[4],D=t[5]-C):(h=t[4]+C*Math.sin(r),D=t[5]-C*Math.cos(r));const te="calc(var(--scale-factor)*",le=p.style;l._container===l._rootContainer?(le.left=`${(100*h/l._pageWidth).toFixed(2)}%`,le.top=`${(100*D/l._pageHeight).toFixed(2)}%`):(le.left=`${te}${h.toFixed(2)}px)`,le.top=`${te}${D.toFixed(2)}px)`),le.fontSize=`${te}${m.toFixed(2)}px)`,le.fontFamily=s.fontFamily,e.fontSize=m,p.setAttribute("role","presentation"),p.textContent=E.str,p.dir=E.dir,l._fontInspectorEnabled&&(p.dataset.fontName=E.fontName),r!==0&&(e.angle=r*(180/Math.PI));let X=!1;if(E.str.length>1)X=!0;else if(E.str!==" "&&E.transform[0]!==E.transform[3]){const ae=Math.abs(E.transform[0]),de=Math.abs(E.transform[3]);ae!==de&&Math.max(ae,de)/Math.min(ae,de)>1.5&&(X=!0)}X&&(e.canvasWidth=s.vertical?E.height:E.width),l._textDivProperties.set(p,e),l._isReadableStream&&l._layoutText(p)}function P(l){const{div:E,scale:b,properties:p,ctx:e,prevFontSize:t,prevFontFamily:r}=l,{style:s}=E;let m="";if(p.canvasWidth!==0&&p.hasText){const{fontFamily:C}=s,{canvasWidth:h,fontSize:D}=p;(t!==D||r!==C)&&(e.font=`${D*b}px ${C}`,l.prevFontSize=D,l.prevFontFamily=C);const{width:te}=e.measureText(E.textContent);te>0&&(m=`scaleX(${h*b/te})`)}p.angle!==0&&(m=`rotate(${p.angle}deg) ${m}`),m.length>0&&(s.transform=m)}function g(l){if(l._canceled)return;const E=l._textDivs,b=l._capability;if(E.length>ue){b.resolve();return}if(!l._isReadableStream)for(const e of E)l._layoutText(e);b.resolve()}class i{constructor({textContentSource:E,container:b,viewport:p,textDivs:e,textDivProperties:t,textContentItemsStr:r,isOffscreenCanvasSupported:s}){var te;this._textContentSource=E,this._isReadableStream=E instanceof ReadableStream,this._container=this._rootContainer=b,this._textDivs=e||[],this._textContentItemsStr=r||[],this._isOffscreenCanvasSupported=s,this._fontInspectorEnabled=!!((te=globalThis.FontInspector)!=null&&te.enabled),this._reader=null,this._textDivProperties=t||new WeakMap,this._canceled=!1,this._capability=(0,S.createPromiseCapability)(),this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:p.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:f(0,s)};const{pageWidth:m,pageHeight:C,pageX:h,pageY:D}=p.rawDims;this._transform=[1,0,0,-1,-h,D+C],this._pageWidth=m,this._pageHeight=C,(0,I.setLayerDimensions)(b,p),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new S.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new S.AbortException("TextLayer task cancelled."))}_processItems(E,b){for(const p of E){if(p.str===void 0){if(p.type==="beginMarkedContentProps"||p.type==="beginMarkedContent"){const e=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),p.id!==null&&this._container.setAttribute("id",`${p.id}`),e.append(this._container)}else p.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(p.str),x(this,p,b)}}_layoutText(E){const b=this._layoutTextParams.properties=this._textDivProperties.get(E);if(this._layoutTextParams.div=E,P(this._layoutTextParams),b.hasText&&this._container.append(E),b.hasEOL){const p=document.createElement("br");p.setAttribute("role","presentation"),this._container.append(p)}}_render(){const E=(0,S.createPromiseCapability)();let b=Object.create(null);if(this._isReadableStream){const p=()=>{this._reader.read().then(({value:e,done:t})=>{if(t){E.resolve();return}Object.assign(b,e.styles),this._processItems(e.items,b),p()},E.reject)};this._reader=this._textContentSource.getReader(),p()}else if(this._textContentSource){const{items:p,styles:e}=this._textContentSource;this._processItems(p,e),E.resolve()}else throw new Error('No "textContentSource" parameter specified.');E.promise.then(()=>{b=null,g(this)},this._capability.reject)}}a.TextLayerRenderTask=i;function d(l){!l.textContentSource&&(l.textContent||l.textContentStream)&&((0,I.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),l.textContentSource=l.textContent||l.textContentStream);const{container:E,viewport:b}=l,p=getComputedStyle(E),e=p.getPropertyValue("visibility"),t=parseFloat(p.getPropertyValue("--scale-factor"));e==="visible"&&(!t||Math.abs(t-b.scale)>1e-15)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const r=new i(l);return r._render(),r}function n({container:l,viewport:E,textDivs:b,textDivProperties:p,isOffscreenCanvasSupported:e,mustRotate:t=!0,mustRescale:r=!0}){if(t&&(0,I.setLayerDimensions)(l,{rotation:E.rotation}),r){const s=f(0,e),C={prevFontSize:null,prevFontFamily:null,div:null,scale:E.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:s};for(const h of b)C.properties=p.get(h),C.div=h,P(C)}}},(w,a,Y)=>{var f,c,x,P,g,i,d,n,l,It,b,Ai,e,Dt,r,Ot;Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationEditorLayer=void 0;var S=Y(1),I=Y(5),ue=Y(28),q=Y(29),L=Y(6);const m=class{constructor(h){Q(this,l);Q(this,b);Q(this,e);Q(this,r);Q(this,f,void 0);Q(this,c,!1);Q(this,x,this.pointerup.bind(this));Q(this,P,this.pointerdown.bind(this));Q(this,g,new Map);Q(this,i,!1);Q(this,d,!1);Q(this,n,void 0);m._initialized||(m._initialized=!0,ue.FreeTextEditor.initialize(h.l10n),q.InkEditor.initialize(h.l10n)),h.uiManager.registerEditorTypes([ue.FreeTextEditor,q.InkEditor]),be(this,n,h.uiManager),this.pageIndex=h.pageIndex,this.div=h.div,be(this,f,h.accessibilityManager),u(this,n).addLayer(this)}get isEmpty(){return u(this,g).size===0}updateToolbar(h){u(this,n).updateToolbar(h)}updateMode(h=u(this,n).getMode()){ee(this,r,Ot).call(this),h===S.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),u(this,n).unselectAll(),h!==S.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",h===S.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",h===S.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(h){if(!h&&u(this,n).getMode()!==S.AnnotationEditorType.INK)return;if(!h){for(const te of u(this,g).values())if(te.isEmpty()){te.setInBackground();return}}ee(this,e,Dt).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(h){u(this,n).setEditingState(h)}addCommands(h){u(this,n).addCommands(h)}enable(){this.div.style.pointerEvents="auto";for(const h of u(this,g).values())h.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const h of u(this,g).values())h.disableEditing();ee(this,r,Ot).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(h){u(this,n).getActive()!==h&&u(this,n).setActiveEditor(h)}enableClick(){this.div.addEventListener("pointerdown",u(this,P)),this.div.addEventListener("pointerup",u(this,x))}disableClick(){this.div.removeEventListener("pointerdown",u(this,P)),this.div.removeEventListener("pointerup",u(this,x))}attach(h){u(this,g).set(h.id,h)}detach(h){var D;u(this,g).delete(h.id),(D=u(this,f))==null||D.removePointerInTextLayer(h.contentDiv)}remove(h){u(this,n).removeEditor(h),this.detach(h),h.div.style.display="none",setTimeout(()=>{h.div.style.display="",h.div.remove(),h.isAttachedToDOM=!1,document.activeElement===document.body&&u(this,n).focusMainContainer()},0),u(this,d)||this.addInkEditorIfNeeded(!1)}add(h){if(ee(this,l,It).call(this,h),u(this,n).addEditor(h),this.attach(h),!h.isAttachedToDOM){const D=h.render();this.div.append(D),h.isAttachedToDOM=!0}this.moveEditorInDOM(h),h.onceAdded(),u(this,n).addToAnnotationStorage(h)}moveEditorInDOM(h){var D;(D=u(this,f))==null||D.moveElementInDOM(this.div,h.div,h.contentDiv,!0)}addOrRebuild(h){h.needsToBeRebuilt()?h.rebuild():this.add(h)}addANewEditor(h){const D=()=>{this.addOrRebuild(h)},te=()=>{h.remove()};this.addCommands({cmd:D,undo:te,mustExec:!0})}addUndoableEditor(h){const D=()=>{this.addOrRebuild(h)},te=()=>{h.remove()};this.addCommands({cmd:D,undo:te,mustExec:!1})}getNextId(){return u(this,n).getId()}deserialize(h){switch(h.annotationType){case S.AnnotationEditorType.FREETEXT:return ue.FreeTextEditor.deserialize(h,this,u(this,n));case S.AnnotationEditorType.INK:return q.InkEditor.deserialize(h,this,u(this,n))}return null}setSelected(h){u(this,n).setSelected(h)}toggleSelected(h){u(this,n).toggleSelected(h)}isSelected(h){return u(this,n).isSelected(h)}unselect(h){u(this,n).unselect(h)}pointerup(h){const{isMac:D}=S.FeatureTest.platform;if(!(h.button!==0||h.ctrlKey&&D)&&h.target===this.div&&u(this,i)){if(be(this,i,!1),!u(this,c)){be(this,c,!0);return}ee(this,e,Dt).call(this,h)}}pointerdown(h){const{isMac:D}=S.FeatureTest.platform;if(h.button!==0||h.ctrlKey&&D||h.target!==this.div)return;be(this,i,!0);const te=u(this,n).getActive();be(this,c,!te||te.isEmpty())}drop(h){const D=h.dataTransfer.getData("text/plain"),te=u(this,n).getEditor(D);if(!te)return;h.preventDefault(),h.dataTransfer.dropEffect="move",ee(this,l,It).call(this,te);const le=this.div.getBoundingClientRect(),X=h.clientX-le.x,ae=h.clientY-le.y;te.translate(X-te.startX,ae-te.startY),this.moveEditorInDOM(te),te.div.focus()}dragover(h){h.preventDefault()}destroy(){var h,D;((h=u(this,n).getActive())==null?void 0:h.parent)===this&&u(this,n).setActiveEditor(null);for(const te of u(this,g).values())(D=u(this,f))==null||D.removePointerInTextLayer(te.contentDiv),te.setParent(null),te.isAttachedToDOM=!1,te.div.remove();this.div=null,u(this,g).clear(),u(this,n).removeLayer(this)}render({viewport:h}){this.viewport=h,(0,L.setLayerDimensions)(this.div,h),(0,I.bindEvents)(this,this.div,["dragover","drop"]);for(const D of u(this,n).getEditors(this.pageIndex))this.add(D);this.updateMode()}update({viewport:h}){u(this,n).commitOrRemove(),this.viewport=h,(0,L.setLayerDimensions)(this.div,{rotation:h.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:h,pageHeight:D}=this.viewport.rawDims;return[h,D]}};let F=m;f=new WeakMap,c=new WeakMap,x=new WeakMap,P=new WeakMap,g=new WeakMap,i=new WeakMap,d=new WeakMap,n=new WeakMap,l=new WeakSet,It=function(h){var D;h.parent!==this&&(this.attach(h),(D=h.parent)==null||D.detach(h),h.setParent(this),h.div&&h.isAttachedToDOM&&(h.div.remove(),this.div.append(h.div)))},b=new WeakSet,Ai=function(h){switch(u(this,n).getMode()){case S.AnnotationEditorType.FREETEXT:return new ue.FreeTextEditor(h);case S.AnnotationEditorType.INK:return new q.InkEditor(h)}return null},e=new WeakSet,Dt=function(h){const D=this.getNextId(),te=ee(this,b,Ai).call(this,{parent:this,id:D,x:h.offsetX,y:h.offsetY,uiManager:u(this,n)});return te&&this.add(te),te},r=new WeakSet,Ot=function(){be(this,d,!0);for(const h of u(this,g).values())h.isEmpty()&&h.remove();be(this,d,!1)},Ve(F,"_initialized",!1),a.AnnotationEditorLayer=F},(w,a,Y)=>{var L,F,f,c,x,P,g,i,d,n,Si,E,Ei,p,Pi,t,Nt;Object.defineProperty(a,"__esModule",{value:!0}),a.FreeTextEditor=void 0;var S=Y(1),I=Y(5),ue=Y(4);const s=class extends ue.AnnotationEditor{constructor(h){super({...h,name:"freeTextEditor"});Q(this,n);Q(this,E);Q(this,p);Q(this,t);Q(this,L,this.editorDivBlur.bind(this));Q(this,F,this.editorDivFocus.bind(this));Q(this,f,this.editorDivInput.bind(this));Q(this,c,this.editorDivKeydown.bind(this));Q(this,x,void 0);Q(this,P,"");Q(this,g,`${this.id}-editor`);Q(this,i,!1);Q(this,d,void 0);be(this,x,h.color||s._defaultColor||ue.AnnotationEditor._defaultLineColor),be(this,d,h.fontSize||s._defaultFontSize)}static initialize(h){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(te=>[te,h.get(te)]));const D=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(D.getPropertyValue("--freetext-padding"))}static updateDefaultParams(h,D){switch(h){case S.AnnotationEditorParamsType.FREETEXT_SIZE:s._defaultFontSize=D;break;case S.AnnotationEditorParamsType.FREETEXT_COLOR:s._defaultColor=D;break}}updateParams(h,D){switch(h){case S.AnnotationEditorParamsType.FREETEXT_SIZE:ee(this,n,Si).call(this,D);break;case S.AnnotationEditorParamsType.FREETEXT_COLOR:ee(this,E,Ei).call(this,D);break}}static get defaultPropertiesToUpdate(){return[[S.AnnotationEditorParamsType.FREETEXT_SIZE,s._defaultFontSize],[S.AnnotationEditorParamsType.FREETEXT_COLOR,s._defaultColor||ue.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[S.AnnotationEditorParamsType.FREETEXT_SIZE,u(this,d)],[S.AnnotationEditorParamsType.FREETEXT_COLOR,u(this,x)]]}getInitialTranslation(){const h=this.parentScale;return[-s._internalPadding*h,-(s._internalPadding+u(this,d))*h]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(S.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",u(this,c)),this.editorDiv.addEventListener("focus",u(this,F)),this.editorDiv.addEventListener("blur",u(this,L)),this.editorDiv.addEventListener("input",u(this,f)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,g)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",u(this,c)),this.editorDiv.removeEventListener("focus",u(this,F)),this.editorDiv.removeEventListener("blur",u(this,L)),this.editorDiv.removeEventListener("input",u(this,f)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(h){super.focusin(h),h.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),u(this,i)||(be(this,i,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),be(this,P,ee(this,p,Pi).call(this).trimEnd()),ee(this,t,Nt).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(h){this.enableEditMode(),this.editorDiv.focus()}keydown(h){h.target===this.div&&h.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(h){s._keyboardManager.exec(this,h)}editorDivFocus(h){this.isEditing=!0}editorDivBlur(h){this.isEditing=!1}editorDivInput(h){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let h,D;this.width&&(h=this.x,D=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,g)),this.enableEditing(),s._l10nPromise.get("editor_free_text2_aria_label").then(le=>{var X;return(X=this.editorDiv)==null?void 0:X.setAttribute("aria-label",le)}),s._l10nPromise.get("free_text2_default_content").then(le=>{var X;return(X=this.editorDiv)==null?void 0:X.setAttribute("default-content",le)}),this.editorDiv.contentEditable=!0;const{style:te}=this.editorDiv;if(te.fontSize=`calc(${u(this,d)}px * var(--scale-factor))`,te.color=u(this,x),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,I.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[le,X]=this.parentDimensions;this.setAt(h*le,D*X,this.width*le,this.height*X);for(const ae of u(this,P).split(`
`)){const de=document.createElement("div");de.append(ae?document.createTextNode(ae):document.createElement("br")),this.editorDiv.append(de)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(h,D,te){const le=super.deserialize(h,D,te);return be(le,d,h.fontSize),be(le,x,S.Util.makeHexColor(...h.color)),be(le,P,h.value),le}serialize(){if(this.isEmpty())return null;const h=s._internalPadding*this.parentScale,D=this.getRect(h,h),te=ue.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:u(this,x));return{annotationType:S.AnnotationEditorType.FREETEXT,color:te,fontSize:u(this,d),value:u(this,P),pageIndex:this.pageIndex,rect:D,rotation:this.rotation}}};let q=s;L=new WeakMap,F=new WeakMap,f=new WeakMap,c=new WeakMap,x=new WeakMap,P=new WeakMap,g=new WeakMap,i=new WeakMap,d=new WeakMap,n=new WeakSet,Si=function(h){const D=le=>{this.editorDiv.style.fontSize=`calc(${le}px * var(--scale-factor))`,this.translate(0,-(le-u(this,d))*this.parentScale),be(this,d,le),ee(this,t,Nt).call(this)},te=u(this,d);this.addCommands({cmd:()=>{D(h)},undo:()=>{D(te)},mustExec:!0,type:S.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},E=new WeakSet,Ei=function(h){const D=u(this,x);this.addCommands({cmd:()=>{be(this,x,this.editorDiv.style.color=h)},undo:()=>{be(this,x,this.editorDiv.style.color=D)},mustExec:!0,type:S.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},p=new WeakSet,Pi=function(){const h=this.editorDiv.getElementsByTagName("div");if(h.length===0)return this.editorDiv.innerText;const D=[];for(const te of h)D.push(te.innerText.replace(/\r\n?|\n/,""));return D.join(`
`)},t=new WeakSet,Nt=function(){const[h,D]=this.parentDimensions;let te;if(this.isAttachedToDOM)te=this.div.getBoundingClientRect();else{const{currentLayer:le,div:X}=this,ae=X.style.display;X.style.display="hidden",le.div.append(this.div),te=X.getBoundingClientRect(),X.remove(),X.style.display=ae}this.width=te.width/h,this.height=te.height/D},Ve(q,"_freeTextDefaultContent",""),Ve(q,"_l10nPromise"),Ve(q,"_internalPadding",0),Ve(q,"_defaultColor",null),Ve(q,"_defaultFontSize",10),Ve(q,"_keyboardManager",new I.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],s.prototype.commitOrRemove]])),Ve(q,"_type","freetext"),a.FreeTextEditor=q},(w,a,Y)=>{var f,c,x,P,g,i,d,n,l,E,b,p,e,t,r,Ci,m,wi,h,Ti,te,xi,X,Bt,de,Mi,ge,Ri,oe,ki,A,Ke,R,Vt,j,_t,N,bt,ne,rt,B,Ut,_,vt,k,zt,W,Li,G,Fi,fe,Ii,me,jt,Ee,yt,T,at,M,Ht;Object.defineProperty(a,"__esModule",{value:!0}),a.InkEditor=void 0,Object.defineProperty(a,"fitCurve",{enumerable:!0,get:function(){return ue.fitCurve}});var S=Y(1),I=Y(4),ue=Y(30),q=Y(5);const L=16,z=class extends I.AnnotationEditor{constructor(ie){super({...ie,name:"inkEditor"});Q(this,r);Q(this,m);Q(this,h);Q(this,te);Q(this,X);Q(this,de);Q(this,ge);Q(this,oe);Q(this,A);Q(this,R);Q(this,j);Q(this,N);Q(this,ne);Q(this,B);Q(this,_);Q(this,W);Q(this,G);Q(this,fe);Q(this,me);Q(this,Ee);Q(this,T);Q(this,M);Q(this,f,0);Q(this,c,0);Q(this,x,0);Q(this,P,this.canvasPointermove.bind(this));Q(this,g,this.canvasPointerleave.bind(this));Q(this,i,this.canvasPointerup.bind(this));Q(this,d,this.canvasPointerdown.bind(this));Q(this,n,!1);Q(this,l,!1);Q(this,E,null);Q(this,b,null);Q(this,p,0);Q(this,e,0);Q(this,t,null);this.color=ie.color||null,this.thickness=ie.thickness||null,this.opacity=ie.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(ie){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(ve=>[ve,ie.get(ve)]))}static updateDefaultParams(ie,ve){switch(ie){case S.AnnotationEditorParamsType.INK_THICKNESS:z._defaultThickness=ve;break;case S.AnnotationEditorParamsType.INK_COLOR:z._defaultColor=ve;break;case S.AnnotationEditorParamsType.INK_OPACITY:z._defaultOpacity=ve/100;break}}updateParams(ie,ve){switch(ie){case S.AnnotationEditorParamsType.INK_THICKNESS:ee(this,r,Ci).call(this,ve);break;case S.AnnotationEditorParamsType.INK_COLOR:ee(this,m,wi).call(this,ve);break;case S.AnnotationEditorParamsType.INK_OPACITY:ee(this,h,Ti).call(this,ve);break}}static get defaultPropertiesToUpdate(){return[[S.AnnotationEditorParamsType.INK_THICKNESS,z._defaultThickness],[S.AnnotationEditorParamsType.INK_COLOR,z._defaultColor||I.AnnotationEditor._defaultLineColor],[S.AnnotationEditorParamsType.INK_OPACITY,Math.round(z._defaultOpacity*100)]]}get propertiesToUpdate(){return[[S.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||z._defaultThickness],[S.AnnotationEditorParamsType.INK_COLOR,this.color||z._defaultColor||I.AnnotationEditor._defaultLineColor],[S.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??z._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(ee(this,j,_t).call(this),ee(this,N,bt).call(this)),this.isAttachedToDOM||(this.parent.add(this),ee(this,ne,rt).call(this)),ee(this,T,at).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,u(this,b).disconnect(),be(this,b,null),super.remove())}setParent(ie){!this.parent&&ie?this._uiManager.removeShouldRescale(this):this.parent&&ie===null&&this._uiManager.addShouldRescale(this),super.setParent(ie)}onScaleChanging(){const[ie,ve]=this.parentDimensions,xe=this.width*ie,pe=this.height*ve;this.setDimensions(xe,pe)}enableEditMode(){u(this,n)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",u(this,d)),this.canvas.addEventListener("pointerup",u(this,i)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",u(this,d)),this.canvas.removeEventListener("pointerup",u(this,i)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){u(this,n)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),be(this,n,!0),this.div.classList.add("disabled"),ee(this,T,at).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(ie){super.focusin(ie),this.enableEditMode()}canvasPointerdown(ie){ie.button!==0||!this.isInEditMode()||u(this,n)||(this.setInForeground(),ie.type!=="mouse"&&this.div.focus(),ie.stopPropagation(),this.canvas.addEventListener("pointerleave",u(this,g)),this.canvas.addEventListener("pointermove",u(this,P)),ee(this,de,Mi).call(this,ie.offsetX,ie.offsetY))}canvasPointermove(ie){ie.stopPropagation(),ee(this,ge,Ri).call(this,ie.offsetX,ie.offsetY)}canvasPointerup(ie){ie.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(ie.stopPropagation(),ee(this,R,Vt).call(this,ie),this.setInBackground())}canvasPointerleave(ie){ee(this,R,Vt).call(this,ie),this.setInBackground()}render(){if(this.div)return this.div;let ie,ve;this.width&&(ie=this.x,ve=this.y),super.render(),z._l10nPromise.get("editor_ink2_aria_label").then(Te=>{var Ce;return(Ce=this.div)==null?void 0:Ce.setAttribute("aria-label",Te)});const[xe,pe,ye,Pe]=ee(this,te,xi).call(this);if(this.setAt(xe,pe,0,0),this.setDims(ye,Pe),ee(this,j,_t).call(this),this.width){const[Te,Ce]=this.parentDimensions;this.setAt(ie*Te,ve*Ce,this.width*Te,this.height*Ce),be(this,l,!0),ee(this,ne,rt).call(this),this.setDims(this.width*Te,this.height*Ce),ee(this,A,Ke).call(this),ee(this,M,Ht).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ee(this,N,bt).call(this),this.div}setDimensions(ie,ve){const xe=Math.round(ie),pe=Math.round(ve);if(u(this,p)===xe&&u(this,e)===pe)return;be(this,p,xe),be(this,e,pe),this.canvas.style.visibility="hidden",u(this,f)&&Math.abs(u(this,f)-ie/ve)>.01&&(ve=Math.ceil(ie/u(this,f)),this.setDims(ie,ve));const[ye,Pe]=this.parentDimensions;this.width=ie/ye,this.height=ve/Pe,u(this,n)&&ee(this,B,Ut).call(this,ie,ve),ee(this,ne,rt).call(this),ee(this,A,Ke).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(ie,ve,xe){var Le,Ie;const pe=super.deserialize(ie,ve,xe);pe.thickness=ie.thickness,pe.color=S.Util.makeHexColor(...ie.color),pe.opacity=ie.opacity;const[ye,Pe]=pe.pageDimensions,Te=pe.width*ye,Ce=pe.height*Pe,ke=pe.parentScale,Re=ie.thickness/2;be(pe,f,Te/Ce),be(pe,n,!0),be(pe,p,Math.round(Te)),be(pe,e,Math.round(Ce));for(const{bezier:De}of ie.paths){const Be=[];pe.paths.push(Be);let Oe=ke*(De[0]-Re),Ne=ke*(Ce-De[1]-Re);for(let He=2,We=De.length;He<We;He+=6){const Ze=ke*(De[He]-Re),Qe=ke*(Ce-De[He+1]-Re),tt=ke*(De[He+2]-Re),it=ke*(Ce-De[He+3]-Re),je=ke*(De[He+4]-Re),lt=ke*(Ce-De[He+5]-Re);Be.push([[Oe,Ne],[Ze,Qe],[tt,it],[je,lt]]),Oe=je,Ne=lt}const Ue=ee(this,k,zt).call(this,Be);pe.bezierPath2D.push(Ue)}const Fe=ee(Le=pe,me,jt).call(Le);return be(pe,x,Math.max(L,Fe[2]-Fe[0])),be(pe,c,Math.max(L,Fe[3]-Fe[1])),ee(Ie=pe,B,Ut).call(Ie,Te,Ce),pe}serialize(){if(this.isEmpty())return null;const ie=this.getRect(0,0),ve=this.rotation%180===0?ie[3]-ie[1]:ie[2]-ie[0],xe=I.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:S.AnnotationEditorType.INK,color:xe,thickness:this.thickness,opacity:this.opacity,paths:ee(this,W,Li).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,ve),pageIndex:this.pageIndex,rect:ie,rotation:this.rotation}}};let F=z;f=new WeakMap,c=new WeakMap,x=new WeakMap,P=new WeakMap,g=new WeakMap,i=new WeakMap,d=new WeakMap,n=new WeakMap,l=new WeakMap,E=new WeakMap,b=new WeakMap,p=new WeakMap,e=new WeakMap,t=new WeakMap,r=new WeakSet,Ci=function(ie){const ve=this.thickness;this.addCommands({cmd:()=>{this.thickness=ie,ee(this,T,at).call(this)},undo:()=>{this.thickness=ve,ee(this,T,at).call(this)},mustExec:!0,type:S.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},m=new WeakSet,wi=function(ie){const ve=this.color;this.addCommands({cmd:()=>{this.color=ie,ee(this,A,Ke).call(this)},undo:()=>{this.color=ve,ee(this,A,Ke).call(this)},mustExec:!0,type:S.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},h=new WeakSet,Ti=function(ie){ie/=100;const ve=this.opacity;this.addCommands({cmd:()=>{this.opacity=ie,ee(this,A,Ke).call(this)},undo:()=>{this.opacity=ve,ee(this,A,Ke).call(this)},mustExec:!0,type:S.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},te=new WeakSet,xi=function(){const{parentRotation:ie,parentDimensions:[ve,xe]}=this;switch(ie){case 90:return[0,xe,xe,ve];case 180:return[ve,xe,ve,xe];case 270:return[ve,0,xe,ve];default:return[0,0,ve,xe]}},X=new WeakSet,Bt=function(){const{ctx:ie,color:ve,opacity:xe,thickness:pe,parentScale:ye,scaleFactor:Pe}=this;ie.lineWidth=pe*ye/Pe,ie.lineCap="round",ie.lineJoin="round",ie.miterLimit=10,ie.strokeStyle=`${ve}${(0,q.opacityToHex)(xe)}`},de=new WeakSet,Mi=function(ie,ve){this.isEditing=!0,u(this,l)||(be(this,l,!0),ee(this,ne,rt).call(this),this.thickness||(this.thickness=z._defaultThickness),this.color||(this.color=z._defaultColor||I.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=z._defaultOpacity)),this.currentPath.push([ie,ve]),be(this,E,null),ee(this,X,Bt).call(this),this.ctx.beginPath(),this.ctx.moveTo(ie,ve),be(this,t,()=>{u(this,t)&&(u(this,E)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):ee(this,A,Ke).call(this),this.ctx.lineTo(...u(this,E)),be(this,E,null),this.ctx.stroke()),window.requestAnimationFrame(u(this,t)))}),window.requestAnimationFrame(u(this,t))},ge=new WeakSet,Ri=function(ie,ve){const[xe,pe]=this.currentPath.at(-1);ie===xe&&ve===pe||(this.currentPath.push([ie,ve]),be(this,E,[ie,ve]))},oe=new WeakSet,ki=function(ie,ve){var ke;this.ctx.closePath(),be(this,t,null),ie=Math.min(Math.max(ie,0),this.canvas.width),ve=Math.min(Math.max(ve,0),this.canvas.height);const[xe,pe]=this.currentPath.at(-1);(ie!==xe||ve!==pe)&&this.currentPath.push([ie,ve]);let ye;if(this.currentPath.length!==1)ye=(0,ue.fitCurve)(this.currentPath,30,null);else{const Re=[ie,ve];ye=[[Re,Re.slice(),Re.slice(),Re]]}const Pe=ee(ke=z,k,zt).call(ke,ye);this.currentPath.length=0;const Te=()=>{this.paths.push(ye),this.bezierPath2D.push(Pe),this.rebuild()},Ce=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ee(this,j,_t).call(this),ee(this,N,bt).call(this)),ee(this,T,at).call(this))};this.addCommands({cmd:Te,undo:Ce,mustExec:!0})},A=new WeakSet,Ke=function(){if(this.isEmpty()){ee(this,_,vt).call(this);return}ee(this,X,Bt).call(this);const{canvas:ie,ctx:ve}=this;ve.setTransform(1,0,0,1,0,0),ve.clearRect(0,0,ie.width,ie.height),ee(this,_,vt).call(this);for(const xe of this.bezierPath2D)ve.stroke(xe)},R=new WeakSet,Vt=function(ie){ee(this,oe,ki).call(this,ie.offsetX,ie.offsetY),this.canvas.removeEventListener("pointerleave",u(this,g)),this.canvas.removeEventListener("pointermove",u(this,P)),this.addToAnnotationStorage()},j=new WeakSet,_t=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",z._l10nPromise.get("editor_ink_canvas_aria_label").then(ie=>{var ve;return(ve=this.canvas)==null?void 0:ve.setAttribute("aria-label",ie)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},N=new WeakSet,bt=function(){be(this,b,new ResizeObserver(ie=>{const ve=ie[0].contentRect;ve.width&&ve.height&&this.setDimensions(ve.width,ve.height)})),u(this,b).observe(this.div)},ne=new WeakSet,rt=function(){if(!u(this,l))return;const[ie,ve]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*ie),this.canvas.height=Math.ceil(this.height*ve),ee(this,_,vt).call(this)},B=new WeakSet,Ut=function(ie,ve){const xe=ee(this,Ee,yt).call(this),pe=(ie-xe)/u(this,x),ye=(ve-xe)/u(this,c);this.scaleFactor=Math.min(pe,ye)},_=new WeakSet,vt=function(){const ie=ee(this,Ee,yt).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+ie,this.translationY*this.scaleFactor+ie)},k=new WeakSet,zt=function(ie){const ve=new Path2D;for(let xe=0,pe=ie.length;xe<pe;xe++){const[ye,Pe,Te,Ce]=ie[xe];xe===0&&ve.moveTo(...ye),ve.bezierCurveTo(Pe[0],Pe[1],Te[0],Te[1],Ce[0],Ce[1])}return ve},W=new WeakSet,Li=function(ie,ve,xe,pe){const Pe=[],Te=this.thickness/2;let Ce,ke;for(const Re of this.paths){Ce=[],ke=[];for(let Fe=0,Le=Re.length;Fe<Le;Fe++){const[Ie,De,Be,Oe]=Re[Fe],Ne=ie*(Ie[0]+ve)+Te,Ue=pe-ie*(Ie[1]+xe)-Te,He=ie*(De[0]+ve)+Te,We=pe-ie*(De[1]+xe)-Te,Ze=ie*(Be[0]+ve)+Te,Qe=pe-ie*(Be[1]+xe)-Te,tt=ie*(Oe[0]+ve)+Te,it=pe-ie*(Oe[1]+xe)-Te;Fe===0&&(Ce.push(Ne,Ue),ke.push(Ne,Ue)),Ce.push(He,We,Ze,Qe,tt,it),ee(this,G,Fi).call(this,Ne,Ue,He,We,Ze,Qe,tt,it,4,ke)}Pe.push({bezier:Ce,points:ke})}return Pe},G=new WeakSet,Fi=function(ie,ve,xe,pe,ye,Pe,Te,Ce,ke,Re){if(ee(this,fe,Ii).call(this,ie,ve,xe,pe,ye,Pe,Te,Ce)){Re.push(Te,Ce);return}for(let Fe=1;Fe<ke-1;Fe++){const Le=Fe/ke,Ie=1-Le;let De=Le*ie+Ie*xe,Be=Le*ve+Ie*pe,Oe=Le*xe+Ie*ye,Ne=Le*pe+Ie*Pe;const Ue=Le*ye+Ie*Te,He=Le*Pe+Ie*Ce;De=Le*De+Ie*Oe,Be=Le*Be+Ie*Ne,Oe=Le*Oe+Ie*Ue,Ne=Le*Ne+Ie*He,De=Le*De+Ie*Oe,Be=Le*Be+Ie*Ne,Re.push(De,Be)}Re.push(Te,Ce)},fe=new WeakSet,Ii=function(ie,ve,xe,pe,ye,Pe,Te,Ce){const Re=(3*xe-2*ie-Te)**2,Fe=(3*pe-2*ve-Ce)**2,Le=(3*ye-ie-2*Te)**2,Ie=(3*Pe-ve-2*Ce)**2;return Math.max(Re,Le)+Math.max(Fe,Ie)<=10},me=new WeakSet,jt=function(){let ie=1/0,ve=-1/0,xe=1/0,pe=-1/0;for(const ye of this.paths)for(const[Pe,Te,Ce,ke]of ye){const Re=S.Util.bezierBoundingBox(...Pe,...Te,...Ce,...ke);ie=Math.min(ie,Re[0]),xe=Math.min(xe,Re[1]),ve=Math.max(ve,Re[2]),pe=Math.max(pe,Re[3])}return[ie,xe,ve,pe]},Ee=new WeakSet,yt=function(){return u(this,n)?Math.ceil(this.thickness*this.parentScale):0},T=new WeakSet,at=function(ie=!1){if(this.isEmpty())return;if(!u(this,n)){ee(this,A,Ke).call(this);return}const ve=ee(this,me,jt).call(this),xe=ee(this,Ee,yt).call(this);be(this,x,Math.max(L,ve[2]-ve[0])),be(this,c,Math.max(L,ve[3]-ve[1]));const pe=Math.ceil(xe+u(this,x)*this.scaleFactor),ye=Math.ceil(xe+u(this,c)*this.scaleFactor),[Pe,Te]=this.parentDimensions;this.width=pe/Pe,this.height=ye/Te,be(this,f,pe/ye),ee(this,M,Ht).call(this);const Ce=this.translationX,ke=this.translationY;this.translationX=-ve[0],this.translationY=-ve[1],ee(this,ne,rt).call(this),ee(this,A,Ke).call(this),be(this,p,pe),be(this,e,ye),this.setDims(pe,ye);const Re=ie?xe/this.scaleFactor/2:0;this.translate(Ce-this.translationX-Re,ke-this.translationY-Re)},M=new WeakSet,Ht=function(){const{style:ie}=this.div;u(this,f)>=1?(ie.minHeight=`${L}px`,ie.minWidth=`${Math.round(u(this,f)*L)}px`):(ie.minWidth=`${L}px`,ie.minHeight=`${Math.round(L/u(this,f))}px`)},Q(F,k),Ve(F,"_defaultColor",null),Ve(F,"_defaultOpacity",1),Ve(F,"_defaultThickness",1),Ve(F,"_l10nPromise"),Ve(F,"_type","ink"),a.InkEditor=F},(w,a,Y)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.fitCurve=void 0;const S=Y(31);a.fitCurve=S},w=>{function a(i,d,n){if(!Array.isArray(i))throw new TypeError("First argument should be an array");if(i.forEach(p=>{if(!Array.isArray(p)||p.some(e=>typeof e!="number")||p.length!==i[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),i=i.filter((p,e)=>e===0||!p.every((t,r)=>t===i[e-1][r])),i.length<2)return[];const l=i.length,E=x(i[1],i[0]),b=x(i[l-2],i[l-1]);return Y(i,E,b,d,n)}function Y(i,d,n,l,E){var p,e,t,r,s,m,C,h,D,te,le,X,ae;if(i.length===2)return X=P.vectorLen(P.subtract(i[0],i[1]))/3,p=[i[0],P.addArrays(i[0],P.mulItems(d,X)),P.addArrays(i[1],P.mulItems(n,X)),i[1]],[p];if(e=L(i),[p,r,m]=S(i,e,e,d,n,E),r===0||r<l)return[p];if(r<l*l)for(t=e,s=r,C=m,ae=0;ae<20;ae++){if(t=ue(p,i,t),[p,r,m]=S(i,e,t,d,n,E),r<l)return[p];if(m===C){let de=r/s;if(de>.9999&&de<1.0001)break}s=r,C=m}return le=[],h=P.subtract(i[m-1],i[m+1]),h.every(de=>de===0)&&(h=P.subtract(i[m-1],i[m]),[h[0],h[1]]=[-h[1],h[0]]),D=P.normalize(h),te=P.mulItems(D,-1),le=le.concat(Y(i.slice(0,m+1),d,D,l,E)),le=le.concat(Y(i.slice(m),te,n,l,E)),le}function S(i,d,n,l,E,b){var p,e,t;return p=I(i,n,l,E),[e,t]=F(i,p,d),b&&b({bez:p,points:i,params:d,maxErr:e,maxPoint:t}),[p,e,t]}function I(i,d,n,l){var E,b,p,e,t,r,s,m,C,h,D,te,le,X,ae,de,Z,ge=i[0],Se=i[i.length-1];for(E=[ge,null,null,Se],b=P.zeros_Xx2x2(d.length),le=0,X=d.length;le<X;le++)de=d[le],Z=1-de,p=b[le],p[0]=P.mulItems(n,3*de*(Z*Z)),p[1]=P.mulItems(l,3*Z*(de*de));for(e=[[0,0],[0,0]],t=[0,0],le=0,X=i.length;le<X;le++)de=d[le],p=b[le],e[0][0]+=P.dot(p[0],p[0]),e[0][1]+=P.dot(p[0],p[1]),e[1][0]+=P.dot(p[0],p[1]),e[1][1]+=P.dot(p[1],p[1]),ae=P.subtract(i[le],g.q([ge,ge,Se,Se],de)),t[0]+=P.dot(p[0],ae),t[1]+=P.dot(p[1],ae);return r=e[0][0]*e[1][1]-e[1][0]*e[0][1],s=e[0][0]*t[1]-e[1][0]*t[0],m=t[0]*e[1][1]-t[1]*e[0][1],C=r===0?0:m/r,h=r===0?0:s/r,te=P.vectorLen(P.subtract(ge,Se)),D=1e-6*te,C<D||h<D?(E[1]=P.addArrays(ge,P.mulItems(n,te/3)),E[2]=P.addArrays(Se,P.mulItems(l,te/3))):(E[1]=P.addArrays(ge,P.mulItems(n,C)),E[2]=P.addArrays(Se,P.mulItems(l,h))),E}function ue(i,d,n){return n.map((l,E)=>q(i,d[E],l))}function q(i,d,n){var l=P.subtract(g.q(i,n),d),E=g.qprime(i,n),b=P.mulMatrix(l,E),p=P.sum(P.squareItems(E))+2*P.mulMatrix(l,g.qprimeprime(i,n));return p===0?n:n-b/p}function L(i){var d=[],n,l,E;return i.forEach((b,p)=>{n=p?l+P.vectorLen(P.subtract(b,E)):0,d.push(n),l=n,E=b}),d=d.map(b=>b/l),d}function F(i,d,n){var l,E,b,p,e,t,r,s;E=0,b=Math.floor(i.length/2);const m=f(d,10);for(e=0,t=i.length;e<t;e++)r=i[e],s=c(d,n[e],m,10),p=P.subtract(g.q(d,s),r),l=p[0]*p[0]+p[1]*p[1],l>E&&(E=l,b=e);return[E,b]}var f=function(i,d){for(var n,l=[0],E=i[0],b=0,p=1;p<=d;p++)n=g.q(i,p/d),b+=P.vectorLen(P.subtract(n,E)),l.push(b),E=n;return l=l.map(e=>e/b),l};function c(i,d,n,l){if(d<0)return 0;if(d>1)return 1;for(var E,b,p,e,t,r=1;r<=l;r++)if(d<=n[r]){e=(r-1)/l,p=r/l,b=n[r-1],E=n[r],t=(d-b)/(E-b)*(p-e)+e;break}return t}function x(i,d){return P.normalize(P.subtract(i,d))}class P{static zeros_Xx2x2(d){for(var n=[];d--;)n.push([0,0]);return n}static mulItems(d,n){return d.map(l=>l*n)}static mulMatrix(d,n){return d.reduce((l,E,b)=>l+E*n[b],0)}static subtract(d,n){return d.map((l,E)=>l-n[E])}static addArrays(d,n){return d.map((l,E)=>l+n[E])}static addItems(d,n){return d.map(l=>l+n)}static sum(d){return d.reduce((n,l)=>n+l)}static dot(d,n){return P.mulMatrix(d,n)}static vectorLen(d){return Math.hypot(...d)}static divItems(d,n){return d.map(l=>l/n)}static squareItems(d){return d.map(n=>n*n)}static normalize(d){return this.divItems(d,this.vectorLen(d))}}class g{static q(d,n){var l=1-n,E=P.mulItems(d[0],l*l*l),b=P.mulItems(d[1],3*l*l*n),p=P.mulItems(d[2],3*l*n*n),e=P.mulItems(d[3],n*n*n);return P.addArrays(P.addArrays(E,b),P.addArrays(p,e))}static qprime(d,n){var l=1-n,E=P.mulItems(P.subtract(d[1],d[0]),3*l*l),b=P.mulItems(P.subtract(d[2],d[1]),6*l*n),p=P.mulItems(P.subtract(d[3],d[2]),3*n*n);return P.addArrays(P.addArrays(E,b),p)}static qprimeprime(d,n){return P.addArrays(P.mulItems(P.addArrays(P.subtract(d[2],P.mulItems(d[1],2)),d[0]),6*(1-n)),P.mulItems(P.addArrays(P.subtract(d[3],P.mulItems(d[2],2)),d[1]),6*n))}}w.exports=a,w.exports.fitCubic=Y,w.exports.createTangent=x},(w,a,Y)=>{var A,et,R,Di,se,Wt,K,$t;Object.defineProperty(a,"__esModule",{value:!0}),a.AnnotationLayer=void 0;var S=Y(1),I=Y(6),ue=Y(3),q=Y(33),L=Y(34);const F=1e3,f=9,c=new WeakSet;function x(B){return{width:B[2]-B[0],height:B[3]-B[1]}}class P{static create(o){switch(o.data.annotationType){case S.AnnotationType.LINK:return new i(o);case S.AnnotationType.TEXT:return new d(o);case S.AnnotationType.WIDGET:switch(o.data.fieldType){case"Tx":return new l(o);case"Btn":return o.data.radioButton?new b(o):o.data.checkBox?new E(o):new p(o);case"Ch":return new e(o)}return new n(o);case S.AnnotationType.POPUP:return new t(o);case S.AnnotationType.FREETEXT:return new s(o);case S.AnnotationType.LINE:return new m(o);case S.AnnotationType.SQUARE:return new C(o);case S.AnnotationType.CIRCLE:return new h(o);case S.AnnotationType.POLYLINE:return new D(o);case S.AnnotationType.CARET:return new le(o);case S.AnnotationType.INK:return new X(o);case S.AnnotationType.POLYGON:return new te(o);case S.AnnotationType.HIGHLIGHT:return new ae(o);case S.AnnotationType.UNDERLINE:return new de(o);case S.AnnotationType.SQUIGGLY:return new Z(o);case S.AnnotationType.STRIKEOUT:return new ge(o);case S.AnnotationType.STAMP:return new Se(o);case S.AnnotationType.FILEATTACHMENT:return new oe(o);default:return new g(o)}}}class g{constructor(o,{isRenderable:_=!1,ignoreBorder:y=!1,createQuadrilaterals:k=!1}={}){this.isRenderable=_,this.data=o.data,this.layer=o.layer,this.page=o.page,this.viewport=o.viewport,this.linkService=o.linkService,this.downloadManager=o.downloadManager,this.imageResourcesPath=o.imageResourcesPath,this.renderForms=o.renderForms,this.svgFactory=o.svgFactory,this.annotationStorage=o.annotationStorage,this.enableScripting=o.enableScripting,this.hasJSActions=o.hasJSActions,this._fieldObjects=o.fieldObjects,_&&(this.container=this._createContainer(y)),k&&(this.quadrilaterals=this._createQuadrilaterals(y))}_createContainer(o=!1){const{data:_,page:y,viewport:k}=this,V=document.createElement("section");V.setAttribute("data-annotation-id",_.id),_.noRotate&&V.classList.add("norotate");const{pageWidth:W,pageHeight:he,pageX:G,pageY:J}=k.rawDims,{width:fe,height:ce}=x(_.rect),me=S.Util.normalizeRect([_.rect[0],y.view[3]-_.rect[1]+y.view[1],_.rect[2],y.view[3]-_.rect[3]+y.view[1]]);if(!o&&_.borderStyle.width>0){V.style.borderWidth=`${_.borderStyle.width}px`;const Ee=_.borderStyle.horizontalCornerRadius,Me=_.borderStyle.verticalCornerRadius;if(Ee>0||Me>0){const re=`calc(${Ee}px * var(--scale-factor)) / calc(${Me}px * var(--scale-factor))`;V.style.borderRadius=re}else if(this instanceof b){const re=`calc(${fe}px * var(--scale-factor)) / calc(${ce}px * var(--scale-factor))`;V.style.borderRadius=re}switch(_.borderStyle.style){case S.AnnotationBorderStyleType.SOLID:V.style.borderStyle="solid";break;case S.AnnotationBorderStyleType.DASHED:V.style.borderStyle="dashed";break;case S.AnnotationBorderStyleType.BEVELED:(0,S.warn)("Unimplemented border style: beveled");break;case S.AnnotationBorderStyleType.INSET:(0,S.warn)("Unimplemented border style: inset");break;case S.AnnotationBorderStyleType.UNDERLINE:V.style.borderBottomStyle="solid";break}const T=_.borderColor||null;T?V.style.borderColor=S.Util.makeHexColor(T[0]|0,T[1]|0,T[2]|0):V.style.borderWidth=0}V.style.left=`${100*(me[0]-G)/W}%`,V.style.top=`${100*(me[1]-J)/he}%`;const{rotation:Ae}=_;return _.hasOwnCanvas||Ae===0?(V.style.width=`${100*fe/W}%`,V.style.height=`${100*ce/he}%`):this.setRotation(Ae,V),V}setRotation(o,_=this.container){const{pageWidth:y,pageHeight:k}=this.viewport.rawDims,{width:V,height:W}=x(this.data.rect);let he,G;o%180===0?(he=100*V/y,G=100*W/k):(he=100*W/y,G=100*V/k),_.style.width=`${he}%`,_.style.height=`${G}%`,_.setAttribute("data-main-rotation",(360-o)%360)}get _commonActions(){const o=(_,y,k)=>{const V=k.detail[_];k.target.style[y]=q.ColorConverters[`${V[0]}_HTML`](V.slice(1))};return(0,S.shadow)(this,"_commonActions",{display:_=>{const y=_.detail.display%2===1;this.container.style.visibility=y?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:y,print:_.detail.display===0||_.detail.display===3})},print:_=>{this.annotationStorage.setValue(this.data.id,{print:_.detail.print})},hidden:_=>{this.container.style.visibility=_.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:_.detail.hidden})},focus:_=>{setTimeout(()=>_.target.focus({preventScroll:!1}),0)},userName:_=>{_.target.title=_.detail.userName},readonly:_=>{_.detail.readonly?_.target.setAttribute("readonly",""):_.target.removeAttribute("readonly")},required:_=>{this._setRequired(_.target,_.detail.required)},bgColor:_=>{o("bgColor","backgroundColor",_)},fillColor:_=>{o("fillColor","backgroundColor",_)},fgColor:_=>{o("fgColor","color",_)},textColor:_=>{o("textColor","color",_)},borderColor:_=>{o("borderColor","borderColor",_)},strokeColor:_=>{o("strokeColor","borderColor",_)},rotation:_=>{const y=_.detail.rotation;this.setRotation(y),this.annotationStorage.setValue(this.data.id,{rotation:y})}})}_dispatchEventFromSandbox(o,_){const y=this._commonActions;for(const k of Object.keys(_.detail)){const V=o[k]||y[k];V==null||V(_)}}_setDefaultPropertiesFromJS(o){if(!this.enableScripting)return;const _=this.annotationStorage.getRawValue(this.data.id);if(!_)return;const y=this._commonActions;for(const[k,V]of Object.entries(_)){const W=y[k];if(W){const he={detail:{[k]:V},target:o};W(he),delete _[k]}}}_createQuadrilaterals(o=!1){if(!this.data.quadPoints)return null;const _=[],y=this.data.rect;for(const k of this.data.quadPoints)this.data.rect=[k[2].x,k[2].y,k[1].x,k[1].y],_.push(this._createContainer(o));return this.data.rect=y,_}_createPopup(o,_){let y=this.container;this.quadrilaterals&&(o=o||this.quadrilaterals,y=this.quadrilaterals[0]),o||(o=document.createElement("div"),o.classList.add("popupTriggerArea"),y.append(o));const V=new r({container:y,trigger:o,color:_.color,titleObj:_.titleObj,modificationDate:_.modificationDate,contentsObj:_.contentsObj,richText:_.richText,hideWrapper:!0}).render();V.style.left="100%",y.append(V)}_renderQuadrilaterals(o){for(const _ of this.quadrilaterals)_.classList.add(o);return this.quadrilaterals}render(){(0,S.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(o,_=null){const y=[];if(this._fieldObjects){const k=this._fieldObjects[o];if(k)for(const{page:V,id:W,exportValues:he}of k){if(V===-1||W===_)continue;const G=typeof he=="string"?he:null,J=document.querySelector(`[data-element-id="${W}"]`);if(J&&!c.has(J)){(0,S.warn)(`_getElementsByName - element not allowed: ${W}`);continue}y.push({id:W,exportValue:G,domElement:J})}return y}for(const k of document.getElementsByName(o)){const{exportValue:V}=k,W=k.getAttribute("data-element-id");W!==_&&c.has(k)&&y.push({id:W,exportValue:V,domElement:k})}return y}}class i extends g{constructor(_,y=null){super(_,{isRenderable:!0,ignoreBorder:!!(y!=null&&y.ignoreBorder),createQuadrilaterals:!0});Q(this,A);Q(this,R);this.isTooltipOnly=_.data.isTooltipOnly}render(){const{data:_,linkService:y}=this,k=document.createElement("a");k.setAttribute("data-element-id",_.id);let V=!1;return _.url?(y.addLinkAttributes(k,_.url,_.newWindow),V=!0):_.action?(this._bindNamedAction(k,_.action),V=!0):_.attachment?(this._bindAttachment(k,_.attachment),V=!0):_.setOCGState?(ee(this,R,Di).call(this,k,_.setOCGState),V=!0):_.dest?(this._bindLink(k,_.dest),V=!0):(_.actions&&(_.actions.Action||_.actions["Mouse Up"]||_.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(k,_),V=!0),_.resetForm?(this._bindResetFormAction(k,_.resetForm),V=!0):this.isTooltipOnly&&!V&&(this._bindLink(k,""),V=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((W,he)=>{const G=he===0?k:k.cloneNode();return W.append(G),W}):(this.container.classList.add("linkAnnotation"),V&&this.container.append(k),this.container)}_bindLink(_,y){_.href=this.linkService.getDestinationHash(y),_.onclick=()=>(y&&this.linkService.goToDestination(y),!1),(y||y==="")&&ee(this,A,et).call(this)}_bindNamedAction(_,y){_.href=this.linkService.getAnchorUrl(""),_.onclick=()=>(this.linkService.executeNamedAction(y),!1),ee(this,A,et).call(this)}_bindAttachment(_,y){_.href=this.linkService.getAnchorUrl(""),_.onclick=()=>{var k;return(k=this.downloadManager)==null||k.openOrDownloadData(this.container,y.content,y.filename),!1},ee(this,A,et).call(this)}_bindJSAction(_,y){_.href=this.linkService.getAnchorUrl("");const k=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const V of Object.keys(y.actions)){const W=k.get(V);W&&(_[W]=()=>{var he;return(he=this.linkService.eventBus)==null||he.dispatch("dispatcheventinsandbox",{source:this,detail:{id:y.id,name:V}}),!1})}_.onclick||(_.onclick=()=>!1),ee(this,A,et).call(this)}_bindResetFormAction(_,y){const k=_.onclick;if(k||(_.href=this.linkService.getAnchorUrl("")),ee(this,A,et).call(this),!this._fieldObjects){(0,S.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),k||(_.onclick=()=>!1);return}_.onclick=()=>{var ce;k==null||k();const{fields:V,refs:W,include:he}=y,G=[];if(V.length!==0||W.length!==0){const me=new Set(W);for(const Ae of V){const Ee=this._fieldObjects[Ae]||[];for(const{id:Me}of Ee)me.add(Me)}for(const Ae of Object.values(this._fieldObjects))for(const Ee of Ae)me.has(Ee.id)===he&&G.push(Ee)}else for(const me of Object.values(this._fieldObjects))G.push(...me);const J=this.annotationStorage,fe=[];for(const me of G){const{id:Ae}=me;switch(fe.push(Ae),me.type){case"text":{const Me=me.defaultValue||"";J.setValue(Ae,{value:Me});break}case"checkbox":case"radiobutton":{const Me=me.defaultValue===me.exportValues;J.setValue(Ae,{value:Me});break}case"combobox":case"listbox":{const Me=me.defaultValue||"";J.setValue(Ae,{value:Me});break}default:continue}const Ee=document.querySelector(`[data-element-id="${Ae}"]`);if(Ee){if(!c.has(Ee)){(0,S.warn)(`_bindResetFormAction - element not allowed: ${Ae}`);continue}}else continue;Ee.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((ce=this.linkService.eventBus)==null||ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:fe,name:"ResetForm"}})),!1}}}A=new WeakSet,et=function(){this.container.setAttribute("data-internal-link","")},R=new WeakSet,Di=function(_,y){_.href=this.linkService.getAnchorUrl(""),_.onclick=()=>(this.linkService.executeSetOCGState(y),!1),ee(this,A,et).call(this)};class d extends g{constructor(o){var y,k,V;const _=!!(o.data.hasPopup||(y=o.data.titleObj)!=null&&y.str||(k=o.data.contentsObj)!=null&&k.str||(V=o.data.richText)!=null&&V.str);super(o,{isRenderable:_})}render(){this.container.classList.add("textAnnotation");const o=document.createElement("img");return o.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",o.alt="[{{type}} Annotation]",o.dataset.l10nId="text_annotation_type",o.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(o,this.data),this.container.append(o),this.container}}class n extends g{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(o){const{isWin:_,isMac:y}=S.FeatureTest.platform;return _&&o.ctrlKey||y&&o.metaKey}_setEventListener(o,_,y,k){_.includes("mouse")?o.addEventListener(_,V=>{var W;(W=this.linkService.eventBus)==null||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:y,value:k(V),shift:V.shiftKey,modifier:this._getKeyModifier(V)}})}):o.addEventListener(_,V=>{var W;(W=this.linkService.eventBus)==null||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:y,value:k(V)}})})}_setEventListeners(o,_,y){var k;for(const[V,W]of _)(W==="Action"||(k=this.data.actions)!=null&&k[W])&&this._setEventListener(o,V,W,y)}_setBackgroundColor(o){const _=this.data.backgroundColor||null;o.style.backgroundColor=_===null?"transparent":S.Util.makeHexColor(_[0],_[1],_[2])}_setTextStyle(o){const _=["left","center","right"],{fontColor:y}=this.data.defaultAppearanceData,k=this.data.defaultAppearanceData.fontSize||f,V=o.style;let W;const he=2,G=J=>Math.round(10*J)/10;if(this.data.multiLine){const J=Math.abs(this.data.rect[3]-this.data.rect[1]-he),fe=Math.round(J/(S.LINE_FACTOR*k))||1,ce=J/fe;W=Math.min(k,G(ce/S.LINE_FACTOR))}else{const J=Math.abs(this.data.rect[3]-this.data.rect[1]-he);W=Math.min(k,G(J/S.LINE_FACTOR))}V.fontSize=`calc(${W}px * var(--scale-factor))`,V.color=S.Util.makeHexColor(y[0],y[1],y[2]),this.data.textAlignment!==null&&(V.textAlign=_[this.data.textAlignment])}_setRequired(o,_){_?o.setAttribute("required",!0):o.removeAttribute("required"),o.setAttribute("aria-required",_)}}class l extends n{constructor(o){const _=o.renderForms||!o.data.hasAppearance&&!!o.data.fieldValue;super(o,{isRenderable:_})}setPropertyOnSiblings(o,_,y,k){const V=this.annotationStorage;for(const W of this._getElementsByName(o.name,o.id))W.domElement&&(W.domElement[_]=y),V.setValue(W.id,{[k]:y})}render(){var k;const o=this.annotationStorage,_=this.data.id;this.container.classList.add("textWidgetAnnotation");let y=null;if(this.renderForms){const V=o.getValue(_,{value:this.data.fieldValue});let W=V.formattedValue||V.value||"";const he=o.getValue(_,{charLimit:this.data.maxLen}).charLimit;he&&W.length>he&&(W=W.slice(0,he));const G={userValue:W,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(y=document.createElement("textarea"),y.textContent=W,this.data.doNotScroll&&(y.style.overflowY="hidden")):(y=document.createElement("input"),y.type="text",y.setAttribute("value",W),this.data.doNotScroll&&(y.style.overflowX="hidden")),c.add(y),y.setAttribute("data-element-id",_),y.disabled=this.data.readOnly,y.name=this.data.fieldName,y.tabIndex=F,this._setRequired(y,this.data.required),he&&(y.maxLength=he),y.addEventListener("input",fe=>{o.setValue(_,{value:fe.target.value}),this.setPropertyOnSiblings(y,"value",fe.target.value,"value")}),y.addEventListener("resetform",fe=>{const ce=this.data.defaultFieldValue??"";y.value=G.userValue=ce,G.formattedValue=null});let J=fe=>{const{formattedValue:ce}=G;ce!=null&&(fe.target.value=ce),fe.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){y.addEventListener("focus",ce=>{const{target:me}=ce;G.userValue&&(me.value=G.userValue),G.lastCommittedValue=me.value,G.commitKey=1}),y.addEventListener("updatefromsandbox",ce=>{const me={value(Ae){G.userValue=Ae.detail.value??"",o.setValue(_,{value:G.userValue.toString()}),Ae.target.value=G.userValue},formattedValue(Ae){const{formattedValue:Ee}=Ae.detail;G.formattedValue=Ee,Ee!=null&&Ae.target!==document.activeElement&&(Ae.target.value=Ee),o.setValue(_,{formattedValue:Ee})},selRange(Ae){Ae.target.setSelectionRange(...Ae.detail.selRange)},charLimit:Ae=>{var re;const{charLimit:Ee}=Ae.detail,{target:Me}=Ae;if(Ee===0){Me.removeAttribute("maxLength");return}Me.setAttribute("maxLength",Ee);let T=G.userValue;!T||T.length<=Ee||(T=T.slice(0,Ee),Me.value=G.userValue=T,o.setValue(_,{value:T}),(re=this.linkService.eventBus)==null||re.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:T,willCommit:!0,commitKey:1,selStart:Me.selectionStart,selEnd:Me.selectionEnd}}))}};this._dispatchEventFromSandbox(me,ce)}),y.addEventListener("keydown",ce=>{var Ee;G.commitKey=1;let me=-1;if(ce.key==="Escape"?me=0:ce.key==="Enter"&&!this.data.multiLine?me=2:ce.key==="Tab"&&(G.commitKey=3),me===-1)return;const{value:Ae}=ce.target;G.lastCommittedValue!==Ae&&(G.lastCommittedValue=Ae,G.userValue=Ae,(Ee=this.linkService.eventBus)==null||Ee.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:Ae,willCommit:!0,commitKey:me,selStart:ce.target.selectionStart,selEnd:ce.target.selectionEnd}}))});const fe=J;J=null,y.addEventListener("blur",ce=>{var Ae;if(!ce.relatedTarget)return;const{value:me}=ce.target;G.userValue=me,G.lastCommittedValue!==me&&((Ae=this.linkService.eventBus)==null||Ae.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:me,willCommit:!0,commitKey:G.commitKey,selStart:ce.target.selectionStart,selEnd:ce.target.selectionEnd}})),fe(ce)}),(k=this.data.actions)!=null&&k.Keystroke&&y.addEventListener("beforeinput",ce=>{var O;G.lastCommittedValue=null;const{data:me,target:Ae}=ce,{value:Ee,selectionStart:Me,selectionEnd:T}=Ae;let re=Me,M=T;switch(ce.inputType){case"deleteWordBackward":{const z=Ee.substring(0,Me).match(/\w*[^\w]*$/);z&&(re-=z[0].length);break}case"deleteWordForward":{const z=Ee.substring(Me).match(/^[^\w]*\w*/);z&&(M+=z[0].length);break}case"deleteContentBackward":Me===T&&(re-=1);break;case"deleteContentForward":Me===T&&(M+=1);break}ce.preventDefault(),(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:Ee,change:me||"",willCommit:!1,selStart:re,selEnd:M}})}),this._setEventListeners(y,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ce=>ce.target.value)}if(J&&y.addEventListener("blur",J),this.data.comb){const ce=(this.data.rect[2]-this.data.rect[0])/he;y.classList.add("comb"),y.style.letterSpacing=`calc(${ce}px * var(--scale-factor) - 1ch)`}}else y=document.createElement("div"),y.textContent=this.data.fieldValue,y.style.verticalAlign="middle",y.style.display="table-cell";return this._setTextStyle(y),this._setBackgroundColor(y),this._setDefaultPropertiesFromJS(y),this.container.append(y),this.container}}class E extends n{constructor(o){super(o,{isRenderable:o.renderForms})}render(){const o=this.annotationStorage,_=this.data,y=_.id;let k=o.getValue(y,{value:_.exportValue===_.fieldValue}).value;typeof k=="string"&&(k=k!=="Off",o.setValue(y,{value:k})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const V=document.createElement("input");return c.add(V),V.setAttribute("data-element-id",y),V.disabled=_.readOnly,this._setRequired(V,this.data.required),V.type="checkbox",V.name=_.fieldName,k&&V.setAttribute("checked",!0),V.setAttribute("exportValue",_.exportValue),V.tabIndex=F,V.addEventListener("change",W=>{const{name:he,checked:G}=W.target;for(const J of this._getElementsByName(he,y)){const fe=G&&J.exportValue===_.exportValue;J.domElement&&(J.domElement.checked=fe),o.setValue(J.id,{value:fe})}o.setValue(y,{value:G})}),V.addEventListener("resetform",W=>{const he=_.defaultFieldValue||"Off";W.target.checked=he===_.exportValue}),this.enableScripting&&this.hasJSActions&&(V.addEventListener("updatefromsandbox",W=>{const he={value(G){G.target.checked=G.detail.value!=="Off",o.setValue(y,{value:G.target.checked})}};this._dispatchEventFromSandbox(he,W)}),this._setEventListeners(V,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],W=>W.target.checked)),this._setBackgroundColor(V),this._setDefaultPropertiesFromJS(V),this.container.append(V),this.container}}class b extends n{constructor(o){super(o,{isRenderable:o.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const o=this.annotationStorage,_=this.data,y=_.id;let k=o.getValue(y,{value:_.fieldValue===_.buttonValue}).value;typeof k=="string"&&(k=k!==_.buttonValue,o.setValue(y,{value:k}));const V=document.createElement("input");if(c.add(V),V.setAttribute("data-element-id",y),V.disabled=_.readOnly,this._setRequired(V,this.data.required),V.type="radio",V.name=_.fieldName,k&&V.setAttribute("checked",!0),V.tabIndex=F,V.addEventListener("change",W=>{const{name:he,checked:G}=W.target;for(const J of this._getElementsByName(he,y))o.setValue(J.id,{value:!1});o.setValue(y,{value:G})}),V.addEventListener("resetform",W=>{const he=_.defaultFieldValue;W.target.checked=he!=null&&he===_.buttonValue}),this.enableScripting&&this.hasJSActions){const W=_.buttonValue;V.addEventListener("updatefromsandbox",he=>{const G={value:J=>{const fe=W===J.detail.value;for(const ce of this._getElementsByName(J.target.name)){const me=fe&&ce.id===y;ce.domElement&&(ce.domElement.checked=me),o.setValue(ce.id,{value:me})}}};this._dispatchEventFromSandbox(G,he)}),this._setEventListeners(V,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],he=>he.target.checked)}return this._setBackgroundColor(V),this._setDefaultPropertiesFromJS(V),this.container.append(V),this.container}}class p extends i{constructor(o){super(o,{ignoreBorder:o.data.hasAppearance})}render(){const o=super.render();o.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(o.title=this.data.alternativeText);const _=o.lastChild;return this.enableScripting&&this.hasJSActions&&_&&(this._setDefaultPropertiesFromJS(_),_.addEventListener("updatefromsandbox",y=>{this._dispatchEventFromSandbox({},y)})),o}}class e extends n{constructor(o){super(o,{isRenderable:o.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const o=this.annotationStorage,_=this.data.id,y=o.getValue(_,{value:this.data.fieldValue}),k=document.createElement("select");c.add(k),k.setAttribute("data-element-id",_),k.disabled=this.data.readOnly,this._setRequired(k,this.data.required),k.name=this.data.fieldName,k.tabIndex=F;let V=this.data.combo&&this.data.options.length>0;this.data.combo||(k.size=this.data.options.length,this.data.multiSelect&&(k.multiple=!0)),k.addEventListener("resetform",fe=>{const ce=this.data.defaultFieldValue;for(const me of k.options)me.selected=me.value===ce});for(const fe of this.data.options){const ce=document.createElement("option");ce.textContent=fe.displayValue,ce.value=fe.exportValue,y.value.includes(fe.exportValue)&&(ce.setAttribute("selected",!0),V=!1),k.append(ce)}let W=null;if(V){const fe=document.createElement("option");fe.value=" ",fe.setAttribute("hidden",!0),fe.setAttribute("selected",!0),k.prepend(fe),W=()=>{fe.remove(),k.removeEventListener("input",W),W=null},k.addEventListener("input",W)}const he=fe=>{const ce=fe?"value":"textContent",{options:me,multiple:Ae}=k;return Ae?Array.prototype.filter.call(me,Ee=>Ee.selected).map(Ee=>Ee[ce]):me.selectedIndex===-1?null:me[me.selectedIndex][ce]};let G=he(!1);const J=fe=>{const ce=fe.target.options;return Array.prototype.map.call(ce,me=>({displayValue:me.textContent,exportValue:me.value}))};return this.enableScripting&&this.hasJSActions?(k.addEventListener("updatefromsandbox",fe=>{const ce={value(me){W==null||W();const Ae=me.detail.value,Ee=new Set(Array.isArray(Ae)?Ae:[Ae]);for(const Me of k.options)Me.selected=Ee.has(Me.value);o.setValue(_,{value:he(!0)}),G=he(!1)},multipleSelection(me){k.multiple=!0},remove(me){const Ae=k.options,Ee=me.detail.remove;Ae[Ee].selected=!1,k.remove(Ee),Ae.length>0&&Array.prototype.findIndex.call(Ae,T=>T.selected)===-1&&(Ae[0].selected=!0),o.setValue(_,{value:he(!0),items:J(me)}),G=he(!1)},clear(me){for(;k.length!==0;)k.remove(0);o.setValue(_,{value:null,items:[]}),G=he(!1)},insert(me){const{index:Ae,displayValue:Ee,exportValue:Me}=me.detail.insert,T=k.children[Ae],re=document.createElement("option");re.textContent=Ee,re.value=Me,T?T.before(re):k.append(re),o.setValue(_,{value:he(!0),items:J(me)}),G=he(!1)},items(me){const{items:Ae}=me.detail;for(;k.length!==0;)k.remove(0);for(const Ee of Ae){const{displayValue:Me,exportValue:T}=Ee,re=document.createElement("option");re.textContent=Me,re.value=T,k.append(re)}k.options.length>0&&(k.options[0].selected=!0),o.setValue(_,{value:he(!0),items:J(me)}),G=he(!1)},indices(me){const Ae=new Set(me.detail.indices);for(const Ee of me.target.options)Ee.selected=Ae.has(Ee.index);o.setValue(_,{value:he(!0)}),G=he(!1)},editable(me){me.target.disabled=!me.detail.editable}};this._dispatchEventFromSandbox(ce,fe)}),k.addEventListener("input",fe=>{var me;const ce=he(!0);o.setValue(_,{value:ce}),fe.preventDefault(),(me=this.linkService.eventBus)==null||me.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_,name:"Keystroke",value:G,changeEx:ce,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(k,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],fe=>fe.target.value)):k.addEventListener("input",function(fe){o.setValue(_,{value:he(!0)})}),this.data.combo&&this._setTextStyle(k),this._setBackgroundColor(k),this._setDefaultPropertiesFromJS(k),this.container.append(k),this.container}}const j=class extends g{constructor(o){var k,V,W;const{data:_}=o,y=!j.IGNORE_TYPES.has(_.parentType)&&!!((k=_.titleObj)!=null&&k.str||(V=_.contentsObj)!=null&&V.str||(W=_.richText)!=null&&W.str);super(o,{isRenderable:y})}render(){this.container.classList.add("popupAnnotation");const o=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(o.length===0)return this.container;const _=new r({container:this.container,trigger:Array.from(o),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),y=this.page,k=S.Util.normalizeRect([this.data.parentRect[0],y.view[3]-this.data.parentRect[1]+y.view[1],this.data.parentRect[2],y.view[3]-this.data.parentRect[3]+y.view[1]]),V=k[0]+this.data.parentRect[2]-this.data.parentRect[0],W=k[1],{pageWidth:he,pageHeight:G,pageX:J,pageY:fe}=this.viewport.rawDims;return this.container.style.left=`${100*(V-J)/he}%`,this.container.style.top=`${100*(W-fe)/G}%`,this.container.append(_.render()),this.container}};let t=j;Ve(t,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class r{constructor(o){this.container=o.container,this.trigger=o.trigger,this.color=o.color,this.titleObj=o.titleObj,this.modificationDate=o.modificationDate,this.contentsObj=o.contentsObj,this.richText=o.richText,this.hideWrapper=o.hideWrapper||!1,this.pinned=!1}render(){var he,G;const _=document.createElement("div");_.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?_:this.container,this.hideElement.hidden=!0;const y=document.createElement("div");y.classList.add("popup");const k=this.color;if(k){const J=.7*(255-k[0])+k[0],fe=.7*(255-k[1])+k[1],ce=.7*(255-k[2])+k[2];y.style.backgroundColor=S.Util.makeHexColor(J|0,fe|0,ce|0)}const V=document.createElement("h1");V.dir=this.titleObj.dir,V.textContent=this.titleObj.str,y.append(V);const W=I.PDFDateString.toDateObject(this.modificationDate);if(W){const J=document.createElement("span");J.classList.add("popupDate"),J.textContent="{{date}}, {{time}}",J.dataset.l10nId="annotation_date_string",J.dataset.l10nArgs=JSON.stringify({date:W.toLocaleDateString(),time:W.toLocaleTimeString()}),y.append(J)}if((he=this.richText)!=null&&he.str&&(!((G=this.contentsObj)!=null&&G.str)||this.contentsObj.str===this.richText.str))L.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:y}),y.lastChild.classList.add("richText","popupContent");else{const J=this._formatContents(this.contentsObj);y.append(J)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const J of this.trigger)J.addEventListener("click",this._toggle.bind(this)),J.addEventListener("mouseover",this._show.bind(this,!1)),J.addEventListener("mouseout",this._hide.bind(this,!1));return y.addEventListener("click",this._hide.bind(this,!0)),_.append(y),_}_formatContents({str:o,dir:_}){const y=document.createElement("p");y.classList.add("popupContent"),y.dir=_;const k=o.split(/(?:\r\n?|\n)/);for(let V=0,W=k.length;V<W;++V){const he=k[V];y.append(document.createTextNode(he)),V<W-1&&y.append(document.createElement("br"))}return y}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(o=!1){o&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(o=!0){o&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class s extends g{constructor(o){var y,k,V;const _=!!(o.data.hasPopup||(y=o.data.titleObj)!=null&&y.str||(k=o.data.contentsObj)!=null&&k.str||(V=o.data.richText)!=null&&V.str);super(o,{isRenderable:_,ignoreBorder:!0}),this.textContent=o.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const o=document.createElement("div");o.classList.add("annotationTextContent"),o.setAttribute("role","comment");for(const _ of this.textContent){const y=document.createElement("span");y.textContent=_,o.append(y)}this.container.append(o)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class m extends g{constructor(o){var y,k,V;const _=!!(o.data.hasPopup||(y=o.data.titleObj)!=null&&y.str||(k=o.data.contentsObj)!=null&&k.str||(V=o.data.richText)!=null&&V.str);super(o,{isRenderable:_,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const o=this.data,{width:_,height:y}=x(o.rect),k=this.svgFactory.create(_,y,!0),V=this.svgFactory.createElement("svg:line");return V.setAttribute("x1",o.rect[2]-o.lineCoordinates[0]),V.setAttribute("y1",o.rect[3]-o.lineCoordinates[1]),V.setAttribute("x2",o.rect[2]-o.lineCoordinates[2]),V.setAttribute("y2",o.rect[3]-o.lineCoordinates[3]),V.setAttribute("stroke-width",o.borderStyle.width||1),V.setAttribute("stroke","transparent"),V.setAttribute("fill","transparent"),k.append(V),this.container.append(k),this._createPopup(V,o),this.container}}class C extends g{constructor(o){var y,k,V;const _=!!(o.data.hasPopup||(y=o.data.titleObj)!=null&&y.str||(k=o.data.contentsObj)!=null&&k.str||(V=o.data.richText)!=null&&V.str);super(o,{isRenderable:_,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const o=this.data,{width:_,height:y}=x(o.rect),k=this.svgFactory.create(_,y,!0),V=o.borderStyle.width,W=this.svgFactory.createElement("svg:rect");return W.setAttribute("x",V/2),W.setAttribute("y",V/2),W.setAttribute("width",_-V),W.setAttribute("height",y-V),W.setAttribute("stroke-width",V||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),k.append(W),this.container.append(k),this._createPopup(W,o),this.container}}class h extends g{constructor(o){var y,k,V;const _=!!(o.data.hasPopup||(y=o.data.titleObj)!=null&&y.str||(k=o.data.contentsObj)!=null&&k.str||(V=o.data.richText)!=null&&V.str);super(o,{isRenderable:_,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const o=this.data,{width:_,height:y}=x(o.rect),k=this.svgFactory.create(_,y,!0),V=o.borderStyle.width,W=this.svgFactory.createElement("svg:ellipse");return W.setAttribute("cx",_/2),W.setAttribute("cy",y/2),W.setAttribute("rx",_/2-V/2),W.setAttribute("ry",y/2-V/2),W.setAttribute("stroke-width",V||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),k.append(W),this.container.append(k),this._createPopup(W,o),this.container}}class D extends g{constructor(o){var y,k,V;const _=!!(o.data.hasPopup||(y=o.data.titleObj)!=null&&y.str||(k=o.data.contentsObj)!=null&&k.str||(V=o.data.richText)!=null&&V.str);super(o,{isRenderable:_,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const o=this.data,{width:_,height:y}=x(o.rect),k=this.svgFactory.create(_,y,!0);let V=[];for(const he of o.vertices){const G=he.x-o.rect[0],J=o.rect[3]-he.y;V.push(G+","+J)}V=V.join(" ");const W=this.svgFactory.createElement(this.svgElementName);return W.setAttribute("points",V),W.setAttribute("stroke-width",o.borderStyle.width||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),k.append(W),this.container.append(k),this._createPopup(W,o),this.container}}class te extends D{constructor(o){super(o),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class le extends g{constructor(o){var y,k,V;const _=!!(o.data.hasPopup||(y=o.data.titleObj)!=null&&y.str||(k=o.data.contentsObj)!=null&&k.str||(V=o.data.richText)!=null&&V.str);super(o,{isRenderable:_,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class X extends g{constructor(o){var y,k,V;const _=!!(o.data.hasPopup||(y=o.data.titleObj)!=null&&y.str||(k=o.data.contentsObj)!=null&&k.str||(V=o.data.richText)!=null&&V.str);super(o,{isRenderable:_,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const o=this.data,{width:_,height:y}=x(o.rect),k=this.svgFactory.create(_,y,!0);for(const V of o.inkLists){let W=[];for(const G of V){const J=G.x-o.rect[0],fe=o.rect[3]-G.y;W.push(`${J},${fe}`)}W=W.join(" ");const he=this.svgFactory.createElement(this.svgElementName);he.setAttribute("points",W),he.setAttribute("stroke-width",o.borderStyle.width||1),he.setAttribute("stroke","transparent"),he.setAttribute("fill","transparent"),this._createPopup(he,o),k.append(he)}return this.container.append(k),this.container}}class ae extends g{constructor(o){var y,k,V;const _=!!(o.data.hasPopup||(y=o.data.titleObj)!=null&&y.str||(k=o.data.contentsObj)!=null&&k.str||(V=o.data.richText)!=null&&V.str);super(o,{isRenderable:_,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class de extends g{constructor(o){var y,k,V;const _=!!(o.data.hasPopup||(y=o.data.titleObj)!=null&&y.str||(k=o.data.contentsObj)!=null&&k.str||(V=o.data.richText)!=null&&V.str);super(o,{isRenderable:_,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class Z extends g{constructor(o){var y,k,V;const _=!!(o.data.hasPopup||(y=o.data.titleObj)!=null&&y.str||(k=o.data.contentsObj)!=null&&k.str||(V=o.data.richText)!=null&&V.str);super(o,{isRenderable:_,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class ge extends g{constructor(o){var y,k,V;const _=!!(o.data.hasPopup||(y=o.data.titleObj)!=null&&y.str||(k=o.data.contentsObj)!=null&&k.str||(V=o.data.richText)!=null&&V.str);super(o,{isRenderable:_,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class Se extends g{constructor(o){var y,k,V;const _=!!(o.data.hasPopup||(y=o.data.titleObj)!=null&&y.str||(k=o.data.contentsObj)!=null&&k.str||(V=o.data.richText)!=null&&V.str);super(o,{isRenderable:_,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class oe extends g{constructor(o){var k;super(o,{isRenderable:!0});const{filename:_,content:y}=this.data.file;this.filename=(0,I.getFilenameFromUrl)(_,!0),this.content=y,(k=this.linkService.eventBus)==null||k.dispatch("fileattachmentannotation",{source:this,filename:_,content:y})}render(){var _,y;this.container.classList.add("fileAttachmentAnnotation");let o;return this.data.hasAppearance?o=document.createElement("div"):(o=document.createElement("img"),o.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),o.classList.add("popupTriggerArea"),o.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((_=this.data.titleObj)!=null&&_.str||(y=this.data.contentsObj)!=null&&y.str||this.data.richText)&&this._createPopup(o,this.data),this.container.append(o),this.container}_download(){var o;(o=this.downloadManager)==null||o.openOrDownloadData(this.container,this.content,this.filename)}}const U=class{static render(o){var G,J;const{annotations:_,div:y,viewport:k,accessibilityManager:V}=o;(0,I.setLayerDimensions)(y,k);const W={data:null,layer:y,page:o.page,viewport:k,linkService:o.linkService,downloadManager:o.downloadManager,imageResourcesPath:o.imageResourcesPath||"",renderForms:o.renderForms!==!1,svgFactory:new I.DOMSVGFactory,annotationStorage:o.annotationStorage||new ue.AnnotationStorage,enableScripting:o.enableScripting===!0,hasJSActions:o.hasJSActions,fieldObjects:o.fieldObjects};let he=0;for(const fe of _){if(fe.noHTML)continue;if(fe.annotationType!==S.AnnotationType.POPUP){const{width:Ae,height:Ee}=x(fe.rect);if(Ae<=0||Ee<=0)continue}W.data=fe;const ce=P.create(W);if(!ce.isRenderable)continue;const me=ce.render();if(fe.hidden&&(me.style.visibility="hidden"),Array.isArray(me))for(const Ae of me)Ae.style.zIndex=he++,ee(G=U,se,Wt).call(G,Ae,fe.id,y,V);else me.style.zIndex=he++,ce instanceof t?y.prepend(me):ee(J=U,se,Wt).call(J,me,fe.id,y,V)}ee(this,K,$t).call(this,y,o.annotationCanvasMap)}static update(o){const{annotationCanvasMap:_,div:y,viewport:k}=o;(0,I.setLayerDimensions)(y,{rotation:k.rotation}),ee(this,K,$t).call(this,y,_),y.hidden=!1}};let H=U;se=new WeakSet,Wt=function(o,_,y,k){const V=o.firstChild||o;V.id=`${I.AnnotationPrefix}${_}`,y.append(o),k==null||k.moveElementInDOM(y,o,V,!1)},K=new WeakSet,$t=function(o,_){if(_){for(const[y,k]of _){const V=o.querySelector(`[data-annotation-id="${y}"]`);if(!V)continue;const{firstChild:W}=V;W?W.nodeName==="CANVAS"?W.replaceWith(k):W.before(k):V.append(k)}_.clear()}},Q(H,se),Q(H,K),a.AnnotationLayer=H},(w,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorConverters=void 0;function Y(I){return Math.floor(Math.max(0,Math.min(1,I))*255).toString(16).padStart(2,"0")}class S{static CMYK_G([ue,q,L,F]){return["G",1-Math.min(1,.3*ue+.59*L+.11*q+F)]}static G_CMYK([ue]){return["CMYK",0,0,0,1-ue]}static G_RGB([ue]){return["RGB",ue,ue,ue]}static G_HTML([ue]){const q=Y(ue);return`#${q}${q}${q}`}static RGB_G([ue,q,L]){return["G",.3*ue+.59*q+.11*L]}static RGB_HTML([ue,q,L]){const F=Y(ue),f=Y(q),c=Y(L);return`#${F}${f}${c}`}static T_HTML(){return"#00000000"}static CMYK_RGB([ue,q,L,F]){return["RGB",1-Math.min(1,ue+F),1-Math.min(1,L+F),1-Math.min(1,q+F)]}static CMYK_HTML(ue){const q=this.CMYK_RGB(ue).slice(1);return this.RGB_HTML(q)}static RGB_CMYK([ue,q,L]){const F=1-ue,f=1-q,c=1-L,x=Math.min(F,f,c);return["CMYK",F,f,c,x]}}a.ColorConverters=S},(w,a,Y)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.XfaLayer=void 0;var S=Y(19);class I{static setupStorage(q,L,F,f,c){const x=f.getValue(L,{value:null});switch(F.name){case"textarea":if(x.value!==null&&(q.textContent=x.value),c==="print")break;q.addEventListener("input",P=>{f.setValue(L,{value:P.target.value})});break;case"input":if(F.attributes.type==="radio"||F.attributes.type==="checkbox"){if(x.value===F.attributes.xfaOn?q.setAttribute("checked",!0):x.value===F.attributes.xfaOff&&q.removeAttribute("checked"),c==="print")break;q.addEventListener("change",P=>{f.setValue(L,{value:P.target.checked?P.target.getAttribute("xfaOn"):P.target.getAttribute("xfaOff")})})}else{if(x.value!==null&&q.setAttribute("value",x.value),c==="print")break;q.addEventListener("input",P=>{f.setValue(L,{value:P.target.value})})}break;case"select":if(x.value!==null)for(const P of F.children)P.attributes.value===x.value&&(P.attributes.selected=!0);q.addEventListener("input",P=>{const g=P.target.options,i=g.selectedIndex===-1?"":g[g.selectedIndex].value;f.setValue(L,{value:i})});break}}static setAttributes({html:q,element:L,storage:F=null,intent:f,linkService:c}){const{attributes:x}=L,P=q instanceof HTMLAnchorElement;x.type==="radio"&&(x.name=`${x.name}-${f}`);for(const[g,i]of Object.entries(x))if(i!=null)switch(g){case"class":i.length&&q.setAttribute(g,i.join(" "));break;case"dataId":break;case"id":q.setAttribute("data-element-id",i);break;case"style":Object.assign(q.style,i);break;case"textContent":q.textContent=i;break;default:(!P||g!=="href"&&g!=="newWindow")&&q.setAttribute(g,i)}P&&c.addLinkAttributes(q,x.href,x.newWindow),F&&x.dataId&&this.setupStorage(q,x.dataId,L,F)}static render(q){var d;const L=q.annotationStorage,F=q.linkService,f=q.xfaHtml,c=q.intent||"display",x=document.createElement(f.name);f.attributes&&this.setAttributes({html:x,element:f,intent:c,linkService:F});const P=[[f,-1,x]],g=q.div;if(g.append(x),q.viewport){const n=`matrix(${q.viewport.transform.join(",")})`;g.style.transform=n}c!=="richText"&&g.setAttribute("class","xfaLayer xfaFont");const i=[];for(;P.length>0;){const[n,l,E]=P.at(-1);if(l+1===n.children.length){P.pop();continue}const b=n.children[++P.at(-1)[1]];if(b===null)continue;const{name:p}=b;if(p==="#text"){const t=document.createTextNode(b.value);i.push(t),E.append(t);continue}let e;if((d=b==null?void 0:b.attributes)!=null&&d.xmlns?e=document.createElementNS(b.attributes.xmlns,p):e=document.createElement(p),E.append(e),b.attributes&&this.setAttributes({html:e,element:b,storage:L,intent:c,linkService:F}),b.children&&b.children.length>0)P.push([b,-1,e]);else if(b.value){const t=document.createTextNode(b.value);S.XfaText.shouldBuildText(p)&&i.push(t),e.append(t)}}for(const n of g.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))n.setAttribute("readOnly",!0);return{textDivs:i}}static update(q){const L=`matrix(${q.viewport.transform.join(",")})`;q.div.style.transform=L,q.div.hidden=!1}}a.XfaLayer=I},(w,a,Y)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SVGGraphics=void 0;var S=Y(6),I=Y(1),ue=Y(10);let q=class{constructor(){(0,I.unreachable)("Not implemented: SVGGraphics")}};a.SVGGraphics=q;{let d=function(e){let t=[];const r=[];for(const s of e){if(s.fn==="save"){t.push({fnId:92,fn:"group",items:[]}),r.push(t),t=t.at(-1).items;continue}s.fn==="restore"?t=r.pop():t.push(s)}return t},n=function(e){if(Number.isInteger(e))return e.toString();const t=e.toFixed(10);let r=t.length-1;if(t[r]!=="0")return t;do r--;while(t[r]==="0");return t.substring(0,t[r]==="."?r:r+1)},l=function(e){if(e[4]===0&&e[5]===0){if(e[1]===0&&e[2]===0)return e[0]===1&&e[3]===1?"":`scale(${n(e[0])} ${n(e[3])})`;if(e[0]===e[3]&&e[1]===-e[2]){const t=Math.acos(e[0])*180/Math.PI;return`rotate(${n(t)})`}}else if(e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1)return`translate(${n(e[4])} ${n(e[5])})`;return`matrix(${n(e[0])} ${n(e[1])} ${n(e[2])} ${n(e[3])} ${n(e[4])} ${n(e[5])})`};const L={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},F="http://www.w3.org/XML/1998/namespace",f="http://www.w3.org/1999/xlink",c=["butt","round","square"],x=["miter","round","bevel"],P=function(e,t="",r=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!r)return URL.createObjectURL(new Blob([e],{type:t}));const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let m=`data:${t};base64,`;for(let C=0,h=e.length;C<h;C+=3){const D=e[C]&255,te=e[C+1]&255,le=e[C+2]&255,X=D>>2,ae=(D&3)<<4|te>>4,de=C+1<h?(te&15)<<2|le>>6:64,Z=C+2<h?le&63:64;m+=s[X]+s[ae]+s[de]+s[Z]}return m},g=function(){const e=new Uint8Array([137,80,78,71,13,10,26,10]),t=12,r=new Int32Array(256);for(let le=0;le<256;le++){let X=le;for(let ae=0;ae<8;ae++)X&1?X=3988292384^X>>1&2147483647:X=X>>1&2147483647;r[le]=X}function s(le,X,ae){let de=-1;for(let Z=X;Z<ae;Z++){const ge=(de^le[Z])&255,Se=r[ge];de=de>>>8^Se}return de^-1}function m(le,X,ae,de){let Z=de;const ge=X.length;ae[Z]=ge>>24&255,ae[Z+1]=ge>>16&255,ae[Z+2]=ge>>8&255,ae[Z+3]=ge&255,Z+=4,ae[Z]=le.charCodeAt(0)&255,ae[Z+1]=le.charCodeAt(1)&255,ae[Z+2]=le.charCodeAt(2)&255,ae[Z+3]=le.charCodeAt(3)&255,Z+=4,ae.set(X,Z),Z+=X.length;const Se=s(ae,de+4,Z);ae[Z]=Se>>24&255,ae[Z+1]=Se>>16&255,ae[Z+2]=Se>>8&255,ae[Z+3]=Se&255}function C(le,X,ae){let de=1,Z=0;for(let ge=X;ge<ae;++ge)de=(de+(le[ge]&255))%65521,Z=(Z+de)%65521;return Z<<16|de}function h(le){if(!ue.isNodeJS)return D(le);try{let X;parseInt(process.versions.node)>=8?X=le:X=Buffer.from(le);const ae=require$$5.deflateSync(X,{level:9});return ae instanceof Uint8Array?ae:new Uint8Array(ae)}catch(X){(0,I.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+X)}return D(le)}function D(le){let X=le.length;const ae=65535,de=Math.ceil(X/ae),Z=new Uint8Array(2+X+de*5+4);let ge=0;Z[ge++]=120,Z[ge++]=156;let Se=0;for(;X>ae;)Z[ge++]=0,Z[ge++]=255,Z[ge++]=255,Z[ge++]=0,Z[ge++]=0,Z.set(le.subarray(Se,Se+ae),ge),ge+=ae,Se+=ae,X-=ae;Z[ge++]=1,Z[ge++]=X&255,Z[ge++]=X>>8&255,Z[ge++]=~X&65535&255,Z[ge++]=(~X&65535)>>8&255,Z.set(le.subarray(Se),ge),ge+=le.length-Se;const oe=C(le,0,le.length);return Z[ge++]=oe>>24&255,Z[ge++]=oe>>16&255,Z[ge++]=oe>>8&255,Z[ge++]=oe&255,Z}function te(le,X,ae,de){const Z=le.width,ge=le.height;let Se,oe,H;const A=le.data;switch(X){case I.ImageKind.GRAYSCALE_1BPP:oe=0,Se=1,H=Z+7>>3;break;case I.ImageKind.RGB_24BPP:oe=2,Se=8,H=Z*3;break;case I.ImageKind.RGBA_32BPP:oe=6,Se=8,H=Z*4;break;default:throw new Error("invalid format")}const v=new Uint8Array((1+H)*ge);let R=0,$=0;for(let U=0;U<ge;++U)v[R++]=0,v.set(A.subarray($,$+H),R),$+=H,R+=H;if(X===I.ImageKind.GRAYSCALE_1BPP&&de){R=0;for(let U=0;U<ge;U++){R++;for(let B=0;B<H;B++)v[R++]^=255}}const j=new Uint8Array([Z>>24&255,Z>>16&255,Z>>8&255,Z&255,ge>>24&255,ge>>16&255,ge>>8&255,ge&255,Se,oe,0,0,0]),se=h(v),N=e.length+t*3+j.length+se.length,K=new Uint8Array(N);let ne=0;return K.set(e,ne),ne+=e.length,m("IHDR",j,K,ne),ne+=t+j.length,m("IDATA",se,K,ne),ne+=t+se.length,m("IEND",new Uint8Array(0),K,ne),P(K,"image/png",ae)}return function(X,ae,de){const Z=X.kind===void 0?I.ImageKind.GRAYSCALE_1BPP:X.kind;return te(X,Z,ae,de)}}();class i{constructor(){this.fontSizeScale=1,this.fontWeight=L.fontWeight,this.fontSize=0,this.textMatrix=I.IDENTITY_MATRIX,this.fontMatrix=I.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=I.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=L.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(t,r){this.x=t,this.y=r}}let E=0,b=0,p=0;a.SVGGraphics=q=class{constructor(e,t,r=!1){(0,S.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new S.DOMSVGFactory,this.current=new i,this.transformMatrix=I.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=t,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!r,this._operatorIdMapping=[];for(const s in I.OPS)this._operatorIdMapping[I.OPS[s]]=s}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}save(){this.transformStack.push(this.transformMatrix);const e=this.current;this.extraStack.push(e),this.current=e.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(e){this.save(),this.executeOpTree(e),this.restore()}loadDependencies(e){const t=e.fnArray,r=e.argsArray;for(let s=0,m=t.length;s<m;s++)if(t[s]===I.OPS.dependency)for(const C of r[s]){const h=C.startsWith("g_")?this.commonObjs:this.objs,D=new Promise(te=>{h.get(C,te)});this.current.dependencies.push(D)}return Promise.all(this.current.dependencies)}transform(e,t,r,s,m,C){const h=[e,t,r,s,m,C];this.transformMatrix=I.Util.transform(this.transformMatrix,h),this.tgrp=null}getSVG(e,t){this.viewport=t;const r=this._initialize(t);return this.loadDependencies(e).then(()=>(this.transformMatrix=I.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(e)),r))}convertOpList(e){const t=this._operatorIdMapping,r=e.argsArray,s=e.fnArray,m=[];for(let C=0,h=s.length;C<h;C++){const D=s[C];m.push({fnId:D,fn:t[D],args:r[C]})}return d(m)}executeOpTree(e){for(const t of e){const r=t.fn,s=t.fnId,m=t.args;switch(s|0){case I.OPS.beginText:this.beginText();break;case I.OPS.dependency:break;case I.OPS.setLeading:this.setLeading(m);break;case I.OPS.setLeadingMoveText:this.setLeadingMoveText(m[0],m[1]);break;case I.OPS.setFont:this.setFont(m);break;case I.OPS.showText:this.showText(m[0]);break;case I.OPS.showSpacedText:this.showText(m[0]);break;case I.OPS.endText:this.endText();break;case I.OPS.moveText:this.moveText(m[0],m[1]);break;case I.OPS.setCharSpacing:this.setCharSpacing(m[0]);break;case I.OPS.setWordSpacing:this.setWordSpacing(m[0]);break;case I.OPS.setHScale:this.setHScale(m[0]);break;case I.OPS.setTextMatrix:this.setTextMatrix(m[0],m[1],m[2],m[3],m[4],m[5]);break;case I.OPS.setTextRise:this.setTextRise(m[0]);break;case I.OPS.setTextRenderingMode:this.setTextRenderingMode(m[0]);break;case I.OPS.setLineWidth:this.setLineWidth(m[0]);break;case I.OPS.setLineJoin:this.setLineJoin(m[0]);break;case I.OPS.setLineCap:this.setLineCap(m[0]);break;case I.OPS.setMiterLimit:this.setMiterLimit(m[0]);break;case I.OPS.setFillRGBColor:this.setFillRGBColor(m[0],m[1],m[2]);break;case I.OPS.setStrokeRGBColor:this.setStrokeRGBColor(m[0],m[1],m[2]);break;case I.OPS.setStrokeColorN:this.setStrokeColorN(m);break;case I.OPS.setFillColorN:this.setFillColorN(m);break;case I.OPS.shadingFill:this.shadingFill(m[0]);break;case I.OPS.setDash:this.setDash(m[0],m[1]);break;case I.OPS.setRenderingIntent:this.setRenderingIntent(m[0]);break;case I.OPS.setFlatness:this.setFlatness(m[0]);break;case I.OPS.setGState:this.setGState(m[0]);break;case I.OPS.fill:this.fill();break;case I.OPS.eoFill:this.eoFill();break;case I.OPS.stroke:this.stroke();break;case I.OPS.fillStroke:this.fillStroke();break;case I.OPS.eoFillStroke:this.eoFillStroke();break;case I.OPS.clip:this.clip("nonzero");break;case I.OPS.eoClip:this.clip("evenodd");break;case I.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case I.OPS.paintImageXObject:this.paintImageXObject(m[0]);break;case I.OPS.paintInlineImageXObject:this.paintInlineImageXObject(m[0]);break;case I.OPS.paintImageMaskXObject:this.paintImageMaskXObject(m[0]);break;case I.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(m[0],m[1]);break;case I.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case I.OPS.closePath:this.closePath();break;case I.OPS.closeStroke:this.closeStroke();break;case I.OPS.closeFillStroke:this.closeFillStroke();break;case I.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case I.OPS.nextLine:this.nextLine();break;case I.OPS.transform:this.transform(m[0],m[1],m[2],m[3],m[4],m[5]);break;case I.OPS.constructPath:this.constructPath(m[0],m[1]);break;case I.OPS.endPath:this.endPath();break;case 92:this.group(t.items);break;default:(0,I.warn)(`Unimplemented operator ${r}`);break}}}setWordSpacing(e){this.current.wordSpacing=e}setCharSpacing(e){this.current.charSpacing=e}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(e,t,r,s,m,C){const h=this.current;h.textMatrix=h.lineMatrix=[e,t,r,s,m,C],h.textMatrixScale=Math.hypot(e,t),h.x=h.lineX=0,h.y=h.lineY=0,h.xcoords=[],h.ycoords=[],h.tspan=this.svgFactory.createElement("svg:tspan"),h.tspan.setAttributeNS(null,"font-family",h.fontFamily),h.tspan.setAttributeNS(null,"font-size",`${n(h.fontSize)}px`),h.tspan.setAttributeNS(null,"y",n(-h.y)),h.txtElement=this.svgFactory.createElement("svg:text"),h.txtElement.append(h.tspan)}beginText(){const e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=I.IDENTITY_MATRIX,e.lineMatrix=I.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}moveText(e,t){const r=this.current;r.x=r.lineX+=e,r.y=r.lineY+=t,r.xcoords=[],r.ycoords=[],r.tspan=this.svgFactory.createElement("svg:tspan"),r.tspan.setAttributeNS(null,"font-family",r.fontFamily),r.tspan.setAttributeNS(null,"font-size",`${n(r.fontSize)}px`),r.tspan.setAttributeNS(null,"y",n(-r.y))}showText(e){const t=this.current,r=t.font,s=t.fontSize;if(s===0)return;const m=t.fontSizeScale,C=t.charSpacing,h=t.wordSpacing,D=t.fontDirection,te=t.textHScale*D,le=r.vertical,X=le?1:-1,ae=r.defaultVMetrics,de=s*t.fontMatrix[0];let Z=0;for(const oe of e){if(oe===null){Z+=D*h;continue}else if(typeof oe=="number"){Z+=X*oe*s/1e3;continue}const H=(oe.isSpace?h:0)+C,A=oe.fontChar;let v,R,$=oe.width;if(le){let se;const N=oe.vmetric||ae;se=oe.vmetric?N[1]:$*.5,se=-se*de;const K=N[2]*de;$=N?-N[0]:$,v=se/m,R=(Z+K)/m}else v=Z/m,R=0;(oe.isInFont||r.missingFile)&&(t.xcoords.push(t.x+v),le&&t.ycoords.push(-t.y+R),t.tspan.textContent+=A);let j;le?j=$*de-H*D:j=$*de+H*D,Z+=j}t.tspan.setAttributeNS(null,"x",t.xcoords.map(n).join(" ")),le?t.tspan.setAttributeNS(null,"y",t.ycoords.map(n).join(" ")):t.tspan.setAttributeNS(null,"y",n(-t.y)),le?t.y-=Z:t.x+=Z*te,t.tspan.setAttributeNS(null,"font-family",t.fontFamily),t.tspan.setAttributeNS(null,"font-size",`${n(t.fontSize)}px`),t.fontStyle!==L.fontStyle&&t.tspan.setAttributeNS(null,"font-style",t.fontStyle),t.fontWeight!==L.fontWeight&&t.tspan.setAttributeNS(null,"font-weight",t.fontWeight);const ge=t.textRenderingMode&I.TextRenderingMode.FILL_STROKE_MASK;if(ge===I.TextRenderingMode.FILL||ge===I.TextRenderingMode.FILL_STROKE?(t.fillColor!==L.fillColor&&t.tspan.setAttributeNS(null,"fill",t.fillColor),t.fillAlpha<1&&t.tspan.setAttributeNS(null,"fill-opacity",t.fillAlpha)):t.textRenderingMode===I.TextRenderingMode.ADD_TO_PATH?t.tspan.setAttributeNS(null,"fill","transparent"):t.tspan.setAttributeNS(null,"fill","none"),ge===I.TextRenderingMode.STROKE||ge===I.TextRenderingMode.FILL_STROKE){const oe=1/(t.textMatrixScale||1);this._setStrokeAttributes(t.tspan,oe)}let Se=t.textMatrix;t.textRise!==0&&(Se=Se.slice(),Se[5]+=t.textRise),t.txtElement.setAttributeNS(null,"transform",`${l(Se)} scale(${n(te)}, -1)`),t.txtElement.setAttributeNS(F,"xml:space","preserve"),t.txtElement.append(t.tspan),t.txtgrp.append(t.txtElement),this._ensureTransformGroup().append(t.txtElement)}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}addFontStyle(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const t=P(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${e.loadedName}"; src: url(${t}); }
`}setFont(e){const t=this.current,r=this.commonObjs.get(e[0]);let s=e[1];t.font=r,this.embedFonts&&!r.missingFile&&!this.embeddedFonts[r.loadedName]&&(this.addFontStyle(r),this.embeddedFonts[r.loadedName]=r),t.fontMatrix=r.fontMatrix||I.FONT_IDENTITY_MATRIX;let m="normal";r.black?m="900":r.bold&&(m="bold");const C=r.italic?"italic":"normal";s<0?(s=-s,t.fontDirection=-1):t.fontDirection=1,t.fontSize=s,t.fontFamily=r.loadedName,t.fontWeight=m,t.fontStyle=C,t.tspan=this.svgFactory.createElement("svg:tspan"),t.tspan.setAttributeNS(null,"y",n(-t.y)),t.xcoords=[],t.ycoords=[]}endText(){var t;const e=this.current;e.textRenderingMode&I.TextRenderingMode.ADD_TO_PATH_FLAG&&((t=e.txtElement)!=null&&t.hasChildNodes())&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(e){e>0&&(this.current.lineWidth=e)}setLineCap(e){this.current.lineCap=c[e]}setLineJoin(e){this.current.lineJoin=x[e]}setMiterLimit(e){this.current.miterLimit=e}setStrokeAlpha(e){this.current.strokeAlpha=e}setStrokeRGBColor(e,t,r){this.current.strokeColor=I.Util.makeHexColor(e,t,r)}setFillAlpha(e){this.current.fillAlpha=e}setFillRGBColor(e,t,r){this.current.fillColor=I.Util.makeHexColor(e,t,r),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(e){this.current.strokeColor=this._makeColorN_Pattern(e)}setFillColorN(e){this.current.fillColor=this._makeColorN_Pattern(e)}shadingFill(e){const t=this.viewport.width,r=this.viewport.height,s=I.Util.inverseTransform(this.transformMatrix),m=I.Util.applyTransform([0,0],s),C=I.Util.applyTransform([0,r],s),h=I.Util.applyTransform([t,0],s),D=I.Util.applyTransform([t,r],s),te=Math.min(m[0],C[0],h[0],D[0]),le=Math.min(m[1],C[1],h[1],D[1]),X=Math.max(m[0],C[0],h[0],D[0]),ae=Math.max(m[1],C[1],h[1],D[1]),de=this.svgFactory.createElement("svg:rect");de.setAttributeNS(null,"x",te),de.setAttributeNS(null,"y",le),de.setAttributeNS(null,"width",X-te),de.setAttributeNS(null,"height",ae-le),de.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&de.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(de)}_makeColorN_Pattern(e){return e[0]==="TilingPattern"?this._makeTilingPattern(e):this._makeShadingPattern(e)}_makeTilingPattern(e){const t=e[1],r=e[2],s=e[3]||I.IDENTITY_MATRIX,[m,C,h,D]=e[4],te=e[5],le=e[6],X=e[7],ae=`shading${p++}`,[de,Z,ge,Se]=I.Util.normalizeRect([...I.Util.applyTransform([m,C],s),...I.Util.applyTransform([h,D],s)]),[oe,H]=I.Util.singularValueDecompose2dScale(s),A=te*oe,v=le*H,R=this.svgFactory.createElement("svg:pattern");R.setAttributeNS(null,"id",ae),R.setAttributeNS(null,"patternUnits","userSpaceOnUse"),R.setAttributeNS(null,"width",A),R.setAttributeNS(null,"height",v),R.setAttributeNS(null,"x",`${de}`),R.setAttributeNS(null,"y",`${Z}`);const $=this.svg,j=this.transformMatrix,se=this.current.fillColor,N=this.current.strokeColor,K=this.svgFactory.create(ge-de,Se-Z);if(this.svg=K,this.transformMatrix=s,X===2){const ne=I.Util.makeHexColor(...t);this.current.fillColor=ne,this.current.strokeColor=ne}return this.executeOpTree(this.convertOpList(r)),this.svg=$,this.transformMatrix=j,this.current.fillColor=se,this.current.strokeColor=N,R.append(K.childNodes[0]),this.defs.append(R),`url(#${ae})`}_makeShadingPattern(e){switch(typeof e=="string"&&(e=this.objs.get(e)),e[0]){case"RadialAxial":const t=`shading${p++}`,r=e[3];let s;switch(e[1]){case"axial":const m=e[4],C=e[5];s=this.svgFactory.createElement("svg:linearGradient"),s.setAttributeNS(null,"id",t),s.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),s.setAttributeNS(null,"x1",m[0]),s.setAttributeNS(null,"y1",m[1]),s.setAttributeNS(null,"x2",C[0]),s.setAttributeNS(null,"y2",C[1]);break;case"radial":const h=e[4],D=e[5],te=e[6],le=e[7];s=this.svgFactory.createElement("svg:radialGradient"),s.setAttributeNS(null,"id",t),s.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),s.setAttributeNS(null,"cx",D[0]),s.setAttributeNS(null,"cy",D[1]),s.setAttributeNS(null,"r",le),s.setAttributeNS(null,"fx",h[0]),s.setAttributeNS(null,"fy",h[1]),s.setAttributeNS(null,"fr",te);break;default:throw new Error(`Unknown RadialAxial type: ${e[1]}`)}for(const m of r){const C=this.svgFactory.createElement("svg:stop");C.setAttributeNS(null,"offset",m[0]),C.setAttributeNS(null,"stop-color",m[1]),s.append(C)}return this.defs.append(s),`url(#${t})`;case"Mesh":return(0,I.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${e[0]}`)}}setDash(e,t){this.current.dashArray=e,this.current.dashPhase=t}constructPath(e,t){const r=this.current;let s=r.x,m=r.y,C=[],h=0;for(const D of e)switch(D|0){case I.OPS.rectangle:s=t[h++],m=t[h++];const te=t[h++],le=t[h++],X=s+te,ae=m+le;C.push("M",n(s),n(m),"L",n(X),n(m),"L",n(X),n(ae),"L",n(s),n(ae),"Z");break;case I.OPS.moveTo:s=t[h++],m=t[h++],C.push("M",n(s),n(m));break;case I.OPS.lineTo:s=t[h++],m=t[h++],C.push("L",n(s),n(m));break;case I.OPS.curveTo:s=t[h+4],m=t[h+5],C.push("C",n(t[h]),n(t[h+1]),n(t[h+2]),n(t[h+3]),n(s),n(m)),h+=6;break;case I.OPS.curveTo2:C.push("C",n(s),n(m),n(t[h]),n(t[h+1]),n(t[h+2]),n(t[h+3])),s=t[h+2],m=t[h+3],h+=4;break;case I.OPS.curveTo3:s=t[h+2],m=t[h+3],C.push("C",n(t[h]),n(t[h+1]),n(s),n(m),n(s),n(m)),h+=4;break;case I.OPS.closePath:C.push("Z");break}C=C.join(" "),r.path&&e.length>0&&e[0]!==I.OPS.rectangle&&e[0]!==I.OPS.moveTo?C=r.path.getAttributeNS(null,"d")+C:(r.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(r.path)),r.path.setAttributeNS(null,"d",C),r.path.setAttributeNS(null,"fill","none"),r.element=r.path,r.setCurrentPoint(s,m)}endPath(){const e=this.current;if(e.path=null,!this.pendingClip)return;if(!e.element){this.pendingClip=null;return}const t=`clippath${E++}`,r=this.svgFactory.createElement("svg:clipPath");r.setAttributeNS(null,"id",t),r.setAttributeNS(null,"transform",l(this.transformMatrix));const s=e.element.cloneNode(!0);if(this.pendingClip==="evenodd"?s.setAttributeNS(null,"clip-rule","evenodd"):s.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,r.append(s),this.defs.append(r),e.activeClipUrl){e.clipGroup=null;for(const m of this.extraStack)m.clipGroup=null;r.setAttributeNS(null,"clip-path",e.activeClipUrl)}e.activeClipUrl=`url(#${t})`,this.tgrp=null}clip(e){this.pendingClip=e}closePath(){const e=this.current;if(e.path){const t=`${e.path.getAttributeNS(null,"d")}Z`;e.path.setAttributeNS(null,"d",t)}}setLeading(e){this.current.leading=-e}setTextRise(e){this.current.textRise=e}setTextRenderingMode(e){this.current.textRenderingMode=e}setHScale(e){this.current.textHScale=e/100}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r);break;case"CA":this.setStrokeAlpha(r);break;case"ca":this.setFillAlpha(r);break;default:(0,I.warn)(`Unimplemented graphic state operator ${t}`);break}}fill(){const e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}stroke(){const e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(e,t=1){const r=this.current;let s=r.dashArray;t!==1&&s.length>0&&(s=s.map(function(m){return t*m})),e.setAttributeNS(null,"stroke",r.strokeColor),e.setAttributeNS(null,"stroke-opacity",r.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",n(r.miterLimit)),e.setAttributeNS(null,"stroke-linecap",r.lineCap),e.setAttributeNS(null,"stroke-linejoin",r.lineJoin),e.setAttributeNS(null,"stroke-width",n(t*r.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",s.map(n).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",n(t*r.dashPhase)+"px")}eoFill(){var e;(e=this.current.element)==null||e.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var e;(e=this.current.element)==null||e.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(e)}paintImageXObject(e){const t=this.getObject(e);if(!t){(0,I.warn)(`Dependent image with object ID ${e} is not ready yet`);return}this.paintInlineImageXObject(t)}paintInlineImageXObject(e,t){const r=e.width,s=e.height,m=g(e,this.forceDataSchema,!!t),C=this.svgFactory.createElement("svg:rect");C.setAttributeNS(null,"x","0"),C.setAttributeNS(null,"y","0"),C.setAttributeNS(null,"width",n(r)),C.setAttributeNS(null,"height",n(s)),this.current.element=C,this.clip("nonzero");const h=this.svgFactory.createElement("svg:image");h.setAttributeNS(f,"xlink:href",m),h.setAttributeNS(null,"x","0"),h.setAttributeNS(null,"y",n(-s)),h.setAttributeNS(null,"width",n(r)+"px"),h.setAttributeNS(null,"height",n(s)+"px"),h.setAttributeNS(null,"transform",`scale(${n(1/r)} ${n(-1/s)})`),t?t.append(h):this._ensureTransformGroup().append(h)}paintImageMaskXObject(e){const t=this.getObject(e.data,e);if(t.bitmap){(0,I.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const r=this.current,s=t.width,m=t.height,C=r.fillColor;r.maskId=`mask${b++}`;const h=this.svgFactory.createElement("svg:mask");h.setAttributeNS(null,"id",r.maskId);const D=this.svgFactory.createElement("svg:rect");D.setAttributeNS(null,"x","0"),D.setAttributeNS(null,"y","0"),D.setAttributeNS(null,"width",n(s)),D.setAttributeNS(null,"height",n(m)),D.setAttributeNS(null,"fill",C),D.setAttributeNS(null,"mask",`url(#${r.maskId})`),this.defs.append(h),this._ensureTransformGroup().append(D),this.paintInlineImageXObject(t,h)}paintFormXObjectBegin(e,t){if(Array.isArray(e)&&e.length===6&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t){const r=t[2]-t[0],s=t[3]-t[1],m=this.svgFactory.createElement("svg:rect");m.setAttributeNS(null,"x",t[0]),m.setAttributeNS(null,"y",t[1]),m.setAttributeNS(null,"width",n(r)),m.setAttributeNS(null,"height",n(s)),this.current.element=m,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(e){const t=this.svgFactory.create(e.width,e.height),r=this.svgFactory.createElement("svg:defs");t.append(r),this.defs=r;const s=this.svgFactory.createElement("svg:g");return s.setAttributeNS(null,"transform",l(e.transform)),t.append(s),this.svg=s,t}_ensureClipGroup(){if(!this.current.clipGroup){const e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(e),this.current.clipGroup=e}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",l(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(w){var a=__webpack_module_cache__[w];if(a!==void 0)return a.exports;var Y=__webpack_module_cache__[w]={exports:{}};return __webpack_modules__[w](Y,Y.exports,__w_pdfjs_require__),Y.exports}var __webpack_exports__={};return(()=>{var w=__webpack_exports__;Object.defineProperty(w,"__esModule",{value:!0}),Object.defineProperty(w,"AbortException",{enumerable:!0,get:function(){return a.AbortException}}),Object.defineProperty(w,"AnnotationEditorLayer",{enumerable:!0,get:function(){return ue.AnnotationEditorLayer}}),Object.defineProperty(w,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return a.AnnotationEditorParamsType}}),Object.defineProperty(w,"AnnotationEditorType",{enumerable:!0,get:function(){return a.AnnotationEditorType}}),Object.defineProperty(w,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return q.AnnotationEditorUIManager}}),Object.defineProperty(w,"AnnotationLayer",{enumerable:!0,get:function(){return L.AnnotationLayer}}),Object.defineProperty(w,"AnnotationMode",{enumerable:!0,get:function(){return a.AnnotationMode}}),Object.defineProperty(w,"CMapCompressionType",{enumerable:!0,get:function(){return a.CMapCompressionType}}),Object.defineProperty(w,"FeatureTest",{enumerable:!0,get:function(){return a.FeatureTest}}),Object.defineProperty(w,"GlobalWorkerOptions",{enumerable:!0,get:function(){return F.GlobalWorkerOptions}}),Object.defineProperty(w,"InvalidPDFException",{enumerable:!0,get:function(){return a.InvalidPDFException}}),Object.defineProperty(w,"MissingPDFException",{enumerable:!0,get:function(){return a.MissingPDFException}}),Object.defineProperty(w,"OPS",{enumerable:!0,get:function(){return a.OPS}}),Object.defineProperty(w,"PDFDataRangeTransport",{enumerable:!0,get:function(){return Y.PDFDataRangeTransport}}),Object.defineProperty(w,"PDFDateString",{enumerable:!0,get:function(){return S.PDFDateString}}),Object.defineProperty(w,"PDFWorker",{enumerable:!0,get:function(){return Y.PDFWorker}}),Object.defineProperty(w,"PasswordResponses",{enumerable:!0,get:function(){return a.PasswordResponses}}),Object.defineProperty(w,"PermissionFlag",{enumerable:!0,get:function(){return a.PermissionFlag}}),Object.defineProperty(w,"PixelsPerInch",{enumerable:!0,get:function(){return S.PixelsPerInch}}),Object.defineProperty(w,"RenderingCancelledException",{enumerable:!0,get:function(){return S.RenderingCancelledException}}),Object.defineProperty(w,"SVGGraphics",{enumerable:!0,get:function(){return f.SVGGraphics}}),Object.defineProperty(w,"UnexpectedResponseException",{enumerable:!0,get:function(){return a.UnexpectedResponseException}}),Object.defineProperty(w,"Util",{enumerable:!0,get:function(){return a.Util}}),Object.defineProperty(w,"VerbosityLevel",{enumerable:!0,get:function(){return a.VerbosityLevel}}),Object.defineProperty(w,"XfaLayer",{enumerable:!0,get:function(){return c.XfaLayer}}),Object.defineProperty(w,"build",{enumerable:!0,get:function(){return Y.build}}),Object.defineProperty(w,"createPromiseCapability",{enumerable:!0,get:function(){return a.createPromiseCapability}}),Object.defineProperty(w,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return a.createValidAbsoluteUrl}}),Object.defineProperty(w,"getDocument",{enumerable:!0,get:function(){return Y.getDocument}}),Object.defineProperty(w,"getFilenameFromUrl",{enumerable:!0,get:function(){return S.getFilenameFromUrl}}),Object.defineProperty(w,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return S.getPdfFilenameFromUrl}}),Object.defineProperty(w,"getXfaPageViewport",{enumerable:!0,get:function(){return S.getXfaPageViewport}}),Object.defineProperty(w,"isDataScheme",{enumerable:!0,get:function(){return S.isDataScheme}}),Object.defineProperty(w,"isPdfFile",{enumerable:!0,get:function(){return S.isPdfFile}}),Object.defineProperty(w,"loadScript",{enumerable:!0,get:function(){return S.loadScript}}),Object.defineProperty(w,"renderTextLayer",{enumerable:!0,get:function(){return I.renderTextLayer}}),Object.defineProperty(w,"setLayerDimensions",{enumerable:!0,get:function(){return S.setLayerDimensions}}),Object.defineProperty(w,"shadow",{enumerable:!0,get:function(){return a.shadow}}),Object.defineProperty(w,"updateTextLayer",{enumerable:!0,get:function(){return I.updateTextLayer}}),Object.defineProperty(w,"version",{enumerable:!0,get:function(){return Y.version}});var a=__w_pdfjs_require__(1),Y=__w_pdfjs_require__(2),S=__w_pdfjs_require__(6),I=__w_pdfjs_require__(26),ue=__w_pdfjs_require__(27),q=__w_pdfjs_require__(5),L=__w_pdfjs_require__(32),F=__w_pdfjs_require__(14),f=__w_pdfjs_require__(35),c=__w_pdfjs_require__(34)})(),__webpack_exports__})())}(pdf)),pdfExports$1}var pdfExports=requirePdf(),pdf_viewerExports={},pdf_viewer$1={get exports(){return pdf_viewerExports},set exports(w){pdf_viewerExports=w}};(function(w,a){(function(S,I){w.exports=I()})(globalThis,()=>(()=>{var Y=[,(q,L,F)=>{var d,n,Gt,E,Oi;Object.defineProperty(L,"__esModule",{value:!0}),L.SimpleLinkService=L.PDFLinkService=L.LinkTarget=void 0;var f=F(2);const c="noopener noreferrer nofollow",x={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};L.LinkTarget=x;function P(e,{url:t,target:r,rel:s,enabled:m=!0}={}){if(!t||typeof t!="string")throw new Error('A valid "url" parameter must provided.');const C=(0,f.removeNullCharacters)(t);m?e.href=e.title=C:(e.href="",e.title=`Disabled: ${C}`,e.onclick=()=>!1);let h="";switch(r){case x.NONE:break;case x.SELF:h="_self";break;case x.BLANK:h="_blank";break;case x.PARENT:h="_parent";break;case x.TOP:h="_top";break}e.target=h,e.rel=typeof s=="string"?s:c}const p=class{constructor({eventBus:t,externalLinkTarget:r=null,externalLinkRel:s=null,ignoreDestinationZoom:m=!1}={}){Q(this,n);Q(this,d,new Map);this.eventBus=t,this.externalLinkTarget=r,this.externalLinkRel=s,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=m,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(t,r=null){this.baseUrl=r,this.pdfDocument=t,u(this,d).clear()}setViewer(t){this.pdfViewer=t}setHistory(t){this.pdfHistory=t}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(t){this.pdfViewer.currentPageNumber=t}get rotation(){return this.pdfViewer.pagesRotation}set rotation(t){this.pdfViewer.pagesRotation=t}get isInPresentationMode(){return this.pdfViewer.isInPresentationMode}async goToDestination(t){if(!this.pdfDocument)return;let r,s;if(typeof t=="string"?(r=t,s=await this.pdfDocument.getDestination(t)):(r=null,s=await t),!Array.isArray(s)){console.error(`PDFLinkService.goToDestination: "${s}" is not a valid destination array, for dest="${t}".`);return}ee(this,n,Gt).call(this,t,r,s)}goToPage(t){if(!this.pdfDocument)return;const r=typeof t=="string"&&this.pdfViewer.pageLabelToPageNumber(t)||t|0;if(!(Number.isInteger(r)&&r>0&&r<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${t}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(r)),this.pdfViewer.scrollPageIntoView({pageNumber:r})}addLinkAttributes(t,r,s=!1){P(t,{url:r,target:s?x.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(t){if(typeof t=="string"){if(t.length>0)return this.getAnchorUrl("#"+escape(t))}else if(Array.isArray(t)){const r=JSON.stringify(t);if(r.length>0)return this.getAnchorUrl("#"+escape(r))}return this.getAnchorUrl("")}getAnchorUrl(t){return this.baseUrl?this.baseUrl+t:t}setHash(t){var m;if(!this.pdfDocument)return;let r,s;if(t.includes("=")){const C=(0,f.parseQueryString)(t);if(C.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:C.get("search").replaceAll('"',""),phraseSearch:C.get("phrase")==="true"}),C.has("page")&&(r=C.get("page")|0||1),C.has("zoom")){const h=C.get("zoom").split(","),D=h[0],te=parseFloat(D);D.includes("Fit")?D==="Fit"||D==="FitB"?s=[null,{name:D}]:D==="FitH"||D==="FitBH"||D==="FitV"||D==="FitBV"?s=[null,{name:D},h.length>1?h[1]|0:null]:D==="FitR"?h.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):s=[null,{name:D},h[1]|0,h[2]|0,h[3]|0,h[4]|0]:console.error(`PDFLinkService.setHash: "${D}" is not a valid zoom value.`):s=[null,{name:"XYZ"},h.length>1?h[1]|0:null,h.length>2?h[2]|0:null,te?te/100:D]}s?this.pdfViewer.scrollPageIntoView({pageNumber:r||this.page,destArray:s,allowNegativeOffset:!0}):r&&(this.page=r),C.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:C.get("pagemode")}),C.has("nameddest")&&this.goToDestination(C.get("nameddest"))}else{s=unescape(t);try{s=JSON.parse(s),Array.isArray(s)||(s=s.toString())}catch{}if(typeof s=="string"||ee(m=p,E,Oi).call(m,s)){this.goToDestination(s);return}console.error(`PDFLinkService.setHash: "${unescape(t)}" is not a valid destination.`)}}executeNamedAction(t){var r,s;switch(t){case"GoBack":(r=this.pdfHistory)==null||r.back();break;case"GoForward":(s=this.pdfHistory)==null||s.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break}this.eventBus.dispatch("namedaction",{source:this,action:t})}async executeSetOCGState(t){const r=this.pdfDocument,s=await this.pdfViewer.optionalContentConfigPromise;if(r!==this.pdfDocument)return;let m;for(const C of t.state){switch(C){case"ON":case"OFF":case"Toggle":m=C;continue}switch(m){case"ON":s.setVisibility(C,!0);break;case"OFF":s.setVisibility(C,!1);break;case"Toggle":const h=s.getGroup(C);h&&s.setVisibility(C,!h.visible);break}}this.pdfViewer.optionalContentConfigPromise=Promise.resolve(s)}cachePageRef(t,r){if(!r)return;const s=r.gen===0?`${r.num}R`:`${r.num}R${r.gen}`;u(this,d).set(s,t)}_cachedPageNumber(t){if(!t)return null;const r=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return u(this,d).get(r)||null}isPageVisible(t){return this.pdfViewer.isPageVisible(t)}isPageCached(t){return this.pdfViewer.isPageCached(t)}};let g=p;d=new WeakMap,n=new WeakSet,Gt=function(t,r=null,s){const m=s[0];let C;if(typeof m=="object"&&m!==null){if(C=this._cachedPageNumber(m),!C){this.pdfDocument.getPageIndex(m).then(h=>{this.cachePageRef(h+1,m),ee(this,n,Gt).call(this,t,r,s)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${m}" is not a valid page reference, for dest="${t}".`)});return}}else if(Number.isInteger(m))C=m+1;else{console.error(`PDFLinkService.#goToDestinationHelper: "${m}" is not a valid destination reference, for dest="${t}".`);return}if(!C||C<1||C>this.pagesCount){console.error(`PDFLinkService.#goToDestinationHelper: "${C}" is not a valid page number, for dest="${t}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:r,explicitDest:s,pageNumber:C})),this.pdfViewer.scrollPageIntoView({pageNumber:C,destArray:s,ignoreDestinationZoom:this._ignoreDestinationZoom})},E=new WeakSet,Oi=function(t){if(!Array.isArray(t))return!1;const r=t.length;if(r<2)return!1;const s=t[0];if(!(typeof s=="object"&&Number.isInteger(s.num)&&Number.isInteger(s.gen))&&!(Number.isInteger(s)&&s>=0))return!1;const m=t[1];if(!(typeof m=="object"&&typeof m.name=="string"))return!1;let C=!0;switch(m.name){case"XYZ":if(r!==5)return!1;break;case"Fit":case"FitB":return r===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(r!==3)return!1;break;case"FitR":if(r!==6)return!1;C=!1;break;default:return!1}for(let h=2;h<r;h++){const D=t[h];if(!(typeof D=="number"||C&&D===null))return!1}return!0},Q(g,E),L.PDFLinkService=g;class i{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(t){}get rotation(){return 0}set rotation(t){}get isInPresentationMode(){return!1}async goToDestination(t){}goToPage(t){}addLinkAttributes(t,r,s=!1){P(t,{url:r,enabled:this.externalLinkEnabled})}getDestinationHash(t){return"#"}getAnchorUrl(t){return"#"}setHash(t){}executeNamedAction(t){}executeSetOCGState(t){}cachePageRef(t,r){}isPageVisible(t){return!0}isPageCached(t){return!0}}L.SimpleLinkService=i},(q,L)=>{var y,k,V,W,he;Object.defineProperty(L,"__esModule",{value:!0}),L.animationStarted=L.VERTICAL_PADDING=L.UNKNOWN_SCALE=L.TextLayerMode=L.SpreadMode=L.SidebarView=L.ScrollMode=L.SCROLLBAR_PADDING=L.RenderingStates=L.RendererType=L.ProgressBar=L.PresentationModeState=L.OutputScale=L.MIN_SCALE=L.MAX_SCALE=L.MAX_AUTO_SCALE=L.DEFAULT_SCALE_VALUE=L.DEFAULT_SCALE_DELTA=L.DEFAULT_SCALE=L.CursorTool=L.AutoPrintRegExp=void 0,L.apiPageLayoutToViewerModes=o,L.apiPageModeToSidebarView=_,L.approximateFraction=de,L.backtrackBeforeAllVisibleElements=Se,L.binarySearchFirstItem=ae,L.docStyle=void 0,L.getActiveOrFocusedElement=B,L.getPageSizeInches=ge,L.getVisibleElements=oe,L.isPortraitOrientation=se,L.isValidRotation=R,L.isValidScrollMode=$,L.isValidSpreadMode=j,L.noContextMenuHandler=H,L.normalizeWheelEventDelta=v,L.normalizeWheelEventDirection=A,L.parseQueryString=te,L.removeNullCharacters=X,L.roundToDivide=Z,L.scrollIntoView=h,L.watchScroll=D;const F="auto";L.DEFAULT_SCALE_VALUE=F;const f=1;L.DEFAULT_SCALE=f;const c=1.1;L.DEFAULT_SCALE_DELTA=c;const x=.1;L.MIN_SCALE=x;const P=10;L.MAX_SCALE=P;const g=0;L.UNKNOWN_SCALE=g;const i=1.25;L.MAX_AUTO_SCALE=i;const d=40;L.SCROLLBAR_PADDING=d;const n=5;L.VERTICAL_PADDING=n;const l={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};L.RenderingStates=l;const E={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};L.PresentationModeState=E;const b={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};L.SidebarView=b;const p={CANVAS:"canvas",SVG:"svg"};L.RendererType=p;const e={DISABLE:0,ENABLE:1};L.TextLayerMode=e;const t={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};L.ScrollMode=t;const r={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};L.SpreadMode=r;const s={SELECT:0,HAND:1,ZOOM:2};L.CursorTool=s;const m=/\bprint\s*\(/;L.AutoPrintRegExp=m;class C{constructor(){const J=window.devicePixelRatio||1;this.sx=J,this.sy=J}get scaled(){return this.sx!==1||this.sy!==1}}L.OutputScale=C;function h(G,J,fe=!1){let ce=G.offsetParent;if(!ce){console.error("offsetParent is not set -- cannot scroll");return}let me=G.offsetTop+G.clientTop,Ae=G.offsetLeft+G.clientLeft;for(;ce.clientHeight===ce.scrollHeight&&ce.clientWidth===ce.scrollWidth||fe&&(ce.classList.contains("markedContent")||getComputedStyle(ce).overflow==="hidden");)if(me+=ce.offsetTop,Ae+=ce.offsetLeft,ce=ce.offsetParent,!ce)return;J&&(J.top!==void 0&&(me+=J.top),J.left!==void 0&&(Ae+=J.left,ce.scrollLeft=Ae)),ce.scrollTop=me}function D(G,J){const fe=function(Ae){me||(me=window.requestAnimationFrame(function(){me=null;const Me=G.scrollLeft,T=ce.lastX;Me!==T&&(ce.right=Me>T),ce.lastX=Me;const re=G.scrollTop,M=ce.lastY;re!==M&&(ce.down=re>M),ce.lastY=re,J(ce)}))},ce={right:!0,down:!0,lastX:G.scrollLeft,lastY:G.scrollTop,_eventHandler:fe};let me=null;return G.addEventListener("scroll",fe,!0),ce}function te(G){const J=new Map;for(const[fe,ce]of new URLSearchParams(G))J.set(fe.toLowerCase(),ce);return J}const le=/[\x01-\x1F]/g;function X(G,J=!1){return typeof G!="string"?(console.error("The argument must be a string."),G):(J&&(G=G.replaceAll(le," ")),G.replaceAll("\0",""))}function ae(G,J,fe=0){let ce=fe,me=G.length-1;if(me<0||!J(G[me]))return G.length;if(J(G[ce]))return ce;for(;ce<me;){const Ae=ce+me>>1,Ee=G[Ae];J(Ee)?me=Ae:ce=Ae+1}return ce}function de(G){if(Math.floor(G)===G)return[G,1];const J=1/G,fe=8;if(J>fe)return[1,fe];if(Math.floor(J)===J)return[1,J];const ce=G>1?J:G;let me=0,Ae=1,Ee=1,Me=1;for(;;){const re=me+Ee,M=Ae+Me;if(M>fe)break;ce<=re/M?(Ee=re,Me=M):(me=re,Ae=M)}let T;return ce-me/Ae<Ee/Me-ce?T=ce===G?[me,Ae]:[Ae,me]:T=ce===G?[Ee,Me]:[Me,Ee],T}function Z(G,J){const fe=G%J;return fe===0?G:Math.round(G-fe+J)}function ge({view:G,userUnit:J,rotate:fe}){const[ce,me,Ae,Ee]=G,Me=fe%180!==0,T=(Ae-ce)/72*J,re=(Ee-me)/72*J;return{width:Me?re:T,height:Me?T:re}}function Se(G,J,fe){if(G<2)return G;let ce=J[G].div,me=ce.offsetTop+ce.clientTop;me>=fe&&(ce=J[G-1].div,me=ce.offsetTop+ce.clientTop);for(let Ae=G-2;Ae>=0&&(ce=J[Ae].div,!(ce.offsetTop+ce.clientTop+ce.clientHeight<=me));--Ae)G=Ae;return G}function oe({scrollEl:G,views:J,sortByVisibility:fe=!1,horizontal:ce=!1,rtl:me=!1}){const Ae=G.scrollTop,Ee=Ae+G.clientHeight,Me=G.scrollLeft,T=Me+G.clientWidth;function re(pe){const ye=pe.div;return ye.offsetTop+ye.clientTop+ye.clientHeight>Ae}function M(pe){const ye=pe.div,Pe=ye.offsetLeft+ye.clientLeft,Te=Pe+ye.clientWidth;return me?Pe<T:Te>Me}const O=[],z=new Set,_e=J.length;let we=ae(J,ce?M:re);we>0&&we<_e&&!ce&&(we=Se(we,J,Ae));let ie=ce?T:-1;for(let pe=we;pe<_e;pe++){const ye=J[pe],Pe=ye.div,Te=Pe.offsetLeft+Pe.clientLeft,Ce=Pe.offsetTop+Pe.clientTop,ke=Pe.clientWidth,Re=Pe.clientHeight,Fe=Te+ke,Le=Ce+Re;if(ie===-1)Le>=Ee&&(ie=Le);else if((ce?Te:Ce)>ie)break;if(Le<=Ae||Ce>=Ee||Fe<=Me||Te>=T)continue;const Ie=Math.max(0,Ae-Ce)+Math.max(0,Le-Ee),De=Math.max(0,Me-Te)+Math.max(0,Fe-T),Be=(Re-Ie)/Re,Oe=(ke-De)/ke,Ne=Be*Oe*100|0;O.push({id:ye.id,x:Te,y:Ce,view:ye,percent:Ne,widthPercent:Oe*100|0}),z.add(ye.id)}const ve=O[0],xe=O.at(-1);return fe&&O.sort(function(pe,ye){const Pe=pe.percent-ye.percent;return Math.abs(Pe)>.001?-Pe:pe.id-ye.id}),{first:ve,last:xe,views:O,ids:z}}function H(G){G.preventDefault()}function A(G){let J=Math.hypot(G.deltaX,G.deltaY);const fe=Math.atan2(G.deltaY,G.deltaX);return-.25*Math.PI<fe&&fe<.75*Math.PI&&(J=-J),J}function v(G){const J=G.deltaMode;let fe=A(G);const ce=30,me=30;return J===WheelEvent.DOM_DELTA_PIXEL?fe/=ce*me:J===WheelEvent.DOM_DELTA_LINE&&(fe/=me),fe}function R(G){return Number.isInteger(G)&&G%90===0}function $(G){return Number.isInteger(G)&&Object.values(t).includes(G)&&G!==t.UNKNOWN}function j(G){return Number.isInteger(G)&&Object.values(r).includes(G)&&G!==r.UNKNOWN}function se(G){return G.width<=G.height}const N=new Promise(function(G){window.requestAnimationFrame(G)});L.animationStarted=N;const K=document.documentElement.style;L.docStyle=K;function ne(G,J,fe){return Math.min(Math.max(G,J),fe)}class U{constructor(J){Q(this,y,null);Q(this,k,null);Q(this,V,0);Q(this,W,null);Q(this,he,!0);be(this,y,J.classList),be(this,W,J.style)}get percent(){return u(this,V)}set percent(J){if(be(this,V,ne(J,0,100)),isNaN(J)){u(this,y).add("indeterminate");return}u(this,y).remove("indeterminate"),u(this,W).setProperty("--progressBar-percent",`${u(this,V)}%`)}setWidth(J){if(!J)return;const ce=J.parentNode.offsetWidth-J.offsetWidth;ce>0&&u(this,W).setProperty("--progressBar-end-offset",`${ce}px`)}setDisableAutoFetch(J=5e3){isNaN(u(this,V))||(u(this,k)&&clearTimeout(u(this,k)),this.show(),be(this,k,setTimeout(()=>{be(this,k,null),this.hide()},J)))}hide(){u(this,he)&&(be(this,he,!1),u(this,y).add("hidden"))}show(){u(this,he)||(be(this,he,!0),u(this,y).remove("hidden"))}}y=new WeakMap,k=new WeakMap,V=new WeakMap,W=new WeakMap,he=new WeakMap,L.ProgressBar=U;function B(){let G=document,J=G.activeElement||G.querySelector(":focus");for(;J!=null&&J.shadowRoot;)G=J.shadowRoot,J=G.activeElement||G.querySelector(":focus");return J}function o(G){let J=t.VERTICAL,fe=r.NONE;switch(G){case"SinglePage":J=t.PAGE;break;case"OneColumn":break;case"TwoPageLeft":J=t.PAGE;case"TwoColumnLeft":fe=r.ODD;break;case"TwoPageRight":J=t.PAGE;case"TwoColumnRight":fe=r.EVEN;break}return{scrollMode:J,spreadMode:fe}}function _(G){switch(G){case"UseNone":return b.NONE;case"UseThumbs":return b.THUMBS;case"UseOutlines":return b.OUTLINE;case"UseAttachments":return b.ATTACHMENTS;case"UseOC":return b.LAYERS}return b.NONE}},(q,L,F)=>{var g,i,d,Xt;Object.defineProperty(L,"__esModule",{value:!0}),L.AnnotationLayerBuilder=void 0;var f=F(4),c=F(5),x=F(2);class P{constructor({pageDiv:E,pdfPage:b,linkService:p,downloadManager:e,annotationStorage:t=null,imageResourcesPath:r="",renderForms:s=!0,l10n:m=c.NullL10n,enableScripting:C=!1,hasJSActionsPromise:h=null,fieldObjectsPromise:D=null,annotationCanvasMap:te=null,accessibilityManager:le=null}){Q(this,d);Q(this,g,0);Q(this,i,null);this.pageDiv=E,this.pdfPage=b,this.linkService=p,this.downloadManager=e,this.imageResourcesPath=r,this.renderForms=s,this.l10n=m,this.annotationStorage=t,this.enableScripting=C,this._hasJSActionsPromise=h||Promise.resolve(!1),this._fieldObjectsPromise=D||Promise.resolve(null),this._annotationCanvasMap=te,this._accessibilityManager=le,this.div=null,this._cancelled=!1,this._eventBus=p.eventBus}async render(E,b="display"){var r;if(this.div){if(this._cancelled||u(this,g)===0)return;f.AnnotationLayer.update({viewport:E.clone({dontFlip:!0}),div:this.div,annotationCanvasMap:this._annotationCanvasMap});return}const[p,e,t]=await Promise.all([this.pdfPage.getAnnotations({intent:b}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(!this._cancelled){if(be(this,g,p.length),this.div=document.createElement("div"),this.div.className="annotationLayer",this.pageDiv.append(this.div),u(this,g)===0){this.hide();return}f.AnnotationLayer.render({viewport:E.clone({dontFlip:!0}),div:this.div,annotations:p,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:e,fieldObjects:t,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager}),this.l10n.translate(this.div),this.linkService.isInPresentationMode&&ee(this,d,Xt).call(this,x.PresentationModeState.FULLSCREEN),u(this,i)||(be(this,i,s=>{ee(this,d,Xt).call(this,s.state)}),(r=this._eventBus)==null||r._on("presentationmodechanged",u(this,i)))}}cancel(){var E;this._cancelled=!0,u(this,i)&&((E=this._eventBus)==null||E._off("presentationmodechanged",u(this,i)),be(this,i,null))}hide(){this.div&&(this.div.hidden=!0)}}g=new WeakMap,i=new WeakMap,d=new WeakSet,Xt=function(E){if(!this.div)return;let b=!1;switch(E){case x.PresentationModeState.FULLSCREEN:b=!0;break;case x.PresentationModeState.NORMAL:break;default:return}for(const p of this.div.childNodes)p.hasAttribute("data-internal-link")||(p.inert=b)},L.AnnotationLayerBuilder=P},q=>{let L;typeof window<"u"&&window["pdfjs-dist/build/pdf"]?L=window["pdfjs-dist/build/pdf"]:L=requirePdf(),q.exports=L},(q,L)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.NullL10n=void 0,L.fixupLangCode=x,L.getL10nFallback=f;const F={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image"};F.print_progress_percent="{{progress}}%";function f(i,d){switch(i){case"find_match_count":i=`find_match_count[${d.total===1?"one":"other"}]`;break;case"find_match_count_limit":i=`find_match_count_limit[${d.limit===1?"one":"other"}]`;break}return F[i]||""}const c={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function x(i){return c[i==null?void 0:i.toLowerCase()]||i}function P(i,d){return d?i.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(n,l)=>l in d?d[l]:"{{"+l+"}}"):i}const g={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(i,d=null,n=f(i,d)){return P(n,d)},async translate(i){}};L.NullL10n=g},(q,L,F)=>{var P;Object.defineProperty(L,"__esModule",{value:!0}),L.DownloadManager=void 0;var f=F(4);function c(g,i){const d=document.createElement("a");if(!d.click)throw new Error('DownloadManager: "a.click()" is not supported.');d.href=g,d.target="_parent","download"in d&&(d.download=i),(document.body||document.documentElement).append(d),d.click(),d.remove()}class x{constructor(){Q(this,P,new WeakMap)}downloadUrl(i,d){if(!(0,f.createValidAbsoluteUrl)(i,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${i}`);return}c(i+"#pdfjs.action=download",d)}downloadData(i,d,n){const l=URL.createObjectURL(new Blob([i],{type:n}));c(l,d)}openOrDownloadData(i,d,n){const E=(0,f.isPdfFile)(n)?"application/pdf":"";return this.downloadData(d,n,E),!1}download(i,d,n){const l=URL.createObjectURL(i);c(l,n)}}P=new WeakMap,L.DownloadManager=x},(q,L)=>{var P;Object.defineProperty(L,"__esModule",{value:!0}),L.WaitOnType=L.EventBus=L.AutomationEventBus=void 0,L.waitOnEventOrTimeout=f;const F={EVENT:"event",TIMEOUT:"timeout"};L.WaitOnType=F;function f({target:g,name:i,delay:d=0}){return new Promise(function(n,l){if(typeof g!="object"||!(i&&typeof i=="string")||!(Number.isInteger(d)&&d>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function E(t){g instanceof c?g._off(i,b):g.removeEventListener(i,b),e&&clearTimeout(e),n(t)}const b=E.bind(null,F.EVENT);g instanceof c?g._on(i,b):g.addEventListener(i,b);const p=E.bind(null,F.TIMEOUT),e=setTimeout(p,d)})}class c{constructor(){Q(this,P,Object.create(null))}on(i,d,n=null){this._on(i,d,{external:!0,once:n==null?void 0:n.once})}off(i,d,n=null){this._off(i,d,{external:!0,once:n==null?void 0:n.once})}dispatch(i,d){const n=u(this,P)[i];if(!n||n.length===0)return;let l;for(const{listener:E,external:b,once:p}of n.slice(0)){if(p&&this._off(i,E),b){(l||(l=[])).push(E);continue}E(d)}if(l){for(const E of l)E(d);l=null}}_on(i,d,n=null){var E;((E=u(this,P))[i]||(E[i]=[])).push({listener:d,external:(n==null?void 0:n.external)===!0,once:(n==null?void 0:n.once)===!0})}_off(i,d,n=null){const l=u(this,P)[i];if(l){for(let E=0,b=l.length;E<b;E++)if(l[E].listener===d){l.splice(E,1);return}}}}P=new WeakMap,L.EventBus=c;class x extends c{dispatch(i,d){throw new Error("Not implemented: AutomationEventBus.dispatch")}}L.AutomationEventBus=x},(q,L,F)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.GenericL10n=void 0,F(9);var f=F(5);const c=document.webL10n;class x{constructor(g){this._lang=g,this._ready=new Promise((i,d)=>{c.setLanguage((0,f.fixupLangCode)(g),()=>{i(c)})})}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(g,i=null,d=(0,f.getL10nFallback)(g,i)){return(await this._ready).get(g,i,d)}async translate(g){return(await this._ready).translate(g)}}L.GenericL10n=x},()=>{document.webL10n=function(q,L,F){var f={},c="",x="textContent",P="",g={},i="loading",d=!0;function n(){return L.querySelectorAll('link[type="application/l10n"]')}function l(){var X=L.querySelector('script[type="application/l10n"]');return X?JSON.parse(X.innerHTML):null}function E(X){return X?X.querySelectorAll("*[data-l10n-id]"):[]}function b(X){if(!X)return{};var ae=X.getAttribute("data-l10n-id"),de=X.getAttribute("data-l10n-args"),Z={};if(de)try{Z=JSON.parse(de)}catch{console.warn("could not parse arguments for #"+ae)}return{id:ae,args:Z}}function p(X,ae,de){ae=ae||function(Se){},de=de||function(){};var Z=new XMLHttpRequest;Z.open("GET",X,d),Z.overrideMimeType&&Z.overrideMimeType("text/plain; charset=utf-8"),Z.onreadystatechange=function(){Z.readyState==4&&(Z.status==200||Z.status===0?ae(Z.responseText):de())},Z.onerror=de,Z.ontimeout=de;try{Z.send(null)}catch{de()}}function e(X,ae,de,Z){var ge=X.replace(/[^\/]*$/,"")||"./";function Se(H){return H.lastIndexOf("\\")<0?H:H.replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function oe(H,A){var v={},R=/^\s*|\s*$/,$=/^\s*#|^\s*$/,j=/^\s*\[(.*)\]\s*$/,se=/^\s*@import\s+url\((.*)\)\s*$/i,N=/^([^=\s]*)\s*=\s*(.+)$/;function K(U,B,o){var _=U.replace(R,"").split(/[\r\n]+/),y="*",k=ae.split("-",1)[0],V=!1,W="";function he(){for(;;){if(!_.length){o();return}var G=_.shift();if(!$.test(G)){if(B){if(W=j.exec(G),W){y=W[1].toLowerCase(),V=y!=="*"&&y!==ae&&y!==k;continue}else if(V)continue;if(W=se.exec(G),W){ne(ge+W[1],he);return}}var J=G.match(N);J&&J.length==3&&(v[J[1]]=Se(J[2]))}}}he()}function ne(U,B){p(U,function(o){K(o,!1,B)},function(){console.warn(U+" not found."),B()})}K(H,!0,function(){A(v)})}p(X,function(H){c+=H,oe(H,function(A){for(var v in A){var R,$,j=v.lastIndexOf(".");j>0?(R=v.substring(0,j),$=v.substring(j+1)):(R=v,$=x),f[R]||(f[R]={}),f[R][$]=A[v]}de&&de()})},Z)}function t(X,ae){X&&(X=X.toLowerCase()),ae=ae||function(){},r(),P=X;var de=n(),Z=de.length;if(Z===0){var ge=l();if(ge&&ge.locales&&ge.default_locale){if(console.log("using the embedded JSON directory, early way out"),f=ge.locales[X],!f){var Se=ge.default_locale.toLowerCase();for(var oe in ge.locales)if(oe=oe.toLowerCase(),oe===X){f=ge.locales[X];break}else oe===Se&&(f=ge.locales[Se])}ae()}else console.log("no resource to load, early way out");i="complete";return}var H=null,A=0;H=function(){A++,A>=Z&&(ae(),i="complete")};function v(j){var se=j.href;this.load=function(N,K){e(se,N,K,function(){console.warn(se+" not found."),console.warn('"'+N+'" resource not found'),P="",K()})}}for(var R=0;R<Z;R++){var $=new v(de[R]);$.load(X,H)}}function r(){f={},c="",P=""}function s(X){var ae={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function de(oe,H){return H.indexOf(oe)!==-1}function Z(oe,H,A){return H<=oe&&oe<=A}var ge={0:function(oe){return"other"},1:function(oe){return Z(oe%100,3,10)?"few":oe===0?"zero":Z(oe%100,11,99)?"many":oe==2?"two":oe==1?"one":"other"},2:function(oe){return oe!==0&&oe%10===0?"many":oe==2?"two":oe==1?"one":"other"},3:function(oe){return oe==1?"one":"other"},4:function(oe){return Z(oe,0,1)?"one":"other"},5:function(oe){return Z(oe,0,2)&&oe!=2?"one":"other"},6:function(oe){return oe===0?"zero":oe%10==1&&oe%100!=11?"one":"other"},7:function(oe){return oe==2?"two":oe==1?"one":"other"},8:function(oe){return Z(oe,3,6)?"few":Z(oe,7,10)?"many":oe==2?"two":oe==1?"one":"other"},9:function(oe){return oe===0||oe!=1&&Z(oe%100,1,19)?"few":oe==1?"one":"other"},10:function(oe){return Z(oe%10,2,9)&&!Z(oe%100,11,19)?"few":oe%10==1&&!Z(oe%100,11,19)?"one":"other"},11:function(oe){return Z(oe%10,2,4)&&!Z(oe%100,12,14)?"few":oe%10===0||Z(oe%10,5,9)||Z(oe%100,11,14)?"many":oe%10==1&&oe%100!=11?"one":"other"},12:function(oe){return Z(oe,2,4)?"few":oe==1?"one":"other"},13:function(oe){return Z(oe%10,2,4)&&!Z(oe%100,12,14)?"few":oe!=1&&Z(oe%10,0,1)||Z(oe%10,5,9)||Z(oe%100,12,14)?"many":oe==1?"one":"other"},14:function(oe){return Z(oe%100,3,4)?"few":oe%100==2?"two":oe%100==1?"one":"other"},15:function(oe){return oe===0||Z(oe%100,2,10)?"few":Z(oe%100,11,19)?"many":oe==1?"one":"other"},16:function(oe){return oe%10==1&&oe!=11?"one":"other"},17:function(oe){return oe==3?"few":oe===0?"zero":oe==6?"many":oe==2?"two":oe==1?"one":"other"},18:function(oe){return oe===0?"zero":Z(oe,0,2)&&oe!==0&&oe!=2?"one":"other"},19:function(oe){return Z(oe,2,10)?"few":Z(oe,0,1)?"one":"other"},20:function(oe){return(Z(oe%10,3,4)||oe%10==9)&&!(Z(oe%100,10,19)||Z(oe%100,70,79)||Z(oe%100,90,99))?"few":oe%1e6===0&&oe!==0?"many":oe%10==2&&!de(oe%100,[12,72,92])?"two":oe%10==1&&!de(oe%100,[11,71,91])?"one":"other"},21:function(oe){return oe===0?"zero":oe==1?"one":"other"},22:function(oe){return Z(oe,0,1)||Z(oe,11,99)?"one":"other"},23:function(oe){return Z(oe%10,1,2)||oe%20===0?"one":"other"},24:function(oe){return Z(oe,3,10)||Z(oe,13,19)?"few":de(oe,[2,12])?"two":de(oe,[1,11])?"one":"other"}},Se=ae[X.replace(/-.*$/,"")];return Se in ge?ge[Se]:(console.warn("plural form unknown for ["+X+"]"),function(){return"other"})}g.plural=function(X,ae,de,Z){var ge=parseFloat(ae);if(isNaN(ge)||Z!=x)return X;g._pluralRules||(g._pluralRules=s(P));var Se="["+g._pluralRules(ge)+"]";return ge===0&&de+"[zero]"in f?X=f[de+"[zero]"][Z]:ge==1&&de+"[one]"in f?X=f[de+"[one]"][Z]:ge==2&&de+"[two]"in f?X=f[de+"[two]"][Z]:de+Se in f?X=f[de+Se][Z]:de+"[other]"in f&&(X=f[de+"[other]"][Z]),X};function m(X,ae,de){var Z=f[X];if(!Z){if(console.warn("#"+X+" is undefined."),!de)return null;Z=de}var ge={};for(var Se in Z){var oe=Z[Se];oe=C(oe,ae,X,Se),oe=h(oe,ae,X),ge[Se]=oe}return ge}function C(X,ae,de,Z){var ge=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,Se=ge.exec(X);if(!Se||!Se.length)return X;var oe=Se[1],H=Se[2],A;if(ae&&H in ae?A=ae[H]:H in f&&(A=f[H]),oe in g){var v=g[oe];X=v(X,A,de,Z)}return X}function h(X,ae,de){var Z=/\{\{\s*(.+?)\s*\}\}/g;return X.replace(Z,function(ge,Se){return ae&&Se in ae?ae[Se]:Se in f?f[Se]:(console.log("argument {{"+Se+"}} for #"+de+" is undefined."),ge)})}function D(X){var ae=b(X);if(ae.id){var de=m(ae.id,ae.args);if(!de){console.warn("#"+ae.id+" is undefined.");return}if(de[x]){if(te(X)===0)X[x]=de[x];else{for(var Z=X.childNodes,ge=!1,Se=0,oe=Z.length;Se<oe;Se++)Z[Se].nodeType===3&&/\S/.test(Z[Se].nodeValue)&&(ge?Z[Se].nodeValue="":(Z[Se].nodeValue=de[x],ge=!0));if(!ge){var H=L.createTextNode(de[x]);X.prepend(H)}}delete de[x]}for(var A in de)X[A]=de[A]}}function te(X){if(X.children)return X.children.length;if(typeof X.childElementCount<"u")return X.childElementCount;for(var ae=0,de=0;de<X.childNodes.length;de++)ae+=X.nodeType===1?1:0;return ae}function le(X){X=X||L.documentElement;for(var ae=E(X),de=ae.length,Z=0;Z<de;Z++)D(ae[Z]);D(X)}return{get:function(X,ae,de){var Z=X.lastIndexOf("."),ge=x;Z>0&&(ge=X.substring(Z+1),X=X.substring(0,Z));var Se;de&&(Se={},Se[ge]=de);var oe=m(X,ae,Se);return oe&&ge in oe?oe[ge]:"{{"+X+"}}"},getData:function(){return f},getText:function(){return c},getLanguage:function(){return P},setLanguage:function(X,ae){t(X,function(){ae&&ae()})},getDirection:function(){var X=["ar","he","fa","ps","ur"],ae=P.split("-",1)[0];return X.indexOf(ae)>=0?"rtl":"ltr"},translate:le,getReadyState:function(){return i},ready:function(X){if(X)i=="complete"||i=="interactive"?q.setTimeout(function(){X()}):L.addEventListener&&L.addEventListener("localized",function ae(){L.removeEventListener("localized",ae),X()});else return}}}(window,document)},(q,L,F)=>{var ae,de,Z,Ni,Se,qt,H,Kt,v,Bi,$,Vi,se,Ui,K,Yt,U,zi,o,ji,y,At,V,ut,he,ot,J,Hi,ce,Zt,Ae,Qt,Me,St,re,Wi,O,Jt,_e,ei,ie,ft;Object.defineProperty(L,"__esModule",{value:!0}),L.PDFFindController=L.FindState=void 0;var f=F(2),c=F(4),x=F(11);const P={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};L.FindState=P;const g=250,i=-50,d=-400,n={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},l=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let E;const b=/\p{M}+/gu,p=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,e=/([^\p{M}])\p{M}*$/u,t=/^\p{M}*([^\p{M}])/u,r=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,s=new Map,m="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",C=new Map;let h=null,D=null;function te(xe){const pe=[];let ye;for(;(ye=r.exec(xe))!==null;){let{index:Oe}=ye;for(const Ne of ye[0]){let Ue=s.get(Ne);Ue||(Ue=Ne.normalize("NFD").length,s.set(Ne,Ue)),pe.push([Ue,Oe++])}}let Pe;if(pe.length===0&&h)Pe=h;else if(pe.length>0&&D)Pe=D;else{const We=`([${Object.keys(n).join("")}])|([①-⑳Ⓐ-⓿㉄-㊿㋐-㋾＀-￯])|((?:゙|゚)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[぀-ヿ])\\n)|(\\n)`;pe.length===0?Pe=h=new RegExp(We+"|(\\u0000)","gum"):Pe=D=new RegExp(We+`|(${m})`,"gum")}const Te=[];for(;(ye=b.exec(xe))!==null;)Te.push([ye[0].length,ye.index]);let Ce=xe.normalize("NFD");const ke=[[0,0]];let Re=0,Fe=0,Le=0,Ie=0,De=0,Be=!1;return Ce=Ce.replace(Pe,(Oe,Ne,Ue,He,We,Ze,Qe,tt,it,je)=>{var lt,ui,fi;if(je-=Ie,Ne){const ze=n[Ne],$e=ze.length;for(let Ge=1;Ge<$e;Ge++)ke.push([je-Le+Ge,Le-Ge]);return Le-=$e-1,ze}if(Ue){let ze=C.get(Ue);ze||(ze=Ue.normalize("NFKC"),C.set(Ue,ze));const $e=ze.length;for(let Ge=1;Ge<$e;Ge++)ke.push([je-Le+Ge,Le-Ge]);return Le-=$e-1,ze}if(He)return Be=!0,je+De===((lt=Te[Re])==null?void 0:lt[1])?++Re:(ke.push([je-1-Le+1,Le-1]),Le-=1,Ie+=1),ke.push([je-Le+1,Le]),Ie+=1,De+=1,He.charAt(0);if(We){const ze=We.endsWith(`
`),$e=ze?We.length-2:We.length;Be=!0;let Ge=$e;je+De===((ui=Te[Re])==null?void 0:ui[1])&&(Ge-=Te[Re][0],++Re);for(let gt=1;gt<=Ge;gt++)ke.push([je-1-Le+gt,Le-gt]);return Le-=Ge,Ie+=Ge,ze?(je+=$e-1,ke.push([je-Le+1,1+Le]),Le+=1,Ie+=1,De+=1,We.slice(0,$e)):We}if(Ze){const ze=Ze.length-2;return ke.push([je-Le+ze,1+Le]),Le+=1,Ie+=1,De+=1,Ze.slice(0,-2)}if(Qe){const ze=Qe.length-1;return ke.push([je-Le+ze,Le]),Ie+=1,De+=1,Qe.slice(0,-1)}if(tt)return ke.push([je-Le+1,Le-1]),Le-=1,Ie+=1,De+=1," ";if(je+De===((fi=pe[Fe])==null?void 0:fi[1])){const ze=pe[Fe][0]-1;++Fe;for(let $e=1;$e<=ze;$e++)ke.push([je-(Le-$e),Le-$e]);Le-=ze,Ie+=ze}return it}),ke.push([Ce.length,Le]),[Ce,ke,Be]}function le(xe,pe,ye){if(!xe)return[pe,ye];const Pe=pe,Te=pe+ye;let Ce=(0,f.binarySearchFirstItem)(xe,Re=>Re[0]>=Pe);xe[Ce][0]>Pe&&--Ce;let ke=(0,f.binarySearchFirstItem)(xe,Re=>Re[0]>=Te,Ce);return xe[ke][0]>Te&&--ke,[Pe+xe[Ce][1],ye+xe[ke][1]-xe[Ce][1]]}class X{constructor({linkService:pe,eventBus:ye,updateMatchesCountOnProgress:Pe=!0}){Q(this,Z);Q(this,Se);Q(this,H);Q(this,v);Q(this,$);Q(this,se);Q(this,K);Q(this,U);Q(this,o);Q(this,y);Q(this,V);Q(this,he);Q(this,J);Q(this,ce);Q(this,Ae);Q(this,Me);Q(this,re);Q(this,O);Q(this,_e);Q(this,ie);Q(this,ae,!0);Q(this,de,0);this._linkService=pe,this._eventBus=ye,be(this,ae,Pe),ee(this,Se,qt).call(this),ye._on("find",ee(this,Z,Ni).bind(this)),ye._on("findbarclose",ee(this,re,Wi).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(pe){this._pdfDocument&&ee(this,Se,qt).call(this),pe&&(this._pdfDocument=pe,this._firstPageCapability.resolve())}scrollMatchIntoView({element:pe=null,selectedLeft:ye=0,pageIndex:Pe=-1,matchIndex:Te=-1}){if(!this._scrollMatches||!pe)return;if(Te===-1||Te!==this._selected.matchIdx)return;if(Pe===-1||Pe!==this._selected.pageIdx)return;this._scrollMatches=!1;const Ce={top:i,left:ye+d};(0,f.scrollIntoView)(pe,Ce,!0)}}ae=new WeakMap,de=new WeakMap,Z=new WeakSet,Ni=function(pe){if(!pe)return;const ye=this._pdfDocument,{type:Pe}=pe;(this._state===null||ee(this,v,Bi).call(this,pe))&&(this._dirtyMatch=!0),this._state=pe,Pe!=="highlightallchange"&&ee(this,ie,ft).call(this,P.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||ye&&this._pdfDocument!==ye)return;ee(this,o,ji).call(this);const Te=!this._highlightMatches,Ce=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),Pe?this._dirtyMatch?ee(this,he,ot).call(this):Pe==="again"?(ee(this,he,ot).call(this),Te&&this._state.highlightAll&&ee(this,V,ut).call(this)):Pe==="highlightallchange"?(Ce?ee(this,he,ot).call(this):this._highlightMatches=!0,ee(this,V,ut).call(this)):ee(this,he,ot).call(this):this._findTimeout=setTimeout(()=>{ee(this,he,ot).call(this),this._findTimeout=null},g)})},Se=new WeakSet,qt=function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],be(this,de,0),this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,c.createPromiseCapability)()},H=new WeakSet,Kt=function(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=te(this._state.query)),this._normalizedQuery},v=new WeakSet,Bi=function(pe){if(pe.query!==this._state.query)return!0;switch(pe.type){case"again":const ye=this._selected.pageIdx+1,Pe=this._linkService;return ye>=1&&ye<=Pe.pagesCount&&ye!==Pe.page&&!Pe.isPageVisible(ye);case"highlightallchange":return!1}return!0},$=new WeakSet,Vi=function(pe,ye,Pe){let Te=pe.slice(0,ye).match(e);if(Te){const Ce=pe.charCodeAt(ye),ke=Te[1].charCodeAt(0);if((0,x.getCharacterType)(Ce)===(0,x.getCharacterType)(ke))return!1}if(Te=pe.slice(ye+Pe).match(t),Te){const Ce=pe.charCodeAt(ye+Pe-1),ke=Te[1].charCodeAt(0);if((0,x.getCharacterType)(Ce)===(0,x.getCharacterType)(ke))return!1}return!0},se=new WeakSet,Ui=function(pe,ye,Pe,Te){const Ce=this._pageMatches[Pe]=[],ke=this._pageMatchesLength[Pe]=[];if(!pe)return;const Re=this._pageDiffs[Pe];let Fe;for(;(Fe=pe.exec(Te))!==null;){if(ye&&!ee(this,$,Vi).call(this,Te,Fe.index,Fe[0].length))continue;const[Le,Ie]=le(Re,Fe.index,Fe[0].length);Ie&&(Ce.push(Le),ke.push(Ie))}},K=new WeakSet,Yt=function(pe,ye){const{matchDiacritics:Pe}=this._state;let Te=!1;pe=pe.replaceAll(p,(ke,Re,Fe,Le,Ie,De)=>Re?`[ ]*\\${Re}[ ]*`:Fe?`[ ]*${Fe}[ ]*`:Le?"[ ]+":Pe?Ie||De:Ie?l.has(Ie.charCodeAt(0))?Ie:"":ye?(Te=!0,`${De}\\p{M}*`):De);const Ce="[ ]*";return pe.endsWith(Ce)&&(pe=pe.slice(0,pe.length-Ce.length)),Pe&&ye&&(E||(E=String.fromCharCode(...l)),Te=!0,pe=`${pe}(?=[${E}]|[^\\p{M}]|$)`),[Te,pe]},U=new WeakSet,zi=function(pe){let ye=u(this,H,Kt);if(!ye)return;const{caseSensitive:Pe,entireWord:Te,phraseSearch:Ce}=this._state,ke=this._pageContents[pe],Re=this._hasDiacritics[pe];let Fe=!1;if(Ce)[Fe,ye]=ee(this,K,Yt).call(this,ye,Re);else{const De=ye.match(/\S+/g);De&&(ye=De.sort().reverse().map(Be=>{const[Oe,Ne]=ee(this,K,Yt).call(this,Be,Re);return Fe||(Fe=Oe),`(${Ne})`}).join("|"))}const Le=`g${Fe?"u":""}${Pe?"":"i"}`;ye=ye?new RegExp(ye,Le):null,ee(this,se,Ui).call(this,ye,Te,pe,ke),this._state.highlightAll&&ee(this,y,At).call(this,pe),this._resumePageIdx===pe&&(this._resumePageIdx=null,ee(this,ce,Zt).call(this));const Ie=this._pageMatches[pe].length;this._matchesCountTotal+=Ie,u(this,ae)?Ie>0&&ee(this,_e,ei).call(this):++ct(this,de)._===this._linkService.pagesCount&&ee(this,_e,ei).call(this)},o=new WeakSet,ji=function(){if(this._extractTextPromises.length>0)return;let pe=Promise.resolve();for(let ye=0,Pe=this._linkService.pagesCount;ye<Pe;ye++){const Te=(0,c.createPromiseCapability)();this._extractTextPromises[ye]=Te.promise,pe=pe.then(()=>this._pdfDocument.getPage(ye+1).then(Ce=>Ce.getTextContent()).then(Ce=>{const ke=[];for(const Re of Ce.items)ke.push(Re.str),Re.hasEOL&&ke.push(`
`);[this._pageContents[ye],this._pageDiffs[ye],this._hasDiacritics[ye]]=te(ke.join("")),Te.resolve()},Ce=>{console.error(`Unable to get text content for page ${ye+1}`,Ce),this._pageContents[ye]="",this._pageDiffs[ye]=null,this._hasDiacritics[ye]=!1,Te.resolve()}))}},y=new WeakSet,At=function(pe){this._scrollMatches&&this._selected.pageIdx===pe&&(this._linkService.page=pe+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:pe})},V=new WeakSet,ut=function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})},he=new WeakSet,ot=function(){const pe=this._state.findPrevious,ye=this._linkService.page-1,Pe=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=ye,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,be(this,de,0),this._matchesCountTotal=0,ee(this,V,ut).call(this);for(let Ce=0;Ce<Pe;Ce++)this._pendingFindMatches.has(Ce)||(this._pendingFindMatches.add(Ce),this._extractTextPromises[Ce].then(()=>{this._pendingFindMatches.delete(Ce),ee(this,U,zi).call(this,Ce)}))}if(!u(this,H,Kt)){ee(this,ie,ft).call(this,P.FOUND);return}if(this._resumePageIdx)return;const Te=this._offset;if(this._pagesToSearch=Pe,Te.matchIdx!==null){const Ce=this._pageMatches[Te.pageIdx].length;if(!pe&&Te.matchIdx+1<Ce||pe&&Te.matchIdx>0){Te.matchIdx=pe?Te.matchIdx-1:Te.matchIdx+1,ee(this,Me,St).call(this,!0);return}ee(this,Ae,Qt).call(this,pe)}ee(this,ce,Zt).call(this)},J=new WeakSet,Hi=function(pe){const ye=this._offset,Pe=pe.length,Te=this._state.findPrevious;return Pe?(ye.matchIdx=Te?Pe-1:0,ee(this,Me,St).call(this,!0),!0):(ee(this,Ae,Qt).call(this,Te),ye.wrapped&&(ye.matchIdx=null,this._pagesToSearch<0)?(ee(this,Me,St).call(this,!1),!0):!1)},ce=new WeakSet,Zt=function(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let pe=null;do{const ye=this._offset.pageIdx;if(pe=this._pageMatches[ye],!pe){this._resumePageIdx=ye;break}}while(!ee(this,J,Hi).call(this,pe))},Ae=new WeakSet,Qt=function(pe){const ye=this._offset,Pe=this._linkService.pagesCount;ye.pageIdx=pe?ye.pageIdx-1:ye.pageIdx+1,ye.matchIdx=null,this._pagesToSearch--,(ye.pageIdx>=Pe||ye.pageIdx<0)&&(ye.pageIdx=pe?Pe-1:0,ye.wrapped=!0)},Me=new WeakSet,St=function(pe=!1){let ye=P.NOT_FOUND;const Pe=this._offset.wrapped;if(this._offset.wrapped=!1,pe){const Te=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,ye=Pe?P.WRAPPED:P.FOUND,Te!==-1&&Te!==this._selected.pageIdx&&ee(this,y,At).call(this,Te)}ee(this,ie,ft).call(this,ye,this._state.findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,ee(this,y,At).call(this,this._selected.pageIdx))},re=new WeakSet,Wi=function(pe){const ye=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||ye&&this._pdfDocument!==ye||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),ee(this,ie,ft).call(this,P.FOUND),this._highlightMatches=!1,ee(this,V,ut).call(this))})},O=new WeakSet,Jt=function(){var Ce;const{pageIdx:pe,matchIdx:ye}=this._selected;let Pe=0,Te=this._matchesCountTotal;if(ye!==-1){for(let ke=0;ke<pe;ke++)Pe+=((Ce=this._pageMatches[ke])==null?void 0:Ce.length)||0;Pe+=ye+1}return(Pe<1||Pe>Te)&&(Pe=Te=0),{current:Pe,total:Te}},_e=new WeakSet,ei=function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:ee(this,O,Jt).call(this)})},ie=new WeakSet,ft=function(pe,ye=!1){var Pe;!u(this,ae)&&(u(this,de)!==this._linkService.pagesCount||pe===P.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:pe,previous:ye,matchesCount:ee(this,O,Jt).call(this),rawQuery:((Pe=this._state)==null?void 0:Pe.query)??null})},L.PDFFindController=X},(q,L)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.CharacterType=void 0,L.getCharacterType=b;const F={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};L.CharacterType=F;function f(p){return p<11904}function c(p){return(p&65408)===0}function x(p){return p>=97&&p<=122||p>=65&&p<=90}function P(p){return p>=48&&p<=57}function g(p){return p===32||p===9||p===13||p===10}function i(p){return p>=13312&&p<=40959||p>=63744&&p<=64255}function d(p){return p>=12448&&p<=12543}function n(p){return p>=12352&&p<=12447}function l(p){return p>=65376&&p<=65439}function E(p){return(p&65408)===3584}function b(p){return f(p)?c(p)?g(p)?F.SPACE:x(p)||P(p)||p===95?F.ALPHA_LETTER:F.PUNCT:E(p)?F.THAI_LETTER:p===160?F.SPACE:F.ALPHA_LETTER:i(p)?F.HAN_LETTER:d(p)?F.KATAKANA_LETTER:n(p)?F.HIRAGANA_LETTER:l(p)?F.HALFWIDTH_KATAKANA_LETTER:F.ALPHA_LETTER}},(q,L,F)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.PDFHistory=void 0,L.isDestArraysEqual=l,L.isDestHashesEqual=n;var f=F(2),c=F(7);const x=1e3,P=50,g=1e3;function i(){return document.location.hash}class d{constructor({linkService:b,eventBus:p}){this.linkService=b,this.eventBus=p,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",e=>{this._isPagesLoaded=!!e.pagesCount},{once:!0})})}initialize({fingerprint:b,resetHistory:p=!1,updateUrl:e=!1}){if(!b||typeof b!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const t=this._fingerprint!==""&&this._fingerprint!==b;this._fingerprint=b,this._updateUrl=e===!0,this._initialized=!0,this._bindEvents();const r=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=i(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(r,!0)||p){const{hash:m,page:C,rotation:h}=this._parseCurrentHash(!0);if(!m||t||p){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:m,page:C,rotation:h},!0);return}const s=r.destination;this._updateInternalState(s,r.uid,!0),s.rotation!==void 0&&(this._initialRotation=s.rotation),s.dest?(this._initialBookmark=JSON.stringify(s.dest),this._destination.page=null):s.hash?this._initialBookmark=s.hash:s.page&&(this._initialBookmark=`page=${s.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:b=null,explicitDest:p,pageNumber:e}){if(!this._initialized)return;if(b&&typeof b!="string"){console.error(`PDFHistory.push: "${b}" is not a valid namedDest parameter.`);return}else if(Array.isArray(p)){if(!this._isValidPage(e)&&(e!==null||this._destination)){console.error(`PDFHistory.push: "${e}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${p}" is not a valid explicitDest parameter.`);return}const t=b||JSON.stringify(p);if(!t)return;let r=!1;if(this._destination&&(n(this._destination.hash,t)||l(this._destination.dest,p))){if(this._destination.page)return;r=!0}this._popStateInProgress&&!r||(this._pushOrReplaceState({dest:p,hash:t,page:e,rotation:this.linkService.rotation},r),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(b){var p;if(this._initialized){if(!this._isValidPage(b)){console.error(`PDFHistory.pushPage: "${b}" is not a valid page number.`);return}((p=this._destination)==null?void 0:p.page)!==b&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${b}`,page:b,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const b=window.history.state;this._isValidState(b)&&b.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const b=window.history.state;this._isValidState(b)&&b.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(b,p=!1){const e=p||!this._destination,t={fingerprint:this._fingerprint,uid:e?this._uid:this._uid+1,destination:b};this._updateInternalState(b,t.uid);let r;if(this._updateUrl&&(b!=null&&b.hash)){const s=document.location.href.split("#")[0];s.startsWith("file://")||(r=`${s}#${b.hash}`)}e?window.history.replaceState(t,"",r):window.history.pushState(t,"",r)}_tryPushCurrentPosition(b=!1){if(!this._position)return;let p=this._position;if(b&&(p=Object.assign(Object.create(null),this._position),p.temporary=!0),!this._destination){this._pushOrReplaceState(p);return}if(this._destination.temporary){this._pushOrReplaceState(p,!0);return}if(this._destination.hash===p.hash||!this._destination.page&&this._numPositionUpdates<=P)return;let e=!1;if(this._destination.page>=p.first&&this._destination.page<=p.page){if(this._destination.dest!==void 0||!this._destination.first)return;e=!0}this._pushOrReplaceState(p,e)}_isValidPage(b){return Number.isInteger(b)&&b>0&&b<=this.linkService.pagesCount}_isValidState(b,p=!1){if(!b)return!1;if(b.fingerprint!==this._fingerprint)if(p){if(typeof b.fingerprint!="string"||b.fingerprint.length!==this._fingerprint.length)return!1;const[e]=performance.getEntriesByType("navigation");if((e==null?void 0:e.type)!=="reload")return!1}else return!1;return!(!Number.isInteger(b.uid)||b.uid<0||b.destination===null||typeof b.destination!="object")}_updateInternalState(b,p,e=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),e&&(b!=null&&b.temporary)&&delete b.temporary,this._destination=b,this._uid=p,this._maxUid=Math.max(this._maxUid,p),this._numPositionUpdates=0}_parseCurrentHash(b=!1){const p=unescape(i()).substring(1),e=(0,f.parseQueryString)(p),t=e.get("nameddest")||"";let r=e.get("page")|0;return(!this._isValidPage(r)||b&&t.length>0)&&(r=null),{hash:p,page:r,rotation:this.linkService.rotation}}_updateViewarea({location:b}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:b.pdfOpenParams.substring(1),page:this.linkService.page,first:b.pageNumber,rotation:b.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},g))}_popState({state:b}){const p=i(),e=this._currentHash!==p;if(this._currentHash=p,!b){this._uid++;const{hash:r,page:s,rotation:m}=this._parseCurrentHash();this._pushOrReplaceState({hash:r,page:s,rotation:m},!0);return}if(!this._isValidState(b))return;this._popStateInProgress=!0,e&&(this._blockHashChange++,(0,c.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:x}).then(()=>{this._blockHashChange--}));const t=b.destination;this._updateInternalState(t,b.uid,!0),(0,f.isValidRotation)(t.rotation)&&(this.linkService.rotation=t.rotation),t.dest?this.linkService.goToDestination(t.dest):t.hash?this.linkService.setHash(t.hash):t.page&&(this.linkService.page=t.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}L.PDFHistory=d;function n(E,b){return typeof E!="string"||typeof b!="string"?!1:E===b||(0,f.parseQueryString)(E).get("nameddest")===b}function l(E,b){function p(e,t){if(typeof e!=typeof t||Array.isArray(e)||Array.isArray(t))return!1;if(e!==null&&typeof e=="object"&&t!==null){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!p(e[r],t[r]))return!1;return!0}return e===t||Number.isNaN(e)&&Number.isNaN(t)}if(!(Array.isArray(E)&&Array.isArray(b))||E.length!==b.length)return!1;for(let e=0,t=E.length;e<t;e++)if(!p(E[e],b[e]))return!1;return!0}},(q,L,F)=>{var s,m,C,h,D,te,le,Et,ae,ti,Z,ii,Se,ni,H,si,v,$i,$,Gi;Object.defineProperty(L,"__esModule",{value:!0}),L.PDFPageView=void 0;var f=F(4),c=F(2),x=F(14),P=F(3),g=F(15),i=F(5),d=F(1),n=F(16),l=F(17),E=F(18),b=F(19),p=F(20);const e=g.compatibilityParams.maxCanvasPixels||16777216,t=()=>({annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new d.SimpleLinkService}});class r{constructor(N){Q(this,le);Q(this,ae);Q(this,Z);Q(this,Se);Q(this,H);Q(this,v);Q(this,$);Q(this,s,f.AnnotationMode.ENABLE_FORMS);Q(this,m,null);Q(this,C,null);Q(this,h,null);Q(this,D,c.RenderingStates.INITIAL);Q(this,te,{initialOptionalContent:!0,regularAnnotations:!0});var B;const K=N.container,ne=N.defaultViewport;this.id=N.id,this.renderingId="page"+this.id,be(this,m,N.layerProperties||t),this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=N.scale||c.DEFAULT_SCALE,this.viewport=ne,this.pdfPageRotate=ne.rotation,this._optionalContentConfigPromise=N.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=N.textLayerMode??c.TextLayerMode.ENABLE,be(this,s,N.annotationMode??f.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=N.imageResourcesPath||"",this.useOnlyCssZoom=N.useOnlyCssZoom||!1,this.isOffscreenCanvasSupported=N.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=N.maxCanvasPixels||e,this.pageColors=N.pageColors||null,this.eventBus=N.eventBus,this.renderingQueue=N.renderingQueue,this.renderer=N.renderer||c.RendererType.CANVAS,this.l10n=N.l10n||i.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.resume=null,this._renderError=null,this._isStandalone=!((B=this.renderingQueue)!=null&&B.hasViewer()),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const U=document.createElement("div");if(U.className="page",U.setAttribute("data-page-number",this.id),U.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(o=>{U.setAttribute("aria-label",o)}),this.div=U,ee(this,le,Et).call(this),K==null||K.append(U),this._isStandalone){K==null||K.style.setProperty("--scale-factor",this.scale*f.PixelsPerInch.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:o}=N;o&&o.then(_=>{o===this._optionalContentConfigPromise&&(u(this,te).initialOptionalContent=_.hasInitialVisibility)})}}get renderingState(){return u(this,D)}set renderingState(N){if(N!==u(this,D))switch(be(this,D,N),u(this,C)&&(clearTimeout(u(this,C)),be(this,C,null)),N){case c.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case c.RenderingStates.RUNNING:this.div.classList.add("loadingIcon"),be(this,C,setTimeout(()=>{this.div.classList.add("loading"),be(this,C,null)},0));break;case c.RenderingStates.INITIAL:case c.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}setPdfPage(N){this.pdfPage=N,this.pdfPageRotate=N.rotate;const K=(this.rotation+this.pdfPageRotate)%360;this.viewport=N.getViewport({scale:this.scale*f.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:K}),ee(this,le,Et).call(this),this.reset()}destroy(){var N;this.reset(),(N=this.pdfPage)==null||N.cleanup()}get _textHighlighter(){return(0,f.shadow)(this,"_textHighlighter",new E.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:u(this,m).call(this).findController}))}_resetZoomLayer(N=!1){if(!this.zoomLayer)return;const K=this.zoomLayer.firstChild;this.paintedViewportMap.delete(K),K.width=0,K.height=0,N&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:N=!1,keepAnnotationLayer:K=!1,keepAnnotationEditorLayer:ne=!1,keepXfaLayer:U=!1,keepTextLayer:B=!1}={}){var G,J,fe,ce,me;this.cancelRendering({keepAnnotationLayer:K,keepAnnotationEditorLayer:ne,keepXfaLayer:U,keepTextLayer:B}),this.renderingState=c.RenderingStates.INITIAL;const o=this.div,_=o.childNodes,y=N&&this.zoomLayer||null,k=K&&((G=this.annotationLayer)==null?void 0:G.div)||null,V=ne&&((J=this.annotationEditorLayer)==null?void 0:J.div)||null,W=U&&((fe=this.xfaLayer)==null?void 0:fe.div)||null,he=B&&((ce=this.textLayer)==null?void 0:ce.div)||null;for(let Ae=_.length-1;Ae>=0;Ae--){const Ee=_[Ae];switch(Ee){case y:case k:case V:case W:case he:continue}Ee.remove()}o.removeAttribute("data-loaded"),k&&this.annotationLayer.hide(),V&&this.annotationEditorLayer.hide(),W&&this.xfaLayer.hide(),he&&this.textLayer.hide(),(me=this.structTreeLayer)==null||me.hide(),y||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg)}update({scale:N=0,rotation:K=null,optionalContentConfigPromise:ne=null,drawingDelay:U=-1}){var k;this.scale=N||this.scale,typeof K=="number"&&(this.rotation=K),ne instanceof Promise&&(this._optionalContentConfigPromise=ne,ne.then(V=>{ne===this._optionalContentConfigPromise&&(u(this,te).initialOptionalContent=V.hasInitialVisibility)}));const B=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*f.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:B}),ee(this,le,Et).call(this),this._isStandalone&&((k=this.div.parentNode)==null||k.style.setProperty("--scale-factor",this.viewport.scale)),this.svg){this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!0}),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});return}let o=!1;if(this.canvas&&this.maxCanvasPixels>0){const V=this.outputScale;(Math.floor(this.viewport.width)*V.sx|0)*(Math.floor(this.viewport.height)*V.sy|0)>this.maxCanvasPixels&&(o=!0)}const _=this.useOnlyCssZoom||this.hasRestrictedScaling&&o,y=!_&&U>=0&&U<1e3;if(this.canvas){if(y||_){y&&this.renderingState!==c.RenderingStates.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:U}),this.renderingState=c.RenderingStates.FINISHED),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!y,hideTextLayer:y}),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:N=!1,keepAnnotationEditorLayer:K=!1,keepXfaLayer:ne=!1,keepTextLayer:U=!1,cancelExtraDelay:B=0}={}){var o;this.paintTask&&(this.paintTask.cancel(B),this.paintTask=null),this.resume=null,this.textLayer&&(!U||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!N||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!K||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!ne||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,(o=this._textHighlighter)==null||o.disable())}cssTransform({target:N,redrawAnnotationLayer:K=!1,redrawAnnotationEditorLayer:ne=!1,redrawXfaLayer:U=!1,redrawTextLayer:B=!1,hideTextLayer:o=!1}){var y;if(N instanceof HTMLCanvasElement){if(!N.hasAttribute("zooming")){N.setAttribute("zooming",!0);const{style:k}=N;k.width=k.height=""}}else{const k=this.div,{width:V,height:W}=this.viewport;N.style.width=N.parentNode.style.width=k.style.width=Math.floor(V)+"px",N.style.height=N.parentNode.style.height=k.style.height=Math.floor(W)+"px"}const _=this.paintedViewportMap.get(N);if(this.viewport!==_){const k=this.viewport.rotation-_.rotation,V=Math.abs(k);let W=1,he=1;if(V===90||V===270){const{width:G,height:J}=this.viewport;W=J/G,he=G/J}N.style.transform=`rotate(${k}deg) scale(${W}, ${he})`}K&&this.annotationLayer&&ee(this,ae,ti).call(this),ne&&this.annotationEditorLayer&&ee(this,Z,ii).call(this),U&&this.xfaLayer&&ee(this,Se,ni).call(this),this.textLayer&&(o?(this.textLayer.hide(),(y=this.structTreeLayer)==null||y.hide()):B&&ee(this,H,si).call(this))}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(N,K){return this.viewport.convertToPdfPoint(N,K)}draw(){this.renderingState!==c.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:N,pdfPage:K}=this;if(!K)return this.renderingState=c.RenderingStates.FINISHED,Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=c.RenderingStates.RUNNING;const ne=document.createElement("div");if(ne.classList.add("canvasWrapper"),N.append(ne),!this.textLayer&&this.textLayerMode!==c.TextLayerMode.DISABLE&&!K.isPureXfa&&(this._accessibilityManager||(this._accessibilityManager=new l.TextAccessibilityManager),this.textLayer=new b.TextLayerBuilder({highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported}),N.append(this.textLayer.div)),!this.annotationLayer&&u(this,s)!==f.AnnotationMode.DISABLE){const{annotationStorage:y,downloadManager:k,enableScripting:V,fieldObjectsPromise:W,hasJSActionsPromise:he,linkService:G}=u(this,m).call(this);this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer=new P.AnnotationLayerBuilder({pageDiv:N,pdfPage:K,annotationStorage:y,imageResourcesPath:this.imageResourcesPath,renderForms:u(this,s)===f.AnnotationMode.ENABLE_FORMS,linkService:G,downloadManager:k,l10n:this.l10n,enableScripting:V,hasJSActionsPromise:he,fieldObjectsPromise:W,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})}let U=null;this.renderingQueue&&(U=y=>{if(!this.renderingQueue.isHighestPriority(this)){this.renderingState=c.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=c.RenderingStates.RUNNING,y()};return}y()});const B=async(y=null)=>{if(o===this.paintTask&&(this.paintTask=null),y instanceof f.RenderingCancelledException){this._renderError=null;return}if(this._renderError=y,this.renderingState=c.RenderingStates.FINISHED,this._resetZoomLayer(!0),u(this,te).regularAnnotations=!o.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:this._renderError}),y)throw y},o=this.renderer===c.RendererType.SVG?this.paintOnSvg(ne):this.paintOnCanvas(ne);o.onRenderContinue=U,this.paintTask=o;const _=o.promise.then(()=>B(null).then(async()=>{if(ee(this,H,si).call(this),this.annotationLayer&&await ee(this,ae,ti).call(this),!this.annotationEditorLayer){const{annotationEditorUIManager:y}=u(this,m).call(this);if(!y)return;this.annotationEditorLayer=new x.AnnotationEditorLayerBuilder({uiManager:y,pageDiv:N,pdfPage:K,l10n:this.l10n,accessibilityManager:this._accessibilityManager})}ee(this,Z,ii).call(this)}),function(y){return B(y)});if(K.isPureXfa){if(this.xfaLayer)this.xfaLayer.div&&N.append(this.xfaLayer.div);else{const{annotationStorage:y,linkService:k}=u(this,m).call(this);this.xfaLayer=new p.XfaLayerBuilder({pageDiv:N,pdfPage:K,annotationStorage:y,linkService:k})}ee(this,Se,ni).call(this)}return N.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),_}paintOnCanvas(N){var Ee,Me;const K=(0,f.createPromiseCapability)(),ne={promise:K.promise,onRenderContinue(T){T()},cancel(T=0){Ae.cancel(T)},get separateAnnots(){return Ae.separateAnnots}},U=this.viewport,{width:B,height:o}=U,_=document.createElement("canvas");_.setAttribute("role","presentation"),_.hidden=!0;let y=!0;const k=!!((Ee=this.pageColors)!=null&&Ee.background&&((Me=this.pageColors)!=null&&Me.foreground)),V=function(T){y&&(!k||T)&&(_.hidden=!1,y=!1)};N.append(_),this.canvas=_;const W=_.getContext("2d",{alpha:!1}),he=this.outputScale=new c.OutputScale;if(this.useOnlyCssZoom){const T=U.clone({scale:f.PixelsPerInch.PDF_TO_CSS_UNITS});he.sx*=T.width/B,he.sy*=T.height/o}if(this.maxCanvasPixels>0){const T=B*o,re=Math.sqrt(this.maxCanvasPixels/T);he.sx>re||he.sy>re?(he.sx=re,he.sy=re,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const G=(0,c.approximateFraction)(he.sx),J=(0,c.approximateFraction)(he.sy);_.width=(0,c.roundToDivide)(U.width*he.sx,G[0]),_.height=(0,c.roundToDivide)(U.height*he.sy,J[0]);const{style:fe}=_;fe.width=(0,c.roundToDivide)(U.width,G[1])+"px",fe.height=(0,c.roundToDivide)(U.height,J[1])+"px",this.paintedViewportMap.set(_,U);const ce=he.scaled?[he.sx,0,0,he.sy,0,0]:null,me={canvasContext:W,transform:ce,viewport:U,annotationMode:u(this,s),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},Ae=this.pdfPage.render(me);return Ae.onContinue=function(T){V(!1),ne.onRenderContinue?ne.onRenderContinue(T):T()},Ae.promise.then(function(){V(!0),K.resolve()},function(T){T instanceof f.RenderingCancelledException||V(!0),K.reject(T)}),ne}paintOnSvg(N){let K=!1;const ne=()=>{if(K)throw new f.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},U=this.pdfPage,B=this.viewport.clone({scale:f.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:U.getOperatorList({annotationMode:u(this,s)}).then(_=>(ne(),new f.SVGGraphics(U.commonObjs,U.objs).getSVG(_,B).then(k=>{ne(),this.svg=k,this.paintedViewportMap.set(k,B),k.style.width=N.style.width,k.style.height=N.style.height,this.renderingState=c.RenderingStates.FINISHED,N.append(k)}))),onRenderContinue(_){_()},cancel(){K=!0},get separateAnnots(){return!1}}}setPageLabel(N){this.pageLabel=typeof N=="string"?N:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{initialOptionalContent:N,regularAnnotations:K}=u(this,te);return N&&K?this.canvas:null}}s=new WeakMap,m=new WeakMap,C=new WeakMap,h=new WeakMap,D=new WeakMap,te=new WeakMap,le=new WeakSet,Et=function(){const{viewport:N}=this;if(this.pdfPage){if(u(this,h)===N.rotation)return;be(this,h,N.rotation)}(0,f.setLayerDimensions)(this.div,N,!0,!1)},ae=new WeakSet,ti=async function(){let N=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(K){console.error(`#renderAnnotationLayer: "${K}".`),N=K}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:N})}},Z=new WeakSet,ii=async function(){let N=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(K){console.error(`#renderAnnotationEditorLayer: "${K}".`),N=K}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:N})}},Se=new WeakSet,ni=async function(){let N=null;try{const K=await this.xfaLayer.render(this.viewport,"display");K!=null&&K.textDivs&&this._textHighlighter&&ee(this,$,Gi).call(this,K.textDivs)}catch(K){console.error(`#renderXfaLayer: "${K}".`),N=K}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:N})}},H=new WeakSet,si=async function(){const{pdfPage:N,textLayer:K,viewport:ne}=this;if(!K)return;let U=null;try{if(!K.renderingDone){const B=N.streamTextContent({includeMarkedContent:!0});K.setTextContentSource(B)}await K.render(ne)}catch(B){if(B instanceof f.AbortException)return;console.error(`#renderTextLayer: "${B}".`),U=B}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:K.numTextDivs,error:U}),ee(this,v,$i).call(this)},v=new WeakSet,$i=async function(){var ne,U,B;if(!this.textLayer)return;this.structTreeLayer||(this.structTreeLayer=new n.StructTreeLayerBuilder);const N=await(this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree()),K=(ne=this.structTreeLayer)==null?void 0:ne.render(N);K&&((U=this.canvas)==null||U.append(K)),(B=this.structTreeLayer)==null||B.show()},$=new WeakSet,Gi=async function(N){const K=await this.pdfPage.getTextContent(),ne=[];for(const U of K.items)ne.push(U.str);this._textHighlighter.setTextMapping(N,ne),this._textHighlighter.enable()},L.PDFPageView=r},(q,L,F)=>{var P;Object.defineProperty(L,"__esModule",{value:!0}),L.AnnotationEditorLayerBuilder=void 0;var f=F(4),c=F(5);class x{constructor(i){Q(this,P,void 0);this.pageDiv=i.pageDiv,this.pdfPage=i.pdfPage,this.accessibilityManager=i.accessibilityManager,this.l10n=i.l10n||c.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,be(this,P,i.uiManager)}async render(i,d="display"){if(d!=="display"||this._cancelled)return;const n=i.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:n}),this.show();return}const l=this.div=document.createElement("div");l.className="annotationEditorLayer",l.tabIndex=0,l.hidden=!0,this.pageDiv.append(l),this.annotationEditorLayer=new f.AnnotationEditorLayer({uiManager:u(this,P),div:l,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:n});const E={viewport:n,div:l,annotations:null,intent:d};this.annotationEditorLayer.render(E),this.show()}cancel(){this._cancelled=!0,this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isEmpty||(this.div.hidden=!1)}}P=new WeakMap,L.AnnotationEditorLayerBuilder=x},(q,L)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.compatibilityParams=L.OptionKind=L.AppOptions=void 0;const F=Object.create(null);L.compatibilityParams=F;{const g=navigator.userAgent||"",i=navigator.platform||"",d=navigator.maxTouchPoints||1,n=/Android/.test(g),l=/\b(iPad|iPhone|iPod)(?=;)/.test(g)||i==="MacIntel"&&d>1;(function(){(l||n)&&(F.maxCanvasPixels=5242880)})()}const f={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};L.OptionKind=f;const c={annotationEditorMode:{value:0,kind:f.VIEWER+f.PREFERENCE},annotationMode:{value:2,kind:f.VIEWER+f.PREFERENCE},cursorToolOnLoad:{value:0,kind:f.VIEWER+f.PREFERENCE},defaultZoomDelay:{value:400,kind:f.VIEWER+f.PREFERENCE},defaultZoomValue:{value:"",kind:f.VIEWER+f.PREFERENCE},disableHistory:{value:!1,kind:f.VIEWER},disablePageLabels:{value:!1,kind:f.VIEWER+f.PREFERENCE},enablePermissions:{value:!1,kind:f.VIEWER+f.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:f.VIEWER+f.PREFERENCE},enableScripting:{value:!0,kind:f.VIEWER+f.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:f.VIEWER},externalLinkTarget:{value:0,kind:f.VIEWER+f.PREFERENCE},historyUpdateUrl:{value:!1,kind:f.VIEWER+f.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:f.VIEWER+f.PREFERENCE},imageResourcesPath:{value:"./images/",kind:f.VIEWER},maxCanvasPixels:{value:16777216,kind:f.VIEWER},forcePageColors:{value:!1,kind:f.VIEWER+f.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:f.VIEWER+f.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:f.VIEWER+f.PREFERENCE},pdfBugEnabled:{value:!1,kind:f.VIEWER+f.PREFERENCE},printResolution:{value:150,kind:f.VIEWER},sidebarViewOnLoad:{value:-1,kind:f.VIEWER+f.PREFERENCE},scrollModeOnLoad:{value:-1,kind:f.VIEWER+f.PREFERENCE},spreadModeOnLoad:{value:-1,kind:f.VIEWER+f.PREFERENCE},textLayerMode:{value:1,kind:f.VIEWER+f.PREFERENCE},useOnlyCssZoom:{value:!1,kind:f.VIEWER+f.PREFERENCE},viewerCssTheme:{value:0,kind:f.VIEWER+f.PREFERENCE},viewOnLoad:{value:0,kind:f.VIEWER+f.PREFERENCE},cMapPacked:{value:!0,kind:f.API},cMapUrl:{value:"../web/cmaps/",kind:f.API},disableAutoFetch:{value:!1,kind:f.API+f.PREFERENCE},disableFontFace:{value:!1,kind:f.API+f.PREFERENCE},disableRange:{value:!1,kind:f.API+f.PREFERENCE},disableStream:{value:!1,kind:f.API+f.PREFERENCE},docBaseUrl:{value:"",kind:f.API},enableXfa:{value:!0,kind:f.API+f.PREFERENCE},fontExtraProperties:{value:!1,kind:f.API},isEvalSupported:{value:!0,kind:f.API},isOffscreenCanvasSupported:{value:!0,kind:f.API},maxImageSize:{value:-1,kind:f.API},pdfBug:{value:!1,kind:f.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:f.API},verbosity:{value:1,kind:f.API},workerPort:{value:null,kind:f.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:f.WORKER}};c.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:f.VIEWER},c.disablePreferences={value:!1,kind:f.VIEWER},c.locale={value:navigator.language||"en-US",kind:f.VIEWER},c.renderer={value:"canvas",kind:f.VIEWER+f.PREFERENCE},c.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:f.VIEWER};const x=Object.create(null);class P{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(i){const d=x[i];if(d!==void 0)return d;const n=c[i];if(n!==void 0)return F[i]??n.value}static getAll(i=null){const d=Object.create(null);for(const n in c){const l=c[n];if(i){if(!(i&l.kind))continue;if(i===f.PREFERENCE){const b=l.value,p=typeof b;if(p==="boolean"||p==="string"||p==="number"&&Number.isInteger(b)){d[n]=b;continue}throw new Error(`Invalid type for preference: ${n}`)}}const E=x[n];d[n]=E!==void 0?E:F[n]??l.value}return d}static set(i,d){x[i]=d}static setAll(i){for(const d in i)x[d]=i[d]}static remove(i){delete x[i]}}L.AppOptions=P,P._hasUserOptions=function(){return Object.keys(x).length>0}},(q,L)=>{var x,P,ri,i,ai;Object.defineProperty(L,"__esModule",{value:!0}),L.StructTreeLayerBuilder=void 0;const F={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},f=/^H(\d+)$/;class c{constructor(){Q(this,P);Q(this,i);Q(this,x,void 0)}get renderingDone(){return u(this,x)!==void 0}render(l){if(u(this,x)!==void 0)return u(this,x);const E=ee(this,i,ai).call(this,l);return E==null||E.classList.add("structTree"),be(this,x,E)}hide(){u(this,x)&&!u(this,x).hidden&&(u(this,x).hidden=!0)}show(){var l;(l=u(this,x))!=null&&l.hidden&&(u(this,x).hidden=!1)}}x=new WeakMap,P=new WeakSet,ri=function(l,E){l.alt!==void 0&&E.setAttribute("aria-label",l.alt),l.id!==void 0&&E.setAttribute("aria-owns",l.id),l.lang!==void 0&&E.setAttribute("lang",l.lang)},i=new WeakSet,ai=function(l){if(!l)return null;const E=document.createElement("span");if("role"in l){const{role:b}=l,p=b.match(f);p?(E.setAttribute("role","heading"),E.setAttribute("aria-level",p[1])):F[b]&&E.setAttribute("role",F[b])}if(ee(this,P,ri).call(this,l,E),l.children)if(l.children.length===1&&"id"in l.children[0])ee(this,P,ri).call(this,l.children[0],E);else for(const b of l.children)E.append(ee(this,i,ai).call(this,b));return E},L.StructTreeLayerBuilder=c},(q,L,F)=>{var x,P,g,i,d,Pt,l,oi;Object.defineProperty(L,"__esModule",{value:!0}),L.TextAccessibilityManager=void 0;var f=F(2);const b=class{constructor(){Q(this,l);Q(this,x,!1);Q(this,P,null);Q(this,g,new Map);Q(this,i,new Map)}setTextMapping(e){be(this,P,e)}enable(){if(u(this,x))throw new Error("TextAccessibilityManager is already enabled.");if(!u(this,P))throw new Error("Text divs and strings have not been set.");if(be(this,x,!0),be(this,P,u(this,P).slice()),u(this,P).sort(ee(b,d,Pt)),u(this,g).size>0){const e=u(this,P);for(const[t,r]of u(this,g)){if(!document.getElementById(t)){u(this,g).delete(t);continue}ee(this,l,oi).call(this,t,e[r])}}for(const[e,t]of u(this,i))this.addPointerInTextLayer(e,t);u(this,i).clear()}disable(){u(this,x)&&(u(this,i).clear(),be(this,P,null),be(this,x,!1))}removePointerInTextLayer(e){if(!u(this,x)){u(this,i).delete(e);return}const t=u(this,P);if(!t||t.length===0)return;const{id:r}=e,s=u(this,g).get(r);if(s===void 0)return;const m=t[s];u(this,g).delete(r);let C=m.getAttribute("aria-owns");C!=null&&C.includes(r)&&(C=C.split(" ").filter(h=>h!==r).join(" "),C?m.setAttribute("aria-owns",C):(m.removeAttribute("aria-owns"),m.setAttribute("role","presentation")))}addPointerInTextLayer(e,t){const{id:r}=e;if(!r)return;if(!u(this,x)){u(this,i).set(e,t);return}t&&this.removePointerInTextLayer(e);const s=u(this,P);if(!s||s.length===0)return;const m=(0,f.binarySearchFirstItem)(s,h=>{var D;return ee(D=b,d,Pt).call(D,e,h)<0}),C=Math.max(0,m-1);ee(this,l,oi).call(this,r,s[C]),u(this,g).set(r,C)}moveElementInDOM(e,t,r,s){if(this.addPointerInTextLayer(r,s),!e.hasChildNodes()){e.append(t);return}const m=Array.from(e.childNodes).filter(D=>D!==t);if(m.length===0)return;const C=r||t,h=(0,f.binarySearchFirstItem)(m,D=>{var te;return ee(te=b,d,Pt).call(te,C,D)<0});h===0?m[0].before(t):m[h-1].after(t)}};let c=b;x=new WeakMap,P=new WeakMap,g=new WeakMap,i=new WeakMap,d=new WeakSet,Pt=function(e,t){const r=e.getBoundingClientRect(),s=t.getBoundingClientRect();if(r.width===0&&r.height===0)return 1;if(s.width===0&&s.height===0)return-1;const m=r.y,C=r.y+r.height,h=r.y+r.height/2,D=s.y,te=s.y+s.height,le=s.y+s.height/2;if(h<=D&&le>=C)return-1;if(le<=m&&h>=te)return 1;const X=r.x+r.width/2,ae=s.x+s.width/2;return X-ae},l=new WeakSet,oi=function(e,t){const r=t.getAttribute("aria-owns");r!=null&&r.includes(e)||t.setAttribute("aria-owns",r?`${r} ${e}`:e),t.removeAttribute("role")},Q(c,d),L.TextAccessibilityManager=c},(q,L)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.TextHighlighter=void 0;class F{constructor({findController:c,eventBus:x,pageIndex:P}){this.findController=c,this.matches=[],this.eventBus=x,this.pageIdx=P,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(c,x){this.textDivs=c,this.textContentItemsStr=x}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=c=>{(c.pageIndex===this.pageIdx||c.pageIndex===-1)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null),this._updateMatches(!0))}_convertMatches(c,x){if(!c)return[];const{textContentItemsStr:P}=this;let g=0,i=0;const d=P.length-1,n=[];for(let l=0,E=c.length;l<E;l++){let b=c[l];for(;g!==d&&b>=i+P[g].length;)i+=P[g].length,g++;g===P.length&&console.error("Could not find a matching mapping");const p={begin:{divIdx:g,offset:b-i}};for(b+=x[l];g!==d&&b>i+P[g].length;)i+=P[g].length,g++;p.end={divIdx:g,offset:b-i},n.push(p)}return n}_renderMatches(c){if(c.length===0)return;const{findController:x,pageIdx:P}=this,{textContentItemsStr:g,textDivs:i}=this,d=P===x.selected.pageIdx,n=x.selected.matchIdx,l=x.state.highlightAll;let E=null;const b={divIdx:-1,offset:void 0};function p(s,m){const C=s.divIdx;return i[C].textContent="",e(C,0,s.offset,m)}function e(s,m,C,h){let D=i[s];if(D.nodeType===Node.TEXT_NODE){const X=document.createElement("span");D.before(X),X.append(D),i[s]=X,D=X}const te=g[s].substring(m,C),le=document.createTextNode(te);if(h){const X=document.createElement("span");return X.className=`${h} appended`,X.append(le),D.append(X),h.includes("selected")?X.offsetLeft:0}return D.append(le),0}let t=n,r=t+1;if(l)t=0,r=c.length;else if(!d)return;for(let s=t;s<r;s++){const m=c[s],C=m.begin,h=m.end,D=d&&s===n,te=D?" selected":"";let le=0;if(!E||C.divIdx!==E.divIdx?(E!==null&&e(E.divIdx,E.offset,b.offset),p(C)):e(E.divIdx,E.offset,C.offset),C.divIdx===h.divIdx)le=e(C.divIdx,C.offset,h.offset,"highlight"+te);else{le=e(C.divIdx,C.offset,b.offset,"highlight begin"+te);for(let X=C.divIdx+1,ae=h.divIdx;X<ae;X++)i[X].className="highlight middle"+te;p(h,"highlight end"+te)}E=h,D&&x.scrollMatchIntoView({element:i[C.divIdx],selectedLeft:le,pageIndex:P,matchIndex:n})}E&&e(E.divIdx,E.offset,b.offset)}_updateMatches(c=!1){if(!this.enabled&&!c)return;const{findController:x,matches:P,pageIdx:g}=this,{textContentItemsStr:i,textDivs:d}=this;let n=-1;for(const b of P){const p=Math.max(n,b.begin.divIdx);for(let e=p,t=b.end.divIdx;e<=t;e++){const r=d[e];r.textContent=i[e],r.className=""}n=b.end.divIdx+1}if(!(x!=null&&x.highlightMatches)||c)return;const l=x.pageMatches[g]||null,E=x.pageMatchesLength[g]||null;this.matches=this._convertMatches(l,E),this._renderMatches(this.matches)}}L.TextHighlighter=F},(q,L,F)=>{var x,P,g,i,Xi,n,qi;Object.defineProperty(L,"__esModule",{value:!0}),L.TextLayerBuilder=void 0;var f=F(4);class c{constructor({highlighter:b=null,accessibilityManager:p=null,isOffscreenCanvasSupported:e=!0}){Q(this,i);Q(this,n);Q(this,x,0);Q(this,P,0);Q(this,g,null);this.textContentItemsStr=[],this.renderingDone=!1,this.textDivs=[],this.textDivProperties=new WeakMap,this.textLayerRenderTask=null,this.highlighter=b,this.accessibilityManager=p,this.isOffscreenCanvasSupported=e,this.div=document.createElement("div"),this.div.className="textLayer",this.hide()}get numTextDivs(){return this.textDivs.length}async render(b){var t,r,s;if(!u(this,g))throw new Error('No "textContentSource" parameter specified.');const p=b.scale*(globalThis.devicePixelRatio||1),{rotation:e}=b;if(this.renderingDone){const m=e!==u(this,x),C=p!==u(this,P);(m||C)&&(this.hide(),(0,f.updateTextLayer)({container:this.div,viewport:b,textDivs:this.textDivs,textDivProperties:this.textDivProperties,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,mustRescale:C,mustRotate:m}),be(this,P,p),be(this,x,e)),this.show();return}this.cancel(),(t=this.highlighter)==null||t.setTextMapping(this.textDivs,this.textContentItemsStr),(r=this.accessibilityManager)==null||r.setTextMapping(this.textDivs),this.textLayerRenderTask=(0,f.renderTextLayer)({textContentSource:u(this,g),container:this.div,viewport:b,textDivs:this.textDivs,textDivProperties:this.textDivProperties,textContentItemsStr:this.textContentItemsStr,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported}),await this.textLayerRenderTask.promise,ee(this,i,Xi).call(this),be(this,P,p),be(this,x,e),this.show(),(s=this.accessibilityManager)==null||s.enable()}hide(){var b;this.div.hidden||((b=this.highlighter)==null||b.disable(),this.div.hidden=!0)}show(){var b;this.div.hidden&&this.renderingDone&&(this.div.hidden=!1,(b=this.highlighter)==null||b.enable())}cancel(){var b,p;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),(b=this.highlighter)==null||b.disable(),(p=this.accessibilityManager)==null||p.disable(),this.textContentItemsStr.length=0,this.textDivs.length=0,this.textDivProperties=new WeakMap}setTextContentSource(b){this.cancel(),be(this,g,b)}}x=new WeakMap,P=new WeakMap,g=new WeakMap,i=new WeakSet,Xi=function(){this.renderingDone=!0;const b=document.createElement("div");b.className="endOfContent",this.div.append(b),ee(this,n,qi).call(this)},n=new WeakSet,qi=function(){const{div:b}=this;b.addEventListener("mousedown",p=>{const e=b.querySelector(".endOfContent");if(!e)return;let t=p.target!==b;if(t&&(t=getComputedStyle(e).getPropertyValue("-moz-user-select")!=="none"),t){const r=b.getBoundingClientRect(),s=Math.max(0,(p.pageY-r.top)/r.height);e.style.top=(s*100).toFixed(2)+"%"}e.classList.add("active")}),b.addEventListener("mouseup",()=>{const p=b.querySelector(".endOfContent");p&&(p.style.top="",p.classList.remove("active"))})},L.TextLayerBuilder=c},(q,L,F)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.XfaLayerBuilder=void 0;var f=F(4);class c{constructor({pageDiv:P,pdfPage:g,annotationStorage:i=null,linkService:d,xfaHtml:n=null}){this.pageDiv=P,this.pdfPage=g,this.annotationStorage=i,this.linkService=d,this.xfaHtml=n,this.div=null,this._cancelled=!1}async render(P,g="display"){if(g==="print"){const n={viewport:P.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:g},l=document.createElement("div");return this.pageDiv.append(l),n.div=l,f.XfaLayer.render(n)}const i=await this.pdfPage.getXfa();if(this._cancelled||!i)return{textDivs:[]};const d={viewport:P.clone({dontFlip:!0}),div:this.div,xfaHtml:i,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:g};return this.div?f.XfaLayer.update(d):(this.div=document.createElement("div"),this.pageDiv.append(this.div),d.div=this.div,f.XfaLayer.render(d))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}L.XfaLayerBuilder=c},(q,L,F)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.PDFScriptingManager=void 0;var f=F(2),c=F(4);class x{constructor({eventBus:g,sandboxBundleSrc:i=null,scriptingFactory:d=null,docPropertiesLookup:n=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._ready=!1,this._eventBus=g,this._sandboxBundleSrc=i,this._scriptingFactory=d,this._docPropertiesLookup=n,this._scriptingFactory||window.addEventListener("updatefromsandbox",l=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:l.detail})})}setViewer(g){this._pdfViewer=g}async setDocument(g){var l;if(this._pdfDocument&&await this._destroyScripting(),this._pdfDocument=g,!g)return;const[i,d,n]=await Promise.all([g.getFieldObjects(),g.getCalculationOrderIds(),g.getJSActions()]);if(!i&&!n){await this._destroyScripting();return}if(g===this._pdfDocument){try{this._scripting=this._createScripting()}catch(E){console.error(`PDFScriptingManager.setDocument: "${E==null?void 0:E.message}".`),await this._destroyScripting();return}this._internalEvents.set("updatefromsandbox",E=>{(E==null?void 0:E.source)===window&&this._updateFromSandbox(E.detail)}),this._internalEvents.set("dispatcheventinsandbox",E=>{var b;(b=this._scripting)==null||b.dispatchEventInSandbox(E.detail)}),this._internalEvents.set("pagechanging",({pageNumber:E,previous:b})=>{E!==b&&(this._dispatchPageClose(b),this._dispatchPageOpen(E))}),this._internalEvents.set("pagerendered",({pageNumber:E})=>{this._pageOpenPending.has(E)&&E===this._pdfViewer.currentPageNumber&&this._dispatchPageOpen(E)}),this._internalEvents.set("pagesdestroy",async E=>{var b,p;await this._dispatchPageClose(this._pdfViewer.currentPageNumber),await((b=this._scripting)==null?void 0:b.dispatchEventInSandbox({id:"doc",name:"WillClose"})),(p=this._closeCapability)==null||p.resolve()});for(const[E,b]of this._internalEvents)this._eventBus._on(E,b);try{const E=await this._getDocProperties();if(g!==this._pdfDocument)return;await this._scripting.createSandbox({objects:i,calculationOrder:d,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...E,actions:n}}),this._eventBus.dispatch("sandboxcreated",{source:this})}catch(E){console.error(`PDFScriptingManager.setDocument: "${E==null?void 0:E.message}".`),await this._destroyScripting();return}await((l=this._scripting)==null?void 0:l.dispatchEventInSandbox({id:"doc",name:"Open"})),await this._dispatchPageOpen(this._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{g===this._pdfDocument&&(this._ready=!0)})}}async dispatchWillSave(g){var i;return(i=this._scripting)==null?void 0:i.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(g){var i;return(i=this._scripting)==null?void 0:i.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(g){var i;return(i=this._scripting)==null?void 0:i.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}async dispatchDidPrint(g){var i;return(i=this._scripting)==null?void 0:i.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){var g;return((g=this._destroyCapability)==null?void 0:g.promise)||null}get ready(){return this._ready}get _internalEvents(){return(0,c.shadow)(this,"_internalEvents",new Map)}get _pageOpenPending(){return(0,c.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,c.shadow)(this,"_visitedPages",new Map)}async _updateFromSandbox(g){var p;const i=this._pdfViewer.isInPresentationMode||this._pdfViewer.isChangingPresentationMode,{id:d,siblings:n,command:l,value:E}=g;if(!d){switch(l){case"clear":console.clear();break;case"error":console.error(E);break;case"layout":{if(i)return;const e=(0,f.apiPageLayoutToViewerModes)(E);this._pdfViewer.spreadMode=e.spreadMode;break}case"page-num":this._pdfViewer.currentPageNumber=E+1;break;case"print":await this._pdfViewer.pagesPromise,this._eventBus.dispatch("print",{source:this});break;case"println":console.log(E);break;case"zoom":if(i)return;this._pdfViewer.currentScaleValue=E;break;case"SaveAs":this._eventBus.dispatch("download",{source:this});break;case"FirstPage":this._pdfViewer.currentPageNumber=1;break;case"LastPage":this._pdfViewer.currentPageNumber=this._pdfViewer.pagesCount;break;case"NextPage":this._pdfViewer.nextPage();break;case"PrevPage":this._pdfViewer.previousPage();break;case"ZoomViewIn":if(i)return;this._pdfViewer.increaseScale();break;case"ZoomViewOut":if(i)return;this._pdfViewer.decreaseScale();break}return}if(i&&g.focus)return;delete g.id,delete g.siblings;const b=n?[d,...n]:[d];for(const e of b){const t=document.querySelector(`[data-element-id="${e}"]`);t?t.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:g})):(p=this._pdfDocument)==null||p.annotationStorage.setValue(e,g)}}async _dispatchPageOpen(g,i=!1){const d=this._pdfDocument,n=this._visitedPages;if(i&&(this._closeCapability=(0,c.createPromiseCapability)()),!this._closeCapability)return;const l=this._pdfViewer.getPageView(g-1);if((l==null?void 0:l.renderingState)!==f.RenderingStates.FINISHED){this._pageOpenPending.add(g);return}this._pageOpenPending.delete(g);const E=(async()=>{var p,e;const b=await(n.has(g)?null:(p=l.pdfPage)==null?void 0:p.getJSActions());d===this._pdfDocument&&await((e=this._scripting)==null?void 0:e.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:g,actions:b}))})();n.set(g,E)}async _dispatchPageClose(g){var l;const i=this._pdfDocument,d=this._visitedPages;if(!this._closeCapability||this._pageOpenPending.has(g))return;const n=d.get(g);n&&(d.set(g,null),await n,i===this._pdfDocument&&await((l=this._scripting)==null?void 0:l.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:g})))}async _getDocProperties(){if(this._docPropertiesLookup)return this._docPropertiesLookup(this._pdfDocument);const{docPropertiesLookup:g}=F(22);return g(this._pdfDocument)}_createScripting(){if(this._destroyCapability=(0,c.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:g}=F(22);return new g(this._sandboxBundleSrc)}async _destroyScripting(){var g,i;if(!this._scripting){this._pdfDocument=null,(g=this._destroyCapability)==null||g.resolve();return}this._closeCapability&&(await Promise.race([this._closeCapability.promise,new Promise(d=>{setTimeout(d,1e3)})]).catch(d=>{}),this._closeCapability=null),this._pdfDocument=null;try{await this._scripting.destroySandbox()}catch{}for(const[d,n]of this._internalEvents)this._eventBus._off(d,n);this._internalEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),this._scripting=null,this._ready=!1,(i=this._destroyCapability)==null||i.resolve()}}L.PDFScriptingManager=x},(q,L,F)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.GenericScripting=void 0,L.docPropertiesLookup=c;var f=F(4);async function c(P){const g="",i=g.split("#")[0];let{info:d,metadata:n,contentDispositionFilename:l,contentLength:E}=await P.getMetadata();if(!E){const{length:b}=await P.getDownloadInfo();E=b}return{...d,baseURL:i,filesize:E,filename:l||(0,f.getPdfFilenameFromUrl)(g),metadata:n==null?void 0:n.getRaw(),authors:n==null?void 0:n.get("dc:creator"),numPages:P.numPages,URL:g}}class x{constructor(g){this._ready=(0,f.loadScript)(g,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}async createSandbox(g){(await this._ready).create(g)}async dispatchEventInSandbox(g){const i=await this._ready;setTimeout(()=>i.dispatchEvent(g),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}L.GenericScripting=x},(q,L,F)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.PDFSinglePageViewer=void 0;var f=F(2),c=F(24);class x extends c.PDFViewer{_resetView(){super._resetView(),this._scrollMode=f.ScrollMode.PAGE,this._spreadMode=f.SpreadMode.NONE}set scrollMode(g){}_updateScrollMode(){}set spreadMode(g){}_updateSpreadMode(){}}L.PDFSinglePageViewer=x},(q,L,F)=>{var e,t,r,li,m,C,h,D,te,le,X,ae,de,Z,ge,Se,Ki,H,Yi,v,Zi,$,pt,se,Ct,K,Qi,U,ci,o,Ji,y,Ye,V,hi,he,en,J,tn,ce,di,Ae,nn;Object.defineProperty(L,"__esModule",{value:!0}),L.PagesCountLimit=L.PDFViewer=L.PDFPageViewBuffer=void 0;var f=F(4),c=F(2),x=F(5),P=F(13),g=F(25),i=F(1);const d=10,n="enablePermissions",l={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};L.PagesCountLimit=l;function E(Me){return Object.values(f.AnnotationEditorType).includes(Me)&&Me!==f.AnnotationEditorType.DISABLE}class b{constructor(T){Q(this,r);Q(this,e,new Set);Q(this,t,0);be(this,t,T)}push(T){const re=u(this,e);re.has(T)&&re.delete(T),re.add(T),re.size>u(this,t)&&ee(this,r,li).call(this)}resize(T,re=null){be(this,t,T);const M=u(this,e);if(re){const O=M.size;let z=1;for(const _e of M)if(re.has(_e.id)&&(M.delete(_e),M.add(_e)),++z>O)break}for(;M.size>u(this,t);)ee(this,r,li).call(this)}has(T){return u(this,e).has(T)}[Symbol.iterator](){return u(this,e).keys()}}e=new WeakMap,t=new WeakMap,r=new WeakSet,li=function(){const T=u(this,e).keys().next().value;T==null||T.destroy(),u(this,e).delete(T)},L.PDFPageViewBuffer=b;class p{constructor(T){Q(this,Se);Q(this,H);Q(this,v);Q(this,$);Q(this,se);Q(this,K);Q(this,U);Q(this,o);Q(this,y);Q(this,V);Q(this,he);Q(this,J);Q(this,ce);Q(this,Ae);Q(this,m,null);Q(this,C,f.AnnotationEditorType.NONE);Q(this,h,null);Q(this,D,f.AnnotationMode.ENABLE_FORMS);Q(this,te,null);Q(this,le,!1);Q(this,X,0);Q(this,ae,new ResizeObserver(ee(this,Ae,nn).bind(this)));Q(this,de,null);Q(this,Z,null);Q(this,ge,null);var M,O;const re="3.5.141";if(f.version!==re)throw new Error(`The API version "${f.version}" does not match the Viewer version "${re}".`);if(this.container=T.container,this.viewer=T.viewer||T.container.firstElementChild,((M=this.container)==null?void 0:M.tagName)!=="DIV"||((O=this.viewer)==null?void 0:O.tagName)!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");u(this,ae).observe(this.container),this.eventBus=T.eventBus,this.linkService=T.linkService||new i.SimpleLinkService,this.downloadManager=T.downloadManager||null,this.findController=T.findController||null,this._scriptingManager=T.scriptingManager||null,this.textLayerMode=T.textLayerMode??c.TextLayerMode.ENABLE,be(this,D,T.annotationMode??f.AnnotationMode.ENABLE_FORMS),be(this,C,T.annotationEditorMode??f.AnnotationEditorType.NONE),this.imageResourcesPath=T.imageResourcesPath||"",this.enablePrintAutoRotate=T.enablePrintAutoRotate||!1,this.removePageBorders=T.removePageBorders||!1,this.renderer=T.renderer||c.RendererType.CANVAS,this.useOnlyCssZoom=T.useOnlyCssZoom||!1,this.isOffscreenCanvasSupported=T.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=T.maxCanvasPixels,this.l10n=T.l10n||x.NullL10n,be(this,le,T.enablePermissions||!1),this.pageColors=T.pageColors||null,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!T.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new g.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=T.renderingQueue,this.scroll=(0,c.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=c.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),ee(this,ce,di).call(this)}get pagesCount(){return this._pages.length}getPageView(T){return this._pages[T]}get pageViewsReady(){return this._pagesCapability.settled?this._pages.every(function(T){return T==null?void 0:T.pdfPage}):!1}get renderForms(){return u(this,D)===f.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(T){if(!Number.isInteger(T))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(T,!0)||console.error(`currentPageNumber: "${T}" is not a valid page.`))}_setCurrentPageNumber(T,re=!1){var O;if(this._currentPageNumber===T)return re&&ee(this,V,hi).call(this),!0;if(!(0<T&&T<=this.pagesCount))return!1;const M=this._currentPageNumber;return this._currentPageNumber=T,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:T,pageLabel:((O=this._pageLabels)==null?void 0:O[T-1])??null,previous:M}),re&&ee(this,V,hi).call(this),!0}get currentPageLabel(){var T;return((T=this._pageLabels)==null?void 0:T[this._currentPageNumber-1])??null}set currentPageLabel(T){if(!this.pdfDocument)return;let re=T|0;if(this._pageLabels){const M=this._pageLabels.indexOf(T);M>=0&&(re=M+1)}this._setCurrentPageNumber(re,!0)||console.error(`currentPageLabel: "${T}" is not a valid page.`)}get currentScale(){return this._currentScale!==c.UNKNOWN_SCALE?this._currentScale:c.DEFAULT_SCALE}set currentScale(T){if(isNaN(T))throw new Error("Invalid numeric scale.");this.pdfDocument&&ee(this,y,Ye).call(this,T,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(T){this.pdfDocument&&ee(this,y,Ye).call(this,T,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(T){if(!(0,c.isValidRotation)(T))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(T%=360,T<0&&(T+=360),this._pagesRotation===T))return;this._pagesRotation=T;const re=this._currentPageNumber;this.refresh(!0,{rotation:T}),this._currentScaleValue&&ee(this,y,Ye).call(this,this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:T,pageNumber:re}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(T){var _e,we;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),(_e=this.findController)==null||_e.setDocument(null),(we=this._scriptingManager)==null||we.setDocument(null),u(this,h)&&(u(this,h).destroy(),be(this,h,null))),this.pdfDocument=T,!T)return;const re=T.numPages,M=T.getPage(1),O=T.getOptionalContentConfig(),z=u(this,le)?T.getPermissions():Promise.resolve();if(re>l.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const ie=this._scrollMode=c.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:ie})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:re})},()=>{}),this._onBeforeDraw=ie=>{const ve=this._pages[ie.pageNumber-1];ve&&u(this,m).push(ve)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=ie=>{ie.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:ie.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,u(this,Z)&&(document.removeEventListener("visibilitychange",u(this,Z)),be(this,Z,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([M,z]).then(([ie,ve])=>{if(T!==this.pdfDocument)return;this._firstPageCapability.resolve(ie),this._optionalContentConfigPromise=O;const{annotationEditorMode:xe,annotationMode:pe,textLayerMode:ye}=ee(this,H,Yi).call(this,ve);if(xe!==f.AnnotationEditorType.DISABLE){const Fe=xe;T.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):E(Fe)?(be(this,h,new f.AnnotationEditorUIManager(this.container,this.eventBus,T==null?void 0:T.annotationStorage)),Fe!==f.AnnotationEditorType.NONE&&u(this,h).updateMode(Fe)):console.error(`Invalid AnnotationEditor mode: ${Fe}`)}const Pe=ee(this,Se,Ki).bind(this),Te=this._scrollMode===c.ScrollMode.PAGE?null:this.viewer,Ce=this.currentScale,ke=ie.getViewport({scale:Ce*f.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",ke.scale);for(let Fe=1;Fe<=re;++Fe){const Le=new P.PDFPageView({container:Te,eventBus:this.eventBus,id:Fe,scale:Ce,defaultViewport:ke.clone(),optionalContentConfigPromise:O,renderingQueue:this.renderingQueue,textLayerMode:ye,annotationMode:pe,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties:Pe});this._pages.push(Le)}const Re=this._pages[0];Re&&(Re.setPdfPage(ie),this.linkService.cachePageRef(1,ie.ref)),this._scrollMode===c.ScrollMode.PAGE?ee(this,$,pt).call(this):this._spreadMode!==c.SpreadMode.NONE&&this._updateSpreadMode(),ee(this,v,Zi).call(this).then(async()=>{var Le,Ie;if((Le=this.findController)==null||Le.setDocument(T),(Ie=this._scriptingManager)==null||Ie.setDocument(T),u(this,h)&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:u(this,C)}),T.loadingParams.disableAutoFetch||re>l.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let Fe=re-1;if(Fe<=0){this._pagesCapability.resolve();return}for(let De=2;De<=re;++De){const Be=T.getPage(De).then(Oe=>{const Ne=this._pages[De-1];Ne.pdfPage||Ne.setPdfPage(Oe),this.linkService.cachePageRef(De,Oe.ref),--Fe===0&&this._pagesCapability.resolve()},Oe=>{console.error(`Unable to get page ${De} to initialize viewer`,Oe),--Fe===0&&this._pagesCapability.resolve()});De%l.PAUSE_EAGER_PAGE_INIT===0&&await Be}}),this.eventBus.dispatch("pagesinit",{source:this}),T.getMetadata().then(({info:Fe})=>{T===this.pdfDocument&&Fe.Language&&(this.viewer.lang=Fe.Language)}),this.defaultRenderingQueue&&this.update()}).catch(ie=>{console.error("Unable to initialize viewer",ie),this._pagesCapability.reject(ie)})}setPageLabels(T){var re;if(this.pdfDocument){T?Array.isArray(T)&&this.pdfDocument.numPages===T.length?this._pageLabels=T:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let M=0,O=this._pages.length;M<O;M++)this._pages[M].setPageLabel(((re=this._pageLabels)==null?void 0:re[M])??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=c.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,be(this,m,new b(d)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,f.createPromiseCapability)(),this._onePageRenderedCapability=(0,f.createPromiseCapability)(),this._pagesCapability=(0,f.createPromiseCapability)(),this._scrollMode=c.ScrollMode.VERTICAL,this._previousScrollMode=c.ScrollMode.UNKNOWN,this._spreadMode=c.SpreadMode.NONE,be(this,de,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),u(this,Z)&&(document.removeEventListener("visibilitychange",u(this,Z)),be(this,Z,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(n)}_scrollUpdate(){this.pagesCount!==0&&this.update()}pageLabelToPageNumber(T){if(!this._pageLabels)return null;const re=this._pageLabels.indexOf(T);return re<0?null:re+1}scrollPageIntoView({pageNumber:T,destArray:re=null,allowNegativeOffset:M=!1,ignoreDestinationZoom:O=!1}){if(!this.pdfDocument)return;const z=Number.isInteger(T)&&this._pages[T-1];if(!z){console.error(`scrollPageIntoView: "${T}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!re){this._setCurrentPageNumber(T,!0);return}let _e=0,we=0,ie=0,ve=0,xe,pe;const ye=z.rotation%180!==0,Pe=(ye?z.height:z.width)/z.scale/f.PixelsPerInch.PDF_TO_CSS_UNITS,Te=(ye?z.width:z.height)/z.scale/f.PixelsPerInch.PDF_TO_CSS_UNITS;let Ce=0;switch(re[1].name){case"XYZ":_e=re[2],we=re[3],Ce=re[4],_e=_e!==null?_e:0,we=we!==null?we:Te;break;case"Fit":case"FitB":Ce="page-fit";break;case"FitH":case"FitBH":we=re[2],Ce="page-width",we===null&&this._location?(_e=this._location.left,we=this._location.top):(typeof we!="number"||we<0)&&(we=Te);break;case"FitV":case"FitBV":_e=re[2],ie=Pe,ve=Te,Ce="page-height";break;case"FitR":_e=re[2],we=re[3],ie=re[4]-_e,ve=re[5]-we;let Le=c.SCROLLBAR_PADDING,Ie=c.VERTICAL_PADDING;this.removePageBorders&&(Le=Ie=0),xe=(this.container.clientWidth-Le)/ie/f.PixelsPerInch.PDF_TO_CSS_UNITS,pe=(this.container.clientHeight-Ie)/ve/f.PixelsPerInch.PDF_TO_CSS_UNITS,Ce=Math.min(Math.abs(xe),Math.abs(pe));break;default:console.error(`scrollPageIntoView: "${re[1].name}" is not a valid destination type.`);return}if(O||(Ce&&Ce!==this._currentScale?this.currentScaleValue=Ce:this._currentScale===c.UNKNOWN_SCALE&&(this.currentScaleValue=c.DEFAULT_SCALE_VALUE)),Ce==="page-fit"&&!re[4]){ee(this,se,Ct).call(this,z);return}const ke=[z.viewport.convertToViewportPoint(_e,we),z.viewport.convertToViewportPoint(_e+ie,we+ve)];let Re=Math.min(ke[0][0],ke[1][0]),Fe=Math.min(ke[0][1],ke[1][1]);M||(Re=Math.max(Re,0),Fe=Math.max(Fe,0)),ee(this,se,Ct).call(this,z,{left:Re,top:Fe})}_updateLocation(T){const re=this._currentScale,M=this._currentScaleValue,O=parseFloat(M)===re?Math.round(re*1e4)/100:M,z=T.id,_e=this._pages[z-1],we=this.container,ie=_e.getPagePoint(we.scrollLeft-T.x,we.scrollTop-T.y),ve=Math.round(ie[0]),xe=Math.round(ie[1]);let pe=`#page=${z}`;this.isInPresentationMode||(pe+=`&zoom=${O},${ve},${xe}`),this._location={pageNumber:z,scale:O,top:xe,left:ve,rotation:this._pagesRotation,pdfOpenParams:pe}}update(){const T=this._getVisiblePages(),re=T.views,M=re.length;if(M===0)return;const O=Math.max(d,2*M+1);u(this,m).resize(O,T.ids),this.renderingQueue.renderHighestPriority(T);const z=this._spreadMode===c.SpreadMode.NONE&&(this._scrollMode===c.ScrollMode.PAGE||this._scrollMode===c.ScrollMode.VERTICAL),_e=this._currentPageNumber;let we=!1;for(const ie of re){if(ie.percent<100)break;if(ie.id===_e&&z){we=!0;break}}this._setCurrentPageNumber(we?_e:re[0].id),this._updateLocation(T.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(T){return this.container.contains(T)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===c.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===c.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const T=this._scrollMode===c.ScrollMode.PAGE?u(this,de).pages:this._pages,re=this._scrollMode===c.ScrollMode.HORIZONTAL,M=re&&this._isContainerRtl;return(0,c.getVisibleElements)({scrollEl:this.container,views:T,sortByVisibility:!0,horizontal:re,rtl:M})}isPageVisible(T){return this.pdfDocument?Number.isInteger(T)&&T>0&&T<=this.pagesCount?this._getVisiblePages().ids.has(T):(console.error(`isPageVisible: "${T}" is not a valid page.`),!1):!1}isPageCached(T){if(!this.pdfDocument)return!1;if(!(Number.isInteger(T)&&T>0&&T<=this.pagesCount))return console.error(`isPageCached: "${T}" is not a valid page.`),!1;const re=this._pages[T-1];return u(this,m).has(re)}cleanup(){for(const T of this._pages)T.renderingState!==c.RenderingStates.FINISHED&&T.reset()}_cancelRendering(){for(const T of this._pages)T.cancelRendering()}forceRendering(T){const re=T||this._getVisiblePages(),M=ee(this,J,tn).call(this,re),O=this._spreadMode!==c.SpreadMode.NONE&&this._scrollMode!==c.ScrollMode.HORIZONTAL,z=this.renderingQueue.getHighestPriority(re,this._pages,M,O);return z?(ee(this,he,en).call(this,z).then(()=>{this.renderingQueue.renderView(z)}),!0):!1}get hasEqualPageSizes(){const T=this._pages[0];for(let re=1,M=this._pages.length;re<M;++re){const O=this._pages[re];if(O.width!==T.width||O.height!==T.height)return!1}return!0}getPagesOverview(){return this._pages.map(T=>{const re=T.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,c.isPortraitOrientation)(re)?{width:re.width,height:re.height,rotation:re.rotation}:{width:re.height,height:re.width,rotation:(re.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(T){if(!(T instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${T}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=T,this.refresh(!1,{optionalContentConfigPromise:T}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:T}))}get scrollMode(){return this._scrollMode}set scrollMode(T){if(this._scrollMode!==T){if(!(0,c.isValidScrollMode)(T))throw new Error(`Invalid scroll mode: ${T}`);this.pagesCount>l.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=T,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:T}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(T=null){const re=this._scrollMode,M=this.viewer;M.classList.toggle("scrollHorizontal",re===c.ScrollMode.HORIZONTAL),M.classList.toggle("scrollWrapped",re===c.ScrollMode.WRAPPED),!(!this.pdfDocument||!T)&&(re===c.ScrollMode.PAGE?ee(this,$,pt).call(this):this._previousScrollMode===c.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&ee(this,y,Ye).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(T,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(T){if(this._spreadMode!==T){if(!(0,c.isValidSpreadMode)(T))throw new Error(`Invalid spread mode: ${T}`);this._spreadMode=T,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:T}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(T=null){if(!this.pdfDocument)return;const re=this.viewer,M=this._pages;if(this._scrollMode===c.ScrollMode.PAGE)ee(this,$,pt).call(this);else if(re.textContent="",this._spreadMode===c.SpreadMode.NONE)for(const O of this._pages)re.append(O.div);else{const O=this._spreadMode-1;let z=null;for(let _e=0,we=M.length;_e<we;++_e)z===null?(z=document.createElement("div"),z.className="spread",re.append(z)):_e%2===O&&(z=z.cloneNode(!1),re.append(z)),z.append(M[_e].div)}T&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&ee(this,y,Ye).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(T,!0),this.update())}_getPageAdvance(T,re=!1){switch(this._scrollMode){case c.ScrollMode.WRAPPED:{const{views:M}=this._getVisiblePages(),O=new Map;for(const{id:z,y:_e,percent:we,widthPercent:ie}of M){if(we===0||ie<100)continue;let ve=O.get(_e);ve||O.set(_e,ve||(ve=[])),ve.push(z)}for(const z of O.values()){const _e=z.indexOf(T);if(_e===-1)continue;const we=z.length;if(we===1)break;if(re)for(let ie=_e-1,ve=0;ie>=ve;ie--){const xe=z[ie],pe=z[ie+1]-1;if(xe<pe)return T-pe}else for(let ie=_e+1,ve=we;ie<ve;ie++){const xe=z[ie],pe=z[ie-1]+1;if(xe>pe)return pe-T}if(re){const ie=z[0];if(ie<T)return T-ie+1}else{const ie=z[we-1];if(ie>T)return ie-T+1}break}break}case c.ScrollMode.HORIZONTAL:break;case c.ScrollMode.PAGE:case c.ScrollMode.VERTICAL:{if(this._spreadMode===c.SpreadMode.NONE)break;const M=this._spreadMode-1;if(re&&T%2!==M)break;if(!re&&T%2===M)break;const{views:O}=this._getVisiblePages(),z=re?T-1:T+1;for(const{id:_e,percent:we,widthPercent:ie}of O)if(_e===z){if(we>0&&ie===100)return 2;break}break}}return 1}nextPage(){const T=this._currentPageNumber,re=this.pagesCount;if(T>=re)return!1;const M=this._getPageAdvance(T,!1)||1;return this.currentPageNumber=Math.min(T+M,re),!0}previousPage(){const T=this._currentPageNumber;if(T<=1)return!1;const re=this._getPageAdvance(T,!0)||1;return this.currentPageNumber=Math.max(T-re,1),!0}increaseScale({drawingDelay:T,scaleFactor:re,steps:M}={}){if(!this.pdfDocument)return;let O=this._currentScale;if(re>1)O=Math.round(O*re*100)/100;else{M??(M=1);do O=Math.ceil((O*c.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--M>0&&O<c.MAX_SCALE)}ee(this,y,Ye).call(this,Math.min(c.MAX_SCALE,O),{noScroll:!1,drawingDelay:T})}decreaseScale({drawingDelay:T,scaleFactor:re,steps:M}={}){if(!this.pdfDocument)return;let O=this._currentScale;if(re>0&&re<1)O=Math.round(O*re*100)/100;else{M??(M=1);do O=Math.floor((O/c.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--M>0&&O>c.MIN_SCALE)}ee(this,y,Ye).call(this,Math.max(c.MIN_SCALE,O),{noScroll:!1,drawingDelay:T})}get containerTopLeft(){return u(this,te)||be(this,te,[this.container.offsetTop,this.container.offsetLeft])}get annotationEditorMode(){return u(this,h)?u(this,C):f.AnnotationEditorType.DISABLE}set annotationEditorMode(T){if(!u(this,h))throw new Error("The AnnotationEditor is not enabled.");if(u(this,C)!==T){if(!E(T))throw new Error(`Invalid AnnotationEditor mode: ${T}`);this.pdfDocument&&(be(this,C,T),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:T}),u(this,h).updateMode(T))}}set annotationEditorParams({type:T,value:re}){if(!u(this,h))throw new Error("The AnnotationEditor is not enabled.");u(this,h).updateParams(T,re)}refresh(T=!1,re=Object.create(null)){if(this.pdfDocument){for(const M of this._pages)M.update(re);u(this,ge)!==null&&(clearTimeout(u(this,ge)),be(this,ge,null)),T||this.update()}}}m=new WeakMap,C=new WeakMap,h=new WeakMap,D=new WeakMap,te=new WeakMap,le=new WeakMap,X=new WeakMap,ae=new WeakMap,de=new WeakMap,Z=new WeakMap,ge=new WeakMap,Se=new WeakSet,Ki=function(){const T=this;return{get annotationEditorUIManager(){return u(T,h)},get annotationStorage(){var re;return(re=T.pdfDocument)==null?void 0:re.annotationStorage},get downloadManager(){return T.downloadManager},get enableScripting(){return!!T._scriptingManager},get fieldObjectsPromise(){var re;return(re=T.pdfDocument)==null?void 0:re.getFieldObjects()},get findController(){return T.findController},get hasJSActionsPromise(){var re;return(re=T.pdfDocument)==null?void 0:re.hasJSActions()},get linkService(){return T.linkService}}},H=new WeakSet,Yi=function(T){const re={annotationEditorMode:u(this,C),annotationMode:u(this,D),textLayerMode:this.textLayerMode};return T&&(T.includes(f.PermissionFlag.COPY)||this.viewer.classList.add(n),T.includes(f.PermissionFlag.MODIFY_CONTENTS)||(re.annotationEditorMode=f.AnnotationEditorType.DISABLE),!T.includes(f.PermissionFlag.MODIFY_ANNOTATIONS)&&!T.includes(f.PermissionFlag.FILL_INTERACTIVE_FORMS)&&u(this,D)===f.AnnotationMode.ENABLE_FORMS&&(re.annotationMode=f.AnnotationMode.ENABLE)),re},v=new WeakSet,Zi=function(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();const T=new Promise(re=>{be(this,Z,()=>{document.visibilityState==="hidden"&&(re(),document.removeEventListener("visibilitychange",u(this,Z)),be(this,Z,null))}),document.addEventListener("visibilitychange",u(this,Z))});return Promise.race([this._onePageRenderedCapability.promise,T])},$=new WeakSet,pt=function(){if(this._scrollMode!==c.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const T=this._currentPageNumber,re=u(this,de),M=this.viewer;if(M.textContent="",re.pages.length=0,this._spreadMode===c.SpreadMode.NONE&&!this.isInPresentationMode){const O=this._pages[T-1];M.append(O.div),re.pages.push(O)}else{const O=new Set,z=this._spreadMode-1;z===-1?O.add(T-1):T%2!==z?(O.add(T-1),O.add(T)):(O.add(T-2),O.add(T-1));const _e=document.createElement("div");if(_e.className="spread",this.isInPresentationMode){const we=document.createElement("div");we.className="dummyPage",_e.append(we)}for(const we of O){const ie=this._pages[we];ie&&(_e.append(ie.div),re.pages.push(ie))}M.append(_e)}re.scrollDown=T>=re.previousPageNumber,re.previousPageNumber=T},se=new WeakSet,Ct=function(T,re=null){const{div:M,id:O}=T;if(this._currentPageNumber!==O&&this._setCurrentPageNumber(O),this._scrollMode===c.ScrollMode.PAGE&&(ee(this,$,pt).call(this),this.update()),!re&&!this.isInPresentationMode){const z=M.offsetLeft+M.clientLeft,_e=z+M.clientWidth,{scrollLeft:we,clientWidth:ie}=this.container;(this._scrollMode===c.ScrollMode.HORIZONTAL||z<we||_e>we+ie)&&(re={left:0,top:0})}(0,c.scrollIntoView)(M,re),!this._currentScaleValue&&this._location&&(this._location=null)},K=new WeakSet,Qi=function(T){return T===this._currentScale||Math.abs(T-this._currentScale)<1e-15},U=new WeakSet,ci=function(T,re,{noScroll:M=!1,preset:O=!1,drawingDelay:z=-1}){if(this._currentScaleValue=re.toString(),ee(this,K,Qi).call(this,T)){O&&this.eventBus.dispatch("scalechanging",{source:this,scale:T,presetValue:re});return}this.viewer.style.setProperty("--scale-factor",T*f.PixelsPerInch.PDF_TO_CSS_UNITS);const _e=z>=0&&z<1e3;if(this.refresh(!0,{scale:T,drawingDelay:_e?z:-1}),_e&&be(this,ge,setTimeout(()=>{be(this,ge,null),this.refresh()},z)),this._currentScale=T,!M){let we=this._currentPageNumber,ie;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(we=this._location.pageNumber,ie=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:we,destArray:ie,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:T,presetValue:O?re:void 0}),this.defaultRenderingQueue&&this.update()},o=new WeakSet,Ji=function(){return this._spreadMode!==c.SpreadMode.NONE&&this._scrollMode!==c.ScrollMode.HORIZONTAL?2:1},y=new WeakSet,Ye=function(T,re){let M=parseFloat(T);if(M>0)re.preset=!1,ee(this,U,ci).call(this,M,T,re);else{const O=this._pages[this._currentPageNumber-1];if(!O)return;let z=c.SCROLLBAR_PADDING,_e=c.VERTICAL_PADDING;this.isInPresentationMode?(z=_e=4,this._spreadMode!==c.SpreadMode.NONE&&(z*=2)):this.removePageBorders?z=_e=0:this._scrollMode===c.ScrollMode.HORIZONTAL&&([z,_e]=[_e,z]);const we=(this.container.clientWidth-z)/O.width*O.scale/u(this,o,Ji),ie=(this.container.clientHeight-_e)/O.height*O.scale;switch(T){case"page-actual":M=1;break;case"page-width":M=we;break;case"page-height":M=ie;break;case"page-fit":M=Math.min(we,ie);break;case"auto":const ve=(0,c.isPortraitOrientation)(O)?we:Math.min(ie,we);M=Math.min(c.MAX_AUTO_SCALE,ve);break;default:console.error(`#setScale: "${T}" is an unknown zoom value.`);return}re.preset=!0,ee(this,U,ci).call(this,M,T,re)}},V=new WeakSet,hi=function(){const T=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&ee(this,y,Ye).call(this,this._currentScaleValue,{noScroll:!0}),ee(this,se,Ct).call(this,T)},he=new WeakSet,en=async function(T){var re,M;if(T.pdfPage)return T.pdfPage;try{const O=await this.pdfDocument.getPage(T.id);return T.pdfPage||T.setPdfPage(O),(M=(re=this.linkService)._cachedPageNumber)!=null&&M.call(re,O.ref)||this.linkService.cachePageRef(T.id,O.ref),O}catch(O){return console.error("Unable to get page for page view",O),null}},J=new WeakSet,tn=function(T){var re,M;if(((re=T.first)==null?void 0:re.id)===1)return!0;if(((M=T.last)==null?void 0:M.id)===this.pagesCount)return!1;switch(this._scrollMode){case c.ScrollMode.PAGE:return u(this,de).scrollDown;case c.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down},ce=new WeakSet,di=function(T=this.container.clientHeight){T!==u(this,X)&&(be(this,X,T),c.docStyle.setProperty("--viewer-container-height",`${T}px`))},Ae=new WeakSet,nn=function(T){for(const re of T)if(re.target===this.container){ee(this,ce,di).call(this,Math.floor(re.borderBoxSize[0].blockSize)),be(this,te,null);break}},L.PDFViewer=p},(q,L,F)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.PDFRenderingQueue=void 0;var f=F(4),c=F(2);const x=3e4;class P{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(i){this.pdfViewer=i}setThumbnailViewer(i){this.pdfThumbnailViewer=i}isHighestPriority(i){return this.highestPriorityPage===i.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(i){var d;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(i)&&(this.isThumbnailViewEnabled&&((d=this.pdfThumbnailViewer)!=null&&d.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),x)))}getHighestPriority(i,d,n,l=!1){const E=i.views,b=E.length;if(b===0)return null;for(let s=0;s<b;s++){const m=E[s].view;if(!this.isViewFinished(m))return m}const p=i.first.id,e=i.last.id;if(e-p+1>b){const s=i.ids;for(let m=1,C=e-p;m<C;m++){const h=n?p+m:e-m;if(s.has(h))continue;const D=d[h-1];if(!this.isViewFinished(D))return D}}let t=n?e:p-2,r=d[t];return r&&!this.isViewFinished(r)||l&&(t+=n?1:-1,r=d[t],r&&!this.isViewFinished(r))?r:null}isViewFinished(i){return i.renderingState===c.RenderingStates.FINISHED}renderView(i){switch(i.renderingState){case c.RenderingStates.FINISHED:return!1;case c.RenderingStates.PAUSED:this.highestPriorityPage=i.renderingId,i.resume();break;case c.RenderingStates.RUNNING:this.highestPriorityPage=i.renderingId;break;case c.RenderingStates.INITIAL:this.highestPriorityPage=i.renderingId,i.draw().finally(()=>{this.renderHighestPriority()}).catch(d=>{d instanceof f.RenderingCancelledException||console.error(`renderView: "${d}"`)});break}return!0}}L.PDFRenderingQueue=P}],S={};function I(q){var L=S[q];if(L!==void 0)return L.exports;var F=S[q]={exports:{}};return Y[q](F,F.exports,I),F.exports}var ue={};return(()=>{var q=ue;Object.defineProperty(q,"__esModule",{value:!0}),Object.defineProperty(q,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return f.AnnotationLayerBuilder}}),q.DefaultXfaLayerFactory=q.DefaultTextLayerFactory=q.DefaultStructTreeLayerFactory=q.DefaultAnnotationLayerFactory=void 0,Object.defineProperty(q,"DownloadManager",{enumerable:!0,get:function(){return c.DownloadManager}}),Object.defineProperty(q,"EventBus",{enumerable:!0,get:function(){return x.EventBus}}),Object.defineProperty(q,"GenericL10n",{enumerable:!0,get:function(){return P.GenericL10n}}),Object.defineProperty(q,"LinkTarget",{enumerable:!0,get:function(){return L.LinkTarget}}),Object.defineProperty(q,"NullL10n",{enumerable:!0,get:function(){return g.NullL10n}}),Object.defineProperty(q,"PDFFindController",{enumerable:!0,get:function(){return i.PDFFindController}}),Object.defineProperty(q,"PDFHistory",{enumerable:!0,get:function(){return d.PDFHistory}}),Object.defineProperty(q,"PDFLinkService",{enumerable:!0,get:function(){return L.PDFLinkService}}),Object.defineProperty(q,"PDFPageView",{enumerable:!0,get:function(){return n.PDFPageView}}),Object.defineProperty(q,"PDFScriptingManager",{enumerable:!0,get:function(){return l.PDFScriptingManager}}),Object.defineProperty(q,"PDFSinglePageViewer",{enumerable:!0,get:function(){return E.PDFSinglePageViewer}}),Object.defineProperty(q,"PDFViewer",{enumerable:!0,get:function(){return b.PDFViewer}}),Object.defineProperty(q,"ProgressBar",{enumerable:!0,get:function(){return F.ProgressBar}}),Object.defineProperty(q,"RenderingStates",{enumerable:!0,get:function(){return F.RenderingStates}}),Object.defineProperty(q,"ScrollMode",{enumerable:!0,get:function(){return F.ScrollMode}}),Object.defineProperty(q,"SimpleLinkService",{enumerable:!0,get:function(){return L.SimpleLinkService}}),Object.defineProperty(q,"SpreadMode",{enumerable:!0,get:function(){return F.SpreadMode}}),Object.defineProperty(q,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return p.StructTreeLayerBuilder}}),Object.defineProperty(q,"TextLayerBuilder",{enumerable:!0,get:function(){return e.TextLayerBuilder}}),Object.defineProperty(q,"XfaLayerBuilder",{enumerable:!0,get:function(){return t.XfaLayerBuilder}}),Object.defineProperty(q,"parseQueryString",{enumerable:!0,get:function(){return F.parseQueryString}});var L=I(1),F=I(2),f=I(3),c=I(6),x=I(7),P=I(8),g=I(5),i=I(10),d=I(12),n=I(13),l=I(21),E=I(23),b=I(24),p=I(16),e=I(19),t=I(20);class r{constructor(){throw new Error("The `DefaultAnnotationLayerFactory` has been removed, please use the `annotationMode` option when initializing the `PDFPageView`-instance to control AnnotationLayer rendering.")}}q.DefaultAnnotationLayerFactory=r;class s{constructor(){throw new Error("The `DefaultStructTreeLayerFactory` has been removed, this functionality is automatically enabled when the TextLayer is used.")}}q.DefaultStructTreeLayerFactory=s;class m{constructor(){throw new Error("The `DefaultTextLayerFactory` has been removed, please use the `textLayerMode` option when initializing the `PDFPageView`-instance to control TextLayer rendering.")}}q.DefaultTextLayerFactory=m;class C{constructor(){throw new Error("The `DefaultXfaLayerFactory` has been removed, please use the `enableXfa` option when calling the `getDocument`-function to control XfaLayer rendering.")}}q.DefaultXfaLayerFactory=C})(),ue})())})(pdf_viewer$1);const pdf_viewer="";pdfExports.GlobalWorkerOptions.workerSrc="/static/pdfjs/pdf.worker.min.js";const _sfc_main=vue.defineComponent({name:"DocumentEditor",components:{ToolbarPagination:_sfc_main$1,ToolbarRotation:_sfc_main$2,ToolbarZoom:_sfc_main$3,ToolbarAnnotation:_sfc_main$4},props:{value:{type:String,required:!0},baseUrl:{type:String,required:!0},pagination:{type:Boolean,default:!0},zoom:{type:Boolean,default:!0},comment:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0},rotation:{type:Boolean,default:!0}},data(){return{token:this.value,rotations:{},highlightingColor:"",commentingColor:"",loading:!0,error:"",currentPage:1,currentZoom:"",hasAnnotations:!1,savingInProgress:!1,interval:null,pages:1,pdfDocument:void 0,viewer:void 0}},computed:{hasBeenRotated(){return this.rotations&&Object.keys(this.rotations).length!==0},needsToBeSaved(){return this.hasBeenRotated||this.hasAnnotations}},mounted(){this.pdfDocument=void 0,this.getFile();const w=["changeCurrentPage","rotate","zoomIn","zoomOut","setScale","setHighlight","setCommenting","save"];for(const a of w)this.$el.addEventListener(a,Y=>{this[a](Y.detail)})},unmounted(){this.stopWatchingAnnotations()},methods:{getFile:async function(){if(this.token==="FileInfectedException")this.error=this.$t("view_entry.file_infected");else try{const w=await doRequest(`${this.baseUrl}metadata/${this.token}`),a=await pdfExports.getDocument(w.url).promise,Y=new pdf_viewerExports.PDFViewer({container:this.$refs.viewerContainer,eventBus:new pdf_viewerExports.EventBus});Y.setDocument(a),Y.eventBus.on("pagechanging",I=>{this.currentPage=I.pageNumber;const ue=new CustomEvent("pageChange",{detail:{pageNumber:I.pageNumber}});this.$el.dispatchEvent(ue)}),Y.eventBus.on("pagesinit",()=>{this.currentZoom=Y.currentScaleValue="auto"}),this.pages=a.numPages;const S=new CustomEvent("numPages",{detail:{numPages:a.numPages}});this.$el.dispatchEvent(S),this.pdfDocument=vue.markRaw(a),this.viewer=vue.markRaw(Y)}catch(w){this.error=w.message}this.loading=!1},rotate(w){var a;((a=this.viewer)==null?void 0:a.getPageView(this.currentPage-1)).update({rotation:w}),w!==0?this.rotations[this.currentPage-1]=w:delete this.rotations[this.currentPage-1]},changeCurrentPage(w){this.viewer.currentPageNumber=w},zoomIn(){const w=this.viewer;w.increaseScale({scaleFactor:1.1}),this.currentZoom=w.currentScale.toString()},zoomOut(){const w=this.viewer;w.decreaseScale({scaleFactor:1.1}),this.currentZoom=w.currentScale.toString()},setScale(w){this.viewer.currentScaleValue=w,this.currentZoom=w},startWatchingAnnotations:function(){this.interval||(this.interval=window.setInterval(()=>this.updateNeedsToBeSaved(),500))},stopWatchingAnnotations:function(){this.interval&&window.clearInterval(this.interval),this.interval=null},setHighlight(w){const a=this.viewer;this.commentingColor="",this.highlightingColor=w,w?(this.startWatchingAnnotations(),a.annotationEditorMode=pdfExports.AnnotationEditorType.INK,a.annotationEditorParams={type:pdfExports.AnnotationEditorParamsType.INK_THICKNESS,value:10},a.annotationEditorParams={type:pdfExports.AnnotationEditorParamsType.INK_OPACITY,value:50},a.annotationEditorParams={type:pdfExports.AnnotationEditorParamsType.INK_COLOR,value:w}):(this.stopWatchingAnnotations(),a.annotationEditorMode=pdfExports.AnnotationEditorType.NONE)},setCommenting(w){const a=this.viewer;this.highlightingColor="",this.commentingColor=w,w?(this.startWatchingAnnotations(),a.annotationEditorMode=pdfExports.AnnotationEditorType.FREETEXT,a.annotationEditorParams={type:pdfExports.AnnotationEditorParamsType.FREETEXT_SIZE,value:10},a.annotationEditorParams={type:pdfExports.AnnotationEditorParamsType.FREETEXT_COLOR,value:w}):(this.stopWatchingAnnotations(),a.annotationEditorMode=pdfExports.AnnotationEditorType.NONE)},updateNeedsToBeSaved(){this.hasAnnotations=!!this.pdfDocument&&this.pdfDocument.annotationStorage.size>0},async save(){if(!this.needsToBeSaved)return!1;this.savingInProgress=!0,this.setCommenting("");const w=await this.pdfDocument.saveDocument(),a=new Blob([w],{type:"application/pdf"}),Y=new FormData;Y.append("file",a),Y.append("rotations",JSON.stringify(vue.toRaw(this.rotations)));try{const S=await doRequest(`${this.baseUrl}save-editor/${this.token}`,{method:"POST",headers:void 0,body:Y});this.rotations={},this.hasAnnotations=!1,this.token=S.token,this.getFile()}catch(S){this.error=S.message}this.savingInProgress=!1}}}),DocumentEditor_vue_vue_type_style_index_0_lang="",_export_sfc=(w,a)=>{const Y=w.__vccOpts||w;for(const[S,I]of a)Y[S]=I;return Y},_hoisted_1={class:"editor-container"},_hoisted_2={class:"wrapper"},_hoisted_3={ref:"viewerContainer",class:"viewerContainer",tabindex:"0"},_hoisted_4=vue.createElementVNode("div",{class:"pdfViewer"},null,-1),_hoisted_5=[_hoisted_4],_hoisted_6={class:"btn-toolbar",role:"toolbar"},_hoisted_7={key:0,class:"text-danger"};function _sfc_render(w,a,Y,S,I,ue){const q=vue.resolveComponent("ToolbarPagination"),L=vue.resolveComponent("ToolbarRotation"),F=vue.resolveComponent("ToolbarZoom"),f=vue.resolveComponent("ToolbarAnnotation");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1,[vue.createElementVNode("div",_hoisted_2,[vue.createElementVNode("div",_hoisted_3,_hoisted_5,512)]),vue.createElementVNode("div",_hoisted_6,[w.pages&&w.pagination?(vue.openBlock(),vue.createBlock(q,{key:0,"current-page":w.currentPage,pages:w.pages,onOnChangeCurrentPage:w.changeCurrentPage},null,8,["current-page","pages","onOnChangeCurrentPage"])):vue.createCommentVNode("",!0),w.rotation?(vue.openBlock(),vue.createBlock(L,{key:1,"current-rotation":w.rotations[w.currentPage-1]||0,onOnRotate:w.rotate},null,8,["current-rotation","onOnRotate"])):vue.createCommentVNode("",!0),w.zoom&&w.currentZoom?(vue.openBlock(),vue.createBlock(F,{key:2,"current-zoom":w.currentZoom,onOnZoomIn:w.zoomIn,onOnZoomOut:w.zoomOut,onOnSetScale:w.setScale},null,8,["current-zoom","onOnZoomIn","onOnZoomOut","onOnSetScale"])):vue.createCommentVNode("",!0),w.highlight?(vue.openBlock(),vue.createBlock(f,{key:3,icon:"fa-highlighter","is-activated":w.highlightingColor!="",color:w.highlightingColor,"class-prefix":"bg",colors:{warning:"#ffff00",danger:"#ff0000",info:"#0000ff",success:"#00ff00"},onOnChange:w.setHighlight},null,8,["is-activated","color","onOnChange"])):vue.createCommentVNode("",!0),w.comment?(vue.openBlock(),vue.createBlock(f,{key:4,icon:"fa-message","is-activated":w.commentingColor!="",color:w.commentingColor,"class-prefix":"text",colors:{danger:"#a94442",warning:"#ffff00",info:"#31708f",success:"#3c763d",muted:"#ffffff"},onOnChange:w.setCommenting},null,8,["is-activated","color","onOnChange"])):vue.createCommentVNode("",!0),vue.createElementVNode("button",{type:"button",class:vue.normalizeClass(["btn",w.needsToBeSaved?"btn-primary":"btn-default disabled"]),onClick:a[0]||(a[0]=(...c)=>w.save&&w.save(...c))},[vue.createElementVNode("span",{class:vue.normalizeClass(["fas",w.savingInProgress?"fa-spinner fa-spin-pulse":`fa-save ${w.needsToBeSaved&&"fa-beat-fade"}`])},null,2)],2)]),w.error?(vue.openBlock(),vue.createElementBlock("p",_hoisted_7,vue.toDisplayString(w.error),1)):vue.createCommentVNode("",!0)])}const Editor=_export_sfc(_sfc_main,[["render",_sfc_render]]);function initEditors(){document.querySelectorAll(".osis-document-editor:not([data-v-app])").forEach(w=>{const a={baseUrl:"",value:"",...w.dataset};for(const Y of["pagination","zoom","comment","highlight","rotation"])typeof w.dataset[Y]<"u"&&(a[Y]=w.dataset[Y]==="true");runtimeDom.createApp(Editor,a).use(i18n).mount(w)})}initEditors();const observer=new MutationObserver(initEditors);observer.observe(document,{childList:!0,subtree:!0})});
//# sourceMappingURL=osis-document-editor.umd.min.js.map
