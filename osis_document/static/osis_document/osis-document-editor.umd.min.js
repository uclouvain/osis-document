(function(x,o){typeof exports=="object"&&typeof module<"u"?o(require("@vue/runtime-dom"),require("vue-i18n"),require("vue")):typeof define=="function"&&define.amd?define(["@vue/runtime-dom","vue-i18n","vue"],o):(x=typeof globalThis<"u"?globalThis:x||self,o(x.Vue,x.VueI18n,x.Vue))})(this,function(runtimeDom,vueI18n,vue){"use strict";var un=Object.defineProperty;var dn=(x,o,X)=>o in x?un(x,o,{enumerable:!0,configurable:!0,writable:!0,value:X}):x[o]=X;var je=(x,o,X)=>(dn(x,typeof o!="symbol"?o+"":o,X),X),Tt=(x,o,X)=>{if(!o.has(x))throw TypeError("Cannot "+X)};var c=(x,o,X)=>(Tt(x,o,"read from private field"),X?X.call(x):o.get(x)),$=(x,o,X)=>{if(o.has(x))throw TypeError("Cannot add the same private member more than once");o instanceof WeakSet?o.add(x):o.set(x,X)},_e=(x,o,X,P)=>(Tt(x,o,"write to private field"),P?P.call(x,X):o.set(x,X),X),lt=(x,o,X,P)=>({set _(O){_e(x,o,O,X)},get _(){return c(x,o,P)}}),Z=(x,o,X)=>(Tt(x,o,"access private method"),X);const resource$1={uploader:{specific_nb_drag_n_drop_label:x=>{const{normalize:o,interpolate:X,named:P,plural:O}=x;return O([o(["Glissez-déposez ici un fichier"]),o(["Glissez-déposez ici ",X(P("count"))," fichiers"])])},min_max_drag_n_drop_label:x=>{const{normalize:o,interpolate:X,named:P}=x;return o(["Glissez-déposez ici entre ",X(P("min"))," et ",X(P("max"))," fichiers"])},min_drag_n_drop_label:x=>{const{normalize:o,interpolate:X,named:P,plural:O}=x;return O([o(["Glissez-déposez ici au-moins un fichier"]),o(["Glissez-déposez ici au-moins ",X(P("count"))," fichiers"])])},max_drag_n_drop_label:x=>{const{normalize:o,interpolate:X,named:P,plural:O}=x;return O([o(["Glissez-déposez ici votre fichier"]),o(["Glissez-déposez ici vos fichiers (maximum ",X(P("count")),")"])])},drag_n_drop_label:x=>{const{normalize:o}=x;return o(["Glissez-déposez ici vos fichiers"])},add_file_label:x=>{const{normalize:o}=x;return o(["ou cliquez-ici"])},max_size_label:x=>{const{normalize:o,interpolate:X,named:P}=x;return o(["(taille maximum ",X(P("size")),")"])},trigger_upload:x=>{const{normalize:o}=x;return o(["Transférer"])}},upload_entry:{completion:x=>{const{normalize:o,interpolate:X,named:P}=x;return o([X(P("progress")),"% transférés"])},too_large:x=>{const{normalize:o}=x;return o(["Le fichier est trop lourd"])},wrong_type:x=>{const{normalize:o,interpolate:X,named:P,plural:O}=x;return O([o(['Le fichier doit être du type "',X(P("types")),'"']),o([`Le fichier doit être d'un des types suivants : "`,X(P("types")),'"'])])},crop_header:x=>{const{normalize:o}=x;return o(["Veuillez choisir la partie à garder."])},crop:x=>{const{normalize:o}=x;return o(["Recadrer"])},cancel:x=>{const{normalize:o}=x;return o(["Annuler"])}},view_entry:{rotate_left:x=>{const{normalize:o}=x;return o(["Faire pivoter l'image à gauche"])},rotate_right:x=>{const{normalize:o}=x;return o(["Faire pivoter l'image à droite"])},loading:x=>{const{normalize:o}=x;return o(["Chargement..."])},close:x=>{const{normalize:o}=x;return o(["Fermer"])},save:x=>{const{normalize:o}=x;return o(["Enregistrer"])},file_infected:x=>{const{normalize:o}=x;return o(["Le fichier référencé semble infecté par un virus"])}},editor:{pagination:x=>{const{normalize:o,interpolate:X,named:P}=x;return o([X(P("currentPage"))," de ",X(P("pages"))])},zoom:{auto:x=>{const{normalize:o}=x;return o(["Zoom automatique"])},"page-width":x=>{const{normalize:o}=x;return o(["Pleine largeur"])},"page-fit":x=>{const{normalize:o}=x;return o(["Page entière"])},"page-actual":x=>{const{normalize:o}=x;return o(["Taille réelle"])}},colors:{warning:x=>{const{normalize:o}=x;return o(["Jaune"])},danger:x=>{const{normalize:o}=x;return o(["Rouge"])},info:x=>{const{normalize:o}=x;return o(["Bleu"])},success:x=>{const{normalize:o}=x;return o(["Vert"])},muted:x=>{const{normalize:o}=x;return o(["Blanc"])}}},error:x=>{const{normalize:o,interpolate:X,named:P}=x;return o(["Erreur : ",X(P("error"))])},request_error:x=>{const{normalize:o,interpolate:X,named:P}=x;return o(["Erreur lors de la requête : ",X(P("error"))])},units:[x=>{const{normalize:o}=x;return o(["o"])},x=>{const{normalize:o}=x;return o(["Ko"])},x=>{const{normalize:o}=x;return o(["Mo"])},x=>{const{normalize:o}=x;return o(["Go"])},x=>{const{normalize:o}=x;return o(["To"])}]},resource={uploader:{specific_nb_drag_n_drop_label:x=>{const{normalize:o,interpolate:X,named:P,plural:O}=x;return O([o(["Drag and drop one file here"]),o(["Drag and drop ",X(P("count"))," files here"])])},min_max_drag_n_drop_label:x=>{const{normalize:o,interpolate:X,named:P}=x;return o(["Drag and drop between ",X(P("min"))," and ",X(P("max"))," files here"])},min_drag_n_drop_label:x=>{const{normalize:o,interpolate:X,named:P,plural:O}=x;return O([o(["Drag and drop at least one file here"]),o(["Drag and drop at least ",X(P("count"))," files here"])])},max_drag_n_drop_label:x=>{const{normalize:o,interpolate:X,named:P,plural:O}=x;return O([o(["Drag and drop your file here"]),o(["Drag and drop your files here (maximum ",X(P("count")),")"])])},drag_n_drop_label:x=>{const{normalize:o}=x;return o(["Drag and drop your files here"])},add_file_label:x=>{const{normalize:o}=x;return o(["or click here"])},max_size_label:x=>{const{normalize:o,interpolate:X,named:P}=x;return o(["(max size ",X(P("size")),")"])},trigger_upload:x=>{const{normalize:o}=x;return o(["Upload"])}},upload_entry:{completion:x=>{const{normalize:o,interpolate:X,named:P}=x;return o([X(P("progress")),"% uploaded"])},too_large:x=>{const{normalize:o}=x;return o(["File is too large"])},wrong_type:x=>{const{normalize:o,interpolate:X,named:P,plural:O}=x;return O([o(['The file must have the following type: "',X(P("types")),'"']),o(['The file must have one of the following types: "',X(P("types")),'"'])])},crop_header:x=>{const{normalize:o}=x;return o(["Please choose the part you want to keep."])},crop:x=>{const{normalize:o}=x;return o(["Crop"])},cancel:x=>{const{normalize:o}=x;return o(["Cancel"])}},view_entry:{rotate_left:x=>{const{normalize:o}=x;return o(["Rotate image left"])},rotate_right:x=>{const{normalize:o}=x;return o(["Rotate image right"])},loading:x=>{const{normalize:o}=x;return o(["Loading..."])},close:x=>{const{normalize:o}=x;return o(["Close"])},save:x=>{const{normalize:o}=x;return o(["Save"])},file_infected:x=>{const{normalize:o}=x;return o(["The referenced file appears to be infected with a virus"])}},editor:{pagination:x=>{const{normalize:o,interpolate:X,named:P}=x;return o([X(P("currentPage"))," of ",X(P("pages"))])},zoom:{auto:x=>{const{normalize:o}=x;return o(["Automatic Zoom"])},"page-width":x=>{const{normalize:o}=x;return o(["Page Width"])},"page-fit":x=>{const{normalize:o}=x;return o(["Page Fit"])},"page-actual":x=>{const{normalize:o}=x;return o(["Actual Size"])}},colors:{warning:x=>{const{normalize:o}=x;return o(["Yellow"])},danger:x=>{const{normalize:o}=x;return o(["Red"])},info:x=>{const{normalize:o}=x;return o(["Blue"])},success:x=>{const{normalize:o}=x;return o(["Green"])},muted:x=>{const{normalize:o}=x;return o(["White"])}}},error:x=>{const{normalize:o,interpolate:X,named:P}=x;return o(["Error: ",X(P("error"))])},request_error:x=>{const{normalize:o,interpolate:X,named:P}=x;return o(["Request error: ",X(P("error"))])},units:[x=>{const{normalize:o}=x;return o(["B"])},x=>{const{normalize:o}=x;return o(["KB"])},x=>{const{normalize:o}=x;return o(["MB"])},x=>{const{normalize:o}=x;return o(["GB"])},x=>{const{normalize:o}=x;return o(["TB"])}]},i18n=vueI18n.createI18n({locale:document.documentElement.lang||"en",allowComposition:!0,messages:{en:resource,fr:resource$1}}),_hoisted_1$4={class:"btn-group dropup annotation-dropdown"},_hoisted_2$4=vue.createElementVNode("button",{type:"button",class:"btn btn-default dropdown-toggle","data-toggle":"dropdown"},[vue.createElementVNode("span",{class:"caret"})],-1),_hoisted_3$4={class:"dropdown-menu"},_hoisted_4$4=["onClick"],_sfc_main$4=vue.defineComponent({__name:"ToolbarAnnotation",props:{isActivated:{type:Boolean},color:null,classPrefix:null,icon:null,colors:null},emits:["onChange"],setup(x){return(o,X)=>(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$4,[vue.createElementVNode("button",{class:vue.normalizeClass(["btn",x.isActivated?"btn-primary":"btn-default"]),type:"button",onClick:X[0]||(X[0]=P=>o.$emit("onChange",x.isActivated?"":x.color||Object.values(x.colors)[0]))},[vue.createElementVNode("span",{class:vue.normalizeClass(["fas",x.icon])},null,2)],2),_hoisted_2$4,vue.createElementVNode("ul",_hoisted_3$4,[(vue.openBlock(!0),vue.createElementBlock(vue.Fragment,null,vue.renderList(x.colors,(P,O)=>(vue.openBlock(),vue.createElementBlock("li",{key:O,class:vue.normalizeClass(`${x.classPrefix}-${O}`)},[vue.createElementVNode("a",{href:"#",class:vue.normalizeClass(`${x.classPrefix}-${O}`),onClick:vue.withModifiers(pe=>o.$emit("onChange",P),["prevent"])},vue.toDisplayString(o.$t(`editor.colors.${O}`)),11,_hoisted_4$4)],2))),128))])]))}}),ToolbarAnnotation_vue_vue_type_style_index_0_lang="",_hoisted_1$3={class:"btn-group"},_hoisted_2$3=vue.createElementVNode("span",{class:"fas fa-magnifying-glass-minus"},null,-1),_hoisted_3$3=[_hoisted_2$3],_hoisted_4$3={class:"btn-group dropup",role:"group"},_hoisted_5$3={type:"button",class:"btn btn-default dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},_hoisted_6$2=vue.createElementVNode("span",{class:"caret"},null,-1),_hoisted_7={class:"dropdown-menu"},_hoisted_8=["value"],_hoisted_9=["onClick"],_hoisted_10=vue.createElementVNode("span",{class:"fas fa-magnifying-glass-plus"},null,-1),_hoisted_11=[_hoisted_10],_sfc_main$3=vue.defineComponent({__name:"ToolbarZoom",props:{currentZoom:null},emits:["onZoomIn","onZoomOut","onSetScale"],setup(x){const{t:o}=vueI18n.useI18n(),X=["auto","page-actual","page-fit","page-width","0.5","0.75","1","1.25","1.5","2","3","4"];function P(O){return isNaN(parseFloat(O))?o(`editor.zoom.${O}`):`${Math.ceil(parseFloat(O)*100)}%`}return(O,pe)=>(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$3,[vue.createElementVNode("button",{class:"btn btn-default",type:"button",onClick:pe[0]||(pe[0]=G=>O.$emit("onZoomOut"))},_hoisted_3$3),vue.createElementVNode("div",_hoisted_4$3,[vue.createElementVNode("button",_hoisted_5$3,[vue.createTextVNode(vue.toDisplayString(P(x.currentZoom))+" ",1),_hoisted_6$2]),vue.createElementVNode("ul",_hoisted_7,[(vue.openBlock(),vue.createElementBlock(vue.Fragment,null,vue.renderList(X,G=>vue.createElementVNode("li",{key:G,value:G,class:vue.normalizeClass(x.currentZoom==G?"active":"")},[vue.createElementVNode("a",{href:"#",onClick:vue.withModifiers(D=>O.$emit("onSetScale",G),["prevent"])},vue.toDisplayString(P(G)),9,_hoisted_9)],10,_hoisted_8)),64))])]),vue.createElementVNode("button",{class:"btn btn-default",type:"button",onClick:pe[1]||(pe[1]=G=>O.$emit("onZoomIn"))},_hoisted_11)]))}}),_hoisted_1$2={class:"btn-group"},_hoisted_2$2=vue.createElementVNode("span",{class:"fas fa-rotate-left"},null,-1),_hoisted_3$2=[_hoisted_2$2],_hoisted_4$2=vue.createElementVNode("span",{class:"fas fa-rotate-right"},null,-1),_hoisted_5$2=[_hoisted_4$2],_sfc_main$2=vue.defineComponent({__name:"ToolbarRotation",props:{currentRotation:null},emits:["onRotate"],setup(x){return(o,X)=>(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$2,[vue.createElementVNode("button",{type:"button",class:"btn btn-default",onClick:X[0]||(X[0]=P=>o.$emit("onRotate",((x.currentRotation-90)%360+360)%360))},_hoisted_3$2),vue.createElementVNode("button",{type:"button",class:"btn btn-default",onClick:X[1]||(X[1]=P=>o.$emit("onRotate",((x.currentRotation+90)%360+360)%360))},_hoisted_5$2)]))}}),_hoisted_1$1={class:"btn-group"},_hoisted_2$1=vue.createElementVNode("span",{class:"fas fa-angle-up"},null,-1),_hoisted_3$1=[_hoisted_2$1],_hoisted_4$1={class:"btn btn-default disabled",role:"button"},_hoisted_5$1=vue.createElementVNode("span",{class:"fas fa-angle-down"},null,-1),_hoisted_6$1=[_hoisted_5$1],_sfc_main$1=vue.defineComponent({__name:"ToolbarPagination",props:{currentPage:null,pages:null},emits:["onChangeCurrentPage"],setup(x){return(o,X)=>(vue.openBlock(),vue.createElementBlock("div",_hoisted_1$1,[vue.createElementVNode("button",{class:vue.normalizeClass(["btn btn-default",{disabled:x.currentPage==1}]),type:"button",onClick:X[0]||(X[0]=P=>x.currentPage!=1&&o.$emit("onChangeCurrentPage",x.currentPage-1))},_hoisted_3$1,2),vue.createElementVNode("a",_hoisted_4$1,vue.toDisplayString(o.$t("editor.pagination",{currentPage:x.currentPage,pages:x.pages})),1),vue.createElementVNode("button",{class:vue.normalizeClass(["btn btn-default",{disabled:x.currentPage==x.pages}]),type:"button",onClick:X[1]||(X[1]=P=>x.currentPage!=x.pages&&o.$emit("onChangeCurrentPage",x.currentPage+1))},_hoisted_6$1,2)]))}});async function doRequest(x,o){const X=await fetch(x,{headers:{"Content-Type":"application/json"},...o});if(X.status>=200&&X.status<300)return X.json();throw new Error(X.statusText)}function getAugmentedNamespace(x){if(x.__esModule)return x;var o=x.default;if(typeof o=="function"){var X=function P(){if(this instanceof P){var O=[null];O.push.apply(O,arguments);var pe=Function.bind.apply(o,O);return new pe}return o.apply(this,arguments)};X.prototype=o.prototype}else X={};return Object.defineProperty(X,"__esModule",{value:!0}),Object.keys(x).forEach(function(P){var O=Object.getOwnPropertyDescriptor(x,P);Object.defineProperty(X,P,O.get?O:{enumerable:!0,get:function(){return x[P]}})}),X}function commonjsRequire(x){throw new Error('Could not dynamically require "'+x+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdfExports={},pdf={get exports(){return pdfExports},set exports(x){pdfExports=x}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(o,X){module.exports=X()})(globalThis,()=>(()=>{var __webpack_modules__=[,(x,o)=>{var Oe;Object.defineProperty(o,"__esModule",{value:!0}),o.VerbosityLevel=o.Util=o.UnknownErrorException=o.UnexpectedResponseException=o.TextRenderingMode=o.RenderingIntentFlag=o.PromiseCapability=o.PermissionFlag=o.PasswordResponses=o.PasswordException=o.PageActionEventType=o.OPS=o.MissingPDFException=o.MAX_IMAGE_SIZE_TO_CACHE=o.LINE_FACTOR=o.LINE_DESCENT_FACTOR=o.InvalidPDFException=o.ImageKind=o.IDENTITY_MATRIX=o.FormatError=o.FeatureTest=o.FONT_IDENTITY_MATRIX=o.DocumentActionEventType=o.CMapCompressionType=o.BaseException=o.BASELINE_FACTOR=o.AnnotationType=o.AnnotationStateModelType=o.AnnotationReviewState=o.AnnotationReplyType=o.AnnotationMode=o.AnnotationMarkedState=o.AnnotationFlag=o.AnnotationFieldFlag=o.AnnotationEditorType=o.AnnotationEditorPrefix=o.AnnotationEditorParamsType=o.AnnotationBorderStyleType=o.AnnotationActionEventType=o.AbortException=void 0,o.assert=Q,o.bytesToString=z,o.createValidAbsoluteUrl=Ee,o.getModificationDate=Pe,o.getVerbosityLevel=ae,o.info=te,o.isArrayBuffer=ve,o.isArrayEqual=xe,o.normalizeUnicode=Me,o.objectFromMap=R,o.objectSize=S,o.setVerbosityLevel=ee,o.shadow=J,o.string32=u,o.stringToBytes=i,o.stringToPDFString=ne,o.stringToUTF8String=ue,o.unreachable=ye,o.utf8StringToString=be,o.warn=ge;const X=[1,0,0,1,0,0];o.IDENTITY_MATRIX=X;const P=[.001,0,0,.001,0,0];o.FONT_IDENTITY_MATRIX=P;const O=1e7;o.MAX_IMAGE_SIZE_TO_CACHE=O;const pe=1.35;o.LINE_FACTOR=pe;const G=.35;o.LINE_DESCENT_FACTOR=G;const D=G/pe;o.BASELINE_FACTOR=D;const N={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};o.RenderingIntentFlag=N;const b={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};o.AnnotationMode=b;const d="pdfjs_internal_editor_";o.AnnotationEditorPrefix=d;const k={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};o.AnnotationEditorType=k;const w={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};o.AnnotationEditorParamsType=w;const y={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};o.PermissionFlag=y;const r={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};o.TextRenderingMode=r;const h={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};o.ImageKind=h;const a={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};o.AnnotationType=a;const g={MARKED:"Marked",REVIEW:"Review"};o.AnnotationStateModelType=g;const _={MARKED:"Marked",UNMARKED:"Unmarked"};o.AnnotationMarkedState=_;const v={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};o.AnnotationReviewState=v;const p={GROUP:"Group",REPLY:"R"};o.AnnotationReplyType=p;const t={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};o.AnnotationFlag=t;const e={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};o.AnnotationFieldFlag=e;const s={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};o.AnnotationBorderStyleType=s;const n={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};o.AnnotationActionEventType=n;const f={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};o.DocumentActionEventType=f;const T={O:"PageOpen",C:"PageClose"};o.PageActionEventType=T;const l={ERRORS:0,WARNINGS:1,INFOS:5};o.VerbosityLevel=l;const I={NONE:0,BINARY:1};o.CMapCompressionType=I;const K={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};o.OPS=K;const le={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};o.PasswordResponses=le;let H=l.WARNINGS;function ee(E){Number.isInteger(E)&&(H=E)}function ae(){return H}function te(E){H>=l.INFOS&&console.log(`Info: ${E}`)}function ge(E){H>=l.WARNINGS&&console.log(`Warning: ${E}`)}function ye(E){throw new Error(E)}function Q(E,m){E||ye(m)}function Ce(E){switch(E==null?void 0:E.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Ee(E,m=null,M=null){if(!E)return null;try{if(M&&typeof E=="string"){if(M.addDefaultProtocol&&E.startsWith("www.")){const de=E.match(/\./g);(de==null?void 0:de.length)>=2&&(E=`http://${E}`)}if(M.tryConvertEncoding)try{E=ue(E)}catch{}}const ie=m?new URL(E,m):new URL(E);if(Ce(ie))return ie}catch{}return null}function J(E,m,M,ie=!1){return Object.defineProperty(E,m,{value:M,enumerable:!ie,configurable:!0,writable:!1}),M}const A=function(){function m(M,ie){this.constructor===m&&ye("Cannot initialize BaseException."),this.message=M,this.name=ie}return m.prototype=new Error,m.constructor=m,m}();o.BaseException=A;class C extends A{constructor(m,M){super(m,"PasswordException"),this.code=M}}o.PasswordException=C;class F extends A{constructor(m,M){super(m,"UnknownErrorException"),this.details=M}}o.UnknownErrorException=F;class Y extends A{constructor(m){super(m,"InvalidPDFException")}}o.InvalidPDFException=Y;class j extends A{constructor(m){super(m,"MissingPDFException")}}o.MissingPDFException=j;class se extends A{constructor(m,M){super(m,"UnexpectedResponseException"),this.status=M}}o.UnexpectedResponseException=se;class U extends A{constructor(m){super(m,"FormatError")}}o.FormatError=U;class V extends A{constructor(m){super(m,"AbortException")}}o.AbortException=V;function z(E){(typeof E!="object"||(E==null?void 0:E.length)===void 0)&&ye("Invalid argument for bytesToString");const m=E.length,M=8192;if(m<M)return String.fromCharCode.apply(null,E);const ie=[];for(let de=0;de<m;de+=M){const re=Math.min(de+M,m),he=E.subarray(de,re);ie.push(String.fromCharCode.apply(null,he))}return ie.join("")}function i(E){typeof E!="string"&&ye("Invalid argument for stringToBytes");const m=E.length,M=new Uint8Array(m);for(let ie=0;ie<m;++ie)M[ie]=E.charCodeAt(ie)&255;return M}function u(E){return String.fromCharCode(E>>24&255,E>>16&255,E>>8&255,E&255)}function S(E){return Object.keys(E).length}function R(E){const m=Object.create(null);for(const[M,ie]of E)m[M]=ie;return m}function L(){const E=new Uint8Array(4);return E[0]=1,new Uint32Array(E.buffer,0,1)[0]===1}function W(){try{return new Function(""),!0}catch{return!1}}class me{static get isLittleEndian(){return J(this,"isLittleEndian",L())}static get isEvalSupported(){return J(this,"isEvalSupported",W())}static get isOffscreenCanvasSupported(){return J(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?J(this,"platform",{isWin:!1,isMac:!1}):J(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}o.FeatureTest=me;const B=[...Array(256).keys()].map(E=>E.toString(16).padStart(2,"0"));class q{static makeHexColor(m,M,ie){return`#${B[m]}${B[M]}${B[ie]}`}static scaleMinMax(m,M){let ie;m[0]?(m[0]<0&&(ie=M[0],M[0]=M[1],M[1]=ie),M[0]*=m[0],M[1]*=m[0],m[3]<0&&(ie=M[2],M[2]=M[3],M[3]=ie),M[2]*=m[3],M[3]*=m[3]):(ie=M[0],M[0]=M[2],M[2]=ie,ie=M[1],M[1]=M[3],M[3]=ie,m[1]<0&&(ie=M[2],M[2]=M[3],M[3]=ie),M[2]*=m[1],M[3]*=m[1],m[2]<0&&(ie=M[0],M[0]=M[1],M[1]=ie),M[0]*=m[2],M[1]*=m[2]),M[0]+=m[4],M[1]+=m[4],M[2]+=m[5],M[3]+=m[5]}static transform(m,M){return[m[0]*M[0]+m[2]*M[1],m[1]*M[0]+m[3]*M[1],m[0]*M[2]+m[2]*M[3],m[1]*M[2]+m[3]*M[3],m[0]*M[4]+m[2]*M[5]+m[4],m[1]*M[4]+m[3]*M[5]+m[5]]}static applyTransform(m,M){const ie=m[0]*M[0]+m[1]*M[2]+M[4],de=m[0]*M[1]+m[1]*M[3]+M[5];return[ie,de]}static applyInverseTransform(m,M){const ie=M[0]*M[3]-M[1]*M[2],de=(m[0]*M[3]-m[1]*M[2]+M[2]*M[5]-M[4]*M[3])/ie,re=(-m[0]*M[1]+m[1]*M[0]+M[4]*M[1]-M[5]*M[0])/ie;return[de,re]}static getAxialAlignedBoundingBox(m,M){const ie=q.applyTransform(m,M),de=q.applyTransform(m.slice(2,4),M),re=q.applyTransform([m[0],m[3]],M),he=q.applyTransform([m[2],m[1]],M);return[Math.min(ie[0],de[0],re[0],he[0]),Math.min(ie[1],de[1],re[1],he[1]),Math.max(ie[0],de[0],re[0],he[0]),Math.max(ie[1],de[1],re[1],he[1])]}static inverseTransform(m){const M=m[0]*m[3]-m[1]*m[2];return[m[3]/M,-m[1]/M,-m[2]/M,m[0]/M,(m[2]*m[5]-m[4]*m[3])/M,(m[4]*m[1]-m[5]*m[0])/M]}static singularValueDecompose2dScale(m){const M=[m[0],m[2],m[1],m[3]],ie=m[0]*M[0]+m[1]*M[2],de=m[0]*M[1]+m[1]*M[3],re=m[2]*M[0]+m[3]*M[2],he=m[2]*M[1]+m[3]*M[3],fe=(ie+he)/2,Ae=Math.sqrt((ie+he)**2-4*(ie*he-re*de))/2,Te=fe+Ae||1,Se=fe-Ae||1;return[Math.sqrt(Te),Math.sqrt(Se)]}static normalizeRect(m){const M=m.slice(0);return m[0]>m[2]&&(M[0]=m[2],M[2]=m[0]),m[1]>m[3]&&(M[1]=m[3],M[3]=m[1]),M}static intersect(m,M){const ie=Math.max(Math.min(m[0],m[2]),Math.min(M[0],M[2])),de=Math.min(Math.max(m[0],m[2]),Math.max(M[0],M[2]));if(ie>de)return null;const re=Math.max(Math.min(m[1],m[3]),Math.min(M[1],M[3])),he=Math.min(Math.max(m[1],m[3]),Math.max(M[1],M[3]));return re>he?null:[ie,re,de,he]}static bezierBoundingBox(m,M,ie,de,re,he,fe,Ae){const Te=[],Se=[[],[]];let Fe,Ie,ke,Le,Ne,Ve,De,Ue;for(let Ge=0;Ge<2;++Ge){if(Ge===0?(Ie=6*m-12*ie+6*re,Fe=-3*m+9*ie-9*re+3*fe,ke=3*ie-3*m):(Ie=6*M-12*de+6*he,Fe=-3*M+9*de-9*he+3*Ae,ke=3*de-3*M),Math.abs(Fe)<1e-12){if(Math.abs(Ie)<1e-12)continue;Le=-ke/Ie,0<Le&&Le<1&&Te.push(Le);continue}De=Ie*Ie-4*ke*Fe,Ue=Math.sqrt(De),!(De<0)&&(Ne=(-Ie+Ue)/(2*Fe),0<Ne&&Ne<1&&Te.push(Ne),Ve=(-Ie-Ue)/(2*Fe),0<Ve&&Ve<1&&Te.push(Ve))}let Be=Te.length,ze;const He=Be;for(;Be--;)Le=Te[Be],ze=1-Le,Se[0][Be]=ze*ze*ze*m+3*ze*ze*Le*ie+3*ze*Le*Le*re+Le*Le*Le*fe,Se[1][Be]=ze*ze*ze*M+3*ze*ze*Le*de+3*ze*Le*Le*he+Le*Le*Le*Ae;return Se[0][He]=m,Se[1][He]=M,Se[0][He+1]=fe,Se[1][He+1]=Ae,Se[0].length=Se[1].length=He+2,[Math.min(...Se[0]),Math.min(...Se[1]),Math.max(...Se[0]),Math.max(...Se[1])]}}o.Util=q;const ce=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ne(E){if(E[0]>="ï"){let M;if(E[0]==="þ"&&E[1]==="ÿ"?M="utf-16be":E[0]==="ÿ"&&E[1]==="þ"?M="utf-16le":E[0]==="ï"&&E[1]==="»"&&E[2]==="¿"&&(M="utf-8"),M)try{const ie=new TextDecoder(M,{fatal:!0}),de=i(E);return ie.decode(de)}catch(ie){ge(`stringToPDFString: "${ie}".`)}}const m=[];for(let M=0,ie=E.length;M<ie;M++){const de=ce[E.charCodeAt(M)];m.push(de?String.fromCharCode(de):E.charAt(M))}return m.join("")}function ue(E){return decodeURIComponent(escape(E))}function be(E){return unescape(encodeURIComponent(E))}function ve(E){return typeof E=="object"&&(E==null?void 0:E.byteLength)!==void 0}function xe(E,m){if(E.length!==m.length)return!1;for(let M=0,ie=E.length;M<ie;M++)if(E[M]!==m[M])return!1;return!0}function Pe(E=new Date){return[E.getUTCFullYear().toString(),(E.getUTCMonth()+1).toString().padStart(2,"0"),E.getUTCDate().toString().padStart(2,"0"),E.getUTCHours().toString().padStart(2,"0"),E.getUTCMinutes().toString().padStart(2,"0"),E.getUTCSeconds().toString().padStart(2,"0")].join("")}class Re{constructor(){$(this,Oe,!1);this.promise=new Promise((m,M)=>{this.resolve=ie=>{_e(this,Oe,!0),m(ie)},this.reject=ie=>{_e(this,Oe,!0),M(ie)}})}get settled(){return c(this,Oe)}}Oe=new WeakMap,o.PromiseCapability=Re;let oe=null,we=null;function Me(E){return oe||(oe=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,we=new Map([["ﬅ","ſt"]])),E.replaceAll(oe,(m,M,ie)=>M?M.normalize("NFKC"):we.get(ie))}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var x,X,P,O,nt,G,mt,N,b,d,k,w,y,r,h,xt,g,_,Mt,p,t;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:s,NodeCMapReaderFactory:n,NodeFilterFactory:f,NodeStandardFontDataFactory:T}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=s,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=n,exports.DefaultFilterFactory=DefaultFilterFactory=f,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=T}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:s}=__w_pdfjs_require__(21);createPDFNetworkStream=n=>new s(n)}else{const{PDFNetworkStream:s}=__w_pdfjs_require__(24),{PDFFetchStream:n}=__w_pdfjs_require__(25);createPDFNetworkStream=f=>(0,_display_utils.isValidFetchUrl)(f.url)?new n(f):new s(f)}function getDocument(s){if(typeof s=="string"||s instanceof URL?s={url:s}:(0,_util.isArrayBuffer)(s)&&(s={data:s}),typeof s!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!s.url&&!s.data&&!s.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const n=new PDFDocumentLoadingTask,{docId:f}=n,T=s.url?getUrlProp(s.url):null,l=s.data?getDataProp(s.data):null,I=s.httpHeaders||null,K=s.withCredentials===!0,le=s.password??null,H=s.range instanceof PDFDataRangeTransport?s.range:null,ee=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let ae=s.worker instanceof PDFWorker?s.worker:null;const te=s.verbosity,ge=typeof s.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(s.docBaseUrl)?s.docBaseUrl:null,ye=typeof s.cMapUrl=="string"?s.cMapUrl:null,Q=s.cMapPacked!==!1,Ce=s.CMapReaderFactory||DefaultCMapReaderFactory,Ee=typeof s.standardFontDataUrl=="string"?s.standardFontDataUrl:null,J=s.StandardFontDataFactory||DefaultStandardFontDataFactory,A=s.stopAtErrors!==!0,C=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,F=s.isEvalSupported!==!1,Y=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!_is_node.isNodeJS,j=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,se=typeof s.disableFontFace=="boolean"?s.disableFontFace:_is_node.isNodeJS,U=s.fontExtraProperties===!0,V=s.enableXfa===!0,z=s.ownerDocument||globalThis.document,i=s.disableRange===!0,u=s.disableStream===!0,S=s.disableAutoFetch===!0,R=s.pdfBug===!0,L=H?H.length:s.length??NaN,W=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!_is_node.isNodeJS&&!se,me=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:Ce===_display_utils.DOMCMapReaderFactory&&J===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(ye,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(Ee,document.baseURI),B=s.canvasFactory||new DefaultCanvasFactory({ownerDocument:z}),q=s.filterFactory||new DefaultFilterFactory({docId:f,ownerDocument:z}),ce=null;(0,_util.setVerbosityLevel)(te);const ne={canvasFactory:B,filterFactory:q};if(me||(ne.cMapReaderFactory=new Ce({baseUrl:ye,isCompressed:Q}),ne.standardFontDataFactory=new J({baseUrl:Ee})),!ae){const ve={verbosity:te,port:_worker_options.GlobalWorkerOptions.workerPort};ae=ve.port?PDFWorker.fromPort(ve):new PDFWorker(ve),n._worker=ae}const ue={docId:f,apiVersion:"3.6.172",data:l,password:le,disableAutoFetch:S,rangeChunkSize:ee,length:L,docBaseUrl:ge,enableXfa:V,evaluatorOptions:{maxImageSize:C,disableFontFace:se,ignoreErrors:A,isEvalSupported:F,isOffscreenCanvasSupported:Y,canvasMaxAreaInBytes:j,fontExtraProperties:U,useSystemFonts:W,cMapUrl:me?ye:null,standardFontDataUrl:me?Ee:null}},be={ignoreErrors:A,isEvalSupported:F,disableFontFace:se,fontExtraProperties:U,enableXfa:V,ownerDocument:z,disableAutoFetch:S,pdfBug:R,styleElement:ce};return ae.promise.then(function(){if(n.destroyed)throw new Error("Loading aborted");const ve=_fetchDocument(ae,ue),xe=new Promise(function(Pe){let Re;H?Re=new _transport_stream.PDFDataTransportStream({length:L,initialData:H.initialData,progressiveDone:H.progressiveDone,contentDispositionFilename:H.contentDispositionFilename,disableRange:i,disableStream:u},H):l||(Re=createPDFNetworkStream({url:T,length:L,httpHeaders:I,withCredentials:K,rangeChunkSize:ee,disableRange:i,disableStream:u})),Pe(Re)});return Promise.all([ve,xe]).then(function([Pe,Re]){if(n.destroyed)throw new Error("Loading aborted");const oe=new _message_handler.MessageHandler(f,Pe,ae.port),we=new WorkerTransport(oe,n,Re,be,ne);n._transport=we,oe.send("Ready",null)})}).catch(n._capability.reject),n}async function _fetchDocument(s,n){if(s.destroyed)throw new Error("Worker was destroyed");const f=await s.messageHandler.sendWithPromise("GetDocRequest",n,n.data?[n.data.buffer]:null);if(s.destroyed)throw new Error("Worker was destroyed");return f}function getUrlProp(s){if(s instanceof URL)return s.href;try{return new URL(s,window.location).href}catch{if(_is_node.isNodeJS&&typeof s=="string")return s}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(s){if(_is_node.isNodeJS&&typeof Buffer<"u"&&s instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(s);if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return(0,_util.stringToBytes)(s);if(typeof s=="object"&&!isNaN(s==null?void 0:s.length)||(0,_util.isArrayBuffer)(s))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const o=class{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${lt(o,x)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var n;this.destroyed=!0,await((n=this._transport)==null?void 0:n.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=o;x=new WeakMap,$(PDFDocumentLoadingTask,x,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(n,f,T=!1,l=null){this.length=n,this.initialData=f,this.progressiveDone=T,this.contentDispositionFilename=l,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(n){this._rangeListeners.push(n)}addProgressListener(n){this._progressListeners.push(n)}addProgressiveReadListener(n){this._progressiveReadListeners.push(n)}addProgressiveDoneListener(n){this._progressiveDoneListeners.push(n)}onDataRange(n,f){for(const T of this._rangeListeners)T(n,f)}onDataProgress(n,f){this._readyCapability.promise.then(()=>{for(const T of this._progressListeners)T(n,f)})}onDataProgressiveRead(n){this._readyCapability.promise.then(()=>{for(const f of this._progressiveReadListeners)f(n)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const n of this._progressiveDoneListeners)n()})}transportReady(){this._readyCapability.resolve()}requestDataRange(n,f){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(n,f){this._pdfInfo=n,this._transport=f}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(n){return this._transport.getPage(n)}getPageIndex(n){return this._transport.getPageIndex(n)}getDestinations(){return this._transport.getDestinations()}getDestination(n){return this._transport.getDestination(n)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(n=!1){return this._transport.startCleanup(n||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(n,f,T,l=!1){$(this,O);$(this,G);$(this,X,null);$(this,P,!1);this._pageIndex=n,this._pageInfo=f,this._transport=T,this._stats=l?new _display_utils.StatTimer:null,this._pdfBug=l,this.commonObjs=T.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:n,rotation:f=this.rotate,offsetX:T=0,offsetY:l=0,dontFlip:I=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:n,rotation:f,offsetX:T,offsetY:l,dontFlip:I})}getAnnotations({intent:n="display"}={}){const f=this._transport.getRenderingIntent(n);return this._transport.getAnnotations(this._pageIndex,f.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var n;return((n=this._transport._htmlForXfa)==null?void 0:n.children[this._pageIndex])||null}render({canvasContext:n,viewport:f,intent:T="display",annotationMode:l=_util.AnnotationMode.ENABLE,transform:I=null,background:K=null,optionalContentConfigPromise:le=null,annotationCanvasMap:H=null,pageColors:ee=null,printAnnotationStorage:ae=null}){var J,A,C;if((J=arguments[0])!=null&&J.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(A=this._stats)==null||A.time("Overall");const te=this._transport.getRenderingIntent(T,l,ae);_e(this,P,!1),Z(this,G,mt).call(this),le||(le=this._transport.getOptionalContentConfig());let ge=this._intentStates.get(te.cacheKey);ge||(ge=Object.create(null),this._intentStates.set(te.cacheKey,ge)),ge.streamReaderCancelTimeout&&(clearTimeout(ge.streamReaderCancelTimeout),ge.streamReaderCancelTimeout=null);const ye=!!(te.renderingIntent&_util.RenderingIntentFlag.PRINT);ge.displayReadyCapability||(ge.displayReadyCapability=new _util.PromiseCapability,ge.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(C=this._stats)==null||C.time("Page Request"),this._pumpOperatorList(te));const Q=F=>{var Y,j;ge.renderTasks.delete(Ce),(this._maybeCleanupAfterRender||ye)&&_e(this,P,!0),Z(this,O,nt).call(this,!ye),F?(Ce.capability.reject(F),this._abortOperatorList({intentState:ge,reason:F instanceof Error?F:new Error(F)})):Ce.capability.resolve(),(Y=this._stats)==null||Y.timeEnd("Rendering"),(j=this._stats)==null||j.timeEnd("Overall")},Ce=new InternalRenderTask({callback:Q,params:{canvasContext:n,viewport:f,transform:I,background:K},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:H,operatorList:ge.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!ye,pdfBug:this._pdfBug,pageColors:ee});(ge.renderTasks||(ge.renderTasks=new Set)).add(Ce);const Ee=Ce.task;return Promise.all([ge.displayReadyCapability.promise,le]).then(([F,Y])=>{var j;if(c(this,P)){Q();return}(j=this._stats)==null||j.time("Rendering"),Ce.initializeGraphics({transparency:F,optionalContentConfig:Y}),Ce.operatorListChanged()}).catch(Q),Ee}getOperatorList({intent:n="display",annotationMode:f=_util.AnnotationMode.ENABLE,printAnnotationStorage:T=null}={}){var H;function l(){K.operatorList.lastChunk&&(K.opListReadCapability.resolve(K.operatorList),K.renderTasks.delete(le))}const I=this._transport.getRenderingIntent(n,f,T,!0);let K=this._intentStates.get(I.cacheKey);K||(K=Object.create(null),this._intentStates.set(I.cacheKey,K));let le;return K.opListReadCapability||(le=Object.create(null),le.operatorListChanged=l,K.opListReadCapability=new _util.PromiseCapability,(K.renderTasks||(K.renderTasks=new Set)).add(le),K.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(H=this._stats)==null||H.time("Page Request"),this._pumpOperatorList(I)),K.opListReadCapability.promise}streamTextContent({includeMarkedContent:n=!1,disableNormalization:f=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:n===!0,disableNormalization:f===!0},{highWaterMark:100,size(l){return l.items.length}})}getTextContent(n={}){if(this._transport._htmlForXfa)return this.getXfa().then(T=>_xfa_text.XfaText.textContent(T));const f=this.streamTextContent(n);return new Promise(function(T,l){function I(){K.read().then(function({value:H,done:ee}){if(ee){T(le);return}Object.assign(le.styles,H.styles),le.items.push(...H.items),I()},l)}const K=f.getReader(),le={items:[],styles:Object.create(null)};I()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const n=[];for(const f of this._intentStates.values())if(this._abortOperatorList({intentState:f,reason:new Error("Page was destroyed."),force:!0}),!f.opListReadCapability)for(const T of f.renderTasks)n.push(T.completed),T.cancel();return this.objs.clear(),_e(this,P,!1),Z(this,G,mt).call(this),Promise.all(n)}cleanup(n=!1){_e(this,P,!0);const f=Z(this,O,nt).call(this,!1);return n&&f&&this._stats&&(this._stats=new _display_utils.StatTimer),f}_startRenderPage(n,f){var l,I;const T=this._intentStates.get(f);T&&((l=this._stats)==null||l.timeEnd("Page Request"),(I=T.displayReadyCapability)==null||I.resolve(n))}_renderPageChunk(n,f){for(let T=0,l=n.length;T<l;T++)f.operatorList.fnArray.push(n.fnArray[T]),f.operatorList.argsArray.push(n.argsArray[T]);f.operatorList.lastChunk=n.lastChunk,f.operatorList.separateAnnots=n.separateAnnots;for(const T of f.renderTasks)T.operatorListChanged();n.lastChunk&&Z(this,O,nt).call(this,!0)}_pumpOperatorList({renderingIntent:n,cacheKey:f,annotationStorageMap:T}){const I=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:n,cacheKey:f,annotationStorage:T}).getReader(),K=this._intentStates.get(f);K.streamReader=I;const le=()=>{I.read().then(({value:H,done:ee})=>{if(ee){K.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(H,K),le())},H=>{if(K.streamReader=null,!this._transport.destroyed){if(K.operatorList){K.operatorList.lastChunk=!0;for(const ee of K.renderTasks)ee.operatorListChanged();Z(this,O,nt).call(this,!0)}if(K.displayReadyCapability)K.displayReadyCapability.reject(H);else if(K.opListReadCapability)K.opListReadCapability.reject(H);else throw H}})};le()}_abortOperatorList({intentState:n,reason:f,force:T=!1}){if(n.streamReader){if(n.streamReaderCancelTimeout&&(clearTimeout(n.streamReaderCancelTimeout),n.streamReaderCancelTimeout=null),!T){if(n.renderTasks.size>0)return;if(f instanceof _display_utils.RenderingCancelledException){let l=RENDERING_CANCELLED_TIMEOUT;f.extraDelay>0&&f.extraDelay<1e3&&(l+=f.extraDelay),n.streamReaderCancelTimeout=setTimeout(()=>{n.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:n,reason:f,force:!0})},l);return}}if(n.streamReader.cancel(new _util.AbortException(f.message)).catch(()=>{}),n.streamReader=null,!this._transport.destroyed){for(const[l,I]of this._intentStates)if(I===n){this._intentStates.delete(l);break}this.cleanup()}}}get stats(){return this._stats}}X=new WeakMap,P=new WeakMap,O=new WeakSet,nt=function(n=!1){if(Z(this,G,mt).call(this),!c(this,P))return!1;if(n)return _e(this,X,setTimeout(()=>{_e(this,X,null),Z(this,O,nt).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:f,operatorList:T}of this._intentStates.values())if(f.size>0||!T.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),_e(this,P,!1),!0},G=new WeakSet,mt=function(){c(this,X)&&(clearTimeout(c(this,X)),_e(this,X,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){$(this,N,new Set);$(this,b,Promise.resolve())}postMessage(n,f){const T={data:structuredClone(n,f?{transfer:f}:null)};c(this,b).then(()=>{for(const l of c(this,N))l.call(this,T)})}addEventListener(n,f){c(this,N).add(f)}removeEventListener(n,f){c(this,N).delete(f)}terminate(){c(this,N).clear()}}N=new WeakMap,b=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const s=(d=document==null?void 0:document.currentScript)==null?void 0:d.src;s&&(PDFWorkerUtil.fallbackWorkerSrc=s.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(s,n){let f;try{if(f=new URL(s),!f.origin||f.origin==="null")return!1}catch{return!1}const T=new URL(n,f);return f.origin===T.origin},PDFWorkerUtil.createCDNWrapper=function(s){const n=`importScripts("${s}");`;return URL.createObjectURL(new Blob([n]))}}const _PDFWorker=class{constructor({name:s=null,port:n=null,verbosity:f=(0,_util.getVerbosityLevel)()}={}){if(n&&c(_PDFWorker,k).has(n))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=s,this.destroyed=!1,this.verbosity=f,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,n){c(_PDFWorker,k).set(n,this),this._initializeFromPort(n);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(s){this._port=s,this._messageHandler=new _message_handler.MessageHandler("main","worker",s),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:s}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,s)||(s=PDFWorkerUtil.createCDNWrapper(new URL(s,window.location).href));const n=new Worker(s),f=new _message_handler.MessageHandler("main","worker",n),T=()=>{n.removeEventListener("error",l),f.destroy(),n.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},l=()=>{this._webWorker||T()};n.addEventListener("error",l),f.on("test",K=>{if(n.removeEventListener("error",l),this.destroyed){T();return}K?(this._messageHandler=f,this._port=n,this._webWorker=n,this._readyCapability.resolve(),f.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),f.destroy(),n.terminate())}),f.on("ready",K=>{if(n.removeEventListener("error",l),this.destroyed){T();return}try{I()}catch{this._setupFakeWorker()}});const I=()=>{const K=new Uint8Array;f.send("test",K,[K.buffer])};I();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(s=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const n=new LoopbackPort;this._port=n;const f=`fake${PDFWorkerUtil.fakeWorkerId++}`,T=new _message_handler.MessageHandler(f+"_worker",f,n);s.setup(T,n);const l=new _message_handler.MessageHandler(f,f+"_worker",n);this._messageHandler=l,this._readyCapability.resolve(),l.send("configure",{verbosity:this.verbosity})}).catch(s=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${s.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),c(_PDFWorker,k).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(s){if(!(s!=null&&s.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return c(this,k).has(s.port)?c(this,k).get(s.port):new _PDFWorker(s)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var s;try{return((s=globalThis.pdfjsWorker)==null?void 0:s.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;k=new WeakMap,$(PDFWorker,k,new WeakMap),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(n,f,T,l,I){$(this,h);$(this,w,new Map);$(this,y,new Map);$(this,r,new Map);this.messageHandler=n,this.loadingTask=f,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:l.ownerDocument,styleElement:l.styleElement}),this._params=l,this.canvasFactory=I.canvasFactory,this.filterFactory=I.filterFactory,this.cMapReaderFactory=I.cMapReaderFactory,this.standardFontDataFactory=I.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=T,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(n,f=_util.AnnotationMode.ENABLE,T=null,l=!1){let I=_util.RenderingIntentFlag.DISPLAY,K=null;switch(n){case"any":I=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":I=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${n}`)}switch(f){case _util.AnnotationMode.DISABLE:I+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:I+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:I+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,K=(I&_util.RenderingIntentFlag.PRINT&&T instanceof _annotation_storage.PrintAnnotationStorage?T:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${f}`)}return l&&(I+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:I,cacheKey:`${I}_${_annotation_storage.AnnotationStorage.getHash(K)}`,annotationStorageMap:K}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const n=[];for(const T of c(this,y).values())n.push(T._destroy());c(this,y).clear(),c(this,r).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const f=this.messageHandler.sendWithPromise("Terminate",null);return n.push(f),Promise.all(n).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),c(this,w).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:n,loadingTask:f}=this;n.on("GetReader",(T,l)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=I=>{this._lastProgress={loaded:I.loaded,total:I.total}},l.onPull=()=>{this._fullReader.read().then(function({value:I,done:K}){if(K){l.close();return}(0,_util.assert)(I instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),l.enqueue(new Uint8Array(I),1,[I])}).catch(I=>{l.error(I)})},l.onCancel=I=>{this._fullReader.cancel(I),l.ready.catch(K=>{if(!this.destroyed)throw K})}}),n.on("ReaderHeadersReady",T=>{const l=new _util.PromiseCapability,I=this._fullReader;return I.headersReady.then(()=>{var K;(!I.isStreamingSupported||!I.isRangeSupported)&&(this._lastProgress&&((K=f.onProgress)==null||K.call(f,this._lastProgress)),I.onProgress=le=>{var H;(H=f.onProgress)==null||H.call(f,{loaded:le.loaded,total:le.total})}),l.resolve({isStreamingSupported:I.isStreamingSupported,isRangeSupported:I.isRangeSupported,contentLength:I.contentLength})},l.reject),l.promise}),n.on("GetRangeReader",(T,l)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const I=this._networkStream.getRangeReader(T.begin,T.end);if(!I){l.close();return}l.onPull=()=>{I.read().then(function({value:K,done:le}){if(le){l.close();return}(0,_util.assert)(K instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),l.enqueue(new Uint8Array(K),1,[K])}).catch(K=>{l.error(K)})},l.onCancel=K=>{I.cancel(K),l.ready.catch(le=>{if(!this.destroyed)throw le})}}),n.on("GetDoc",({pdfInfo:T})=>{this._numPages=T.numPages,this._htmlForXfa=T.htmlForXfa,delete T.htmlForXfa,f._capability.resolve(new PDFDocumentProxy(T,this))}),n.on("DocException",function(T){let l;switch(T.name){case"PasswordException":l=new _util.PasswordException(T.message,T.code);break;case"InvalidPDFException":l=new _util.InvalidPDFException(T.message);break;case"MissingPDFException":l=new _util.MissingPDFException(T.message);break;case"UnexpectedResponseException":l=new _util.UnexpectedResponseException(T.message,T.status);break;case"UnknownErrorException":l=new _util.UnknownErrorException(T.message,T.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}f._capability.reject(l)}),n.on("PasswordRequest",T=>{if(this._passwordCapability=new _util.PromiseCapability,f.onPassword){const l=I=>{I instanceof Error?this._passwordCapability.reject(I):this._passwordCapability.resolve({password:I})};try{f.onPassword(l,T.code)}catch(I){this._passwordCapability.reject(I)}}else this._passwordCapability.reject(new _util.PasswordException(T.message,T.code));return this._passwordCapability.promise}),n.on("DataLoaded",T=>{var l;(l=f.onProgress)==null||l.call(f,{loaded:T.length,total:T.length}),this.downloadInfoCapability.resolve(T)}),n.on("StartRenderPage",T=>{if(this.destroyed)return;c(this,y).get(T.pageIndex)._startRenderPage(T.transparency,T.cacheKey)}),n.on("commonobj",([T,l,I])=>{var K;if(!this.destroyed&&!this.commonObjs.has(T))switch(l){case"Font":const le=this._params;if("error"in I){const ae=I.error;(0,_util.warn)(`Error during font loading: ${ae}`),this.commonObjs.resolve(T,ae);break}const H=le.pdfBug&&((K=globalThis.FontInspector)!=null&&K.enabled)?(ae,te)=>globalThis.FontInspector.fontAdded(ae,te):null,ee=new _font_loader.FontFaceObject(I,{isEvalSupported:le.isEvalSupported,disableFontFace:le.disableFontFace,ignoreErrors:le.ignoreErrors,inspectFont:H});this.fontLoader.bind(ee).catch(ae=>n.sendWithPromise("FontFallback",{id:T})).finally(()=>{!le.fontExtraProperties&&ee.data&&(ee.data=null),this.commonObjs.resolve(T,ee)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(T,I);break;default:throw new Error(`Got unknown common object type ${l}`)}}),n.on("obj",([T,l,I,K])=>{var H;if(this.destroyed)return;const le=c(this,y).get(l);if(!le.objs.has(T))switch(I){case"Image":if(le.objs.resolve(T,K),K){let ee;if(K.bitmap){const{width:ae,height:te}=K;ee=ae*te*4}else ee=((H=K.data)==null?void 0:H.length)||0;ee>_util.MAX_IMAGE_SIZE_TO_CACHE&&(le._maybeCleanupAfterRender=!0)}break;case"Pattern":le.objs.resolve(T,K);break;default:throw new Error(`Got unknown object type ${I}`)}}),n.on("DocProgress",T=>{var l;this.destroyed||(l=f.onProgress)==null||l.call(f,{loaded:T.loaded,total:T.total})}),n.on("FetchBuiltInCMap",T=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(T):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),n.on("FetchStandardFontData",T=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(T):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((n=this._fullReader)==null?void 0:n.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(n){if(!Number.isInteger(n)||n<=0||n>this._numPages)return Promise.reject(new Error("Invalid page request."));const f=n-1,T=c(this,r).get(f);if(T)return T;const l=this.messageHandler.sendWithPromise("GetPage",{pageIndex:f}).then(I=>{if(this.destroyed)throw new Error("Transport destroyed");const K=new PDFPageProxy(f,I,this,this._params.pdfBug);return c(this,y).set(f,K),K});return c(this,r).set(f,l),l}getPageIndex(n){return typeof n!="object"||n===null||!Number.isInteger(n.num)||n.num<0||!Number.isInteger(n.gen)||n.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:n.num,gen:n.gen})}getAnnotations(n,f){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:n,intent:f})}getFieldObjects(){return Z(this,h,xt).call(this,"GetFieldObjects")}hasJSActions(){return Z(this,h,xt).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(n){return typeof n!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:n})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(n){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:n})}getStructTree(n){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:n})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(n=>new _optional_content_config.OptionalContentConfig(n))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const n="GetMetadata",f=c(this,w).get(n);if(f)return f;const T=this.messageHandler.sendWithPromise(n,null).then(l=>{var I,K;return{info:l[0],metadata:l[1]?new _metadata.Metadata(l[1]):null,contentDispositionFilename:((I=this._fullReader)==null?void 0:I.filename)??null,contentLength:((K=this._fullReader)==null?void 0:K.contentLength)??null}});return c(this,w).set(n,T),T}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(n=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const f of c(this,y).values())if(!f.cleanup())throw new Error(`startCleanup: Page ${f.pageNumber} is currently rendering.`);this.commonObjs.clear(),n||this.fontLoader.clear(),c(this,w).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:n,enableXfa:f}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:n,enableXfa:f})}}w=new WeakMap,y=new WeakMap,r=new WeakMap,h=new WeakSet,xt=function(n,f=null){const T=c(this,w).get(n);if(T)return T;const l=this.messageHandler.sendWithPromise(n,f);return c(this,w).set(n,l),l};class PDFObjects{constructor(){$(this,_);$(this,g,Object.create(null))}get(n,f=null){if(f){const l=Z(this,_,Mt).call(this,n);return l.capability.promise.then(()=>f(l.data)),null}const T=c(this,g)[n];if(!(T!=null&&T.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${n}.`);return T.data}has(n){const f=c(this,g)[n];return(f==null?void 0:f.capability.settled)||!1}resolve(n,f=null){const T=Z(this,_,Mt).call(this,n);T.data=f,T.capability.resolve()}clear(){var n;for(const f in c(this,g)){const{data:T}=c(this,g)[f];(n=T==null?void 0:T.bitmap)==null||n.close()}_e(this,g,Object.create(null))}}g=new WeakMap,_=new WeakSet,Mt=function(n){const f=c(this,g)[n];return f||(c(this,g)[n]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(n){$(this,p,null);_e(this,p,n),this.onContinue=null}get promise(){return c(this,p).capability.promise}cancel(n=0){c(this,p).cancel(null,n)}get separateAnnots(){const{separateAnnots:n}=c(this,p).operatorList;if(!n)return!1;const{annotationCanvasMap:f}=c(this,p);return n.form||n.canvas&&(f==null?void 0:f.size)>0}}p=new WeakMap,exports.RenderTask=RenderTask;const e=class{constructor({callback:n,params:f,objs:T,commonObjs:l,annotationCanvasMap:I,operatorList:K,pageIndex:le,canvasFactory:H,filterFactory:ee,useRequestAnimationFrame:ae=!1,pdfBug:te=!1,pageColors:ge=null}){this.callback=n,this.params=f,this.objs=T,this.commonObjs=l,this.annotationCanvasMap=I,this.operatorListIdx=null,this.operatorList=K,this._pageIndex=le,this.canvasFactory=H,this.filterFactory=ee,this._pdfBug=te,this.pageColors=ge,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=ae===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=f.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:n=!1,optionalContentConfig:f}){var le,H;if(this.cancelled)return;if(this._canvas){if(c(e,t).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(e,t).add(this._canvas)}this._pdfBug&&((le=globalThis.StepperManager)!=null&&le.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:T,viewport:l,transform:I,background:K}=this.params;this.gfx=new _canvas.CanvasGraphics(T,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:f},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:I,viewport:l,transparency:n,background:K}),this.operatorListIdx=0,this.graphicsReady=!0,(H=this.graphicsReadyCallback)==null||H.call(this)}cancel(n=null,f=0){var T;this.running=!1,this.cancelled=!0,(T=this.gfx)==null||T.endDrawing(),this._canvas&&c(e,t).delete(this._canvas),this.callback(n||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",f))}operatorListChanged(){var n;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(n=this.stepper)==null||n.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&c(e,t).delete(this._canvas),this.callback())))}};let InternalRenderTask=e;t=new WeakMap,$(InternalRenderTask,t,new WeakSet);const version="3.6.172";exports.version=version;const build="4d3dfe254";exports.build=build},(x,o,X)=>{var N,b,d,bi,w;Object.defineProperty(o,"__esModule",{value:!0}),o.PrintAnnotationStorage=o.AnnotationStorage=void 0;var P=X(1),O=X(4),pe=X(8);class G{constructor(){$(this,d);$(this,N,!1);$(this,b,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(r,h){const a=c(this,b).get(r);return a===void 0?h:Object.assign(h,a)}getRawValue(r){return c(this,b).get(r)}remove(r){if(c(this,b).delete(r),c(this,b).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const h of c(this,b).values())if(h instanceof O.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(r,h){const a=c(this,b).get(r);let g=!1;if(a!==void 0)for(const[_,v]of Object.entries(h))a[_]!==v&&(g=!0,a[_]=v);else g=!0,c(this,b).set(r,h);g&&Z(this,d,bi).call(this),h instanceof O.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(h.constructor._type)}has(r){return c(this,b).has(r)}getAll(){return c(this,b).size>0?(0,P.objectFromMap)(c(this,b)):null}setAll(r){for(const[h,a]of Object.entries(r))this.setValue(h,a)}get size(){return c(this,b).size}resetModified(){c(this,N)&&(_e(this,N,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new D(this)}get serializable(){if(c(this,b).size===0)return null;const r=new Map;for(const[h,a]of c(this,b)){const g=a instanceof O.AnnotationEditor?a.serialize():a;g&&r.set(h,g)}return r}static getHash(r){if(!r)return"";const h=new pe.MurmurHash3_64;for(const[a,g]of r)h.update(`${a}:${JSON.stringify(g)}`);return h.hexdigest()}}N=new WeakMap,b=new WeakMap,d=new WeakSet,bi=function(){c(this,N)||(_e(this,N,!0),typeof this.onSetModified=="function"&&this.onSetModified())},o.AnnotationStorage=G;class D extends G{constructor(h){super();$(this,w,null);_e(this,w,structuredClone(h.serializable))}get print(){(0,P.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,w)}}w=new WeakMap,o.PrintAnnotationStorage=D},(x,o,X)=>{var G,D,N,b,d,k;Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationEditor=void 0;var P=X(5),O=X(1);const w=class{constructor(r){$(this,G,this.focusin.bind(this));$(this,D,this.focusout.bind(this));$(this,N,!1);$(this,b,!1);$(this,d,!1);je(this,"_uiManager",null);$(this,k,w._zIndex++);this.constructor===w&&(0,O.unreachable)("Cannot initialize AnnotationEditor."),this.parent=r.parent,this.id=r.id,this.width=this.height=null,this.pageIndex=r.parent.pageIndex,this.name=r.name,this.div=null,this._uiManager=r.uiManager;const{rotation:h,rawDims:{pageWidth:a,pageHeight:g,pageX:_,pageY:v}}=this.parent.viewport;this.rotation=h,this.pageRotation=(360+h-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[a,g],this.pageTranslation=[_,v];const[p,t]=this.parentDimensions;this.x=r.x/p,this.y=r.y/t,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,O.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(r){this._uiManager.addCommands(r)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,k)}setParent(r){r!==null&&(this.pageIndex=r.pageIndex,this.pageDimensions=r.pageDimensions),this.parent=r}focusin(r){c(this,N)?_e(this,N,!1):this.parent.setSelected(this)}focusout(r){var a;if(!this.isAttachedToDOM)return;const h=r.relatedTarget;h!=null&&h.closest(`#${this.id}`)||(r.preventDefault(),(a=this.parent)!=null&&a.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(r){const h=this.parent.div.getBoundingClientRect();this.startX=r.clientX-h.x,this.startY=r.clientY-h.y,r.dataTransfer.setData("text/plain",this.id),r.dataTransfer.effectAllowed="move"}setAt(r,h,a,g){const[_,v]=this.parentDimensions;[a,g]=this.screenToPageTranslation(a,g),this.x=(r+a)/_,this.y=(h+g)/v,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(r,h){const[a,g]=this.parentDimensions;[r,h]=this.screenToPageTranslation(r,h),this.x+=r/a,this.y+=h/g,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(r,h){switch(this.parentRotation){case 90:return[h,-r];case 180:return[-r,-h];case 270:return[-h,r];default:return[r,h]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:r}=this._uiManager.viewParameters,[h,a]=this.pageDimensions;return[h*r,a*r]}setDims(r,h){const[a,g]=this.parentDimensions;this.div.style.width=`${100*r/a}%`,this.div.style.height=`${100*h/g}%`}fixDims(){const{style:r}=this.div,{height:h,width:a}=r,g=a.endsWith("%"),_=h.endsWith("%");if(g&&_)return;const[v,p]=this.parentDimensions;g||(r.width=`${100*parseFloat(a)/v}%`),_||(r.height=`${100*parseFloat(h)/p}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",c(this,G)),this.div.addEventListener("focusout",c(this,D));const[r,h]=this.getInitialTranslation();return this.translate(r,h),(0,P.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(r){const{isMac:h}=O.FeatureTest.platform;if(r.button!==0||r.ctrlKey&&h){r.preventDefault();return}r.ctrlKey&&!h||r.shiftKey||r.metaKey&&h?this.parent.toggleSelected(this):this.parent.setSelected(this),_e(this,N,!0)}getRect(r,h){const a=this.parentScale,[g,_]=this.pageDimensions,[v,p]=this.pageTranslation,t=r/a,e=h/a,s=this.x*g,n=this.y*_,f=this.width*g,T=this.height*_;switch(this.rotation){case 0:return[s+t+v,_-n-e-T+p,s+t+f+v,_-n-e+p];case 90:return[s+e+v,_-n+t+p,s+e+T+v,_-n+t+f+p];case 180:return[s-t-f+v,_-n+e+p,s-t+v,_-n+e+T+p];case 270:return[s-e-T+v,_-n-t-f+p,s-e+v,_-n-t+p];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(r,h){const[a,g,_,v]=r,p=_-a,t=v-g;switch(this.rotation){case 0:return[a,h-v,p,t];case 90:return[a,h-g,t,p];case 180:return[_,h-g,p,t];case 270:return[_,h-v,t,p];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){_e(this,d,!0)}disableEditMode(){_e(this,d,!1)}isInEditMode(){return c(this,d)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var r;(r=this.div)==null||r.addEventListener("focusin",c(this,G))}serialize(){(0,O.unreachable)("An editor must be serializable")}static deserialize(r,h,a){const g=new this.prototype.constructor({parent:h,id:h.getNextId(),uiManager:a});g.rotation=r.rotation;const[_,v]=g.pageDimensions,[p,t,e,s]=g.getRectInCurrentCoords(r.rect,v);return g.x=p/_,g.y=t/v,g.width=e/_,g.height=s/v,g}remove(){this.div.removeEventListener("focusin",c(this,G)),this.div.removeEventListener("focusout",c(this,D)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var r;(r=this.div)==null||r.classList.add("selectedEditor")}unselect(){var r;(r=this.div)==null||r.classList.remove("selectedEditor")}updateParams(r,h){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return c(this,b)}set isEditing(r){_e(this,b,r),r?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let pe=w;G=new WeakMap,D=new WeakMap,N=new WeakMap,b=new WeakMap,d=new WeakMap,k=new WeakMap,je(pe,"_colorManager",new P.ColorManager),je(pe,"_zIndex",1),o.AnnotationEditor=pe},(x,o,X)=>{var w,y,r,h,a,g,vi,p,t,e,s,n,f,T,l,I,K,le,H,ee,ae,te,ge,ye,Q,Ce,Ee,J,A,C,F,yi,j,Rt,U,Ai,z,Si,u,Ke,R,ct,W,Ei,B,Pi,ce,Lt,ue,ht,ve,kt;Object.defineProperty(o,"__esModule",{value:!0}),o.KeyboardManager=o.CommandManager=o.ColorManager=o.AnnotationEditorUIManager=void 0,o.bindEvents=pe,o.opacityToHex=G;var P=X(1),O=X(6);function pe(Re,oe,we){for(const Me of we)oe.addEventListener(Me,Re[Me].bind(Re))}function G(Re){return Math.round(Math.min(255,Math.max(1,255*Re))).toString(16).padStart(2,"0")}class D{constructor(){$(this,w,0)}getId(){return`${P.AnnotationEditorPrefix}${lt(this,w)._++}`}}w=new WeakMap;class N{constructor(oe=128){$(this,y,[]);$(this,r,!1);$(this,h,void 0);$(this,a,-1);_e(this,h,oe)}add({cmd:oe,undo:we,mustExec:Me,type:Oe=NaN,overwriteIfSameType:E=!1,keepUndo:m=!1}){if(Me&&oe(),c(this,r))return;const M={cmd:oe,undo:we,type:Oe};if(c(this,a)===-1){c(this,y).length>0&&(c(this,y).length=0),_e(this,a,0),c(this,y).push(M);return}if(E&&c(this,y)[c(this,a)].type===Oe){m&&(M.undo=c(this,y)[c(this,a)].undo),c(this,y)[c(this,a)]=M;return}const ie=c(this,a)+1;ie===c(this,h)?c(this,y).splice(0,1):(_e(this,a,ie),ie<c(this,y).length&&c(this,y).splice(ie)),c(this,y).push(M)}undo(){c(this,a)!==-1&&(_e(this,r,!0),c(this,y)[c(this,a)].undo(),_e(this,r,!1),_e(this,a,c(this,a)-1))}redo(){c(this,a)<c(this,y).length-1&&(_e(this,a,c(this,a)+1),_e(this,r,!0),c(this,y)[c(this,a)].cmd(),_e(this,r,!1))}hasSomethingToUndo(){return c(this,a)!==-1}hasSomethingToRedo(){return c(this,a)<c(this,y).length-1}destroy(){_e(this,y,null)}}y=new WeakMap,r=new WeakMap,h=new WeakMap,a=new WeakMap,o.CommandManager=N;class b{constructor(oe){$(this,g);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:we}=P.FeatureTest.platform;for(const[Me,Oe]of oe)for(const E of Me){const m=E.startsWith("mac+");we&&m?(this.callbacks.set(E.slice(4),Oe),this.allKeys.add(E.split("+").at(-1))):!we&&!m&&(this.callbacks.set(E,Oe),this.allKeys.add(E.split("+").at(-1)))}}exec(oe,we){if(!this.allKeys.has(we.key))return;const Me=this.callbacks.get(Z(this,g,vi).call(this,we));Me&&(Me.bind(oe)(),we.stopPropagation(),we.preventDefault())}}g=new WeakSet,vi=function(oe){oe.altKey&&this.buffer.push("alt"),oe.ctrlKey&&this.buffer.push("ctrl"),oe.metaKey&&this.buffer.push("meta"),oe.shiftKey&&this.buffer.push("shift"),this.buffer.push(oe.key);const we=this.buffer.join("+");return this.buffer.length=0,we},o.KeyboardManager=b;const v=class{get _colors(){const oe=new Map([["CanvasText",null],["Canvas",null]]);return(0,O.getColorValues)(oe),(0,P.shadow)(this,"_colors",oe)}convert(oe){const we=(0,O.getRGB)(oe);if(!window.matchMedia("(forced-colors: active)").matches)return we;for(const[Me,Oe]of this._colors)if(Oe.every((E,m)=>E===we[m]))return v._colorsMapping.get(Me);return we}getHexCode(oe){const we=this._colors.get(oe);return we?P.Util.makeHexColor(...we):oe}};let d=v;je(d,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),o.ColorManager=d;const Pe=class{constructor(oe,we,Me){$(this,F);$(this,j);$(this,U);$(this,z);$(this,u);$(this,R);$(this,W);$(this,B);$(this,ce);$(this,ue);$(this,ve);$(this,p,null);$(this,t,new Map);$(this,e,new Map);$(this,s,null);$(this,n,new N);$(this,f,0);$(this,T,null);$(this,l,new Set);$(this,I,null);$(this,K,new D);$(this,le,!1);$(this,H,P.AnnotationEditorType.NONE);$(this,ee,new Set);$(this,ae,this.copy.bind(this));$(this,te,this.cut.bind(this));$(this,ge,this.paste.bind(this));$(this,ye,this.keydown.bind(this));$(this,Q,this.onEditingAction.bind(this));$(this,Ce,this.onPageChanging.bind(this));$(this,Ee,this.onScaleChanging.bind(this));$(this,J,this.onRotationChanging.bind(this));$(this,A,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});$(this,C,null);_e(this,C,oe),_e(this,I,we),c(this,I)._on("editingaction",c(this,Q)),c(this,I)._on("pagechanging",c(this,Ce)),c(this,I)._on("scalechanging",c(this,Ee)),c(this,I)._on("rotationchanging",c(this,J)),_e(this,s,Me),this.viewParameters={realScale:O.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){Z(this,j,Rt).call(this),c(this,I)._off("editingaction",c(this,Q)),c(this,I)._off("pagechanging",c(this,Ce)),c(this,I)._off("scalechanging",c(this,Ee)),c(this,I)._off("rotationchanging",c(this,J));for(const oe of c(this,e).values())oe.destroy();c(this,e).clear(),c(this,t).clear(),c(this,l).clear(),_e(this,p,null),c(this,ee).clear(),c(this,n).destroy()}onPageChanging({pageNumber:oe}){_e(this,f,oe-1)}focusMainContainer(){c(this,C).focus()}addShouldRescale(oe){c(this,l).add(oe)}removeShouldRescale(oe){c(this,l).delete(oe)}onScaleChanging({scale:oe}){this.commitOrRemove(),this.viewParameters.realScale=oe*O.PixelsPerInch.PDF_TO_CSS_UNITS;for(const we of c(this,l))we.onScaleChanging()}onRotationChanging({pagesRotation:oe}){this.commitOrRemove(),this.viewParameters.rotation=oe}addToAnnotationStorage(oe){!oe.isEmpty()&&c(this,s)&&!c(this,s).has(oe.id)&&c(this,s).setValue(oe.id,oe)}copy(oe){if(oe.preventDefault(),c(this,p)&&c(this,p).commitOrRemove(),!this.hasSelection)return;const we=[];for(const Me of c(this,ee))Me.isEmpty()||we.push(Me.serialize());we.length!==0&&oe.clipboardData.setData("application/pdfjs",JSON.stringify(we))}cut(oe){this.copy(oe),this.delete()}paste(oe){oe.preventDefault();let we=oe.clipboardData.getData("application/pdfjs");if(!we)return;try{we=JSON.parse(we)}catch(Oe){(0,P.warn)(`paste: "${Oe.message}".`);return}if(!Array.isArray(we))return;this.unselectAll();const Me=c(this,e).get(c(this,f));try{const Oe=[];for(const M of we){const ie=Me.deserialize(M);if(!ie)return;Oe.push(ie)}const E=()=>{for(const M of Oe)Z(this,ce,Lt).call(this,M);Z(this,ve,kt).call(this,Oe)},m=()=>{for(const M of Oe)M.remove()};this.addCommands({cmd:E,undo:m,mustExec:!0})}catch(Oe){(0,P.warn)(`paste: "${Oe.message}".`)}}keydown(oe){var we;(we=this.getActive())!=null&&we.shouldGetKeyboardEvents()||Pe._keyboardManager.exec(this,oe)}onEditingAction(oe){["undo","redo","delete","selectAll"].includes(oe.name)&&this[oe.name]()}setEditingState(oe){oe?(Z(this,F,yi).call(this),Z(this,U,Ai).call(this),Z(this,u,Ke).call(this,{isEditing:c(this,H)!==P.AnnotationEditorType.NONE,isEmpty:Z(this,ue,ht).call(this),hasSomethingToUndo:c(this,n).hasSomethingToUndo(),hasSomethingToRedo:c(this,n).hasSomethingToRedo(),hasSelectedEditor:!1})):(Z(this,j,Rt).call(this),Z(this,z,Si).call(this),Z(this,u,Ke).call(this,{isEditing:!1}))}registerEditorTypes(oe){if(!c(this,T)){_e(this,T,oe);for(const we of c(this,T))Z(this,R,ct).call(this,we.defaultPropertiesToUpdate)}}getId(){return c(this,K).getId()}get currentLayer(){return c(this,e).get(c(this,f))}get currentPageIndex(){return c(this,f)}addLayer(oe){c(this,e).set(oe.pageIndex,oe),c(this,le)?oe.enable():oe.disable()}removeLayer(oe){c(this,e).delete(oe.pageIndex)}updateMode(oe){if(_e(this,H,oe),oe===P.AnnotationEditorType.NONE)this.setEditingState(!1),Z(this,B,Pi).call(this);else{this.setEditingState(!0),Z(this,W,Ei).call(this);for(const we of c(this,e).values())we.updateMode(oe)}}updateToolbar(oe){oe!==c(this,H)&&c(this,I).dispatch("switchannotationeditormode",{source:this,mode:oe})}updateParams(oe,we){if(c(this,T)){for(const Me of c(this,ee))Me.updateParams(oe,we);for(const Me of c(this,T))Me.updateDefaultParams(oe,we)}}getEditors(oe){const we=[];for(const Me of c(this,t).values())Me.pageIndex===oe&&we.push(Me);return we}getEditor(oe){return c(this,t).get(oe)}addEditor(oe){c(this,t).set(oe.id,oe)}removeEditor(oe){var we;c(this,t).delete(oe.id),this.unselect(oe),(we=c(this,s))==null||we.remove(oe.id)}setActiveEditor(oe){c(this,p)!==oe&&(_e(this,p,oe),oe&&Z(this,R,ct).call(this,oe.propertiesToUpdate))}toggleSelected(oe){if(c(this,ee).has(oe)){c(this,ee).delete(oe),oe.unselect(),Z(this,u,Ke).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,ee).add(oe),oe.select(),Z(this,R,ct).call(this,oe.propertiesToUpdate),Z(this,u,Ke).call(this,{hasSelectedEditor:!0})}setSelected(oe){for(const we of c(this,ee))we!==oe&&we.unselect();c(this,ee).clear(),c(this,ee).add(oe),oe.select(),Z(this,R,ct).call(this,oe.propertiesToUpdate),Z(this,u,Ke).call(this,{hasSelectedEditor:!0})}isSelected(oe){return c(this,ee).has(oe)}unselect(oe){oe.unselect(),c(this,ee).delete(oe),Z(this,u,Ke).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,ee).size!==0}undo(){c(this,n).undo(),Z(this,u,Ke).call(this,{hasSomethingToUndo:c(this,n).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Z(this,ue,ht).call(this)})}redo(){c(this,n).redo(),Z(this,u,Ke).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,n).hasSomethingToRedo(),isEmpty:Z(this,ue,ht).call(this)})}addCommands(oe){c(this,n).add(oe),Z(this,u,Ke).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Z(this,ue,ht).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const oe=[...c(this,ee)],we=()=>{for(const Oe of oe)Oe.remove()},Me=()=>{for(const Oe of oe)Z(this,ce,Lt).call(this,Oe)};this.addCommands({cmd:we,undo:Me,mustExec:!0})}commitOrRemove(){var oe;(oe=c(this,p))==null||oe.commitOrRemove()}selectAll(){for(const oe of c(this,ee))oe.commit();Z(this,ve,kt).call(this,c(this,t).values())}unselectAll(){if(c(this,p)){c(this,p).commitOrRemove();return}if(c(this,ee).size!==0){for(const oe of c(this,ee))oe.unselect();c(this,ee).clear(),Z(this,u,Ke).call(this,{hasSelectedEditor:!1})}}isActive(oe){return c(this,p)===oe}getActive(){return c(this,p)}getMode(){return c(this,H)}};let k=Pe;p=new WeakMap,t=new WeakMap,e=new WeakMap,s=new WeakMap,n=new WeakMap,f=new WeakMap,T=new WeakMap,l=new WeakMap,I=new WeakMap,K=new WeakMap,le=new WeakMap,H=new WeakMap,ee=new WeakMap,ae=new WeakMap,te=new WeakMap,ge=new WeakMap,ye=new WeakMap,Q=new WeakMap,Ce=new WeakMap,Ee=new WeakMap,J=new WeakMap,A=new WeakMap,C=new WeakMap,F=new WeakSet,yi=function(){c(this,C).addEventListener("keydown",c(this,ye))},j=new WeakSet,Rt=function(){c(this,C).removeEventListener("keydown",c(this,ye))},U=new WeakSet,Ai=function(){document.addEventListener("copy",c(this,ae)),document.addEventListener("cut",c(this,te)),document.addEventListener("paste",c(this,ge))},z=new WeakSet,Si=function(){document.removeEventListener("copy",c(this,ae)),document.removeEventListener("cut",c(this,te)),document.removeEventListener("paste",c(this,ge))},u=new WeakSet,Ke=function(oe){Object.entries(oe).some(([Me,Oe])=>c(this,A)[Me]!==Oe)&&c(this,I).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,A),oe)})},R=new WeakSet,ct=function(oe){c(this,I).dispatch("annotationeditorparamschanged",{source:this,details:oe})},W=new WeakSet,Ei=function(){if(!c(this,le)){_e(this,le,!0);for(const oe of c(this,e).values())oe.enable()}},B=new WeakSet,Pi=function(){if(this.unselectAll(),c(this,le)){_e(this,le,!1);for(const oe of c(this,e).values())oe.disable()}},ce=new WeakSet,Lt=function(oe){const we=c(this,e).get(oe.pageIndex);we?we.addOrRebuild(oe):this.addEditor(oe)},ue=new WeakSet,ht=function(){if(c(this,t).size===0)return!0;if(c(this,t).size===1)for(const oe of c(this,t).values())return oe.isEmpty();return!1},ve=new WeakSet,kt=function(oe){c(this,ee).clear();for(const we of oe)we.isEmpty()||(c(this,ee).add(we),we.select());Z(this,u,Ke).call(this,{hasSelectedEditor:!0})},je(k,"_keyboardManager",new b([[["ctrl+a","mac+meta+a"],Pe.prototype.selectAll],[["ctrl+z","mac+meta+z"],Pe.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],Pe.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],Pe.prototype.delete],[["Escape","mac+Escape"],Pe.prototype.unselectAll]])),o.AnnotationEditorUIManager=k},(x,o,X)=>{var ae,te,ge,ye,Q,Ce,Ee,J,A,st,F,et,j,Ze;Object.defineProperty(o,"__esModule",{value:!0}),o.StatTimer=o.RenderingCancelledException=o.PixelsPerInch=o.PageViewport=o.PDFDateString=o.DOMStandardFontDataFactory=o.DOMSVGFactory=o.DOMFilterFactory=o.DOMCanvasFactory=o.DOMCMapReaderFactory=o.AnnotationPrefix=void 0,o.deprecated=s,o.getColorValues=I,o.getCurrentTransform=K,o.getCurrentTransformInverse=le,o.getFilenameFromUrl=_,o.getPdfFilenameFromUrl=v,o.getRGB=l,o.getXfaPageViewport=T,o.isDataScheme=a,o.isPdfFile=g,o.isValidFetchUrl=t,o.loadScript=e,o.setLayerDimensions=H;var P=X(7),O=X(1);const pe="http://www.w3.org/2000/svg",G="pdfjs_internal_id_";o.AnnotationPrefix=G;const ee=class{};let D=ee;je(D,"CSS",96),je(D,"PDF",72),je(D,"PDF_TO_CSS_UNITS",ee.CSS/ee.PDF),o.PixelsPerInch=D;class N extends P.BaseFilterFactory{constructor({docId:z,ownerDocument:i=globalThis.document}={}){super();$(this,A);$(this,F);$(this,j);$(this,ae,void 0);$(this,te,void 0);$(this,ge,void 0);$(this,ye,void 0);$(this,Q,void 0);$(this,Ce,void 0);$(this,Ee,void 0);$(this,J,0);_e(this,ge,z),_e(this,ye,i)}addFilter(z){if(!z)return"none";let i=c(this,A,st).get(z);if(i)return i;let u,S,R,L;if(z.length===1){const ce=z[0],ne=new Array(256);for(let ue=0;ue<256;ue++)ne[ue]=ce[ue]/255;L=u=S=R=ne.join(",")}else{const[ce,ne,ue]=z,be=new Array(256),ve=new Array(256),xe=new Array(256);for(let Pe=0;Pe<256;Pe++)be[Pe]=ce[Pe]/255,ve[Pe]=ne[Pe]/255,xe[Pe]=ue[Pe]/255;u=be.join(","),S=ve.join(","),R=xe.join(","),L=`${u}${S}${R}`}if(i=c(this,A,st).get(L),i)return c(this,A,st).set(z,i),i;const W=`g_${c(this,ge)}_transfer_map_${lt(this,J)._++}`,me=`url(#${W})`;c(this,A,st).set(z,me),c(this,A,st).set(L,me);const B=c(this,ye).createElementNS(pe,"filter",pe);B.setAttribute("id",W),B.setAttribute("color-interpolation-filters","sRGB");const q=c(this,ye).createElementNS(pe,"feComponentTransfer");return B.append(q),Z(this,j,Ze).call(this,q,"feFuncR",u),Z(this,j,Ze).call(this,q,"feFuncG",S),Z(this,j,Ze).call(this,q,"feFuncB",R),c(this,F,et).append(B),me}addHCMFilter(z,i){var ue;const u=`${z}-${i}`;if(c(this,Ce)===u)return c(this,Ee);if(_e(this,Ce,u),_e(this,Ee,"none"),(ue=c(this,Q))==null||ue.remove(),!z||!i)return c(this,Ee);c(this,F,et).style.color=z,z=getComputedStyle(c(this,F,et)).getPropertyValue("color");const S=l(z);z=O.Util.makeHexColor(...S),c(this,F,et).style.color=i,i=getComputedStyle(c(this,F,et)).getPropertyValue("color");const R=l(i);if(i=O.Util.makeHexColor(...R),c(this,F,et).style.color="",z==="#000000"&&i==="#ffffff"||z===i)return c(this,Ee);const L=new Array(256);for(let be=0;be<=255;be++){const ve=be/255;L[be]=ve<=.03928?ve/12.92:((ve+.055)/1.055)**2.4}const W=L.join(","),me=`g_${c(this,ge)}_hcm_filter`,B=_e(this,Q,c(this,ye).createElementNS(pe,"filter",pe));B.setAttribute("id",me),B.setAttribute("color-interpolation-filters","sRGB");let q=c(this,ye).createElementNS(pe,"feComponentTransfer");B.append(q),Z(this,j,Ze).call(this,q,"feFuncR",W),Z(this,j,Ze).call(this,q,"feFuncG",W),Z(this,j,Ze).call(this,q,"feFuncB",W);const ce=c(this,ye).createElementNS(pe,"feColorMatrix");ce.setAttribute("type","matrix"),ce.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),B.append(ce),q=c(this,ye).createElementNS(pe,"feComponentTransfer"),B.append(q);const ne=(be,ve)=>{const xe=S[be]/255,Pe=R[be]/255,Re=new Array(ve+1);for(let oe=0;oe<=ve;oe++)Re[oe]=xe+oe/ve*(Pe-xe);return Re.join(",")};return Z(this,j,Ze).call(this,q,"feFuncR",ne(0,5)),Z(this,j,Ze).call(this,q,"feFuncG",ne(1,5)),Z(this,j,Ze).call(this,q,"feFuncB",ne(2,5)),c(this,F,et).append(B),_e(this,Ee,`url(#${me})`),c(this,Ee)}destroy(z=!1){z&&c(this,Ee)||(c(this,te)&&(c(this,te).parentNode.parentNode.remove(),_e(this,te,null)),c(this,ae)&&(c(this,ae).clear(),_e(this,ae,null)),_e(this,J,0))}}ae=new WeakMap,te=new WeakMap,ge=new WeakMap,ye=new WeakMap,Q=new WeakMap,Ce=new WeakMap,Ee=new WeakMap,J=new WeakMap,A=new WeakSet,st=function(){return c(this,ae)||_e(this,ae,new Map)},F=new WeakSet,et=function(){if(!c(this,te)){const z=c(this,ye).createElement("div"),{style:i}=z;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const u=c(this,ye).createElementNS(pe,"svg");u.setAttribute("width",0),u.setAttribute("height",0),_e(this,te,c(this,ye).createElementNS(pe,"defs")),z.append(u),u.append(c(this,te)),c(this,ye).body.append(z)}return c(this,te)},j=new WeakSet,Ze=function(z,i,u){const S=c(this,ye).createElementNS(pe,i);S.setAttribute("type","discrete"),S.setAttribute("tableValues",u),z.append(S)},o.DOMFilterFactory=N;class b extends P.BaseCanvasFactory{constructor({ownerDocument:V=globalThis.document}={}){super(),this._document=V}_createCanvas(V,z){const i=this._document.createElement("canvas");return i.width=V,i.height=z,i}}o.DOMCanvasFactory=b;async function d(U,V=!1){if(t(U,document.baseURI)){const z=await fetch(U);if(!z.ok)throw new Error(z.statusText);return V?new Uint8Array(await z.arrayBuffer()):(0,O.stringToBytes)(await z.text())}return new Promise((z,i)=>{const u=new XMLHttpRequest;u.open("GET",U,!0),V&&(u.responseType="arraybuffer"),u.onreadystatechange=()=>{if(u.readyState===XMLHttpRequest.DONE){if(u.status===200||u.status===0){let S;if(V&&u.response?S=new Uint8Array(u.response):!V&&u.responseText&&(S=(0,O.stringToBytes)(u.responseText)),S){z(S);return}}i(new Error(u.statusText))}},u.send(null)})}class k extends P.BaseCMapReaderFactory{_fetchData(V,z){return d(V,this.isCompressed).then(i=>({cMapData:i,compressionType:z}))}}o.DOMCMapReaderFactory=k;class w extends P.BaseStandardFontDataFactory{_fetchData(V){return d(V,!0)}}o.DOMStandardFontDataFactory=w;class y extends P.BaseSVGFactory{_createSVG(V){return document.createElementNS(pe,V)}}o.DOMSVGFactory=y;class r{constructor({viewBox:V,scale:z,rotation:i,offsetX:u=0,offsetY:S=0,dontFlip:R=!1}){this.viewBox=V,this.scale=z,this.rotation=i,this.offsetX=u,this.offsetY=S;const L=(V[2]+V[0])/2,W=(V[3]+V[1])/2;let me,B,q,ce;switch(i%=360,i<0&&(i+=360),i){case 180:me=-1,B=0,q=0,ce=1;break;case 90:me=0,B=1,q=1,ce=0;break;case 270:me=0,B=-1,q=-1,ce=0;break;case 0:me=1,B=0,q=0,ce=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}R&&(q=-q,ce=-ce);let ne,ue,be,ve;me===0?(ne=Math.abs(W-V[1])*z+u,ue=Math.abs(L-V[0])*z+S,be=(V[3]-V[1])*z,ve=(V[2]-V[0])*z):(ne=Math.abs(L-V[0])*z+u,ue=Math.abs(W-V[1])*z+S,be=(V[2]-V[0])*z,ve=(V[3]-V[1])*z),this.transform=[me*z,B*z,q*z,ce*z,ne-me*z*L-q*z*W,ue-B*z*L-ce*z*W],this.width=be,this.height=ve}get rawDims(){const{viewBox:V}=this;return(0,O.shadow)(this,"rawDims",{pageWidth:V[2]-V[0],pageHeight:V[3]-V[1],pageX:V[0],pageY:V[1]})}clone({scale:V=this.scale,rotation:z=this.rotation,offsetX:i=this.offsetX,offsetY:u=this.offsetY,dontFlip:S=!1}={}){return new r({viewBox:this.viewBox.slice(),scale:V,rotation:z,offsetX:i,offsetY:u,dontFlip:S})}convertToViewportPoint(V,z){return O.Util.applyTransform([V,z],this.transform)}convertToViewportRectangle(V){const z=O.Util.applyTransform([V[0],V[1]],this.transform),i=O.Util.applyTransform([V[2],V[3]],this.transform);return[z[0],z[1],i[0],i[1]]}convertToPdfPoint(V,z){return O.Util.applyInverseTransform([V,z],this.transform)}}o.PageViewport=r;class h extends O.BaseException{constructor(V,z,i=0){super(V,"RenderingCancelledException"),this.type=z,this.extraDelay=i}}o.RenderingCancelledException=h;function a(U){const V=U.length;let z=0;for(;z<V&&U[z].trim()==="";)z++;return U.substring(z,z+5).toLowerCase()==="data:"}function g(U){return typeof U=="string"&&/\.pdf$/i.test(U)}function _(U,V=!1){return V||([U]=U.split(/[#?]/,1)),U.substring(U.lastIndexOf("/")+1)}function v(U,V="document.pdf"){if(typeof U!="string")return V;if(a(U))return(0,O.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),V;const z=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,u=z.exec(U);let S=i.exec(u[1])||i.exec(u[2])||i.exec(u[3]);if(S&&(S=S[0],S.includes("%")))try{S=i.exec(decodeURIComponent(S))[0]}catch{}return S||V}class p{constructor(){je(this,"started",Object.create(null));je(this,"times",[])}time(V){V in this.started&&(0,O.warn)(`Timer is already running for ${V}`),this.started[V]=Date.now()}timeEnd(V){V in this.started||(0,O.warn)(`Timer has not been started for ${V}`),this.times.push({name:V,start:this.started[V],end:Date.now()}),delete this.started[V]}toString(){const V=[];let z=0;for(const{name:i}of this.times)z=Math.max(i.length,z);for(const{name:i,start:u,end:S}of this.times)V.push(`${i.padEnd(z)} ${S-u}ms
`);return V.join("")}}o.StatTimer=p;function t(U,V){try{const{protocol:z}=V?new URL(U,V):new URL(U);return z==="http:"||z==="https:"}catch{return!1}}function e(U,V=!1){return new Promise((z,i)=>{const u=document.createElement("script");u.src=U,u.onload=function(S){V&&u.remove(),z(S)},u.onerror=function(){i(new Error(`Cannot load script at: ${u.src}`))},(document.head||document.documentElement).append(u)})}function s(U){console.log("Deprecated API usage: "+U)}let n;class f{static toDateObject(V){if(!V||typeof V!="string")return null;n||(n=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const z=n.exec(V);if(!z)return null;const i=parseInt(z[1],10);let u=parseInt(z[2],10);u=u>=1&&u<=12?u-1:0;let S=parseInt(z[3],10);S=S>=1&&S<=31?S:1;let R=parseInt(z[4],10);R=R>=0&&R<=23?R:0;let L=parseInt(z[5],10);L=L>=0&&L<=59?L:0;let W=parseInt(z[6],10);W=W>=0&&W<=59?W:0;const me=z[7]||"Z";let B=parseInt(z[8],10);B=B>=0&&B<=23?B:0;let q=parseInt(z[9],10)||0;return q=q>=0&&q<=59?q:0,me==="-"?(R+=B,L+=q):me==="+"&&(R-=B,L-=q),new Date(Date.UTC(i,u,S,R,L,W))}}o.PDFDateString=f;function T(U,{scale:V=1,rotation:z=0}){const{width:i,height:u}=U.attributes.style,S=[0,0,parseInt(i),parseInt(u)];return new r({viewBox:S,scale:V,rotation:z})}function l(U){if(U.startsWith("#")){const V=parseInt(U.slice(1),16);return[(V&16711680)>>16,(V&65280)>>8,V&255]}return U.startsWith("rgb(")?U.slice(4,-1).split(",").map(V=>parseInt(V)):U.startsWith("rgba(")?U.slice(5,-1).split(",").map(V=>parseInt(V)).slice(0,3):((0,O.warn)(`Not a valid color format: "${U}"`),[0,0,0])}function I(U){const V=document.createElement("span");V.style.visibility="hidden",document.body.append(V);for(const z of U.keys()){V.style.color=z;const i=window.getComputedStyle(V).color;U.set(z,l(i))}V.remove()}function K(U){const{a:V,b:z,c:i,d:u,e:S,f:R}=U.getTransform();return[V,z,i,u,S,R]}function le(U){const{a:V,b:z,c:i,d:u,e:S,f:R}=U.getTransform().invertSelf();return[V,z,i,u,S,R]}function H(U,V,z=!1,i=!0){if(V instanceof r){const{pageWidth:u,pageHeight:S}=V.rawDims,{style:R}=U,L=`calc(var(--scale-factor) * ${u}px)`,W=`calc(var(--scale-factor) * ${S}px)`;!z||V.rotation%180===0?(R.width=L,R.height=W):(R.width=W,R.height=L)}i&&U.setAttribute("data-main-rotation",V.rotation)}},(x,o,X)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BaseStandardFontDataFactory=o.BaseSVGFactory=o.BaseFilterFactory=o.BaseCanvasFactory=o.BaseCMapReaderFactory=void 0;var P=X(1);class O{constructor(){this.constructor===O&&(0,P.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(d){return"none"}addHCMFilter(d,k){return"none"}destroy(d=!1){}}o.BaseFilterFactory=O;class pe{constructor(){this.constructor===pe&&(0,P.unreachable)("Cannot initialize BaseCanvasFactory.")}create(d,k){if(d<=0||k<=0)throw new Error("Invalid canvas size");const w=this._createCanvas(d,k);return{canvas:w,context:w.getContext("2d")}}reset(d,k,w){if(!d.canvas)throw new Error("Canvas is not specified");if(k<=0||w<=0)throw new Error("Invalid canvas size");d.canvas.width=k,d.canvas.height=w}destroy(d){if(!d.canvas)throw new Error("Canvas is not specified");d.canvas.width=0,d.canvas.height=0,d.canvas=null,d.context=null}_createCanvas(d,k){(0,P.unreachable)("Abstract method `_createCanvas` called.")}}o.BaseCanvasFactory=pe;class G{constructor({baseUrl:d=null,isCompressed:k=!0}){this.constructor===G&&(0,P.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=d,this.isCompressed=k}async fetch({name:d}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!d)throw new Error("CMap name must be specified.");const k=this.baseUrl+d+(this.isCompressed?".bcmap":""),w=this.isCompressed?P.CMapCompressionType.BINARY:P.CMapCompressionType.NONE;return this._fetchData(k,w).catch(y=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${k}`)})}_fetchData(d,k){(0,P.unreachable)("Abstract method `_fetchData` called.")}}o.BaseCMapReaderFactory=G;class D{constructor({baseUrl:d=null}){this.constructor===D&&(0,P.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=d}async fetch({filename:d}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!d)throw new Error("Font filename must be specified.");const k=`${this.baseUrl}${d}`;return this._fetchData(k).catch(w=>{throw new Error(`Unable to load font data at: ${k}`)})}_fetchData(d){(0,P.unreachable)("Abstract method `_fetchData` called.")}}o.BaseStandardFontDataFactory=D;class N{constructor(){this.constructor===N&&(0,P.unreachable)("Cannot initialize BaseSVGFactory.")}create(d,k,w=!1){if(d<=0||k<=0)throw new Error("Invalid SVG dimensions");const y=this._createSVG("svg:svg");return y.setAttribute("version","1.1"),w||(y.setAttribute("width",`${d}px`),y.setAttribute("height",`${k}px`)),y.setAttribute("preserveAspectRatio","none"),y.setAttribute("viewBox",`0 0 ${d} ${k}`),y}createElement(d){if(typeof d!="string")throw new Error("Invalid SVG element type");return this._createSVG(d)}_createSVG(d){(0,P.unreachable)("Abstract method `_createSVG` called.")}}o.BaseSVGFactory=N},(x,o,X)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.MurmurHash3_64=void 0;var P=X(1);const O=3285377520,pe=4294901760,G=65535;class D{constructor(b){this.h1=b?b&4294967295:O,this.h2=b?b&4294967295:O}update(b){let d,k;if(typeof b=="string"){d=new Uint8Array(b.length*2),k=0;for(let s=0,n=b.length;s<n;s++){const f=b.charCodeAt(s);f<=255?d[k++]=f:(d[k++]=f>>>8,d[k++]=f&255)}}else if((0,P.isArrayBuffer)(b))d=b.slice(),k=d.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const w=k>>2,y=k-w*4,r=new Uint32Array(d.buffer,0,w);let h=0,a=0,g=this.h1,_=this.h2;const v=3432918353,p=461845907,t=v&G,e=p&G;for(let s=0;s<w;s++)s&1?(h=r[s],h=h*v&pe|h*t&G,h=h<<15|h>>>17,h=h*p&pe|h*e&G,g^=h,g=g<<13|g>>>19,g=g*5+3864292196):(a=r[s],a=a*v&pe|a*t&G,a=a<<15|a>>>17,a=a*p&pe|a*e&G,_^=a,_=_<<13|_>>>19,_=_*5+3864292196);switch(h=0,y){case 3:h^=d[w*4+2]<<16;case 2:h^=d[w*4+1]<<8;case 1:h^=d[w*4],h=h*v&pe|h*t&G,h=h<<15|h>>>17,h=h*p&pe|h*e&G,w&1?g^=h:_^=h}this.h1=g,this.h2=_}hexdigest(){let b=this.h1,d=this.h2;return b^=d>>>1,b=b*3981806797&pe|b*36045&G,d=d*4283543511&pe|((d<<16|b>>>16)*2950163797&pe)>>>16,b^=d>>>1,b=b*444984403&pe|b*60499&G,d=d*3301882366&pe|((d<<16|b>>>16)*3120437893&pe)>>>16,b^=d>>>1,(b>>>0).toString(16).padStart(8,"0")+(d>>>0).toString(16).padStart(8,"0")}}o.MurmurHash3_64=D},(x,o,X)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FontLoader=o.FontFaceObject=void 0;var P=X(1),O=X(10);class pe{constructor({ownerDocument:N=globalThis.document,styleElement:b=null}){this._document=N,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(N){this.nativeFontFaces.push(N),this._document.fonts.add(N)}insertRule(N){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const b=this.styleElement.sheet;b.insertRule(N,b.cssRules.length)}clear(){for(const N of this.nativeFontFaces)this._document.fonts.delete(N);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(N){if(N.attached||N.missingFile)return;if(N.attached=!0,this.isFontLoadingAPISupported){const d=N.createNativeFontFace();if(d){this.addNativeFontFace(d);try{await d.loaded}catch(k){throw(0,P.warn)(`Failed to load font '${d.family}': '${k}'.`),N.disableFontFace=!0,k}}return}const b=N.createFontFaceRule();if(b){if(this.insertRule(b),this.isSyncFontLoadingSupported)return;await new Promise(d=>{const k=this._queueLoadingCallback(d);this._prepareFontLoadEvent(N,k)})}}get isFontLoadingAPISupported(){var b;const N=!!((b=this._document)!=null&&b.fonts);return(0,P.shadow)(this,"isFontLoadingAPISupported",N)}get isSyncFontLoadingSupported(){let N=!1;return(O.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(N=!0),(0,P.shadow)(this,"isSyncFontLoadingSupported",N)}_queueLoadingCallback(N){function b(){for((0,P.assert)(!k.done,"completeRequest() cannot be called twice."),k.done=!0;d.length>0&&d[0].done;){const w=d.shift();setTimeout(w.callback,0)}}const{loadingRequests:d}=this,k={done:!1,complete:b,callback:N};return d.push(k),k}get _loadTestFont(){const N=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,P.shadow)(this,"_loadTestFont",N)}_prepareFontLoadEvent(N,b){function d(l,I){return l.charCodeAt(I)<<24|l.charCodeAt(I+1)<<16|l.charCodeAt(I+2)<<8|l.charCodeAt(I+3)&255}function k(l,I,K,le){const H=l.substring(0,I),ee=l.substring(I+K);return H+le+ee}let w,y;const r=this._document.createElement("canvas");r.width=1,r.height=1;const h=r.getContext("2d");let a=0;function g(l,I){if(++a>30){(0,P.warn)("Load test font never loaded."),I();return}if(h.font="30px "+l,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){I();return}setTimeout(g.bind(null,l,I))}const _=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=k(v,976,_.length,_);const t=16,e=1482184792;let s=d(v,t);for(w=0,y=_.length-3;w<y;w+=4)s=s-e+d(_,w)|0;w<_.length&&(s=s-e+d(_+"XXX",w)|0),v=k(v,t,4,(0,P.string32)(s));const n=`url(data:font/opentype;base64,${btoa(v)});`,f=`@font-face {font-family:"${_}";src:${n}}`;this.insertRule(f);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const l of[N.loadedName,_]){const I=this._document.createElement("span");I.textContent="Hi",I.style.fontFamily=l,T.append(I)}this._document.body.append(T),g(_,()=>{T.remove(),b.complete()})}}o.FontLoader=pe;class G{constructor(N,{isEvalSupported:b=!0,disableFontFace:d=!1,ignoreErrors:k=!1,inspectFont:w=null}){this.compiledGlyphs=Object.create(null);for(const y in N)this[y]=N[y];this.isEvalSupported=b!==!1,this.disableFontFace=d===!0,this.ignoreErrors=k===!0,this._inspectFont=w}createNativeFontFace(){var b;if(!this.data||this.disableFontFace)return null;let N;if(!this.cssFontInfo)N=new FontFace(this.loadedName,this.data,{});else{const d={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(d.style=`oblique ${this.cssFontInfo.italicAngle}deg`),N=new FontFace(this.cssFontInfo.fontFamily,this.data,d)}return(b=this._inspectFont)==null||b.call(this,this),N}createFontFaceRule(){var k;if(!this.data||this.disableFontFace)return null;const N=(0,P.bytesToString)(this.data),b=`url(data:${this.mimetype};base64,${btoa(N)});`;let d;if(!this.cssFontInfo)d=`@font-face {font-family:"${this.loadedName}";src:${b}}`;else{let w=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(w+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),d=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${w}src:${b}}`}return(k=this._inspectFont)==null||k.call(this,this,b),d}getPathGenerator(N,b){if(this.compiledGlyphs[b]!==void 0)return this.compiledGlyphs[b];let d;try{d=N.get(this.loadedName+"_path_"+b)}catch(k){if(!this.ignoreErrors)throw k;return(0,P.warn)(`getPathGenerator - ignoring character: "${k}".`),this.compiledGlyphs[b]=function(w,y){}}if(this.isEvalSupported&&P.FeatureTest.isEvalSupported){const k=[];for(const w of d){const y=w.args!==void 0?w.args.join(","):"";k.push("c.",w.cmd,"(",y,`);
`)}return this.compiledGlyphs[b]=new Function("c","size",k.join(""))}return this.compiledGlyphs[b]=function(k,w){for(const y of d)y.cmd==="scale"&&(y.args=[w,-w]),k[y.cmd].apply(k,y.args)}}}o.FontFaceObject=G},(x,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isNodeJS=void 0;const X=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");o.isNodeJS=X},(x,o,X)=>{var ge,Ft,Q,It;Object.defineProperty(o,"__esModule",{value:!0}),o.CanvasGraphics=void 0;var P=X(1),O=X(6),pe=X(12),G=X(13),D=X(10);const N=16,b=100,d=4096,k=15,w=10,y=1e3,r=16;function h(J,A){if(J._removeMirroring)throw new Error("Context is already forwarding operations.");J.__originalSave=J.save,J.__originalRestore=J.restore,J.__originalRotate=J.rotate,J.__originalScale=J.scale,J.__originalTranslate=J.translate,J.__originalTransform=J.transform,J.__originalSetTransform=J.setTransform,J.__originalResetTransform=J.resetTransform,J.__originalClip=J.clip,J.__originalMoveTo=J.moveTo,J.__originalLineTo=J.lineTo,J.__originalBezierCurveTo=J.bezierCurveTo,J.__originalRect=J.rect,J.__originalClosePath=J.closePath,J.__originalBeginPath=J.beginPath,J._removeMirroring=()=>{J.save=J.__originalSave,J.restore=J.__originalRestore,J.rotate=J.__originalRotate,J.scale=J.__originalScale,J.translate=J.__originalTranslate,J.transform=J.__originalTransform,J.setTransform=J.__originalSetTransform,J.resetTransform=J.__originalResetTransform,J.clip=J.__originalClip,J.moveTo=J.__originalMoveTo,J.lineTo=J.__originalLineTo,J.bezierCurveTo=J.__originalBezierCurveTo,J.rect=J.__originalRect,J.closePath=J.__originalClosePath,J.beginPath=J.__originalBeginPath,delete J._removeMirroring},J.save=function(){A.save(),this.__originalSave()},J.restore=function(){A.restore(),this.__originalRestore()},J.translate=function(F,Y){A.translate(F,Y),this.__originalTranslate(F,Y)},J.scale=function(F,Y){A.scale(F,Y),this.__originalScale(F,Y)},J.transform=function(F,Y,j,se,U,V){A.transform(F,Y,j,se,U,V),this.__originalTransform(F,Y,j,se,U,V)},J.setTransform=function(F,Y,j,se,U,V){A.setTransform(F,Y,j,se,U,V),this.__originalSetTransform(F,Y,j,se,U,V)},J.resetTransform=function(){A.resetTransform(),this.__originalResetTransform()},J.rotate=function(F){A.rotate(F),this.__originalRotate(F)},J.clip=function(F){A.clip(F),this.__originalClip(F)},J.moveTo=function(C,F){A.moveTo(C,F),this.__originalMoveTo(C,F)},J.lineTo=function(C,F){A.lineTo(C,F),this.__originalLineTo(C,F)},J.bezierCurveTo=function(C,F,Y,j,se,U){A.bezierCurveTo(C,F,Y,j,se,U),this.__originalBezierCurveTo(C,F,Y,j,se,U)},J.rect=function(C,F,Y,j){A.rect(C,F,Y,j),this.__originalRect(C,F,Y,j)},J.closePath=function(){A.closePath(),this.__originalClosePath()},J.beginPath=function(){A.beginPath(),this.__originalBeginPath()}}class a{constructor(A){this.canvasFactory=A,this.cache=Object.create(null)}getCanvas(A,C,F){let Y;return this.cache[A]!==void 0?(Y=this.cache[A],this.canvasFactory.reset(Y,C,F)):(Y=this.canvasFactory.create(C,F),this.cache[A]=Y),Y}delete(A){delete this.cache[A]}clear(){for(const A in this.cache){const C=this.cache[A];this.canvasFactory.destroy(C),delete this.cache[A]}}}function g(J,A,C,F,Y,j,se,U,V,z){const[i,u,S,R,L,W]=(0,O.getCurrentTransform)(J);if(u===0&&S===0){const q=se*i+L,ce=Math.round(q),ne=U*R+W,ue=Math.round(ne),be=(se+V)*i+L,ve=Math.abs(Math.round(be)-ce)||1,xe=(U+z)*R+W,Pe=Math.abs(Math.round(xe)-ue)||1;return J.setTransform(Math.sign(i),0,0,Math.sign(R),ce,ue),J.drawImage(A,C,F,Y,j,0,0,ve,Pe),J.setTransform(i,u,S,R,L,W),[ve,Pe]}if(i===0&&R===0){const q=U*S+L,ce=Math.round(q),ne=se*u+W,ue=Math.round(ne),be=(U+z)*S+L,ve=Math.abs(Math.round(be)-ce)||1,xe=(se+V)*u+W,Pe=Math.abs(Math.round(xe)-ue)||1;return J.setTransform(0,Math.sign(u),Math.sign(S),0,ce,ue),J.drawImage(A,C,F,Y,j,0,0,Pe,ve),J.setTransform(i,u,S,R,L,W),[Pe,ve]}J.drawImage(A,C,F,Y,j,se,U,V,z);const me=Math.hypot(i,u),B=Math.hypot(S,R);return[me*V,B*z]}function _(J){const{width:A,height:C}=J;if(A>y||C>y)return null;const F=1e3,Y=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),j=A+1;let se=new Uint8Array(j*(C+1)),U,V,z;const i=A+7&-8;let u=new Uint8Array(i*C),S=0;for(const B of J.data){let q=128;for(;q>0;)u[S++]=B&q?0:255,q>>=1}let R=0;for(S=0,u[S]!==0&&(se[0]=1,++R),V=1;V<A;V++)u[S]!==u[S+1]&&(se[V]=u[S]?2:1,++R),S++;for(u[S]!==0&&(se[V]=2,++R),U=1;U<C;U++){S=U*i,z=U*j,u[S-i]!==u[S]&&(se[z]=u[S]?1:8,++R);let B=(u[S]?4:0)+(u[S-i]?8:0);for(V=1;V<A;V++)B=(B>>2)+(u[S+1]?4:0)+(u[S-i+1]?8:0),Y[B]&&(se[z+V]=Y[B],++R),S++;if(u[S-i]!==u[S]&&(se[z+V]=u[S]?2:4,++R),R>F)return null}for(S=i*(C-1),z=U*j,u[S]!==0&&(se[z]=8,++R),V=1;V<A;V++)u[S]!==u[S+1]&&(se[z+V]=u[S]?4:8,++R),S++;if(u[S]!==0&&(se[z+V]=4,++R),R>F)return null;const L=new Int32Array([0,j,-1,0,-j,0,0,0,1]),W=new Path2D;for(U=0;R&&U<=C;U++){let B=U*j;const q=B+A;for(;B<q&&!se[B];)B++;if(B===q)continue;W.moveTo(B%j,U);const ce=B;let ne=se[B];do{const ue=L[ne];do B+=ue;while(!se[B]);const be=se[B];be!==5&&be!==10?(ne=be,se[B]=0):(ne=be&51*ne>>4,se[B]&=ne>>2|ne<<2),W.lineTo(B%j,B/j|0),se[B]||--R}while(ce!==B);--U}return u=null,se=null,function(B){B.save(),B.scale(1/A,-1/C),B.translate(0,-C),B.fill(W),B.beginPath(),B.restore()}}class v{constructor(A,C){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=P.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=P.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=P.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,A,C])}clone(){const A=Object.create(this);return A.clipBox=this.clipBox.slice(),A}setCurrentPoint(A,C){this.x=A,this.y=C}updatePathMinMax(A,C,F){[C,F]=P.Util.applyTransform([C,F],A),this.minX=Math.min(this.minX,C),this.minY=Math.min(this.minY,F),this.maxX=Math.max(this.maxX,C),this.maxY=Math.max(this.maxY,F)}updateRectMinMax(A,C){const F=P.Util.applyTransform(C,A),Y=P.Util.applyTransform(C.slice(2),A);this.minX=Math.min(this.minX,F[0],Y[0]),this.minY=Math.min(this.minY,F[1],Y[1]),this.maxX=Math.max(this.maxX,F[0],Y[0]),this.maxY=Math.max(this.maxY,F[1],Y[1])}updateScalingPathMinMax(A,C){P.Util.scaleMinMax(A,C),this.minX=Math.min(this.minX,C[0]),this.maxX=Math.max(this.maxX,C[1]),this.minY=Math.min(this.minY,C[2]),this.maxY=Math.max(this.maxY,C[3])}updateCurvePathMinMax(A,C,F,Y,j,se,U,V,z,i){const u=P.Util.bezierBoundingBox(C,F,Y,j,se,U,V,z);if(i){i[0]=Math.min(i[0],u[0],u[2]),i[1]=Math.max(i[1],u[0],u[2]),i[2]=Math.min(i[2],u[1],u[3]),i[3]=Math.max(i[3],u[1],u[3]);return}this.updateRectMinMax(A,u)}getPathBoundingBox(A=pe.PathType.FILL,C=null){const F=[this.minX,this.minY,this.maxX,this.maxY];if(A===pe.PathType.STROKE){C||(0,P.unreachable)("Stroke bounding box must include transform.");const Y=P.Util.singularValueDecompose2dScale(C),j=Y[0]*this.lineWidth/2,se=Y[1]*this.lineWidth/2;F[0]-=j,F[1]-=se,F[2]+=j,F[3]+=se}return F}updateClipFromPath(){const A=P.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(A||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(A){this.clipBox=A,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(A=pe.PathType.FILL,C=null){return P.Util.intersect(this.clipBox,this.getPathBoundingBox(A,C))}}function p(J,A){if(typeof ImageData<"u"&&A instanceof ImageData){J.putImageData(A,0,0);return}const C=A.height,F=A.width,Y=C%r,j=(C-Y)/r,se=Y===0?j:j+1,U=J.createImageData(F,r);let V=0,z;const i=A.data,u=U.data;let S,R,L,W;if(A.kind===P.ImageKind.GRAYSCALE_1BPP){const me=i.byteLength,B=new Uint32Array(u.buffer,0,u.byteLength>>2),q=B.length,ce=F+7>>3,ne=4294967295,ue=P.FeatureTest.isLittleEndian?4278190080:255;for(S=0;S<se;S++){for(L=S<j?r:Y,z=0,R=0;R<L;R++){const be=me-V;let ve=0;const xe=be>ce?F:be*8-7,Pe=xe&-8;let Re=0,oe=0;for(;ve<Pe;ve+=8)oe=i[V++],B[z++]=oe&128?ne:ue,B[z++]=oe&64?ne:ue,B[z++]=oe&32?ne:ue,B[z++]=oe&16?ne:ue,B[z++]=oe&8?ne:ue,B[z++]=oe&4?ne:ue,B[z++]=oe&2?ne:ue,B[z++]=oe&1?ne:ue;for(;ve<xe;ve++)Re===0&&(oe=i[V++],Re=128),B[z++]=oe&Re?ne:ue,Re>>=1}for(;z<q;)B[z++]=0;J.putImageData(U,0,S*r)}}else if(A.kind===P.ImageKind.RGBA_32BPP){for(R=0,W=F*r*4,S=0;S<j;S++)u.set(i.subarray(V,V+W)),V+=W,J.putImageData(U,0,R),R+=r;S<se&&(W=F*Y*4,u.set(i.subarray(V,V+W)),J.putImageData(U,0,R))}else if(A.kind===P.ImageKind.RGB_24BPP)for(L=r,W=F*L,S=0;S<se;S++){for(S>=j&&(L=Y,W=F*L),z=0,R=W;R--;)u[z++]=i[V++],u[z++]=i[V++],u[z++]=i[V++],u[z++]=255;J.putImageData(U,0,S*r)}else throw new Error(`bad image kind: ${A.kind}`)}function t(J,A){if(A.bitmap){J.drawImage(A.bitmap,0,0);return}const C=A.height,F=A.width,Y=C%r,j=(C-Y)/r,se=Y===0?j:j+1,U=J.createImageData(F,r);let V=0;const z=A.data,i=U.data;for(let u=0;u<se;u++){const S=u<j?r:Y;({srcPos:V}=(0,G.convertBlackAndWhiteToRGBA)({src:z,srcPos:V,dest:i,width:F,height:S,nonBlackColor:0})),J.putImageData(U,0,u*r)}}function e(J,A){const C=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const F of C)J[F]!==void 0&&(A[F]=J[F]);J.setLineDash!==void 0&&(A.setLineDash(J.getLineDash()),A.lineDashOffset=J.lineDashOffset)}function s(J){J.strokeStyle=J.fillStyle="#000000",J.fillRule="nonzero",J.globalAlpha=1,J.lineWidth=1,J.lineCap="butt",J.lineJoin="miter",J.miterLimit=10,J.globalCompositeOperation="source-over",J.font="10px sans-serif",J.setLineDash!==void 0&&(J.setLineDash([]),J.lineDashOffset=0),D.isNodeJS||(J.filter="none")}function n(J,A,C,F){const Y=J.length;for(let j=3;j<Y;j+=4){const se=J[j];if(se===0)J[j-3]=A,J[j-2]=C,J[j-1]=F;else if(se<255){const U=255-se;J[j-3]=J[j-3]*se+A*U>>8,J[j-2]=J[j-2]*se+C*U>>8,J[j-1]=J[j-1]*se+F*U>>8}}}function f(J,A,C){const F=J.length,Y=1/255;for(let j=3;j<F;j+=4){const se=C?C[J[j]]:J[j];A[j]=A[j]*se*Y|0}}function T(J,A,C){const F=J.length;for(let Y=3;Y<F;Y+=4){const j=J[Y-3]*77+J[Y-2]*152+J[Y-1]*28;A[Y]=C?A[Y]*C[j>>8]>>8:A[Y]*j>>16}}function l(J,A,C,F,Y,j,se,U,V,z,i){const u=!!j,S=u?j[0]:0,R=u?j[1]:0,L=u?j[2]:0;let W;Y==="Luminosity"?W=T:W=f;const B=Math.min(F,Math.ceil(1048576/C));for(let q=0;q<F;q+=B){const ce=Math.min(B,F-q),ne=J.getImageData(U-z,q+(V-i),C,ce),ue=A.getImageData(U,q+V,C,ce);u&&n(ne.data,S,R,L),W(ne.data,ue.data,se),A.putImageData(ue,U,q+V)}}function I(J,A,C,F){const Y=F[0],j=F[1],se=F[2]-Y,U=F[3]-j;se===0||U===0||(l(A.context,C,se,U,A.subtype,A.backdrop,A.transferMap,Y,j,A.offsetX,A.offsetY),J.save(),J.globalAlpha=1,J.globalCompositeOperation="source-over",J.setTransform(1,0,0,1,0,0),J.drawImage(C.canvas,0,0),J.restore())}function K(J,A){const C=P.Util.singularValueDecompose2dScale(J);C[0]=Math.fround(C[0]),C[1]=Math.fround(C[1]);const F=Math.fround((globalThis.devicePixelRatio||1)*O.PixelsPerInch.PDF_TO_CSS_UNITS);return A!==void 0?A:C[0]<=F||C[1]<=F}const le=["butt","round","square"],H=["miter","round","bevel"],ee={},ae={},Ee=class{constructor(A,C,F,Y,j,{optionalContentConfig:se,markedContentStack:U=null},V,z){$(this,ge);$(this,Q);this.ctx=A,this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=C,this.objs=F,this.canvasFactory=Y,this.filterFactory=j,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=U||[],this.optionalContentConfig=se,this.cachedCanvases=new a(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=V,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=z,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(A,C=null){return typeof A=="string"?A.startsWith("g_")?this.commonObjs.get(A):this.objs.get(A):C}beginDrawing({transform:A,viewport:C,transparency:F=!1,background:Y=null}){const j=this.ctx.canvas.width,se=this.ctx.canvas.height,U=this.ctx.fillStyle;if(this.ctx.fillStyle=Y||"#ffffff",this.ctx.fillRect(0,0,j,se),this.ctx.fillStyle=U,F){const V=this.cachedCanvases.getCanvas("transparent",j,se);this.compositeCtx=this.ctx,this.transparentCanvas=V.canvas,this.ctx=V.context,this.ctx.save(),this.ctx.transform(...(0,O.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),s(this.ctx),A&&(this.ctx.transform(...A),this.outputScaleX=A[0],this.outputScaleY=A[0]),this.ctx.transform(...C.transform),this.viewportScale=C.scale,this.baseTransform=(0,O.getCurrentTransform)(this.ctx)}executeOperatorList(A,C,F,Y){const j=A.argsArray,se=A.fnArray;let U=C||0;const V=j.length;if(V===U)return U;const z=V-U>w&&typeof F=="function",i=z?Date.now()+k:0;let u=0;const S=this.commonObjs,R=this.objs;let L;for(;;){if(Y!==void 0&&U===Y.nextBreakPoint)return Y.breakIt(U,F),U;if(L=se[U],L!==P.OPS.dependency)this[L].apply(this,j[U]);else for(const W of j[U]){const me=W.startsWith("g_")?S:R;if(!me.has(W))return me.get(W,F),U}if(U++,U===V)return U;if(z&&++u>w){if(Date.now()>i)return F(),U;u=0}}}endDrawing(){Z(this,ge,Ft).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const A of this._cachedBitmapsMap.values()){for(const C of A.values())typeof HTMLCanvasElement<"u"&&C instanceof HTMLCanvasElement&&(C.width=C.height=0);A.clear()}this._cachedBitmapsMap.clear(),Z(this,Q,It).call(this)}_scaleImage(A,C){const F=A.width,Y=A.height;let j=Math.max(Math.hypot(C[0],C[1]),1),se=Math.max(Math.hypot(C[2],C[3]),1),U=F,V=Y,z="prescale1",i,u;for(;j>2&&U>1||se>2&&V>1;){let S=U,R=V;j>2&&U>1&&(S=U>=16384?Math.floor(U/2)-1||1:Math.ceil(U/2),j/=U/S),se>2&&V>1&&(R=V>=16384?Math.floor(V/2)-1||1:Math.ceil(V)/2,se/=V/R),i=this.cachedCanvases.getCanvas(z,S,R),u=i.context,u.clearRect(0,0,S,R),u.drawImage(A,0,0,U,V,0,0,S,R),A=i.canvas,U=S,V=R,z=z==="prescale1"?"prescale2":"prescale1"}return{img:A,paintWidth:U,paintHeight:V}}_createMaskCanvas(A){const C=this.ctx,{width:F,height:Y}=A,j=this.current.fillColor,se=this.current.patternFill,U=(0,O.getCurrentTransform)(C);let V,z,i,u;if((A.bitmap||A.data)&&A.count>1){const ve=A.bitmap||A.data.buffer;z=JSON.stringify(se?U:[U.slice(0,4),j]),V=this._cachedBitmapsMap.get(ve),V||(V=new Map,this._cachedBitmapsMap.set(ve,V));const xe=V.get(z);if(xe&&!se){const Pe=Math.round(Math.min(U[0],U[2])+U[4]),Re=Math.round(Math.min(U[1],U[3])+U[5]);return{canvas:xe,offsetX:Pe,offsetY:Re}}i=xe}i||(u=this.cachedCanvases.getCanvas("maskCanvas",F,Y),t(u.context,A));let S=P.Util.transform(U,[1/F,0,0,-1/Y,0,0]);S=P.Util.transform(S,[1,0,0,1,0,-Y]);const R=P.Util.applyTransform([0,0],S),L=P.Util.applyTransform([F,Y],S),W=P.Util.normalizeRect([R[0],R[1],L[0],L[1]]),me=Math.round(W[2]-W[0])||1,B=Math.round(W[3]-W[1])||1,q=this.cachedCanvases.getCanvas("fillCanvas",me,B),ce=q.context,ne=Math.min(R[0],L[0]),ue=Math.min(R[1],L[1]);ce.translate(-ne,-ue),ce.transform(...S),i||(i=this._scaleImage(u.canvas,(0,O.getCurrentTransformInverse)(ce)),i=i.img,V&&se&&V.set(z,i)),ce.imageSmoothingEnabled=K((0,O.getCurrentTransform)(ce),A.interpolate),g(ce,i,0,0,i.width,i.height,0,0,F,Y),ce.globalCompositeOperation="source-in";const be=P.Util.transform((0,O.getCurrentTransformInverse)(ce),[1,0,0,1,-ne,-ue]);return ce.fillStyle=se?j.getPattern(C,this,be,pe.PathType.FILL):j,ce.fillRect(0,0,F,Y),V&&!se&&(this.cachedCanvases.delete("fillCanvas"),V.set(z,q.canvas)),{canvas:q.canvas,offsetX:Math.round(ne),offsetY:Math.round(ue)}}setLineWidth(A){A!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=A,this.ctx.lineWidth=A}setLineCap(A){this.ctx.lineCap=le[A]}setLineJoin(A){this.ctx.lineJoin=H[A]}setMiterLimit(A){this.ctx.miterLimit=A}setDash(A,C){const F=this.ctx;F.setLineDash!==void 0&&(F.setLineDash(A),F.lineDashOffset=C)}setRenderingIntent(A){}setFlatness(A){}setGState(A){for(const[C,F]of A)switch(C){case"LW":this.setLineWidth(F);break;case"LC":this.setLineCap(F);break;case"LJ":this.setLineJoin(F);break;case"ML":this.setMiterLimit(F);break;case"D":this.setDash(F[0],F[1]);break;case"RI":this.setRenderingIntent(F);break;case"FL":this.setFlatness(F);break;case"Font":this.setFont(F[0],F[1]);break;case"CA":this.current.strokeAlpha=F;break;case"ca":this.current.fillAlpha=F,this.ctx.globalAlpha=F;break;case"BM":this.ctx.globalCompositeOperation=F;break;case"SMask":this.current.activeSMask=F?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(F);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const A=this.inSMaskMode;this.current.activeSMask&&!A?this.beginSMaskMode():!this.current.activeSMask&&A&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const A=this.ctx.canvas.width,C=this.ctx.canvas.height,F="smaskGroupAt"+this.groupLevel,Y=this.cachedCanvases.getCanvas(F,A,C);this.suspendedCtx=this.ctx,this.ctx=Y.context;const j=this.ctx;j.setTransform(...(0,O.getCurrentTransform)(this.suspendedCtx)),e(this.suspendedCtx,j),h(j,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),e(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(A){if(!this.current.activeSMask)return;A?(A[0]=Math.floor(A[0]),A[1]=Math.floor(A[1]),A[2]=Math.ceil(A[2]),A[3]=Math.ceil(A[3])):A=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const C=this.current.activeSMask,F=this.suspendedCtx;I(F,C,this.ctx,A),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(e(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const A=this.current;this.stateStack.push(A),this.current=A.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),e(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(A,C,F,Y,j,se){this.ctx.transform(A,C,F,Y,j,se),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(A,C,F){const Y=this.ctx,j=this.current;let se=j.x,U=j.y,V,z;const i=(0,O.getCurrentTransform)(Y),u=i[0]===0&&i[3]===0||i[1]===0&&i[2]===0,S=u?F.slice(0):null;for(let R=0,L=0,W=A.length;R<W;R++)switch(A[R]|0){case P.OPS.rectangle:se=C[L++],U=C[L++];const me=C[L++],B=C[L++],q=se+me,ce=U+B;Y.moveTo(se,U),me===0||B===0?Y.lineTo(q,ce):(Y.lineTo(q,U),Y.lineTo(q,ce),Y.lineTo(se,ce)),u||j.updateRectMinMax(i,[se,U,q,ce]),Y.closePath();break;case P.OPS.moveTo:se=C[L++],U=C[L++],Y.moveTo(se,U),u||j.updatePathMinMax(i,se,U);break;case P.OPS.lineTo:se=C[L++],U=C[L++],Y.lineTo(se,U),u||j.updatePathMinMax(i,se,U);break;case P.OPS.curveTo:V=se,z=U,se=C[L+4],U=C[L+5],Y.bezierCurveTo(C[L],C[L+1],C[L+2],C[L+3],se,U),j.updateCurvePathMinMax(i,V,z,C[L],C[L+1],C[L+2],C[L+3],se,U,S),L+=6;break;case P.OPS.curveTo2:V=se,z=U,Y.bezierCurveTo(se,U,C[L],C[L+1],C[L+2],C[L+3]),j.updateCurvePathMinMax(i,V,z,se,U,C[L],C[L+1],C[L+2],C[L+3],S),se=C[L+2],U=C[L+3],L+=4;break;case P.OPS.curveTo3:V=se,z=U,se=C[L+2],U=C[L+3],Y.bezierCurveTo(C[L],C[L+1],se,U,se,U),j.updateCurvePathMinMax(i,V,z,C[L],C[L+1],se,U,se,U,S),L+=4;break;case P.OPS.closePath:Y.closePath();break}u&&j.updateScalingPathMinMax(i,S),j.setCurrentPoint(se,U)}closePath(){this.ctx.closePath()}stroke(A=!0){const C=this.ctx,F=this.current.strokeColor;C.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof F=="object"&&(F!=null&&F.getPattern)?(C.save(),C.strokeStyle=F.getPattern(C,this,(0,O.getCurrentTransformInverse)(C),pe.PathType.STROKE),this.rescaleAndStroke(!1),C.restore()):this.rescaleAndStroke(!0)),A&&this.consumePath(this.current.getClippedPathBoundingBox()),C.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(A=!0){const C=this.ctx,F=this.current.fillColor,Y=this.current.patternFill;let j=!1;Y&&(C.save(),C.fillStyle=F.getPattern(C,this,(0,O.getCurrentTransformInverse)(C),pe.PathType.FILL),j=!0);const se=this.current.getClippedPathBoundingBox();this.contentVisible&&se!==null&&(this.pendingEOFill?(C.fill("evenodd"),this.pendingEOFill=!1):C.fill()),j&&C.restore(),A&&this.consumePath(se)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ee}eoClip(){this.pendingClip=ae}beginText(){this.current.textMatrix=P.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const A=this.pendingTextPaths,C=this.ctx;if(A===void 0){C.beginPath();return}C.save(),C.beginPath();for(const F of A)C.setTransform(...F.transform),C.translate(F.x,F.y),F.addToPath(C,F.fontSize);C.restore(),C.clip(),C.beginPath(),delete this.pendingTextPaths}setCharSpacing(A){this.current.charSpacing=A}setWordSpacing(A){this.current.wordSpacing=A}setHScale(A){this.current.textHScale=A/100}setLeading(A){this.current.leading=-A}setFont(A,C){const F=this.commonObjs.get(A),Y=this.current;if(!F)throw new Error(`Can't find font for ${A}`);if(Y.fontMatrix=F.fontMatrix||P.FONT_IDENTITY_MATRIX,(Y.fontMatrix[0]===0||Y.fontMatrix[3]===0)&&(0,P.warn)("Invalid font matrix for font "+A),C<0?(C=-C,Y.fontDirection=-1):Y.fontDirection=1,this.current.font=F,this.current.fontSize=C,F.isType3Font)return;const j=F.loadedName||"sans-serif";let se="normal";F.black?se="900":F.bold&&(se="bold");const U=F.italic?"italic":"normal",V=`"${j}", ${F.fallbackName}`;let z=C;C<N?z=N:C>b&&(z=b),this.current.fontSizeScale=C/z,this.ctx.font=`${U} ${se} ${z}px ${V}`}setTextRenderingMode(A){this.current.textRenderingMode=A}setTextRise(A){this.current.textRise=A}moveText(A,C){this.current.x=this.current.lineX+=A,this.current.y=this.current.lineY+=C}setLeadingMoveText(A,C){this.setLeading(-C),this.moveText(A,C)}setTextMatrix(A,C,F,Y,j,se){this.current.textMatrix=[A,C,F,Y,j,se],this.current.textMatrixScale=Math.hypot(A,C),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(A,C,F,Y){const j=this.ctx,se=this.current,U=se.font,V=se.textRenderingMode,z=se.fontSize/se.fontSizeScale,i=V&P.TextRenderingMode.FILL_STROKE_MASK,u=!!(V&P.TextRenderingMode.ADD_TO_PATH_FLAG),S=se.patternFill&&!U.missingFile;let R;(U.disableFontFace||u||S)&&(R=U.getPathGenerator(this.commonObjs,A)),U.disableFontFace||S?(j.save(),j.translate(C,F),j.beginPath(),R(j,z),Y&&j.setTransform(...Y),(i===P.TextRenderingMode.FILL||i===P.TextRenderingMode.FILL_STROKE)&&j.fill(),(i===P.TextRenderingMode.STROKE||i===P.TextRenderingMode.FILL_STROKE)&&j.stroke(),j.restore()):((i===P.TextRenderingMode.FILL||i===P.TextRenderingMode.FILL_STROKE)&&j.fillText(A,C,F),(i===P.TextRenderingMode.STROKE||i===P.TextRenderingMode.FILL_STROKE)&&j.strokeText(A,C,F)),u&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,O.getCurrentTransform)(j),x:C,y:F,fontSize:z,addToPath:R})}get isFontSubpixelAAEnabled(){const{context:A}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);A.scale(1.5,1),A.fillText("I",0,10);const C=A.getImageData(0,0,10,10).data;let F=!1;for(let Y=3;Y<C.length;Y+=4)if(C[Y]>0&&C[Y]<255){F=!0;break}return(0,P.shadow)(this,"isFontSubpixelAAEnabled",F)}showText(A){const C=this.current,F=C.font;if(F.isType3Font)return this.showType3Text(A);const Y=C.fontSize;if(Y===0)return;const j=this.ctx,se=C.fontSizeScale,U=C.charSpacing,V=C.wordSpacing,z=C.fontDirection,i=C.textHScale*z,u=A.length,S=F.vertical,R=S?1:-1,L=F.defaultVMetrics,W=Y*C.fontMatrix[0],me=C.textRenderingMode===P.TextRenderingMode.FILL&&!F.disableFontFace&&!C.patternFill;j.save(),j.transform(...C.textMatrix),j.translate(C.x,C.y+C.textRise),z>0?j.scale(i,-1):j.scale(i,1);let B;if(C.patternFill){j.save();const be=C.fillColor.getPattern(j,this,(0,O.getCurrentTransformInverse)(j),pe.PathType.FILL);B=(0,O.getCurrentTransform)(j),j.restore(),j.fillStyle=be}let q=C.lineWidth;const ce=C.textMatrixScale;if(ce===0||q===0){const be=C.textRenderingMode&P.TextRenderingMode.FILL_STROKE_MASK;(be===P.TextRenderingMode.STROKE||be===P.TextRenderingMode.FILL_STROKE)&&(q=this.getSinglePixelWidth())}else q/=ce;if(se!==1&&(j.scale(se,se),q/=se),j.lineWidth=q,F.isInvalidPDFjsFont){const be=[];let ve=0;for(const xe of A)be.push(xe.unicode),ve+=xe.width;j.fillText(be.join(""),0,0),C.x+=ve*W*i,j.restore(),this.compose();return}let ne=0,ue;for(ue=0;ue<u;++ue){const be=A[ue];if(typeof be=="number"){ne+=R*be*Y/1e3;continue}let ve=!1;const xe=(be.isSpace?V:0)+U,Pe=be.fontChar,Re=be.accent;let oe,we,Me=be.width;if(S){const E=be.vmetric||L,m=-(be.vmetric?E[1]:Me*.5)*W,M=E[2]*W;Me=E?-E[0]:Me,oe=m/se,we=(ne+M)/se}else oe=ne/se,we=0;if(F.remeasure&&Me>0){const E=j.measureText(Pe).width*1e3/Y*se;if(Me<E&&this.isFontSubpixelAAEnabled){const m=Me/E;ve=!0,j.save(),j.scale(m,1),oe/=m}else Me!==E&&(oe+=(Me-E)/2e3*Y/se)}if(this.contentVisible&&(be.isInFont||F.missingFile)){if(me&&!Re)j.fillText(Pe,oe,we);else if(this.paintChar(Pe,oe,we,B),Re){const E=oe+Y*Re.offset.x/se,m=we-Y*Re.offset.y/se;this.paintChar(Re.fontChar,E,m,B)}}let Oe;S?Oe=Me*W-xe*z:Oe=Me*W+xe*z,ne+=Oe,ve&&j.restore()}S?C.y-=ne:C.x+=ne*i,j.restore(),this.compose()}showType3Text(A){const C=this.ctx,F=this.current,Y=F.font,j=F.fontSize,se=F.fontDirection,U=Y.vertical?1:-1,V=F.charSpacing,z=F.wordSpacing,i=F.textHScale*se,u=F.fontMatrix||P.FONT_IDENTITY_MATRIX,S=A.length,R=F.textRenderingMode===P.TextRenderingMode.INVISIBLE;let L,W,me,B;if(!(R||j===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,C.save(),C.transform(...F.textMatrix),C.translate(F.x,F.y),C.scale(i,se),L=0;L<S;++L){if(W=A[L],typeof W=="number"){B=U*W*j/1e3,this.ctx.translate(B,0),F.x+=B*i;continue}const q=(W.isSpace?z:0)+V,ce=Y.charProcOperatorList[W.operatorListId];if(!ce){(0,P.warn)(`Type3 character "${W.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=W,this.save(),C.scale(j,j),C.transform(...u),this.executeOperatorList(ce),this.restore()),me=P.Util.applyTransform([W.width,0],u)[0]*j+q,C.translate(me,0),F.x+=me*i}C.restore(),this.processingType3=null}}setCharWidth(A,C){}setCharWidthAndBounds(A,C,F,Y,j,se){this.ctx.rect(F,Y,j-F,se-Y),this.ctx.clip(),this.endPath()}getColorN_Pattern(A){let C;if(A[0]==="TilingPattern"){const F=A[1],Y=this.baseTransform||(0,O.getCurrentTransform)(this.ctx),j={createCanvasGraphics:se=>new Ee(se,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};C=new pe.TilingPattern(A,F,this.ctx,j,Y)}else C=this._getPattern(A[1],A[2]);return C}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(A,C,F){const Y=P.Util.makeHexColor(A,C,F);this.ctx.strokeStyle=Y,this.current.strokeColor=Y}setFillRGBColor(A,C,F){const Y=P.Util.makeHexColor(A,C,F);this.ctx.fillStyle=Y,this.current.fillColor=Y,this.current.patternFill=!1}_getPattern(A,C=null){let F;return this.cachedPatterns.has(A)?F=this.cachedPatterns.get(A):(F=(0,pe.getShadingPattern)(this.getObject(A)),this.cachedPatterns.set(A,F)),C&&(F.matrix=C),F}shadingFill(A){if(!this.contentVisible)return;const C=this.ctx;this.save();const F=this._getPattern(A);C.fillStyle=F.getPattern(C,this,(0,O.getCurrentTransformInverse)(C),pe.PathType.SHADING);const Y=(0,O.getCurrentTransformInverse)(C);if(Y){const j=C.canvas,se=j.width,U=j.height,V=P.Util.applyTransform([0,0],Y),z=P.Util.applyTransform([0,U],Y),i=P.Util.applyTransform([se,0],Y),u=P.Util.applyTransform([se,U],Y),S=Math.min(V[0],z[0],i[0],u[0]),R=Math.min(V[1],z[1],i[1],u[1]),L=Math.max(V[0],z[0],i[0],u[0]),W=Math.max(V[1],z[1],i[1],u[1]);this.ctx.fillRect(S,R,L-S,W-R)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,P.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,P.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(A,C){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(A)&&A.length===6&&this.transform(...A),this.baseTransform=(0,O.getCurrentTransform)(this.ctx),C)){const F=C[2]-C[0],Y=C[3]-C[1];this.ctx.rect(C[0],C[1],F,Y),this.current.updateRectMinMax((0,O.getCurrentTransform)(this.ctx),C),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(A){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const C=this.ctx;A.isolated||(0,P.info)("TODO: Support non-isolated groups."),A.knockout&&(0,P.warn)("Knockout groups not supported.");const F=(0,O.getCurrentTransform)(C);if(A.matrix&&C.transform(...A.matrix),!A.bbox)throw new Error("Bounding box is required.");let Y=P.Util.getAxialAlignedBoundingBox(A.bbox,(0,O.getCurrentTransform)(C));const j=[0,0,C.canvas.width,C.canvas.height];Y=P.Util.intersect(Y,j)||[0,0,0,0];const se=Math.floor(Y[0]),U=Math.floor(Y[1]);let V=Math.max(Math.ceil(Y[2])-se,1),z=Math.max(Math.ceil(Y[3])-U,1),i=1,u=1;V>d&&(i=V/d,V=d),z>d&&(u=z/d,z=d),this.current.startNewPathAndClipBox([0,0,V,z]);let S="groupAt"+this.groupLevel;A.smask&&(S+="_smask_"+this.smaskCounter++%2);const R=this.cachedCanvases.getCanvas(S,V,z),L=R.context;L.scale(1/i,1/u),L.translate(-se,-U),L.transform(...F),A.smask?this.smaskStack.push({canvas:R.canvas,context:L,offsetX:se,offsetY:U,scaleX:i,scaleY:u,subtype:A.smask.subtype,backdrop:A.smask.backdrop,transferMap:A.smask.transferMap||null,startTransformInverse:null}):(C.setTransform(1,0,0,1,0,0),C.translate(se,U),C.scale(i,u),C.save()),e(C,L),this.ctx=L,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(C),this.groupLevel++}endGroup(A){if(!this.contentVisible)return;this.groupLevel--;const C=this.ctx,F=this.groupStack.pop();if(this.ctx=F,this.ctx.imageSmoothingEnabled=!1,A.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Y=(0,O.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Y);const j=P.Util.getAxialAlignedBoundingBox([0,0,C.canvas.width,C.canvas.height],Y);this.ctx.drawImage(C.canvas,0,0),this.ctx.restore(),this.compose(j)}}beginAnnotation(A,C,F,Y,j){if(Z(this,ge,Ft).call(this),s(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(C)&&C.length===4){const se=C[2]-C[0],U=C[3]-C[1];if(j&&this.annotationCanvasMap){F=F.slice(),F[4]-=C[0],F[5]-=C[1],C=C.slice(),C[0]=C[1]=0,C[2]=se,C[3]=U;const[V,z]=P.Util.singularValueDecompose2dScale((0,O.getCurrentTransform)(this.ctx)),{viewportScale:i}=this,u=Math.ceil(se*this.outputScaleX*i),S=Math.ceil(U*this.outputScaleY*i);this.annotationCanvas=this.canvasFactory.create(u,S);const{canvas:R,context:L}=this.annotationCanvas;this.annotationCanvasMap.set(A,R),this.annotationCanvas.savedCtx=this.ctx,this.ctx=L,this.ctx.save(),this.ctx.setTransform(V,0,0,-z,0,U*z),s(this.ctx)}else s(this.ctx),this.ctx.rect(C[0],C[1],se,U),this.ctx.clip(),this.endPath()}this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...F),this.transform(...Y)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Z(this,Q,It).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(A){if(!this.contentVisible)return;const C=A.count;A=this.getObject(A.data,A),A.count=C;const F=this.ctx,Y=this.processingType3;if(Y&&(Y.compiled===void 0&&(Y.compiled=_(A)),Y.compiled)){Y.compiled(F);return}const j=this._createMaskCanvas(A),se=j.canvas;F.save(),F.setTransform(1,0,0,1,0,0),F.drawImage(se,j.offsetX,j.offsetY),F.restore(),this.compose()}paintImageMaskXObjectRepeat(A,C,F=0,Y=0,j,se){if(!this.contentVisible)return;A=this.getObject(A.data,A);const U=this.ctx;U.save();const V=(0,O.getCurrentTransform)(U);U.transform(C,F,Y,j,0,0);const z=this._createMaskCanvas(A);U.setTransform(1,0,0,1,z.offsetX-V[4],z.offsetY-V[5]);for(let i=0,u=se.length;i<u;i+=2){const S=P.Util.transform(V,[C,F,Y,j,se[i],se[i+1]]),[R,L]=P.Util.applyTransform([0,0],S);U.drawImage(z.canvas,R,L)}U.restore(),this.compose()}paintImageMaskXObjectGroup(A){if(!this.contentVisible)return;const C=this.ctx,F=this.current.fillColor,Y=this.current.patternFill;for(const j of A){const{data:se,width:U,height:V,transform:z}=j,i=this.cachedCanvases.getCanvas("maskCanvas",U,V),u=i.context;u.save();const S=this.getObject(se,j);t(u,S),u.globalCompositeOperation="source-in",u.fillStyle=Y?F.getPattern(u,this,(0,O.getCurrentTransformInverse)(C),pe.PathType.FILL):F,u.fillRect(0,0,U,V),u.restore(),C.save(),C.transform(...z),C.scale(1,-1),g(C,i.canvas,0,0,U,V,0,-1,1,1),C.restore()}this.compose()}paintImageXObject(A){if(!this.contentVisible)return;const C=this.getObject(A);if(!C){(0,P.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(C)}paintImageXObjectRepeat(A,C,F,Y){if(!this.contentVisible)return;const j=this.getObject(A);if(!j){(0,P.warn)("Dependent image isn't ready yet");return}const se=j.width,U=j.height,V=[];for(let z=0,i=Y.length;z<i;z+=2)V.push({transform:[C,0,0,F,Y[z],Y[z+1]],x:0,y:0,w:se,h:U});this.paintInlineImageXObjectGroup(j,V)}applyTransferMapsToCanvas(A){return this.current.transferMaps!=="none"&&(A.filter=this.current.transferMaps,A.drawImage(A.canvas,0,0),A.filter="none"),A.canvas}applyTransferMapsToBitmap(A){if(this.current.transferMaps==="none")return A.bitmap;const{bitmap:C,width:F,height:Y}=A,j=this.cachedCanvases.getCanvas("inlineImage",F,Y),se=j.context;return se.filter=this.current.transferMaps,se.drawImage(C,0,0),se.filter="none",j.canvas}paintInlineImageXObject(A){if(!this.contentVisible)return;const C=A.width,F=A.height,Y=this.ctx;this.save(),D.isNodeJS||(Y.filter="none"),Y.scale(1/C,-1/F);let j;if(A.bitmap)j=this.applyTransferMapsToBitmap(A);else if(typeof HTMLElement=="function"&&A instanceof HTMLElement||!A.data)j=A;else{const V=this.cachedCanvases.getCanvas("inlineImage",C,F).context;p(V,A),j=this.applyTransferMapsToCanvas(V)}const se=this._scaleImage(j,(0,O.getCurrentTransformInverse)(Y));Y.imageSmoothingEnabled=K((0,O.getCurrentTransform)(Y),A.interpolate),g(Y,se.img,0,0,se.paintWidth,se.paintHeight,0,-F,C,F),this.compose(),this.restore()}paintInlineImageXObjectGroup(A,C){if(!this.contentVisible)return;const F=this.ctx;let Y;if(A.bitmap)Y=A.bitmap;else{const j=A.width,se=A.height,V=this.cachedCanvases.getCanvas("inlineImage",j,se).context;p(V,A),Y=this.applyTransferMapsToCanvas(V)}for(const j of C)F.save(),F.transform(...j.transform),F.scale(1,-1),g(F,Y,j.x,j.y,j.w,j.h,0,-1,1,1),F.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(A){}markPointProps(A,C){}beginMarkedContent(A){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(A,C){A==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(C)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(A){const C=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(A);const F=this.ctx;this.pendingClip&&(C||(this.pendingClip===ae?F.clip("evenodd"):F.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),F.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const A=(0,O.getCurrentTransform)(this.ctx);if(A[1]===0&&A[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(A[0]),Math.abs(A[3]));else{const C=Math.abs(A[0]*A[3]-A[2]*A[1]),F=Math.hypot(A[0],A[2]),Y=Math.hypot(A[1],A[3]);this._cachedGetSinglePixelWidth=Math.max(F,Y)/C}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:A}=this.current,C=(0,O.getCurrentTransform)(this.ctx);let F,Y;if(C[1]===0&&C[2]===0){const j=Math.abs(C[0]),se=Math.abs(C[3]);if(A===0)F=1/j,Y=1/se;else{const U=j*A,V=se*A;F=U<1?1/U:1,Y=V<1?1/V:1}}else{const j=Math.abs(C[0]*C[3]-C[2]*C[1]),se=Math.hypot(C[0],C[1]),U=Math.hypot(C[2],C[3]);if(A===0)F=U/j,Y=se/j;else{const V=A*j;F=U>V?U/V:1,Y=se>V?se/V:1}}this._cachedScaleForStroking=[F,Y]}return this._cachedScaleForStroking}rescaleAndStroke(A){const{ctx:C}=this,{lineWidth:F}=this.current,[Y,j]=this.getScaleForStroking();if(C.lineWidth=F||1,Y===1&&j===1){C.stroke();return}let se,U,V;A&&(se=(0,O.getCurrentTransform)(C),U=C.getLineDash().slice(),V=C.lineDashOffset),C.scale(Y,j);const z=Math.max(Y,j);C.setLineDash(C.getLineDash().map(i=>i/z)),C.lineDashOffset/=z,C.stroke(),A&&(C.setTransform(...se),C.setLineDash(U),C.lineDashOffset=V)}isContentVisible(){for(let A=this.markedContentStack.length-1;A>=0;A--)if(!this.markedContentStack[A].visible)return!1;return!0}};let te=Ee;ge=new WeakSet,Ft=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Q=new WeakSet,It=function(){if(this.pageColors){const A=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(A!=="none"){const C=this.ctx.filter;this.ctx.filter=A,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=C}}},o.CanvasGraphics=te;for(const J in P.OPS)te.prototype[J]!==void 0&&(te.prototype[P.OPS[J]]=te.prototype[J])},(x,o,X)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TilingPattern=o.PathType=void 0,o.getShadingPattern=y;var P=X(1),O=X(6);const pe={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};o.PathType=pe;function G(g,_){if(!_)return;const v=_[2]-_[0],p=_[3]-_[1],t=new Path2D;t.rect(_[0],_[1],v,p),g.clip(t)}class D{constructor(){this.constructor===D&&(0,P.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,P.unreachable)("Abstract method `getPattern` called.")}}class N extends D{constructor(_){super(),this._type=_[1],this._bbox=_[2],this._colorStops=_[3],this._p0=_[4],this._p1=_[5],this._r0=_[6],this._r1=_[7],this.matrix=null}_createGradient(_){let v;this._type==="axial"?v=_.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(v=_.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const p of this._colorStops)v.addColorStop(p[0],p[1]);return v}getPattern(_,v,p,t){let e;if(t===pe.STROKE||t===pe.FILL){const s=v.current.getClippedPathBoundingBox(t,(0,O.getCurrentTransform)(_))||[0,0,0,0],n=Math.ceil(s[2]-s[0])||1,f=Math.ceil(s[3]-s[1])||1,T=v.cachedCanvases.getCanvas("pattern",n,f,!0),l=T.context;l.clearRect(0,0,l.canvas.width,l.canvas.height),l.beginPath(),l.rect(0,0,l.canvas.width,l.canvas.height),l.translate(-s[0],-s[1]),p=P.Util.transform(p,[1,0,0,1,s[0],s[1]]),l.transform(...v.baseTransform),this.matrix&&l.transform(...this.matrix),G(l,this._bbox),l.fillStyle=this._createGradient(l),l.fill(),e=_.createPattern(T.canvas,"no-repeat");const I=new DOMMatrix(p);e.setTransform(I)}else G(_,this._bbox),e=this._createGradient(_);return e}}function b(g,_,v,p,t,e,s,n){const f=_.coords,T=_.colors,l=g.data,I=g.width*4;let K;f[v+1]>f[p+1]&&(K=v,v=p,p=K,K=e,e=s,s=K),f[p+1]>f[t+1]&&(K=p,p=t,t=K,K=s,s=n,n=K),f[v+1]>f[p+1]&&(K=v,v=p,p=K,K=e,e=s,s=K);const le=(f[v]+_.offsetX)*_.scaleX,H=(f[v+1]+_.offsetY)*_.scaleY,ee=(f[p]+_.offsetX)*_.scaleX,ae=(f[p+1]+_.offsetY)*_.scaleY,te=(f[t]+_.offsetX)*_.scaleX,ge=(f[t+1]+_.offsetY)*_.scaleY;if(H>=ge)return;const ye=T[e],Q=T[e+1],Ce=T[e+2],Ee=T[s],J=T[s+1],A=T[s+2],C=T[n],F=T[n+1],Y=T[n+2],j=Math.round(H),se=Math.round(ge);let U,V,z,i,u,S,R,L;for(let W=j;W<=se;W++){if(W<ae){let ne;W<H?ne=0:ne=(H-W)/(H-ae),U=le-(le-ee)*ne,V=ye-(ye-Ee)*ne,z=Q-(Q-J)*ne,i=Ce-(Ce-A)*ne}else{let ne;W>ge?ne=1:ae===ge?ne=0:ne=(ae-W)/(ae-ge),U=ee-(ee-te)*ne,V=Ee-(Ee-C)*ne,z=J-(J-F)*ne,i=A-(A-Y)*ne}let me;W<H?me=0:W>ge?me=1:me=(H-W)/(H-ge),u=le-(le-te)*me,S=ye-(ye-C)*me,R=Q-(Q-F)*me,L=Ce-(Ce-Y)*me;const B=Math.round(Math.min(U,u)),q=Math.round(Math.max(U,u));let ce=I*W+B*4;for(let ne=B;ne<=q;ne++)me=(U-ne)/(U-u),me<0?me=0:me>1&&(me=1),l[ce++]=V-(V-S)*me|0,l[ce++]=z-(z-R)*me|0,l[ce++]=i-(i-L)*me|0,l[ce++]=255}}function d(g,_,v){const p=_.coords,t=_.colors;let e,s;switch(_.type){case"lattice":const n=_.verticesPerRow,f=Math.floor(p.length/n)-1,T=n-1;for(e=0;e<f;e++){let l=e*n;for(let I=0;I<T;I++,l++)b(g,v,p[l],p[l+1],p[l+n],t[l],t[l+1],t[l+n]),b(g,v,p[l+n+1],p[l+1],p[l+n],t[l+n+1],t[l+1],t[l+n])}break;case"triangles":for(e=0,s=p.length;e<s;e+=3)b(g,v,p[e],p[e+1],p[e+2],t[e],t[e+1],t[e+2]);break;default:throw new Error("illegal figure")}}class k extends D{constructor(_){super(),this._coords=_[2],this._colors=_[3],this._figures=_[4],this._bounds=_[5],this._bbox=_[7],this._background=_[8],this.matrix=null}_createMeshCanvas(_,v,p){const n=Math.floor(this._bounds[0]),f=Math.floor(this._bounds[1]),T=Math.ceil(this._bounds[2])-n,l=Math.ceil(this._bounds[3])-f,I=Math.min(Math.ceil(Math.abs(T*_[0]*1.1)),3e3),K=Math.min(Math.ceil(Math.abs(l*_[1]*1.1)),3e3),le=T/I,H=l/K,ee={coords:this._coords,colors:this._colors,offsetX:-n,offsetY:-f,scaleX:1/le,scaleY:1/H},ae=I+2*2,te=K+2*2,ge=p.getCanvas("mesh",ae,te,!1),ye=ge.context,Q=ye.createImageData(I,K);if(v){const Ee=Q.data;for(let J=0,A=Ee.length;J<A;J+=4)Ee[J]=v[0],Ee[J+1]=v[1],Ee[J+2]=v[2],Ee[J+3]=255}for(const Ee of this._figures)d(Q,Ee,ee);return ye.putImageData(Q,2,2),{canvas:ge.canvas,offsetX:n-2*le,offsetY:f-2*H,scaleX:le,scaleY:H}}getPattern(_,v,p,t){G(_,this._bbox);let e;if(t===pe.SHADING)e=P.Util.singularValueDecompose2dScale((0,O.getCurrentTransform)(_));else if(e=P.Util.singularValueDecompose2dScale(v.baseTransform),this.matrix){const n=P.Util.singularValueDecompose2dScale(this.matrix);e=[e[0]*n[0],e[1]*n[1]]}const s=this._createMeshCanvas(e,t===pe.SHADING?null:this._background,v.cachedCanvases);return t!==pe.SHADING&&(_.setTransform(...v.baseTransform),this.matrix&&_.transform(...this.matrix)),_.translate(s.offsetX,s.offsetY),_.scale(s.scaleX,s.scaleY),_.createPattern(s.canvas,"no-repeat")}}class w extends D{getPattern(){return"hotpink"}}function y(g){switch(g[0]){case"RadialAxial":return new N(g);case"Mesh":return new k(g);case"Dummy":return new w}throw new Error(`Unknown IR type: ${g[0]}`)}const r={COLORED:1,UNCOLORED:2},a=class{constructor(_,v,p,t,e){this.operatorList=_[2],this.matrix=_[3]||[1,0,0,1,0,0],this.bbox=_[4],this.xstep=_[5],this.ystep=_[6],this.paintType=_[7],this.tilingType=_[8],this.color=v,this.ctx=p,this.canvasGraphicsFactory=t,this.baseTransform=e}createPatternCanvas(_){const v=this.operatorList,p=this.bbox,t=this.xstep,e=this.ystep,s=this.paintType,n=this.tilingType,f=this.color,T=this.canvasGraphicsFactory;(0,P.info)("TilingType: "+n);const l=p[0],I=p[1],K=p[2],le=p[3],H=P.Util.singularValueDecompose2dScale(this.matrix),ee=P.Util.singularValueDecompose2dScale(this.baseTransform),ae=[H[0]*ee[0],H[1]*ee[1]],te=this.getSizeAndScale(t,this.ctx.canvas.width,ae[0]),ge=this.getSizeAndScale(e,this.ctx.canvas.height,ae[1]),ye=_.cachedCanvases.getCanvas("pattern",te.size,ge.size,!0),Q=ye.context,Ce=T.createCanvasGraphics(Q);Ce.groupLevel=_.groupLevel,this.setFillAndStrokeStyleToContext(Ce,s,f);let Ee=l,J=I,A=K,C=le;return l<0&&(Ee=0,A+=Math.abs(l)),I<0&&(J=0,C+=Math.abs(I)),Q.translate(-(te.scale*Ee),-(ge.scale*J)),Ce.transform(te.scale,0,0,ge.scale,0,0),Q.save(),this.clipBbox(Ce,Ee,J,A,C),Ce.baseTransform=(0,O.getCurrentTransform)(Ce.ctx),Ce.executeOperatorList(v),Ce.endDrawing(),{canvas:ye.canvas,scaleX:te.scale,scaleY:ge.scale,offsetX:Ee,offsetY:J}}getSizeAndScale(_,v,p){_=Math.abs(_);const t=Math.max(a.MAX_PATTERN_SIZE,v);let e=Math.ceil(_*p);return e>=t?e=t:p=e/_,{scale:p,size:e}}clipBbox(_,v,p,t,e){const s=t-v,n=e-p;_.ctx.rect(v,p,s,n),_.current.updateRectMinMax((0,O.getCurrentTransform)(_.ctx),[v,p,t,e]),_.clip(),_.endPath()}setFillAndStrokeStyleToContext(_,v,p){const t=_.ctx,e=_.current;switch(v){case r.COLORED:const s=this.ctx;t.fillStyle=s.fillStyle,t.strokeStyle=s.strokeStyle,e.fillColor=s.fillStyle,e.strokeColor=s.strokeStyle;break;case r.UNCOLORED:const n=P.Util.makeHexColor(p[0],p[1],p[2]);t.fillStyle=n,t.strokeStyle=n,e.fillColor=n,e.strokeColor=n;break;default:throw new P.FormatError(`Unsupported paint type: ${v}`)}}getPattern(_,v,p,t){let e=p;t!==pe.SHADING&&(e=P.Util.transform(e,v.baseTransform),this.matrix&&(e=P.Util.transform(e,this.matrix)));const s=this.createPatternCanvas(v);let n=new DOMMatrix(e);n=n.translate(s.offsetX,s.offsetY),n=n.scale(1/s.scaleX,1/s.scaleY);const f=_.createPattern(s.canvas,"repeat");return f.setTransform(n),f}};let h=a;je(h,"MAX_PATTERN_SIZE",3e3),o.TilingPattern=h},(x,o,X)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.convertBlackAndWhiteToRGBA=pe,o.convertToRGBA=O,o.grayToRGBA=D;var P=X(1);function O(N){switch(N.kind){case P.ImageKind.GRAYSCALE_1BPP:return pe(N);case P.ImageKind.RGB_24BPP:return G(N)}return null}function pe({src:N,srcPos:b=0,dest:d,width:k,height:w,nonBlackColor:y=4294967295,inverseDecode:r=!1}){const h=P.FeatureTest.isLittleEndian?4278190080:255,[a,g]=r?[y,h]:[h,y],_=k>>3,v=k&7,p=N.length;d=new Uint32Array(d.buffer);let t=0;for(let e=0;e<w;e++){for(const n=b+_;b<n;b++){const f=b<p?N[b]:255;d[t++]=f&128?g:a,d[t++]=f&64?g:a,d[t++]=f&32?g:a,d[t++]=f&16?g:a,d[t++]=f&8?g:a,d[t++]=f&4?g:a,d[t++]=f&2?g:a,d[t++]=f&1?g:a}if(v===0)continue;const s=b<p?N[b++]:255;for(let n=0;n<v;n++)d[t++]=s&1<<7-n?g:a}return{srcPos:b,destPos:t}}function G({src:N,srcPos:b=0,dest:d,destPos:k=0,width:w,height:y}){let r=0;const h=N.length>>2,a=new Uint32Array(N.buffer,b,h);if(P.FeatureTest.isLittleEndian){for(;r<h-2;r+=3,k+=4){const g=a[r],_=a[r+1],v=a[r+2];d[k]=g|4278190080,d[k+1]=g>>>24|_<<8|4278190080,d[k+2]=_>>>16|v<<16|4278190080,d[k+3]=v>>>8|4278190080}for(let g=r*4,_=N.length;g<_;g+=3)d[k++]=N[g]|N[g+1]<<8|N[g+2]<<16|4278190080}else{for(;r<h-2;r+=3,k+=4){const g=a[r],_=a[r+1],v=a[r+2];d[k]=g|255,d[k+1]=g<<24|_>>>8|255,d[k+2]=_<<16|v>>>16|255,d[k+3]=v<<8|255}for(let g=r*4,_=N.length;g<_;g+=3)d[k++]=N[g]<<24|N[g+1]<<16|N[g+2]<<8|255}return{srcPos:b,destPos:k}}function D(N,b){if(P.FeatureTest.isLittleEndian)for(let d=0,k=N.length;d<k;d++)b[d]=N[d]*65793|4278190080;else for(let d=0,k=N.length;d<k;d++)b[d]=N[d]*16843008|255}},(x,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.GlobalWorkerOptions=void 0;const X=Object.create(null);o.GlobalWorkerOptions=X,X.workerPort=null,X.workerSrc=""},(x,o,X)=>{var N,Ci,d,wi,w,_t;Object.defineProperty(o,"__esModule",{value:!0}),o.MessageHandler=void 0;var P=X(1);const O={UNKNOWN:0,DATA:1,ERROR:2},pe={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function G(r){switch(r instanceof Error||typeof r=="object"&&r!==null||(0,P.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new P.AbortException(r.message);case"MissingPDFException":return new P.MissingPDFException(r.message);case"PasswordException":return new P.PasswordException(r.message,r.code);case"UnexpectedResponseException":return new P.UnexpectedResponseException(r.message,r.status);case"UnknownErrorException":return new P.UnknownErrorException(r.message,r.details);default:return new P.UnknownErrorException(r.message,r.toString())}}class D{constructor(h,a,g){$(this,N);$(this,d);$(this,w);this.sourceName=h,this.targetName=a,this.comObj=g,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=_=>{const v=_.data;if(v.targetName!==this.sourceName)return;if(v.stream){Z(this,d,wi).call(this,v);return}if(v.callback){const t=v.callbackId,e=this.callbackCapabilities[t];if(!e)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],v.callback===O.DATA)e.resolve(v.data);else if(v.callback===O.ERROR)e.reject(G(v.reason));else throw new Error("Unexpected callback case");return}const p=this.actionHandler[v.action];if(!p)throw new Error(`Unknown action from worker: ${v.action}`);if(v.callbackId){const t=this.sourceName,e=v.sourceName;new Promise(function(s){s(p(v.data))}).then(function(s){g.postMessage({sourceName:t,targetName:e,callback:O.DATA,callbackId:v.callbackId,data:s})},function(s){g.postMessage({sourceName:t,targetName:e,callback:O.ERROR,callbackId:v.callbackId,reason:G(s)})});return}if(v.streamId){Z(this,N,Ci).call(this,v);return}p(v.data)},g.addEventListener("message",this._onComObjOnMessage)}on(h,a){const g=this.actionHandler;if(g[h])throw new Error(`There is already an actionName called "${h}"`);g[h]=a}send(h,a,g){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:h,data:a},g)}sendWithPromise(h,a,g){const _=this.callbackId++,v=new P.PromiseCapability;this.callbackCapabilities[_]=v;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:h,callbackId:_,data:a},g)}catch(p){v.reject(p)}return v.promise}sendWithStream(h,a,g,_){const v=this.streamId++,p=this.sourceName,t=this.targetName,e=this.comObj;return new ReadableStream({start:s=>{const n=new P.PromiseCapability;return this.streamControllers[v]={controller:s,startCall:n,pullCall:null,cancelCall:null,isClosed:!1},e.postMessage({sourceName:p,targetName:t,action:h,streamId:v,data:a,desiredSize:s.desiredSize},_),n.promise},pull:s=>{const n=new P.PromiseCapability;return this.streamControllers[v].pullCall=n,e.postMessage({sourceName:p,targetName:t,stream:pe.PULL,streamId:v,desiredSize:s.desiredSize}),n.promise},cancel:s=>{(0,P.assert)(s instanceof Error,"cancel must have a valid reason");const n=new P.PromiseCapability;return this.streamControllers[v].cancelCall=n,this.streamControllers[v].isClosed=!0,e.postMessage({sourceName:p,targetName:t,stream:pe.CANCEL,streamId:v,reason:G(s)}),n.promise}},g)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}N=new WeakSet,Ci=function(h){const a=h.streamId,g=this.sourceName,_=h.sourceName,v=this.comObj,p=this,t=this.actionHandler[h.action],e={enqueue(s,n=1,f){if(this.isCancelled)return;const T=this.desiredSize;this.desiredSize-=n,T>0&&this.desiredSize<=0&&(this.sinkCapability=new P.PromiseCapability,this.ready=this.sinkCapability.promise),v.postMessage({sourceName:g,targetName:_,stream:pe.ENQUEUE,streamId:a,chunk:s},f)},close(){this.isCancelled||(this.isCancelled=!0,v.postMessage({sourceName:g,targetName:_,stream:pe.CLOSE,streamId:a}),delete p.streamSinks[a])},error(s){(0,P.assert)(s instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,v.postMessage({sourceName:g,targetName:_,stream:pe.ERROR,streamId:a,reason:G(s)}))},sinkCapability:new P.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:h.desiredSize,ready:null};e.sinkCapability.resolve(),e.ready=e.sinkCapability.promise,this.streamSinks[a]=e,new Promise(function(s){s(t(h.data,e))}).then(function(){v.postMessage({sourceName:g,targetName:_,stream:pe.START_COMPLETE,streamId:a,success:!0})},function(s){v.postMessage({sourceName:g,targetName:_,stream:pe.START_COMPLETE,streamId:a,reason:G(s)})})},d=new WeakSet,wi=function(h){const a=h.streamId,g=this.sourceName,_=h.sourceName,v=this.comObj,p=this.streamControllers[a],t=this.streamSinks[a];switch(h.stream){case pe.START_COMPLETE:h.success?p.startCall.resolve():p.startCall.reject(G(h.reason));break;case pe.PULL_COMPLETE:h.success?p.pullCall.resolve():p.pullCall.reject(G(h.reason));break;case pe.PULL:if(!t){v.postMessage({sourceName:g,targetName:_,stream:pe.PULL_COMPLETE,streamId:a,success:!0});break}t.desiredSize<=0&&h.desiredSize>0&&t.sinkCapability.resolve(),t.desiredSize=h.desiredSize,new Promise(function(e){var s;e((s=t.onPull)==null?void 0:s.call(t))}).then(function(){v.postMessage({sourceName:g,targetName:_,stream:pe.PULL_COMPLETE,streamId:a,success:!0})},function(e){v.postMessage({sourceName:g,targetName:_,stream:pe.PULL_COMPLETE,streamId:a,reason:G(e)})});break;case pe.ENQUEUE:if((0,P.assert)(p,"enqueue should have stream controller"),p.isClosed)break;p.controller.enqueue(h.chunk);break;case pe.CLOSE:if((0,P.assert)(p,"close should have stream controller"),p.isClosed)break;p.isClosed=!0,p.controller.close(),Z(this,w,_t).call(this,p,a);break;case pe.ERROR:(0,P.assert)(p,"error should have stream controller"),p.controller.error(G(h.reason)),Z(this,w,_t).call(this,p,a);break;case pe.CANCEL_COMPLETE:h.success?p.cancelCall.resolve():p.cancelCall.reject(G(h.reason)),Z(this,w,_t).call(this,p,a);break;case pe.CANCEL:if(!t)break;new Promise(function(e){var s;e((s=t.onCancel)==null?void 0:s.call(t,G(h.reason)))}).then(function(){v.postMessage({sourceName:g,targetName:_,stream:pe.CANCEL_COMPLETE,streamId:a,success:!0})},function(e){v.postMessage({sourceName:g,targetName:_,stream:pe.CANCEL_COMPLETE,streamId:a,reason:G(e)})}),t.sinkCapability.reject(G(h.reason)),t.isCancelled=!0,delete this.streamSinks[a];break;default:throw new Error("Unexpected stream case")}},w=new WeakSet,_t=async function(h,a){var g,_,v;await Promise.allSettled([(g=h.startCall)==null?void 0:g.promise,(_=h.pullCall)==null?void 0:_.promise,(v=h.cancelCall)==null?void 0:v.promise]),delete this.streamControllers[a]},o.MessageHandler=D},(x,o,X)=>{var pe,G;Object.defineProperty(o,"__esModule",{value:!0}),o.Metadata=void 0;var P=X(1);class O{constructor({parsedData:N,rawData:b}){$(this,pe,void 0);$(this,G,void 0);_e(this,pe,N),_e(this,G,b)}getRaw(){return c(this,G)}get(N){return c(this,pe).get(N)??null}getAll(){return(0,P.objectFromMap)(c(this,pe))}has(N){return c(this,pe).has(N)}}pe=new WeakMap,G=new WeakMap,o.Metadata=O},(x,o,X)=>{var N,b,d,k,w,y,Dt;Object.defineProperty(o,"__esModule",{value:!0}),o.OptionalContentConfig=void 0;var P=X(1),O=X(8);const pe=Symbol("INTERNAL");class G{constructor(a,g){$(this,N,!0);this.name=a,this.intent=g}get visible(){return c(this,N)}_setVisible(a,g){a!==pe&&(0,P.unreachable)("Internal method `_setVisible` called."),_e(this,N,g)}}N=new WeakMap;class D{constructor(a){$(this,y);$(this,b,null);$(this,d,new Map);$(this,k,null);$(this,w,null);if(this.name=null,this.creator=null,a!==null){this.name=a.name,this.creator=a.creator,_e(this,w,a.order);for(const g of a.groups)c(this,d).set(g.id,new G(g.name,g.intent));if(a.baseState==="OFF")for(const g of c(this,d).values())g._setVisible(pe,!1);for(const g of a.on)c(this,d).get(g)._setVisible(pe,!0);for(const g of a.off)c(this,d).get(g)._setVisible(pe,!1);_e(this,k,this.getHash())}}isVisible(a){if(c(this,d).size===0)return!0;if(!a)return(0,P.warn)("Optional content group not defined."),!0;if(a.type==="OCG")return c(this,d).has(a.id)?c(this,d).get(a.id).visible:((0,P.warn)(`Optional content group not found: ${a.id}`),!0);if(a.type==="OCMD"){if(a.expression)return Z(this,y,Dt).call(this,a.expression);if(!a.policy||a.policy==="AnyOn"){for(const g of a.ids){if(!c(this,d).has(g))return(0,P.warn)(`Optional content group not found: ${g}`),!0;if(c(this,d).get(g).visible)return!0}return!1}else if(a.policy==="AllOn"){for(const g of a.ids){if(!c(this,d).has(g))return(0,P.warn)(`Optional content group not found: ${g}`),!0;if(!c(this,d).get(g).visible)return!1}return!0}else if(a.policy==="AnyOff"){for(const g of a.ids){if(!c(this,d).has(g))return(0,P.warn)(`Optional content group not found: ${g}`),!0;if(!c(this,d).get(g).visible)return!0}return!1}else if(a.policy==="AllOff"){for(const g of a.ids){if(!c(this,d).has(g))return(0,P.warn)(`Optional content group not found: ${g}`),!0;if(c(this,d).get(g).visible)return!1}return!0}return(0,P.warn)(`Unknown optional content policy ${a.policy}.`),!0}return(0,P.warn)(`Unknown group type ${a.type}.`),!0}setVisibility(a,g=!0){if(!c(this,d).has(a)){(0,P.warn)(`Optional content group not found: ${a}`);return}c(this,d).get(a)._setVisible(pe,!!g),_e(this,b,null)}get hasInitialVisibility(){return this.getHash()===c(this,k)}getOrder(){return c(this,d).size?c(this,w)?c(this,w).slice():[...c(this,d).keys()]:null}getGroups(){return c(this,d).size>0?(0,P.objectFromMap)(c(this,d)):null}getGroup(a){return c(this,d).get(a)||null}getHash(){if(c(this,b)!==null)return c(this,b);const a=new O.MurmurHash3_64;for(const[g,_]of c(this,d))a.update(`${g}:${_.visible}`);return _e(this,b,a.hexdigest())}}b=new WeakMap,d=new WeakMap,k=new WeakMap,w=new WeakMap,y=new WeakSet,Dt=function(a){const g=a.length;if(g<2)return!0;const _=a[0];for(let v=1;v<g;v++){const p=a[v];let t;if(Array.isArray(p))t=Z(this,y,Dt).call(this,p);else if(c(this,d).has(p))t=c(this,d).get(p).visible;else return(0,P.warn)(`Optional content group not found: ${p}`),!0;switch(_){case"And":if(!t)return!1;break;case"Or":if(t)return!0;break;case"Not":return!t;default:return!0}}return _==="And"},o.OptionalContentConfig=D},(x,o,X)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFDataTransportStream=void 0;var P=X(1),O=X(6);class pe{constructor({length:b,initialData:d,progressiveDone:k=!1,contentDispositionFilename:w=null,disableRange:y=!1,disableStream:r=!1},h){if((0,P.assert)(h,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=k,this._contentDispositionFilename=w,(d==null?void 0:d.length)>0){const a=d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength?d.buffer:new Uint8Array(d).buffer;this._queuedChunks.push(a)}this._pdfDataRangeTransport=h,this._isStreamingSupported=!r,this._isRangeSupported=!y,this._contentLength=b,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((a,g)=>{this._onReceiveData({begin:a,chunk:g})}),this._pdfDataRangeTransport.addProgressListener((a,g)=>{this._onProgress({loaded:a,total:g})}),this._pdfDataRangeTransport.addProgressiveReadListener(a=>{this._onReceiveData({chunk:a})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:b,chunk:d}){const k=d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength?d.buffer:new Uint8Array(d).buffer;if(b===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(k):this._queuedChunks.push(k);else{const w=this._rangeReaders.some(function(y){return y._begin!==b?!1:(y._enqueue(k),!0)});(0,P.assert)(w,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var b;return((b=this._fullRequestReader)==null?void 0:b._loaded)??0}_onProgress(b){var d,k,w,y;b.total===void 0?(k=(d=this._rangeReaders[0])==null?void 0:d.onProgress)==null||k.call(d,{loaded:b.loaded}):(y=(w=this._fullRequestReader)==null?void 0:w.onProgress)==null||y.call(w,{loaded:b.loaded,total:b.total})}_onProgressiveDone(){var b;(b=this._fullRequestReader)==null||b.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(b){const d=this._rangeReaders.indexOf(b);d>=0&&this._rangeReaders.splice(d,1)}getFullReader(){(0,P.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const b=this._queuedChunks;return this._queuedChunks=null,new G(this,b,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(b,d){if(d<=this._progressiveDataLength)return null;const k=new D(this,b,d);return this._pdfDataRangeTransport.requestDataRange(b,d),this._rangeReaders.push(k),k}cancelAllRequests(b){var d;(d=this._fullRequestReader)==null||d.cancel(b);for(const k of this._rangeReaders.slice(0))k.cancel(b);this._pdfDataRangeTransport.abort()}}o.PDFDataTransportStream=pe;class G{constructor(b,d,k=!1,w=null){this._stream=b,this._done=k||!1,this._filename=(0,O.isPdfFile)(w)?w:null,this._queuedChunks=d||[],this._loaded=0;for(const y of this._queuedChunks)this._loaded+=y.byteLength;this._requests=[],this._headersReady=Promise.resolve(),b._fullRequestReader=this,this.onProgress=null}_enqueue(b){this._done||(this._requests.length>0?this._requests.shift().resolve({value:b,done:!1}):this._queuedChunks.push(b),this._loaded+=b.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const b=new P.PromiseCapability;return this._requests.push(b),b.promise}cancel(b){this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class D{constructor(b,d,k){this._stream=b,this._begin=d,this._end=k,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(b){if(!this._done){if(this._requests.length===0)this._queuedChunk=b;else{this._requests.shift().resolve({value:b,done:!1});for(const k of this._requests)k.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const d=this._queuedChunk;return this._queuedChunk=null,{value:d,done:!1}}if(this._done)return{value:void 0,done:!0};const b=new P.PromiseCapability;return this._requests.push(b),b.promise}cancel(b){this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(x,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.XfaText=void 0;class X{static textContent(O){const pe=[],G={items:pe,styles:Object.create(null)};function D(N){var k;if(!N)return;let b=null;const d=N.name;if(d==="#text")b=N.value;else if(X.shouldBuildText(d))(k=N==null?void 0:N.attributes)!=null&&k.textContent?b=N.attributes.textContent:N.value&&(b=N.value);else return;if(b!==null&&pe.push({str:b}),!!N.children)for(const w of N.children)D(w)}return D(O),G}static shouldBuildText(O){return!(O==="textarea"||O==="input"||O==="option"||O==="select")}}o.XfaText=X},(x,o,X)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.NodeStandardFontDataFactory=o.NodeFilterFactory=o.NodeCanvasFactory=o.NodeCMapReaderFactory=void 0;var P=X(7);const O=function(b){return new Promise((d,k)=>{require$$5.readFile(b,(y,r)=>{if(y||!r){k(new Error(y));return}d(new Uint8Array(r))})})};class pe extends P.BaseFilterFactory{}o.NodeFilterFactory=pe;class G extends P.BaseCanvasFactory{_createCanvas(d,k){return require$$5.createCanvas(d,k)}}o.NodeCanvasFactory=G;class D extends P.BaseCMapReaderFactory{_fetchData(d,k){return O(d).then(w=>({cMapData:w,compressionType:k}))}}o.NodeCMapReaderFactory=D;class N extends P.BaseStandardFontDataFactory{_fetchData(d){return O(d)}}o.NodeStandardFontDataFactory=N},(x,o,X)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFNodeStream=void 0;var P=X(1),O=X(22);const pe=require$$5,G=require$$5,D=require$$5,N=require$$5,b=/^file:\/\/\/[a-zA-Z]:\//;function d(v){const p=N.parse(v);return p.protocol==="file:"||p.host?p:/^[a-z]:[/\\]/i.test(v)?N.parse(`file:///${v}`):(p.host||(p.protocol="file:"),p)}class k{constructor(p){this.source=p,this.url=d(p.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&p.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var p;return((p=this._fullRequestReader)==null?void 0:p._loaded)??0}getFullReader(){return(0,P.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new g(this):new h(this),this._fullRequestReader}getRangeReader(p,t){if(t<=this._progressiveDataLength)return null;const e=this.isFsUrl?new _(this,p,t):new a(this,p,t);return this._rangeRequestReaders.push(e),e}cancelAllRequests(p){var t;(t=this._fullRequestReader)==null||t.cancel(p);for(const e of this._rangeRequestReaders.slice(0))e.cancel(p)}}o.PDFNodeStream=k;class w{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=p.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=new P.PromiseCapability,this._headersCapability=new P.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=new P.PromiseCapability,this.read()):(this._loaded+=p.length,(e=this.onProgress)==null||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new P.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class y{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new P.PromiseCapability;const t=p.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const p=this._readableStream.read();return p===null?(this._readCapability=new P.PromiseCapability,this.read()):(this._loaded+=p.length,(e=this.onProgress)==null||e.call(this,{loaded:this._loaded}),{value:new Uint8Array(p).buffer,done:!1})}cancel(p){if(!this._readableStream){this._error(p);return}this._readableStream.destroy(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function r(v,p){return{protocol:v.protocol,auth:v.auth,host:v.hostname,port:v.port,path:v.path,method:"GET",headers:p}}class h extends w{constructor(p){super(p);const t=e=>{if(e.statusCode===404){const T=new P.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=T,this._headersCapability.reject(T);return}this._headersCapability.resolve(),this._setReadableStream(e);const s=T=>this._readableStream.headers[T.toLowerCase()],{allowRangeRequests:n,suggestedLength:f}=(0,O.validateRangeRequestCapabilities)({getResponseHeader:s,isHttp:p.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=n,this._contentLength=f||this._contentLength,this._filename=(0,O.extractFilenameFromHeader)(s)};this._request=null,this._url.protocol==="http:"?this._request=G.request(r(this._url,p.httpHeaders),t):this._request=D.request(r(this._url,p.httpHeaders),t),this._request.on("error",e=>{this._storedError=e,this._headersCapability.reject(e)}),this._request.end()}}class a extends y{constructor(p,t,e){super(p),this._httpHeaders={};for(const n in p.httpHeaders){const f=p.httpHeaders[n];f!==void 0&&(this._httpHeaders[n]=f)}this._httpHeaders.Range=`bytes=${t}-${e-1}`;const s=n=>{if(n.statusCode===404){const f=new P.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=f;return}this._setReadableStream(n)};this._request=null,this._url.protocol==="http:"?this._request=G.request(r(this._url,this._httpHeaders),s):this._request=D.request(r(this._url,this._httpHeaders),s),this._request.on("error",n=>{this._storedError=n}),this._request.end()}}class g extends w{constructor(p){super(p);let t=decodeURIComponent(this._url.path);b.test(this._url.href)&&(t=t.replace(/^\//,"")),pe.lstat(t,(e,s)=>{if(e){e.code==="ENOENT"&&(e=new P.MissingPDFException(`Missing PDF "${t}".`)),this._storedError=e,this._headersCapability.reject(e);return}this._contentLength=s.size,this._setReadableStream(pe.createReadStream(t)),this._headersCapability.resolve()})}}class _ extends y{constructor(p,t,e){super(p);let s=decodeURIComponent(this._url.path);b.test(this._url.href)&&(s=s.replace(/^\//,"")),this._setReadableStream(pe.createReadStream(s,{start:t,end:e-1}))}}},(x,o,X)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createResponseStatusError=N,o.extractFilenameFromHeader=D,o.validateRangeRequestCapabilities=G,o.validateResponseStatus=b;var P=X(1),O=X(23),pe=X(6);function G({getResponseHeader:d,isHttp:k,rangeChunkSize:w,disableRange:y}){const r={allowRangeRequests:!1,suggestedLength:void 0},h=parseInt(d("Content-Length"),10);return!Number.isInteger(h)||(r.suggestedLength=h,h<=2*w)||y||!k||d("Accept-Ranges")!=="bytes"||(d("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function D(d){const k=d("Content-Disposition");if(k){let w=(0,O.getFilenameFromContentDispositionHeader)(k);if(w.includes("%"))try{w=decodeURIComponent(w)}catch{}if((0,pe.isPdfFile)(w))return w}return null}function N(d,k){return d===404||d===0&&k.startsWith("file:")?new P.MissingPDFException('Missing PDF "'+k+'".'):new P.UnexpectedResponseException(`Unexpected server response (${d}) while retrieving PDF "${k}".`,d)}function b(d){return d===200||d===206}},(x,o,X)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getFilenameFromContentDispositionHeader=O;var P=X(1);function O(pe){let G=!0,D=N("filename\\*","i").exec(pe);if(D){D=D[1];let h=w(D);return h=unescape(h),h=y(h),h=r(h),d(h)}if(D=k(pe),D){const h=r(D);return d(h)}if(D=N("filename","i").exec(pe),D){D=D[1];let h=w(D);return h=r(h),d(h)}function N(h,a){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',a)}function b(h,a){if(h){if(!/^[\x00-\xFF]+$/.test(a))return a;try{const g=new TextDecoder(h,{fatal:!0}),_=(0,P.stringToBytes)(a);a=g.decode(_),G=!1}catch{}}return a}function d(h){return G&&/[\x80-\xff]/.test(h)&&(h=b("utf-8",h),G&&(h=b("iso-8859-1",h))),h}function k(h){const a=[];let g;const _=N("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=_.exec(h))!==null;){let[,p,t,e]=g;if(p=parseInt(p,10),p in a){if(p===0)break;continue}a[p]=[t,e]}const v=[];for(let p=0;p<a.length&&p in a;++p){let[t,e]=a[p];e=w(e),t&&(e=unescape(e),p===0&&(e=y(e))),v.push(e)}return v.join("")}function w(h){if(h.startsWith('"')){const a=h.slice(1).split('\\"');for(let g=0;g<a.length;++g){const _=a[g].indexOf('"');_!==-1&&(a[g]=a[g].slice(0,_),a.length=g+1),a[g]=a[g].replaceAll(/\\(.)/g,"$1")}h=a.join('"')}return h}function y(h){const a=h.indexOf("'");if(a===-1)return h;const g=h.slice(0,a),v=h.slice(a+1).replace(/^[^']*'/,"");return b(g,v)}function r(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(a,g,_,v){if(_==="q"||_==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(p,t){return String.fromCharCode(parseInt(t,16))}),b(g,v);try{v=atob(v)}catch{}return b(g,v)})}return""}},(x,o,X)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFNetworkStream=void 0;var P=X(1),O=X(22);const pe=200,G=206;function D(w){const y=w.response;return typeof y!="string"?y:(0,P.stringToBytes)(y).buffer}class N{constructor(y,r={}){this.url=y,this.isHttp=/^https?:/i.test(y),this.httpHeaders=this.isHttp&&r.httpHeaders||Object.create(null),this.withCredentials=r.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(y,r,h){const a={begin:y,end:r};for(const g in h)a[g]=h[g];return this.request(a)}requestFull(y){return this.request(y)}request(y){const r=new XMLHttpRequest,h=this.currXhrId++,a=this.pendingRequests[h]={xhr:r};r.open("GET",this.url),r.withCredentials=this.withCredentials;for(const g in this.httpHeaders){const _=this.httpHeaders[g];_!==void 0&&r.setRequestHeader(g,_)}return this.isHttp&&"begin"in y&&"end"in y?(r.setRequestHeader("Range",`bytes=${y.begin}-${y.end-1}`),a.expectedStatus=G):a.expectedStatus=pe,r.responseType="arraybuffer",y.onError&&(r.onerror=function(g){y.onError(r.status)}),r.onreadystatechange=this.onStateChange.bind(this,h),r.onprogress=this.onProgress.bind(this,h),a.onHeadersReceived=y.onHeadersReceived,a.onDone=y.onDone,a.onError=y.onError,a.onProgress=y.onProgress,r.send(null),h}onProgress(y,r){var a;const h=this.pendingRequests[y];h&&((a=h.onProgress)==null||a.call(h,r))}onStateChange(y,r){var p,t,e;const h=this.pendingRequests[y];if(!h)return;const a=h.xhr;if(a.readyState>=2&&h.onHeadersReceived&&(h.onHeadersReceived(),delete h.onHeadersReceived),a.readyState!==4||!(y in this.pendingRequests))return;if(delete this.pendingRequests[y],a.status===0&&this.isHttp){(p=h.onError)==null||p.call(h,a.status);return}const g=a.status||pe;if(!(g===pe&&h.expectedStatus===G)&&g!==h.expectedStatus){(t=h.onError)==null||t.call(h,a.status);return}const v=D(a);if(g===G){const s=a.getResponseHeader("Content-Range"),n=/bytes (\d+)-(\d+)\/(\d+)/.exec(s);h.onDone({begin:parseInt(n[1],10),chunk:v})}else v?h.onDone({begin:0,chunk:v}):(e=h.onError)==null||e.call(h,a.status)}getRequestXhr(y){return this.pendingRequests[y].xhr}isPendingRequest(y){return y in this.pendingRequests}abortRequest(y){const r=this.pendingRequests[y].xhr;delete this.pendingRequests[y],r.abort()}}class b{constructor(y){this._source=y,this._manager=new N(y.url,{httpHeaders:y.httpHeaders,withCredentials:y.withCredentials}),this._rangeChunkSize=y.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(y){const r=this._rangeRequestReaders.indexOf(y);r>=0&&this._rangeRequestReaders.splice(r,1)}getFullReader(){return(0,P.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new d(this._manager,this._source),this._fullRequestReader}getRangeReader(y,r){const h=new k(this._manager,y,r);return h.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(h),h}cancelAllRequests(y){var r;(r=this._fullRequestReader)==null||r.cancel(y);for(const h of this._rangeRequestReaders.slice(0))h.cancel(y)}}o.PDFNetworkStream=b;class d{constructor(y,r){this._manager=y;const h={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=r.url,this._fullRequestId=y.requestFull(h),this._headersReceivedCapability=new P.PromiseCapability,this._disableRange=r.disableRange||!1,this._contentLength=r.length,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const y=this._fullRequestId,r=this._manager.getRequestXhr(y),h=_=>r.getResponseHeader(_),{allowRangeRequests:a,suggestedLength:g}=(0,O.validateRangeRequestCapabilities)({getResponseHeader:h,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=g||this._contentLength,this._filename=(0,O.extractFilenameFromHeader)(h),this._isRangeSupported&&this._manager.abortRequest(y),this._headersReceivedCapability.resolve()}_onDone(y){if(y&&(this._requests.length>0?this._requests.shift().resolve({value:y.chunk,done:!1}):this._cachedChunks.push(y.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(y){this._storedError=(0,O.createResponseStatusError)(y,this._url),this._headersReceivedCapability.reject(this._storedError);for(const r of this._requests)r.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(y){var r;(r=this.onProgress)==null||r.call(this,{loaded:y.loaded,total:y.lengthComputable?y.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const y=new P.PromiseCapability;return this._requests.push(y),y.promise}cancel(y){this._done=!0,this._headersReceivedCapability.reject(y);for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class k{constructor(y,r,h){this._manager=y;const a={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=y.url,this._requestId=y.requestRange(r,h,a),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var y;(y=this.onClosed)==null||y.call(this,this)}_onDone(y){const r=y.chunk;this._requests.length>0?this._requests.shift().resolve({value:r,done:!1}):this._queuedChunk=r,this._done=!0;for(const h of this._requests)h.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(y){this._storedError=(0,O.createResponseStatusError)(y,this._url);for(const r of this._requests)r.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(y){var r;this.isStreamingSupported||(r=this.onProgress)==null||r.call(this,{loaded:y.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const r=this._queuedChunk;return this._queuedChunk=null,{value:r,done:!1}}if(this._done)return{value:void 0,done:!0};const y=new P.PromiseCapability;return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(x,o,X)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PDFFetchStream=void 0;var P=X(1),O=X(22);function pe(k,w,y){return{method:"GET",headers:k,signal:y.signal,mode:"cors",credentials:w?"include":"same-origin",redirect:"follow"}}function G(k){const w=new Headers;for(const y in k){const r=k[y];r!==void 0&&w.append(y,r)}return w}function D(k){return k instanceof Uint8Array?k.buffer:k instanceof ArrayBuffer?k:((0,P.warn)(`getArrayBuffer - unexpected data format: ${k}`),new Uint8Array(k).buffer)}class N{constructor(w){this.source=w,this.isHttp=/^https?:/i.test(w.url),this.httpHeaders=this.isHttp&&w.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var w;return((w=this._fullRequestReader)==null?void 0:w._loaded)??0}getFullReader(){return(0,P.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new b(this),this._fullRequestReader}getRangeReader(w,y){if(y<=this._progressiveDataLength)return null;const r=new d(this,w,y);return this._rangeRequestReaders.push(r),r}cancelAllRequests(w){var y;(y=this._fullRequestReader)==null||y.cancel(w);for(const r of this._rangeRequestReaders.slice(0))r.cancel(w)}}o.PDFFetchStream=N;class b{constructor(w){this._stream=w,this._reader=null,this._loaded=0,this._filename=null;const y=w.source;this._withCredentials=y.withCredentials||!1,this._contentLength=y.length,this._headersCapability=new P.PromiseCapability,this._disableRange=y.disableRange||!1,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._headers=G(this._stream.httpHeaders);const r=y.url;fetch(r,pe(this._headers,this._withCredentials,this._abortController)).then(h=>{if(!(0,O.validateResponseStatus)(h.status))throw(0,O.createResponseStatusError)(h.status,r);this._reader=h.body.getReader(),this._headersCapability.resolve();const a=v=>h.headers.get(v),{allowRangeRequests:g,suggestedLength:_}=(0,O.validateRangeRequestCapabilities)({getResponseHeader:a,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=g,this._contentLength=_||this._contentLength,this._filename=(0,O.extractFilenameFromHeader)(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new P.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:w,done:y}=await this._reader.read();return y?{value:w,done:y}:(this._loaded+=w.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:D(w),done:!1})}cancel(w){var y;(y=this._reader)==null||y.cancel(w),this._abortController.abort()}}class d{constructor(w,y,r){this._stream=w,this._reader=null,this._loaded=0;const h=w.source;this._withCredentials=h.withCredentials||!1,this._readCapability=new P.PromiseCapability,this._isStreamingSupported=!h.disableStream,this._abortController=new AbortController,this._headers=G(this._stream.httpHeaders),this._headers.append("Range",`bytes=${y}-${r-1}`);const a=h.url;fetch(a,pe(this._headers,this._withCredentials,this._abortController)).then(g=>{if(!(0,O.validateResponseStatus)(g.status))throw(0,O.createResponseStatusError)(g.status,a);this._readCapability.resolve(),this._reader=g.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:w,done:y}=await this._reader.read();return y?{value:w,done:y}:(this._loaded+=w.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:D(w),done:!1})}cancel(w){var y;(y=this._reader)==null||y.cancel(w),this._abortController.abort()}}},(x,o,X)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TextLayerRenderTask=void 0,o.renderTextLayer=h,o.updateTextLayer=a;var P=X(1),O=X(6);const pe=1e5,G=30,D=.8,N=new Map;function b(g,_){let v;if(_&&P.FeatureTest.isOffscreenCanvasSupported)v=new OffscreenCanvas(g,g).getContext("2d",{alpha:!1});else{const p=document.createElement("canvas");p.width=p.height=g,v=p.getContext("2d",{alpha:!1})}return v}function d(g,_){const v=N.get(g);if(v)return v;const p=b(G,_);p.font=`${G}px ${g}`;const t=p.measureText("");let e=t.fontBoundingBoxAscent,s=Math.abs(t.fontBoundingBoxDescent);if(e){const f=e/(e+s);return N.set(g,f),p.canvas.width=p.canvas.height=0,f}p.strokeStyle="red",p.clearRect(0,0,G,G),p.strokeText("g",0,0);let n=p.getImageData(0,0,G,G).data;s=0;for(let f=n.length-1-3;f>=0;f-=4)if(n[f]>0){s=Math.ceil(f/4/G);break}p.clearRect(0,0,G,G),p.strokeText("A",0,G),n=p.getImageData(0,0,G,G).data,e=0;for(let f=0,T=n.length;f<T;f+=4)if(n[f]>0){e=G-Math.floor(f/4/G);break}if(p.canvas.width=p.canvas.height=0,e){const f=e/(e+s);return N.set(g,f),f}return N.set(g,D),D}function k(g,_,v){const p=document.createElement("span"),t={angle:0,canvasWidth:0,hasText:_.str!=="",hasEOL:_.hasEOL,fontSize:0};g._textDivs.push(p);const e=P.Util.transform(g._transform,_.transform);let s=Math.atan2(e[1],e[0]);const n=v[_.fontName];n.vertical&&(s+=Math.PI/2);const f=Math.hypot(e[2],e[3]),T=f*d(n.fontFamily,g._isOffscreenCanvasSupported);let l,I;s===0?(l=e[4],I=e[5]-T):(l=e[4]+T*Math.sin(s),I=e[5]-T*Math.cos(s));const K="calc(var(--scale-factor)*",le=p.style;g._container===g._rootContainer?(le.left=`${(100*l/g._pageWidth).toFixed(2)}%`,le.top=`${(100*I/g._pageHeight).toFixed(2)}%`):(le.left=`${K}${l.toFixed(2)}px)`,le.top=`${K}${I.toFixed(2)}px)`),le.fontSize=`${K}${f.toFixed(2)}px)`,le.fontFamily=n.fontFamily,t.fontSize=f,p.setAttribute("role","presentation"),p.textContent=_.str,p.dir=_.dir,g._fontInspectorEnabled&&(p.dataset.fontName=_.fontName),s!==0&&(t.angle=s*(180/Math.PI));let H=!1;if(_.str.length>1)H=!0;else if(_.str!==" "&&_.transform[0]!==_.transform[3]){const ee=Math.abs(_.transform[0]),ae=Math.abs(_.transform[3]);ee!==ae&&Math.max(ee,ae)/Math.min(ee,ae)>1.5&&(H=!0)}H&&(t.canvasWidth=n.vertical?_.height:_.width),g._textDivProperties.set(p,t),g._isReadableStream&&g._layoutText(p)}function w(g){const{div:_,scale:v,properties:p,ctx:t,prevFontSize:e,prevFontFamily:s}=g,{style:n}=_;let f="";if(p.canvasWidth!==0&&p.hasText){const{fontFamily:T}=n,{canvasWidth:l,fontSize:I}=p;(e!==I||s!==T)&&(t.font=`${I*v}px ${T}`,g.prevFontSize=I,g.prevFontFamily=T);const{width:K}=t.measureText(_.textContent);K>0&&(f=`scaleX(${l*v/K})`)}p.angle!==0&&(f=`rotate(${p.angle}deg) ${f}`),f.length>0&&(n.transform=f)}function y(g){if(g._canceled)return;const _=g._textDivs,v=g._capability;if(_.length>pe){v.resolve();return}if(!g._isReadableStream)for(const t of _)g._layoutText(t);v.resolve()}class r{constructor({textContentSource:_,container:v,viewport:p,textDivs:t,textDivProperties:e,textContentItemsStr:s,isOffscreenCanvasSupported:n}){var K;this._textContentSource=_,this._isReadableStream=_ instanceof ReadableStream,this._container=this._rootContainer=v,this._textDivs=t||[],this._textContentItemsStr=s||[],this._isOffscreenCanvasSupported=n,this._fontInspectorEnabled=!!((K=globalThis.FontInspector)!=null&&K.enabled),this._reader=null,this._textDivProperties=e||new WeakMap,this._canceled=!1,this._capability=new P.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:p.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:b(0,n)};const{pageWidth:f,pageHeight:T,pageX:l,pageY:I}=p.rawDims;this._transform=[1,0,0,-1,-l,I+T],this._pageWidth=f,this._pageHeight=T,(0,O.setLayerDimensions)(v,p),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new P.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new P.AbortException("TextLayer task cancelled."))}_processItems(_,v){for(const p of _){if(p.str===void 0){if(p.type==="beginMarkedContentProps"||p.type==="beginMarkedContent"){const t=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),p.id!==null&&this._container.setAttribute("id",`${p.id}`),t.append(this._container)}else p.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(p.str),k(this,p,v)}}_layoutText(_){const v=this._layoutTextParams.properties=this._textDivProperties.get(_);if(this._layoutTextParams.div=_,w(this._layoutTextParams),v.hasText&&this._container.append(_),v.hasEOL){const p=document.createElement("br");p.setAttribute("role","presentation"),this._container.append(p)}}_render(){const _=new P.PromiseCapability;let v=Object.create(null);if(this._isReadableStream){const p=()=>{this._reader.read().then(({value:t,done:e})=>{if(e){_.resolve();return}Object.assign(v,t.styles),this._processItems(t.items,v),p()},_.reject)};this._reader=this._textContentSource.getReader(),p()}else if(this._textContentSource){const{items:p,styles:t}=this._textContentSource;this._processItems(p,t),_.resolve()}else throw new Error('No "textContentSource" parameter specified.');_.promise.then(()=>{v=null,y(this)},this._capability.reject)}}o.TextLayerRenderTask=r;function h(g){!g.textContentSource&&(g.textContent||g.textContentStream)&&((0,O.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),g.textContentSource=g.textContent||g.textContentStream);const{container:_,viewport:v}=g,p=getComputedStyle(_),t=p.getPropertyValue("visibility"),e=parseFloat(p.getPropertyValue("--scale-factor"));t==="visible"&&(!e||Math.abs(e-v.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const s=new r(g);return s._render(),s}function a({container:g,viewport:_,textDivs:v,textDivProperties:p,isOffscreenCanvasSupported:t,mustRotate:e=!0,mustRescale:s=!0}){if(e&&(0,O.setLayerDimensions)(g,{rotation:_.rotation}),s){const n=b(0,t),T={prevFontSize:null,prevFontFamily:null,div:null,scale:_.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:n};for(const l of v)T.properties=p.get(l),T.div=l,w(T)}}},(x,o,X)=>{var b,d,k,w,y,r,h,a,g,Ot,v,Ti,t,Nt,s,Bt;Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationEditorLayer=void 0;var P=X(1),O=X(5),pe=X(28),G=X(29),D=X(6);const f=class{constructor(l){$(this,g);$(this,v);$(this,t);$(this,s);$(this,b,void 0);$(this,d,!1);$(this,k,this.pointerup.bind(this));$(this,w,this.pointerdown.bind(this));$(this,y,new Map);$(this,r,!1);$(this,h,!1);$(this,a,void 0);f._initialized||(f._initialized=!0,pe.FreeTextEditor.initialize(l.l10n),G.InkEditor.initialize(l.l10n)),l.uiManager.registerEditorTypes([pe.FreeTextEditor,G.InkEditor]),_e(this,a,l.uiManager),this.pageIndex=l.pageIndex,this.div=l.div,_e(this,b,l.accessibilityManager),c(this,a).addLayer(this)}get isEmpty(){return c(this,y).size===0}updateToolbar(l){c(this,a).updateToolbar(l)}updateMode(l=c(this,a).getMode()){Z(this,s,Bt).call(this),l===P.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),c(this,a).unselectAll(),l!==P.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",l===P.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",l===P.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(l){if(!l&&c(this,a).getMode()!==P.AnnotationEditorType.INK)return;if(!l){for(const K of c(this,y).values())if(K.isEmpty()){K.setInBackground();return}}Z(this,t,Nt).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(l){c(this,a).setEditingState(l)}addCommands(l){c(this,a).addCommands(l)}enable(){this.div.style.pointerEvents="auto";for(const l of c(this,y).values())l.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const l of c(this,y).values())l.disableEditing();Z(this,s,Bt).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(l){c(this,a).getActive()!==l&&c(this,a).setActiveEditor(l)}enableClick(){this.div.addEventListener("pointerdown",c(this,w)),this.div.addEventListener("pointerup",c(this,k))}disableClick(){this.div.removeEventListener("pointerdown",c(this,w)),this.div.removeEventListener("pointerup",c(this,k))}attach(l){c(this,y).set(l.id,l)}detach(l){var I;c(this,y).delete(l.id),(I=c(this,b))==null||I.removePointerInTextLayer(l.contentDiv)}remove(l){c(this,a).removeEditor(l),this.detach(l),l.div.style.display="none",setTimeout(()=>{l.div.style.display="",l.div.remove(),l.isAttachedToDOM=!1,document.activeElement===document.body&&c(this,a).focusMainContainer()},0),c(this,h)||this.addInkEditorIfNeeded(!1)}add(l){if(Z(this,g,Ot).call(this,l),c(this,a).addEditor(l),this.attach(l),!l.isAttachedToDOM){const I=l.render();this.div.append(I),l.isAttachedToDOM=!0}this.moveEditorInDOM(l),l.onceAdded(),c(this,a).addToAnnotationStorage(l)}moveEditorInDOM(l){var I;(I=c(this,b))==null||I.moveElementInDOM(this.div,l.div,l.contentDiv,!0)}addOrRebuild(l){l.needsToBeRebuilt()?l.rebuild():this.add(l)}addANewEditor(l){const I=()=>{this.addOrRebuild(l)},K=()=>{l.remove()};this.addCommands({cmd:I,undo:K,mustExec:!0})}addUndoableEditor(l){const I=()=>{this.addOrRebuild(l)},K=()=>{l.remove()};this.addCommands({cmd:I,undo:K,mustExec:!1})}getNextId(){return c(this,a).getId()}deserialize(l){switch(l.annotationType){case P.AnnotationEditorType.FREETEXT:return pe.FreeTextEditor.deserialize(l,this,c(this,a));case P.AnnotationEditorType.INK:return G.InkEditor.deserialize(l,this,c(this,a))}return null}setSelected(l){c(this,a).setSelected(l)}toggleSelected(l){c(this,a).toggleSelected(l)}isSelected(l){return c(this,a).isSelected(l)}unselect(l){c(this,a).unselect(l)}pointerup(l){const{isMac:I}=P.FeatureTest.platform;if(!(l.button!==0||l.ctrlKey&&I)&&l.target===this.div&&c(this,r)){if(_e(this,r,!1),!c(this,d)){_e(this,d,!0);return}Z(this,t,Nt).call(this,l)}}pointerdown(l){const{isMac:I}=P.FeatureTest.platform;if(l.button!==0||l.ctrlKey&&I||l.target!==this.div)return;_e(this,r,!0);const K=c(this,a).getActive();_e(this,d,!K||K.isEmpty())}drop(l){const I=l.dataTransfer.getData("text/plain"),K=c(this,a).getEditor(I);if(!K)return;l.preventDefault(),l.dataTransfer.dropEffect="move",Z(this,g,Ot).call(this,K);const le=this.div.getBoundingClientRect(),H=l.clientX-le.x,ee=l.clientY-le.y;K.translate(H-K.startX,ee-K.startY),this.moveEditorInDOM(K),K.div.focus()}dragover(l){l.preventDefault()}destroy(){var l,I;((l=c(this,a).getActive())==null?void 0:l.parent)===this&&c(this,a).setActiveEditor(null);for(const K of c(this,y).values())(I=c(this,b))==null||I.removePointerInTextLayer(K.contentDiv),K.setParent(null),K.isAttachedToDOM=!1,K.div.remove();this.div=null,c(this,y).clear(),c(this,a).removeLayer(this)}render({viewport:l}){this.viewport=l,(0,D.setLayerDimensions)(this.div,l),(0,O.bindEvents)(this,this.div,["dragover","drop"]);for(const I of c(this,a).getEditors(this.pageIndex))this.add(I);this.updateMode()}update({viewport:l}){c(this,a).commitOrRemove(),this.viewport=l,(0,D.setLayerDimensions)(this.div,{rotation:l.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:l,pageHeight:I}=this.viewport.rawDims;return[l,I]}};let N=f;b=new WeakMap,d=new WeakMap,k=new WeakMap,w=new WeakMap,y=new WeakMap,r=new WeakMap,h=new WeakMap,a=new WeakMap,g=new WeakSet,Ot=function(l){var I;l.parent!==this&&(this.attach(l),(I=l.parent)==null||I.detach(l),l.setParent(this),l.div&&l.isAttachedToDOM&&(l.div.remove(),this.div.append(l.div)))},v=new WeakSet,Ti=function(l){switch(c(this,a).getMode()){case P.AnnotationEditorType.FREETEXT:return new pe.FreeTextEditor(l);case P.AnnotationEditorType.INK:return new G.InkEditor(l)}return null},t=new WeakSet,Nt=function(l){const I=this.getNextId(),K=Z(this,v,Ti).call(this,{parent:this,id:I,x:l.offsetX,y:l.offsetY,uiManager:c(this,a)});return K&&this.add(K),K},s=new WeakSet,Bt=function(){_e(this,h,!0);for(const l of c(this,y).values())l.isEmpty()&&l.remove();_e(this,h,!1)},je(N,"_initialized",!1),o.AnnotationEditorLayer=N},(x,o,X)=>{var D,N,b,d,k,w,y,r,h,a,xi,_,Mi,p,Ri,e,Vt;Object.defineProperty(o,"__esModule",{value:!0}),o.FreeTextEditor=void 0;var P=X(1),O=X(5),pe=X(4);const n=class extends pe.AnnotationEditor{constructor(l){super({...l,name:"freeTextEditor"});$(this,a);$(this,_);$(this,p);$(this,e);$(this,D,this.editorDivBlur.bind(this));$(this,N,this.editorDivFocus.bind(this));$(this,b,this.editorDivInput.bind(this));$(this,d,this.editorDivKeydown.bind(this));$(this,k,void 0);$(this,w,"");$(this,y,`${this.id}-editor`);$(this,r,!1);$(this,h,void 0);_e(this,k,l.color||n._defaultColor||pe.AnnotationEditor._defaultLineColor),_e(this,h,l.fontSize||n._defaultFontSize)}static initialize(l){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(K=>[K,l.get(K)]));const I=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(I.getPropertyValue("--freetext-padding"))}static updateDefaultParams(l,I){switch(l){case P.AnnotationEditorParamsType.FREETEXT_SIZE:n._defaultFontSize=I;break;case P.AnnotationEditorParamsType.FREETEXT_COLOR:n._defaultColor=I;break}}updateParams(l,I){switch(l){case P.AnnotationEditorParamsType.FREETEXT_SIZE:Z(this,a,xi).call(this,I);break;case P.AnnotationEditorParamsType.FREETEXT_COLOR:Z(this,_,Mi).call(this,I);break}}static get defaultPropertiesToUpdate(){return[[P.AnnotationEditorParamsType.FREETEXT_SIZE,n._defaultFontSize],[P.AnnotationEditorParamsType.FREETEXT_COLOR,n._defaultColor||pe.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[P.AnnotationEditorParamsType.FREETEXT_SIZE,c(this,h)],[P.AnnotationEditorParamsType.FREETEXT_COLOR,c(this,k)]]}getInitialTranslation(){const l=this.parentScale;return[-n._internalPadding*l,-(n._internalPadding+c(this,h))*l]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(P.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",c(this,d)),this.editorDiv.addEventListener("focus",c(this,N)),this.editorDiv.addEventListener("blur",c(this,D)),this.editorDiv.addEventListener("input",c(this,b)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,y)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",c(this,d)),this.editorDiv.removeEventListener("focus",c(this,N)),this.editorDiv.removeEventListener("blur",c(this,D)),this.editorDiv.removeEventListener("input",c(this,b)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(l){super.focusin(l),l.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),c(this,r)||(_e(this,r,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),_e(this,w,Z(this,p,Ri).call(this).trimEnd()),Z(this,e,Vt).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(l){this.enableEditMode(),this.editorDiv.focus()}keydown(l){l.target===this.div&&l.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(l){n._keyboardManager.exec(this,l)}editorDivFocus(l){this.isEditing=!0}editorDivBlur(l){this.isEditing=!1}editorDivInput(l){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let l,I;this.width&&(l=this.x,I=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,y)),this.enableEditing(),n._l10nPromise.get("editor_free_text2_aria_label").then(le=>{var H;return(H=this.editorDiv)==null?void 0:H.setAttribute("aria-label",le)}),n._l10nPromise.get("free_text2_default_content").then(le=>{var H;return(H=this.editorDiv)==null?void 0:H.setAttribute("default-content",le)}),this.editorDiv.contentEditable=!0;const{style:K}=this.editorDiv;if(K.fontSize=`calc(${c(this,h)}px * var(--scale-factor))`,K.color=c(this,k),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,O.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[le,H]=this.parentDimensions;this.setAt(l*le,I*H,this.width*le,this.height*H);for(const ee of c(this,w).split(`
`)){const ae=document.createElement("div");ae.append(ee?document.createTextNode(ee):document.createElement("br")),this.editorDiv.append(ae)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(l,I,K){const le=super.deserialize(l,I,K);return _e(le,h,l.fontSize),_e(le,k,P.Util.makeHexColor(...l.color)),_e(le,w,l.value),le}serialize(){if(this.isEmpty())return null;const l=n._internalPadding*this.parentScale,I=this.getRect(l,l),K=pe.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,k));return{annotationType:P.AnnotationEditorType.FREETEXT,color:K,fontSize:c(this,h),value:c(this,w),pageIndex:this.pageIndex,rect:I,rotation:this.rotation}}};let G=n;D=new WeakMap,N=new WeakMap,b=new WeakMap,d=new WeakMap,k=new WeakMap,w=new WeakMap,y=new WeakMap,r=new WeakMap,h=new WeakMap,a=new WeakSet,xi=function(l){const I=le=>{this.editorDiv.style.fontSize=`calc(${le}px * var(--scale-factor))`,this.translate(0,-(le-c(this,h))*this.parentScale),_e(this,h,le),Z(this,e,Vt).call(this)},K=c(this,h);this.addCommands({cmd:()=>{I(l)},undo:()=>{I(K)},mustExec:!0,type:P.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},_=new WeakSet,Mi=function(l){const I=c(this,k);this.addCommands({cmd:()=>{_e(this,k,this.editorDiv.style.color=l)},undo:()=>{_e(this,k,this.editorDiv.style.color=I)},mustExec:!0,type:P.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},p=new WeakSet,Ri=function(){const l=this.editorDiv.getElementsByTagName("div");if(l.length===0)return this.editorDiv.innerText;const I=[];for(const K of l)I.push(K.innerText.replace(/\r\n?|\n/,""));return I.join(`
`)},e=new WeakSet,Vt=function(){const[l,I]=this.parentDimensions;let K;if(this.isAttachedToDOM)K=this.div.getBoundingClientRect();else{const{currentLayer:le,div:H}=this,ee=H.style.display;H.style.display="hidden",le.div.append(this.div),K=H.getBoundingClientRect(),H.remove(),H.style.display=ee}this.width=K.width/l,this.height=K.height/I},je(G,"_freeTextDefaultContent",""),je(G,"_l10nPromise"),je(G,"_internalPadding",0),je(G,"_defaultColor",null),je(G,"_defaultFontSize",10),je(G,"_keyboardManager",new O.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],n.prototype.commitOrRemove]])),je(G,"_type","freetext"),o.FreeTextEditor=G},(x,o,X)=>{var b,d,k,w,y,r,h,a,g,_,v,p,t,e,s,Li,f,ki,l,Fi,K,Ii,H,zt,ae,Di,ge,Oi,Q,Ni,Ee,Qe,A,Ut,F,bt,j,vt,U,rt,z,jt,u,yt,R,Ht,W,Bi,B,Vi,ce,zi,ue,Wt,ve,At,Pe,at,oe,$t;Object.defineProperty(o,"__esModule",{value:!0}),o.InkEditor=void 0,Object.defineProperty(o,"fitCurve",{enumerable:!0,get:function(){return pe.fitCurve}});var P=X(1),O=X(4),pe=X(30),G=X(5);const D=16,Me=class extends O.AnnotationEditor{constructor(m){super({...m,name:"inkEditor"});$(this,s);$(this,f);$(this,l);$(this,K);$(this,H);$(this,ae);$(this,ge);$(this,Q);$(this,Ee);$(this,A);$(this,F);$(this,j);$(this,U);$(this,z);$(this,u);$(this,W);$(this,B);$(this,ce);$(this,ue);$(this,ve);$(this,Pe);$(this,oe);$(this,b,0);$(this,d,0);$(this,k,0);$(this,w,this.canvasPointermove.bind(this));$(this,y,this.canvasPointerleave.bind(this));$(this,r,this.canvasPointerup.bind(this));$(this,h,this.canvasPointerdown.bind(this));$(this,a,!1);$(this,g,!1);$(this,_,null);$(this,v,null);$(this,p,0);$(this,t,0);$(this,e,null);this.color=m.color||null,this.thickness=m.thickness||null,this.opacity=m.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(m){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(M=>[M,m.get(M)]))}static updateDefaultParams(m,M){switch(m){case P.AnnotationEditorParamsType.INK_THICKNESS:Me._defaultThickness=M;break;case P.AnnotationEditorParamsType.INK_COLOR:Me._defaultColor=M;break;case P.AnnotationEditorParamsType.INK_OPACITY:Me._defaultOpacity=M/100;break}}updateParams(m,M){switch(m){case P.AnnotationEditorParamsType.INK_THICKNESS:Z(this,s,Li).call(this,M);break;case P.AnnotationEditorParamsType.INK_COLOR:Z(this,f,ki).call(this,M);break;case P.AnnotationEditorParamsType.INK_OPACITY:Z(this,l,Fi).call(this,M);break}}static get defaultPropertiesToUpdate(){return[[P.AnnotationEditorParamsType.INK_THICKNESS,Me._defaultThickness],[P.AnnotationEditorParamsType.INK_COLOR,Me._defaultColor||O.AnnotationEditor._defaultLineColor],[P.AnnotationEditorParamsType.INK_OPACITY,Math.round(Me._defaultOpacity*100)]]}get propertiesToUpdate(){return[[P.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Me._defaultThickness],[P.AnnotationEditorParamsType.INK_COLOR,this.color||Me._defaultColor||O.AnnotationEditor._defaultLineColor],[P.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Me._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(Z(this,F,bt).call(this),Z(this,j,vt).call(this)),this.isAttachedToDOM||(this.parent.add(this),Z(this,U,rt).call(this)),Z(this,Pe,at).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,c(this,v).disconnect(),_e(this,v,null),super.remove())}setParent(m){!this.parent&&m?this._uiManager.removeShouldRescale(this):this.parent&&m===null&&this._uiManager.addShouldRescale(this),super.setParent(m)}onScaleChanging(){const[m,M]=this.parentDimensions,ie=this.width*m,de=this.height*M;this.setDimensions(ie,de)}enableEditMode(){c(this,a)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",c(this,h)),this.canvas.addEventListener("pointerup",c(this,r)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",c(this,h)),this.canvas.removeEventListener("pointerup",c(this,r)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){c(this,a)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),_e(this,a,!0),this.div.classList.add("disabled"),Z(this,Pe,at).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(m){super.focusin(m),this.enableEditMode()}canvasPointerdown(m){m.button!==0||!this.isInEditMode()||c(this,a)||(this.setInForeground(),m.type!=="mouse"&&this.div.focus(),m.stopPropagation(),this.canvas.addEventListener("pointerleave",c(this,y)),this.canvas.addEventListener("pointermove",c(this,w)),Z(this,ae,Di).call(this,m.offsetX,m.offsetY))}canvasPointermove(m){m.stopPropagation(),Z(this,ge,Oi).call(this,m.offsetX,m.offsetY)}canvasPointerup(m){m.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(m.stopPropagation(),Z(this,A,Ut).call(this,m),this.setInBackground())}canvasPointerleave(m){Z(this,A,Ut).call(this,m),this.setInBackground()}render(){if(this.div)return this.div;let m,M;this.width&&(m=this.x,M=this.y),super.render(),Me._l10nPromise.get("editor_ink2_aria_label").then(fe=>{var Ae;return(Ae=this.div)==null?void 0:Ae.setAttribute("aria-label",fe)});const[ie,de,re,he]=Z(this,K,Ii).call(this);if(this.setAt(ie,de,0,0),this.setDims(re,he),Z(this,F,bt).call(this),this.width){const[fe,Ae]=this.parentDimensions;this.setAt(m*fe,M*Ae,this.width*fe,this.height*Ae),_e(this,g,!0),Z(this,U,rt).call(this),this.setDims(this.width*fe,this.height*Ae),Z(this,Ee,Qe).call(this),Z(this,oe,$t).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Z(this,j,vt).call(this),this.div}setDimensions(m,M){const ie=Math.round(m),de=Math.round(M);if(c(this,p)===ie&&c(this,t)===de)return;_e(this,p,ie),_e(this,t,de),this.canvas.style.visibility="hidden",c(this,b)&&Math.abs(c(this,b)-m/M)>.01&&(M=Math.ceil(m/c(this,b)),this.setDims(m,M));const[re,he]=this.parentDimensions;this.width=m/re,this.height=M/he,c(this,a)&&Z(this,z,jt).call(this,m,M),Z(this,U,rt).call(this),Z(this,Ee,Qe).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(m,M,ie){var Ie,ke;const de=super.deserialize(m,M,ie);de.thickness=m.thickness,de.color=P.Util.makeHexColor(...m.color),de.opacity=m.opacity;const[re,he]=de.pageDimensions,fe=de.width*re,Ae=de.height*he,Te=de.parentScale,Se=m.thickness/2;_e(de,b,fe/Ae),_e(de,a,!0),_e(de,p,Math.round(fe)),_e(de,t,Math.round(Ae));for(const{bezier:Le}of m.paths){const Ne=[];de.paths.push(Ne);let Ve=Te*(Le[0]-Se),De=Te*(Ae-Le[1]-Se);for(let Be=2,ze=Le.length;Be<ze;Be+=6){const He=Te*(Le[Be]-Se),Ge=Te*(Ae-Le[Be+1]-Se),Ye=Te*(Le[Be+2]-Se),it=Te*(Ae-Le[Be+3]-Se),pt=Te*(Le[Be+4]-Se),$e=Te*(Ae-Le[Be+5]-Se);Ne.push([[Ve,De],[He,Ge],[Ye,it],[pt,$e]]),Ve=pt,De=$e}const Ue=Z(this,R,Ht).call(this,Ne);de.bezierPath2D.push(Ue)}const Fe=Z(Ie=de,ue,Wt).call(Ie);return _e(de,k,Math.max(D,Fe[2]-Fe[0])),_e(de,d,Math.max(D,Fe[3]-Fe[1])),Z(ke=de,z,jt).call(ke,fe,Ae),de}serialize(){if(this.isEmpty())return null;const m=this.getRect(0,0),M=this.rotation%180===0?m[3]-m[1]:m[2]-m[0],ie=O.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:P.AnnotationEditorType.INK,color:ie,thickness:this.thickness,opacity:this.opacity,paths:Z(this,W,Bi).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,M),pageIndex:this.pageIndex,rect:m,rotation:this.rotation}}};let N=Me;b=new WeakMap,d=new WeakMap,k=new WeakMap,w=new WeakMap,y=new WeakMap,r=new WeakMap,h=new WeakMap,a=new WeakMap,g=new WeakMap,_=new WeakMap,v=new WeakMap,p=new WeakMap,t=new WeakMap,e=new WeakMap,s=new WeakSet,Li=function(m){const M=this.thickness;this.addCommands({cmd:()=>{this.thickness=m,Z(this,Pe,at).call(this)},undo:()=>{this.thickness=M,Z(this,Pe,at).call(this)},mustExec:!0,type:P.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},f=new WeakSet,ki=function(m){const M=this.color;this.addCommands({cmd:()=>{this.color=m,Z(this,Ee,Qe).call(this)},undo:()=>{this.color=M,Z(this,Ee,Qe).call(this)},mustExec:!0,type:P.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},l=new WeakSet,Fi=function(m){m/=100;const M=this.opacity;this.addCommands({cmd:()=>{this.opacity=m,Z(this,Ee,Qe).call(this)},undo:()=>{this.opacity=M,Z(this,Ee,Qe).call(this)},mustExec:!0,type:P.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},K=new WeakSet,Ii=function(){const{parentRotation:m,parentDimensions:[M,ie]}=this;switch(m){case 90:return[0,ie,ie,M];case 180:return[M,ie,M,ie];case 270:return[M,0,ie,M];default:return[0,0,M,ie]}},H=new WeakSet,zt=function(){const{ctx:m,color:M,opacity:ie,thickness:de,parentScale:re,scaleFactor:he}=this;m.lineWidth=de*re/he,m.lineCap="round",m.lineJoin="round",m.miterLimit=10,m.strokeStyle=`${M}${(0,G.opacityToHex)(ie)}`},ae=new WeakSet,Di=function(m,M){this.isEditing=!0,c(this,g)||(_e(this,g,!0),Z(this,U,rt).call(this),this.thickness||(this.thickness=Me._defaultThickness),this.color||(this.color=Me._defaultColor||O.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Me._defaultOpacity)),this.currentPath.push([m,M]),_e(this,_,null),Z(this,H,zt).call(this),this.ctx.beginPath(),this.ctx.moveTo(m,M),_e(this,e,()=>{c(this,e)&&(c(this,_)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):Z(this,Ee,Qe).call(this),this.ctx.lineTo(...c(this,_)),_e(this,_,null),this.ctx.stroke()),window.requestAnimationFrame(c(this,e)))}),window.requestAnimationFrame(c(this,e))},ge=new WeakSet,Oi=function(m,M){const[ie,de]=this.currentPath.at(-1);m===ie&&M===de||(this.currentPath.push([m,M]),_e(this,_,[m,M]))},Q=new WeakSet,Ni=function(m,M){var Te;this.ctx.closePath(),_e(this,e,null),m=Math.min(Math.max(m,0),this.canvas.width),M=Math.min(Math.max(M,0),this.canvas.height);const[ie,de]=this.currentPath.at(-1);(m!==ie||M!==de)&&this.currentPath.push([m,M]);let re;if(this.currentPath.length!==1)re=(0,pe.fitCurve)(this.currentPath,30,null);else{const Se=[m,M];re=[[Se,Se.slice(),Se.slice(),Se]]}const he=Z(Te=Me,R,Ht).call(Te,re);this.currentPath.length=0;const fe=()=>{this.paths.push(re),this.bezierPath2D.push(he),this.rebuild()},Ae=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Z(this,F,bt).call(this),Z(this,j,vt).call(this)),Z(this,Pe,at).call(this))};this.addCommands({cmd:fe,undo:Ae,mustExec:!0})},Ee=new WeakSet,Qe=function(){if(this.isEmpty()){Z(this,u,yt).call(this);return}Z(this,H,zt).call(this);const{canvas:m,ctx:M}=this;M.setTransform(1,0,0,1,0,0),M.clearRect(0,0,m.width,m.height),Z(this,u,yt).call(this);for(const ie of this.bezierPath2D)M.stroke(ie)},A=new WeakSet,Ut=function(m){Z(this,Q,Ni).call(this,m.offsetX,m.offsetY),this.canvas.removeEventListener("pointerleave",c(this,y)),this.canvas.removeEventListener("pointermove",c(this,w)),this.addToAnnotationStorage()},F=new WeakSet,bt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Me._l10nPromise.get("editor_ink_canvas_aria_label").then(m=>{var M;return(M=this.canvas)==null?void 0:M.setAttribute("aria-label",m)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},j=new WeakSet,vt=function(){_e(this,v,new ResizeObserver(m=>{const M=m[0].contentRect;M.width&&M.height&&this.setDimensions(M.width,M.height)})),c(this,v).observe(this.div)},U=new WeakSet,rt=function(){if(!c(this,g))return;const[m,M]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*m),this.canvas.height=Math.ceil(this.height*M),Z(this,u,yt).call(this)},z=new WeakSet,jt=function(m,M){const ie=Z(this,ve,At).call(this),de=(m-ie)/c(this,k),re=(M-ie)/c(this,d);this.scaleFactor=Math.min(de,re)},u=new WeakSet,yt=function(){const m=Z(this,ve,At).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+m,this.translationY*this.scaleFactor+m)},R=new WeakSet,Ht=function(m){const M=new Path2D;for(let ie=0,de=m.length;ie<de;ie++){const[re,he,fe,Ae]=m[ie];ie===0&&M.moveTo(...re),M.bezierCurveTo(he[0],he[1],fe[0],fe[1],Ae[0],Ae[1])}return M},W=new WeakSet,Bi=function(m,M,ie,de){const he=[],fe=this.thickness/2;let Ae,Te;for(const Se of this.paths){Ae=[],Te=[];for(let Fe=0,Ie=Se.length;Fe<Ie;Fe++){const[ke,Le,Ne,Ve]=Se[Fe],De=m*(ke[0]+M)+fe,Ue=de-m*(ke[1]+ie)-fe,Be=m*(Le[0]+M)+fe,ze=de-m*(Le[1]+ie)-fe,He=m*(Ne[0]+M)+fe,Ge=de-m*(Ne[1]+ie)-fe,Ye=m*(Ve[0]+M)+fe,it=de-m*(Ve[1]+ie)-fe;Fe===0&&(Ae.push(De,Ue),Te.push(De,Ue)),Ae.push(Be,ze,He,Ge,Ye,it),Z(this,B,Vi).call(this,De,Ue,Be,ze,He,Ge,Ye,it,4,Te)}he.push({bezier:Ae,points:Te})}return he},B=new WeakSet,Vi=function(m,M,ie,de,re,he,fe,Ae,Te,Se){if(Z(this,ce,zi).call(this,m,M,ie,de,re,he,fe,Ae)){Se.push(fe,Ae);return}for(let Fe=1;Fe<Te-1;Fe++){const Ie=Fe/Te,ke=1-Ie;let Le=Ie*m+ke*ie,Ne=Ie*M+ke*de,Ve=Ie*ie+ke*re,De=Ie*de+ke*he;const Ue=Ie*re+ke*fe,Be=Ie*he+ke*Ae;Le=Ie*Le+ke*Ve,Ne=Ie*Ne+ke*De,Ve=Ie*Ve+ke*Ue,De=Ie*De+ke*Be,Le=Ie*Le+ke*Ve,Ne=Ie*Ne+ke*De,Se.push(Le,Ne)}Se.push(fe,Ae)},ce=new WeakSet,zi=function(m,M,ie,de,re,he,fe,Ae){const Se=(3*ie-2*m-fe)**2,Fe=(3*de-2*M-Ae)**2,Ie=(3*re-m-2*fe)**2,ke=(3*he-M-2*Ae)**2;return Math.max(Se,Ie)+Math.max(Fe,ke)<=10},ue=new WeakSet,Wt=function(){let m=1/0,M=-1/0,ie=1/0,de=-1/0;for(const re of this.paths)for(const[he,fe,Ae,Te]of re){const Se=P.Util.bezierBoundingBox(...he,...fe,...Ae,...Te);m=Math.min(m,Se[0]),ie=Math.min(ie,Se[1]),M=Math.max(M,Se[2]),de=Math.max(de,Se[3])}return[m,ie,M,de]},ve=new WeakSet,At=function(){return c(this,a)?Math.ceil(this.thickness*this.parentScale):0},Pe=new WeakSet,at=function(m=!1){if(this.isEmpty())return;if(!c(this,a)){Z(this,Ee,Qe).call(this);return}const M=Z(this,ue,Wt).call(this),ie=Z(this,ve,At).call(this);_e(this,k,Math.max(D,M[2]-M[0])),_e(this,d,Math.max(D,M[3]-M[1]));const de=Math.ceil(ie+c(this,k)*this.scaleFactor),re=Math.ceil(ie+c(this,d)*this.scaleFactor),[he,fe]=this.parentDimensions;this.width=de/he,this.height=re/fe,_e(this,b,de/re),Z(this,oe,$t).call(this);const Ae=this.translationX,Te=this.translationY;this.translationX=-M[0],this.translationY=-M[1],Z(this,U,rt).call(this),Z(this,Ee,Qe).call(this),_e(this,p,de),_e(this,t,re),this.setDims(de,re);const Se=m?ie/this.scaleFactor/2:0;this.translate(Ae-this.translationX-Se,Te-this.translationY-Se)},oe=new WeakSet,$t=function(){const{style:m}=this.div;c(this,b)>=1?(m.minHeight=`${D}px`,m.minWidth=`${Math.round(c(this,b)*D)}px`):(m.minWidth=`${D}px`,m.minHeight=`${Math.round(D/c(this,b))}px`)},$(N,R),je(N,"_defaultColor",null),je(N,"_defaultOpacity",1),je(N,"_defaultThickness",1),je(N,"_l10nPromise"),je(N,"_type","ink"),o.InkEditor=N},(x,o,X)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.fitCurve=void 0;const P=X(31);o.fitCurve=P},x=>{function o(r,h,a){if(!Array.isArray(r))throw new TypeError("First argument should be an array");if(r.forEach(p=>{if(!Array.isArray(p)||p.some(t=>typeof t!="number")||p.length!==r[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),r=r.filter((p,t)=>t===0||!p.every((e,s)=>e===r[t-1][s])),r.length<2)return[];const g=r.length,_=k(r[1],r[0]),v=k(r[g-2],r[g-1]);return X(r,_,v,h,a)}function X(r,h,a,g,_){var p,t,e,s,n,f,T,l,I,K,le,H,ee;if(r.length===2)return H=w.vectorLen(w.subtract(r[0],r[1]))/3,p=[r[0],w.addArrays(r[0],w.mulItems(h,H)),w.addArrays(r[1],w.mulItems(a,H)),r[1]],[p];if(t=D(r),[p,s,f]=P(r,t,t,h,a,_),s===0||s<g)return[p];if(s<g*g)for(e=t,n=s,T=f,ee=0;ee<20;ee++){if(e=pe(p,r,e),[p,s,f]=P(r,t,e,h,a,_),s<g)return[p];if(f===T){let ae=s/n;if(ae>.9999&&ae<1.0001)break}n=s,T=f}return le=[],l=w.subtract(r[f-1],r[f+1]),l.every(ae=>ae===0)&&(l=w.subtract(r[f-1],r[f]),[l[0],l[1]]=[-l[1],l[0]]),I=w.normalize(l),K=w.mulItems(I,-1),le=le.concat(X(r.slice(0,f+1),h,I,g,_)),le=le.concat(X(r.slice(f),K,a,g,_)),le}function P(r,h,a,g,_,v){var p,t,e;return p=O(r,a,g,_),[t,e]=N(r,p,h),v&&v({bez:p,points:r,params:h,maxErr:t,maxPoint:e}),[p,t,e]}function O(r,h,a,g){var _,v,p,t,e,s,n,f,T,l,I,K,le,H,ee,ae,te,ge=r[0],ye=r[r.length-1];for(_=[ge,null,null,ye],v=w.zeros_Xx2x2(h.length),le=0,H=h.length;le<H;le++)ae=h[le],te=1-ae,p=v[le],p[0]=w.mulItems(a,3*ae*(te*te)),p[1]=w.mulItems(g,3*te*(ae*ae));for(t=[[0,0],[0,0]],e=[0,0],le=0,H=r.length;le<H;le++)ae=h[le],p=v[le],t[0][0]+=w.dot(p[0],p[0]),t[0][1]+=w.dot(p[0],p[1]),t[1][0]+=w.dot(p[0],p[1]),t[1][1]+=w.dot(p[1],p[1]),ee=w.subtract(r[le],y.q([ge,ge,ye,ye],ae)),e[0]+=w.dot(p[0],ee),e[1]+=w.dot(p[1],ee);return s=t[0][0]*t[1][1]-t[1][0]*t[0][1],n=t[0][0]*e[1]-t[1][0]*e[0],f=e[0]*t[1][1]-e[1]*t[0][1],T=s===0?0:f/s,l=s===0?0:n/s,K=w.vectorLen(w.subtract(ge,ye)),I=1e-6*K,T<I||l<I?(_[1]=w.addArrays(ge,w.mulItems(a,K/3)),_[2]=w.addArrays(ye,w.mulItems(g,K/3))):(_[1]=w.addArrays(ge,w.mulItems(a,T)),_[2]=w.addArrays(ye,w.mulItems(g,l))),_}function pe(r,h,a){return a.map((g,_)=>G(r,h[_],g))}function G(r,h,a){var g=w.subtract(y.q(r,a),h),_=y.qprime(r,a),v=w.mulMatrix(g,_),p=w.sum(w.squareItems(_))+2*w.mulMatrix(g,y.qprimeprime(r,a));return p===0?a:a-v/p}function D(r){var h=[],a,g,_;return r.forEach((v,p)=>{a=p?g+w.vectorLen(w.subtract(v,_)):0,h.push(a),g=a,_=v}),h=h.map(v=>v/g),h}function N(r,h,a){var g,_,v,p,t,e,s,n;_=0,v=Math.floor(r.length/2);const f=b(h,10);for(t=0,e=r.length;t<e;t++)s=r[t],n=d(h,a[t],f,10),p=w.subtract(y.q(h,n),s),g=p[0]*p[0]+p[1]*p[1],g>_&&(_=g,v=t);return[_,v]}var b=function(r,h){for(var a,g=[0],_=r[0],v=0,p=1;p<=h;p++)a=y.q(r,p/h),v+=w.vectorLen(w.subtract(a,_)),g.push(v),_=a;return g=g.map(t=>t/v),g};function d(r,h,a,g){if(h<0)return 0;if(h>1)return 1;for(var _,v,p,t,e,s=1;s<=g;s++)if(h<=a[s]){t=(s-1)/g,p=s/g,v=a[s-1],_=a[s],e=(h-v)/(_-v)*(p-t)+t;break}return e}function k(r,h){return w.normalize(w.subtract(r,h))}class w{static zeros_Xx2x2(h){for(var a=[];h--;)a.push([0,0]);return a}static mulItems(h,a){return h.map(g=>g*a)}static mulMatrix(h,a){return h.reduce((g,_,v)=>g+_*a[v],0)}static subtract(h,a){return h.map((g,_)=>g-a[_])}static addArrays(h,a){return h.map((g,_)=>g+a[_])}static addItems(h,a){return h.map(g=>g+a)}static sum(h){return h.reduce((a,g)=>a+g)}static dot(h,a){return w.mulMatrix(h,a)}static vectorLen(h){return Math.hypot(...h)}static divItems(h,a){return h.map(g=>g/a)}static squareItems(h){return h.map(a=>a*a)}static normalize(h){return this.divItems(h,this.vectorLen(h))}}class y{static q(h,a){var g=1-a,_=w.mulItems(h[0],g*g*g),v=w.mulItems(h[1],3*g*g*a),p=w.mulItems(h[2],3*g*a*a),t=w.mulItems(h[3],a*a*a);return w.addArrays(w.addArrays(_,v),w.addArrays(p,t))}static qprime(h,a){var g=1-a,_=w.mulItems(w.subtract(h[1],h[0]),3*g*g),v=w.mulItems(w.subtract(h[2],h[1]),6*g*a),p=w.mulItems(w.subtract(h[3],h[2]),3*a*a);return w.addArrays(w.addArrays(_,v),p)}static qprimeprime(h,a){return w.addArrays(w.mulItems(w.addArrays(w.subtract(h[2],w.mulItems(h[1],2)),h[0]),6*(1-a)),w.mulItems(w.addArrays(w.subtract(h[3],w.mulItems(h[2],2)),h[1]),6*a))}}x.exports=o,x.exports.fitCubic=X,x.exports.createTangent=k},(x,o,X)=>{var Ee,tt,A,Ui,Y,Gt,se,Xt;Object.defineProperty(o,"__esModule",{value:!0}),o.AnnotationLayer=void 0;var P=X(1),O=X(6),pe=X(3),G=X(33),D=X(34);const N=1e3,b=9,d=new WeakSet;function k(z){return{width:z[2]-z[0],height:z[3]-z[1]}}class w{static create(i){switch(i.data.annotationType){case P.AnnotationType.LINK:return new r(i);case P.AnnotationType.TEXT:return new h(i);case P.AnnotationType.WIDGET:switch(i.data.fieldType){case"Tx":return new g(i);case"Btn":return i.data.radioButton?new v(i):i.data.checkBox?new _(i):new p(i);case"Ch":return new t(i)}return new a(i);case P.AnnotationType.POPUP:return new e(i);case P.AnnotationType.FREETEXT:return new n(i);case P.AnnotationType.LINE:return new f(i);case P.AnnotationType.SQUARE:return new T(i);case P.AnnotationType.CIRCLE:return new l(i);case P.AnnotationType.POLYLINE:return new I(i);case P.AnnotationType.CARET:return new le(i);case P.AnnotationType.INK:return new H(i);case P.AnnotationType.POLYGON:return new K(i);case P.AnnotationType.HIGHLIGHT:return new ee(i);case P.AnnotationType.UNDERLINE:return new ae(i);case P.AnnotationType.SQUIGGLY:return new te(i);case P.AnnotationType.STRIKEOUT:return new ge(i);case P.AnnotationType.STAMP:return new ye(i);case P.AnnotationType.FILEATTACHMENT:return new Q(i);default:return new y(i)}}}class y{constructor(i,{isRenderable:u=!1,ignoreBorder:S=!1,createQuadrilaterals:R=!1}={}){this.isRenderable=u,this.data=i.data,this.layer=i.layer,this.page=i.page,this.viewport=i.viewport,this.linkService=i.linkService,this.downloadManager=i.downloadManager,this.imageResourcesPath=i.imageResourcesPath,this.renderForms=i.renderForms,this.svgFactory=i.svgFactory,this.annotationStorage=i.annotationStorage,this.enableScripting=i.enableScripting,this.hasJSActions=i.hasJSActions,this._fieldObjects=i.fieldObjects,u&&(this.container=this._createContainer(S)),R&&(this.quadrilaterals=this._createQuadrilaterals(S))}_createContainer(i=!1){const{data:u,page:S,viewport:R}=this,L=document.createElement("section");L.setAttribute("data-annotation-id",u.id),u.noRotate&&L.classList.add("norotate");const{pageWidth:W,pageHeight:me,pageX:B,pageY:q}=R.rawDims,{width:ce,height:ne}=k(u.rect),ue=P.Util.normalizeRect([u.rect[0],S.view[3]-u.rect[1]+S.view[1],u.rect[2],S.view[3]-u.rect[3]+S.view[1]]);if(!i&&u.borderStyle.width>0){L.style.borderWidth=`${u.borderStyle.width}px`;const ve=u.borderStyle.horizontalCornerRadius,xe=u.borderStyle.verticalCornerRadius;if(ve>0||xe>0){const Re=`calc(${ve}px * var(--scale-factor)) / calc(${xe}px * var(--scale-factor))`;L.style.borderRadius=Re}else if(this instanceof v){const Re=`calc(${ce}px * var(--scale-factor)) / calc(${ne}px * var(--scale-factor))`;L.style.borderRadius=Re}switch(u.borderStyle.style){case P.AnnotationBorderStyleType.SOLID:L.style.borderStyle="solid";break;case P.AnnotationBorderStyleType.DASHED:L.style.borderStyle="dashed";break;case P.AnnotationBorderStyleType.BEVELED:(0,P.warn)("Unimplemented border style: beveled");break;case P.AnnotationBorderStyleType.INSET:(0,P.warn)("Unimplemented border style: inset");break;case P.AnnotationBorderStyleType.UNDERLINE:L.style.borderBottomStyle="solid";break}const Pe=u.borderColor||null;Pe?L.style.borderColor=P.Util.makeHexColor(Pe[0]|0,Pe[1]|0,Pe[2]|0):L.style.borderWidth=0}L.style.left=`${100*(ue[0]-B)/W}%`,L.style.top=`${100*(ue[1]-q)/me}%`;const{rotation:be}=u;return u.hasOwnCanvas||be===0?(L.style.width=`${100*ce/W}%`,L.style.height=`${100*ne/me}%`):this.setRotation(be,L),L}setRotation(i,u=this.container){const{pageWidth:S,pageHeight:R}=this.viewport.rawDims,{width:L,height:W}=k(this.data.rect);let me,B;i%180===0?(me=100*L/S,B=100*W/R):(me=100*W/S,B=100*L/R),u.style.width=`${me}%`,u.style.height=`${B}%`,u.setAttribute("data-main-rotation",(360-i)%360)}get _commonActions(){const i=(u,S,R)=>{const L=R.detail[u];R.target.style[S]=G.ColorConverters[`${L[0]}_HTML`](L.slice(1))};return(0,P.shadow)(this,"_commonActions",{display:u=>{const S=u.detail.display%2===1;this.container.style.visibility=S?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:S,print:u.detail.display===0||u.detail.display===3})},print:u=>{this.annotationStorage.setValue(this.data.id,{print:u.detail.print})},hidden:u=>{this.container.style.visibility=u.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:u.detail.hidden})},focus:u=>{setTimeout(()=>u.target.focus({preventScroll:!1}),0)},userName:u=>{u.target.title=u.detail.userName},readonly:u=>{u.detail.readonly?u.target.setAttribute("readonly",""):u.target.removeAttribute("readonly")},required:u=>{this._setRequired(u.target,u.detail.required)},bgColor:u=>{i("bgColor","backgroundColor",u)},fillColor:u=>{i("fillColor","backgroundColor",u)},fgColor:u=>{i("fgColor","color",u)},textColor:u=>{i("textColor","color",u)},borderColor:u=>{i("borderColor","borderColor",u)},strokeColor:u=>{i("strokeColor","borderColor",u)},rotation:u=>{const S=u.detail.rotation;this.setRotation(S),this.annotationStorage.setValue(this.data.id,{rotation:S})}})}_dispatchEventFromSandbox(i,u){const S=this._commonActions;for(const R of Object.keys(u.detail)){const L=i[R]||S[R];L==null||L(u)}}_setDefaultPropertiesFromJS(i){if(!this.enableScripting)return;const u=this.annotationStorage.getRawValue(this.data.id);if(!u)return;const S=this._commonActions;for(const[R,L]of Object.entries(u)){const W=S[R];if(W){const me={detail:{[R]:L},target:i};W(me),delete u[R]}}}_createQuadrilaterals(i=!1){if(!this.data.quadPoints)return null;const u=[],S=this.data.rect;for(const R of this.data.quadPoints)this.data.rect=[R[2].x,R[2].y,R[1].x,R[1].y],u.push(this._createContainer(i));return this.data.rect=S,u}_createPopup(i,u){let S=this.container;this.quadrilaterals&&(i||(i=this.quadrilaterals),S=this.quadrilaterals[0]),i||(i=document.createElement("div"),i.classList.add("popupTriggerArea"),S.append(i));const L=new s({container:S,trigger:i,color:u.color,titleObj:u.titleObj,modificationDate:u.modificationDate,contentsObj:u.contentsObj,richText:u.richText,hideWrapper:!0}).render();L.style.left="100%",S.append(L)}_renderQuadrilaterals(i){for(const u of this.quadrilaterals)u.classList.add(i);return this.quadrilaterals}render(){(0,P.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(i,u=null){const S=[];if(this._fieldObjects){const R=this._fieldObjects[i];if(R)for(const{page:L,id:W,exportValues:me}of R){if(L===-1||W===u)continue;const B=typeof me=="string"?me:null,q=document.querySelector(`[data-element-id="${W}"]`);if(q&&!d.has(q)){(0,P.warn)(`_getElementsByName - element not allowed: ${W}`);continue}S.push({id:W,exportValue:B,domElement:q})}return S}for(const R of document.getElementsByName(i)){const{exportValue:L}=R,W=R.getAttribute("data-element-id");W!==u&&d.has(R)&&S.push({id:W,exportValue:L,domElement:R})}return S}}class r extends y{constructor(u,S=null){super(u,{isRenderable:!0,ignoreBorder:!!(S!=null&&S.ignoreBorder),createQuadrilaterals:!0});$(this,Ee);$(this,A);this.isTooltipOnly=u.data.isTooltipOnly}render(){const{data:u,linkService:S}=this,R=document.createElement("a");R.setAttribute("data-element-id",u.id);let L=!1;return u.url?(S.addLinkAttributes(R,u.url,u.newWindow),L=!0):u.action?(this._bindNamedAction(R,u.action),L=!0):u.attachment?(this._bindAttachment(R,u.attachment),L=!0):u.setOCGState?(Z(this,A,Ui).call(this,R,u.setOCGState),L=!0):u.dest?(this._bindLink(R,u.dest),L=!0):(u.actions&&(u.actions.Action||u.actions["Mouse Up"]||u.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(R,u),L=!0),u.resetForm?(this._bindResetFormAction(R,u.resetForm),L=!0):this.isTooltipOnly&&!L&&(this._bindLink(R,""),L=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((W,me)=>{const B=me===0?R:R.cloneNode();return W.append(B),W}):(this.container.classList.add("linkAnnotation"),L&&this.container.append(R),this.container)}_bindLink(u,S){u.href=this.linkService.getDestinationHash(S),u.onclick=()=>(S&&this.linkService.goToDestination(S),!1),(S||S==="")&&Z(this,Ee,tt).call(this)}_bindNamedAction(u,S){u.href=this.linkService.getAnchorUrl(""),u.onclick=()=>(this.linkService.executeNamedAction(S),!1),Z(this,Ee,tt).call(this)}_bindAttachment(u,S){u.href=this.linkService.getAnchorUrl(""),u.onclick=()=>{var R;return(R=this.downloadManager)==null||R.openOrDownloadData(this.container,S.content,S.filename),!1},Z(this,Ee,tt).call(this)}_bindJSAction(u,S){u.href=this.linkService.getAnchorUrl("");const R=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const L of Object.keys(S.actions)){const W=R.get(L);W&&(u[W]=()=>{var me;return(me=this.linkService.eventBus)==null||me.dispatch("dispatcheventinsandbox",{source:this,detail:{id:S.id,name:L}}),!1})}u.onclick||(u.onclick=()=>!1),Z(this,Ee,tt).call(this)}_bindResetFormAction(u,S){const R=u.onclick;if(R||(u.href=this.linkService.getAnchorUrl("")),Z(this,Ee,tt).call(this),!this._fieldObjects){(0,P.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),R||(u.onclick=()=>!1);return}u.onclick=()=>{var ne;R==null||R();const{fields:L,refs:W,include:me}=S,B=[];if(L.length!==0||W.length!==0){const ue=new Set(W);for(const be of L){const ve=this._fieldObjects[be]||[];for(const{id:xe}of ve)ue.add(xe)}for(const be of Object.values(this._fieldObjects))for(const ve of be)ue.has(ve.id)===me&&B.push(ve)}else for(const ue of Object.values(this._fieldObjects))B.push(...ue);const q=this.annotationStorage,ce=[];for(const ue of B){const{id:be}=ue;switch(ce.push(be),ue.type){case"text":{const xe=ue.defaultValue||"";q.setValue(be,{value:xe});break}case"checkbox":case"radiobutton":{const xe=ue.defaultValue===ue.exportValues;q.setValue(be,{value:xe});break}case"combobox":case"listbox":{const xe=ue.defaultValue||"";q.setValue(be,{value:xe});break}default:continue}const ve=document.querySelector(`[data-element-id="${be}"]`);if(ve){if(!d.has(ve)){(0,P.warn)(`_bindResetFormAction - element not allowed: ${be}`);continue}}else continue;ve.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((ne=this.linkService.eventBus)==null||ne.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ce,name:"ResetForm"}})),!1}}}Ee=new WeakSet,tt=function(){this.container.setAttribute("data-internal-link","")},A=new WeakSet,Ui=function(u,S){u.href=this.linkService.getAnchorUrl(""),u.onclick=()=>(this.linkService.executeSetOCGState(S),!1),Z(this,Ee,tt).call(this)};class h extends y{constructor(i){var S,R,L;const u=!!(i.data.hasPopup||(S=i.data.titleObj)!=null&&S.str||(R=i.data.contentsObj)!=null&&R.str||(L=i.data.richText)!=null&&L.str);super(i,{isRenderable:u})}render(){this.container.classList.add("textAnnotation");const i=document.createElement("img");return i.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",i.alt="[{{type}} Annotation]",i.dataset.l10nId="text_annotation_type",i.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(i,this.data),this.container.append(i),this.container}}class a extends y{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(i){var u;this.data.hasOwnCanvas&&(((u=i.previousSibling)==null?void 0:u.nodeName)==="CANVAS"&&(i.previousSibling.hidden=!0),i.hidden=!1)}_getKeyModifier(i){const{isWin:u,isMac:S}=P.FeatureTest.platform;return u&&i.ctrlKey||S&&i.metaKey}_setEventListener(i,u,S,R){u.includes("mouse")?i.addEventListener(u,L=>{var W;(W=this.linkService.eventBus)==null||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:S,value:R(L),shift:L.shiftKey,modifier:this._getKeyModifier(L)}})}):i.addEventListener(u,L=>{var W;(W=this.linkService.eventBus)==null||W.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:S,value:R(L)}})})}_setEventListeners(i,u,S){var R;for(const[L,W]of u)(W==="Action"||(R=this.data.actions)!=null&&R[W])&&this._setEventListener(i,L,W,S)}_setBackgroundColor(i){const u=this.data.backgroundColor||null;i.style.backgroundColor=u===null?"transparent":P.Util.makeHexColor(u[0],u[1],u[2])}_setTextStyle(i){const u=["left","center","right"],{fontColor:S}=this.data.defaultAppearanceData,R=this.data.defaultAppearanceData.fontSize||b,L=i.style;let W;const me=2,B=q=>Math.round(10*q)/10;if(this.data.multiLine){const q=Math.abs(this.data.rect[3]-this.data.rect[1]-me),ce=Math.round(q/(P.LINE_FACTOR*R))||1,ne=q/ce;W=Math.min(R,B(ne/P.LINE_FACTOR))}else{const q=Math.abs(this.data.rect[3]-this.data.rect[1]-me);W=Math.min(R,B(q/P.LINE_FACTOR))}L.fontSize=`calc(${W}px * var(--scale-factor))`,L.color=P.Util.makeHexColor(S[0],S[1],S[2]),this.data.textAlignment!==null&&(L.textAlign=u[this.data.textAlignment])}_setRequired(i,u){u?i.setAttribute("required",!0):i.removeAttribute("required"),i.setAttribute("aria-required",u)}}class g extends a{constructor(i){const u=i.renderForms||!i.data.hasAppearance&&!!i.data.fieldValue;super(i,{isRenderable:u})}setPropertyOnSiblings(i,u,S,R){const L=this.annotationStorage;for(const W of this._getElementsByName(i.name,i.id))W.domElement&&(W.domElement[u]=S),L.setValue(W.id,{[R]:S})}render(){var R;const i=this.annotationStorage,u=this.data.id;this.container.classList.add("textWidgetAnnotation");let S=null;if(this.renderForms){const L=i.getValue(u,{value:this.data.fieldValue});let W=L.formattedValue||L.value||"";const me=i.getValue(u,{charLimit:this.data.maxLen}).charLimit;me&&W.length>me&&(W=W.slice(0,me));const B={userValue:W,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(S=document.createElement("textarea"),S.textContent=W,this.data.doNotScroll&&(S.style.overflowY="hidden")):(S=document.createElement("input"),S.type="text",S.setAttribute("value",W),this.data.doNotScroll&&(S.style.overflowX="hidden")),this.data.hasOwnCanvas&&(S.hidden=!0),d.add(S),S.setAttribute("data-element-id",u),S.disabled=this.data.readOnly,S.name=this.data.fieldName,S.tabIndex=N,this._setRequired(S,this.data.required),me&&(S.maxLength=me),S.addEventListener("input",ce=>{i.setValue(u,{value:ce.target.value}),this.setPropertyOnSiblings(S,"value",ce.target.value,"value")}),S.addEventListener("resetform",ce=>{const ne=this.data.defaultFieldValue??"";S.value=B.userValue=ne,B.formattedValue=null});let q=ce=>{const{formattedValue:ne}=B;ne!=null&&(ce.target.value=ne),ce.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){S.addEventListener("focus",ne=>{const{target:ue}=ne;B.userValue&&(ue.value=B.userValue),B.lastCommittedValue=ue.value,B.commitKey=1}),S.addEventListener("updatefromsandbox",ne=>{this.showElementAndHideCanvas(ne.target);const ue={value(be){B.userValue=be.detail.value??"",i.setValue(u,{value:B.userValue.toString()}),be.target.value=B.userValue},formattedValue(be){const{formattedValue:ve}=be.detail;B.formattedValue=ve,ve!=null&&be.target!==document.activeElement&&(be.target.value=ve),i.setValue(u,{formattedValue:ve})},selRange(be){be.target.setSelectionRange(...be.detail.selRange)},charLimit:be=>{var Re;const{charLimit:ve}=be.detail,{target:xe}=be;if(ve===0){xe.removeAttribute("maxLength");return}xe.setAttribute("maxLength",ve);let Pe=B.userValue;!Pe||Pe.length<=ve||(Pe=Pe.slice(0,ve),xe.value=B.userValue=Pe,i.setValue(u,{value:Pe}),(Re=this.linkService.eventBus)==null||Re.dispatch("dispatcheventinsandbox",{source:this,detail:{id:u,name:"Keystroke",value:Pe,willCommit:!0,commitKey:1,selStart:xe.selectionStart,selEnd:xe.selectionEnd}}))}};this._dispatchEventFromSandbox(ue,ne)}),S.addEventListener("keydown",ne=>{var ve;B.commitKey=1;let ue=-1;if(ne.key==="Escape"?ue=0:ne.key==="Enter"&&!this.data.multiLine?ue=2:ne.key==="Tab"&&(B.commitKey=3),ue===-1)return;const{value:be}=ne.target;B.lastCommittedValue!==be&&(B.lastCommittedValue=be,B.userValue=be,(ve=this.linkService.eventBus)==null||ve.dispatch("dispatcheventinsandbox",{source:this,detail:{id:u,name:"Keystroke",value:be,willCommit:!0,commitKey:ue,selStart:ne.target.selectionStart,selEnd:ne.target.selectionEnd}}))});const ce=q;q=null,S.addEventListener("blur",ne=>{var be;if(!ne.relatedTarget)return;const{value:ue}=ne.target;B.userValue=ue,B.lastCommittedValue!==ue&&((be=this.linkService.eventBus)==null||be.dispatch("dispatcheventinsandbox",{source:this,detail:{id:u,name:"Keystroke",value:ue,willCommit:!0,commitKey:B.commitKey,selStart:ne.target.selectionStart,selEnd:ne.target.selectionEnd}})),ce(ne)}),(R=this.data.actions)!=null&&R.Keystroke&&S.addEventListener("beforeinput",ne=>{var we;B.lastCommittedValue=null;const{data:ue,target:be}=ne,{value:ve,selectionStart:xe,selectionEnd:Pe}=be;let Re=xe,oe=Pe;switch(ne.inputType){case"deleteWordBackward":{const Me=ve.substring(0,xe).match(/\w*[^\w]*$/);Me&&(Re-=Me[0].length);break}case"deleteWordForward":{const Me=ve.substring(xe).match(/^[^\w]*\w*/);Me&&(oe+=Me[0].length);break}case"deleteContentBackward":xe===Pe&&(Re-=1);break;case"deleteContentForward":xe===Pe&&(oe+=1);break}ne.preventDefault(),(we=this.linkService.eventBus)==null||we.dispatch("dispatcheventinsandbox",{source:this,detail:{id:u,name:"Keystroke",value:ve,change:ue||"",willCommit:!1,selStart:Re,selEnd:oe}})}),this._setEventListeners(S,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],ne=>ne.target.value)}if(q&&S.addEventListener("blur",q),this.data.comb){const ne=(this.data.rect[2]-this.data.rect[0])/me;S.classList.add("comb"),S.style.letterSpacing=`calc(${ne}px * var(--scale-factor) - 1ch)`}}else S=document.createElement("div"),S.textContent=this.data.fieldValue,S.style.verticalAlign="middle",S.style.display="table-cell";return this._setTextStyle(S),this._setBackgroundColor(S),this._setDefaultPropertiesFromJS(S),this.container.append(S),this.container}}class _ extends a{constructor(i){super(i,{isRenderable:i.renderForms})}render(){const i=this.annotationStorage,u=this.data,S=u.id;let R=i.getValue(S,{value:u.exportValue===u.fieldValue}).value;typeof R=="string"&&(R=R!=="Off",i.setValue(S,{value:R})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const L=document.createElement("input");return d.add(L),L.setAttribute("data-element-id",S),L.disabled=u.readOnly,this._setRequired(L,this.data.required),L.type="checkbox",L.name=u.fieldName,R&&L.setAttribute("checked",!0),L.setAttribute("exportValue",u.exportValue),L.tabIndex=N,L.addEventListener("change",W=>{const{name:me,checked:B}=W.target;for(const q of this._getElementsByName(me,S)){const ce=B&&q.exportValue===u.exportValue;q.domElement&&(q.domElement.checked=ce),i.setValue(q.id,{value:ce})}i.setValue(S,{value:B})}),L.addEventListener("resetform",W=>{const me=u.defaultFieldValue||"Off";W.target.checked=me===u.exportValue}),this.enableScripting&&this.hasJSActions&&(L.addEventListener("updatefromsandbox",W=>{const me={value(B){B.target.checked=B.detail.value!=="Off",i.setValue(S,{value:B.target.checked})}};this._dispatchEventFromSandbox(me,W)}),this._setEventListeners(L,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],W=>W.target.checked)),this._setBackgroundColor(L),this._setDefaultPropertiesFromJS(L),this.container.append(L),this.container}}class v extends a{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const i=this.annotationStorage,u=this.data,S=u.id;let R=i.getValue(S,{value:u.fieldValue===u.buttonValue}).value;typeof R=="string"&&(R=R!==u.buttonValue,i.setValue(S,{value:R}));const L=document.createElement("input");if(d.add(L),L.setAttribute("data-element-id",S),L.disabled=u.readOnly,this._setRequired(L,this.data.required),L.type="radio",L.name=u.fieldName,R&&L.setAttribute("checked",!0),L.tabIndex=N,L.addEventListener("change",W=>{const{name:me,checked:B}=W.target;for(const q of this._getElementsByName(me,S))i.setValue(q.id,{value:!1});i.setValue(S,{value:B})}),L.addEventListener("resetform",W=>{const me=u.defaultFieldValue;W.target.checked=me!=null&&me===u.buttonValue}),this.enableScripting&&this.hasJSActions){const W=u.buttonValue;L.addEventListener("updatefromsandbox",me=>{const B={value:q=>{const ce=W===q.detail.value;for(const ne of this._getElementsByName(q.target.name)){const ue=ce&&ne.id===S;ne.domElement&&(ne.domElement.checked=ue),i.setValue(ne.id,{value:ue})}}};this._dispatchEventFromSandbox(B,me)}),this._setEventListeners(L,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],me=>me.target.checked)}return this._setBackgroundColor(L),this._setDefaultPropertiesFromJS(L),this.container.append(L),this.container}}class p extends r{constructor(i){super(i,{ignoreBorder:i.data.hasAppearance})}render(){const i=super.render();i.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(i.title=this.data.alternativeText);const u=i.lastChild;return this.enableScripting&&this.hasJSActions&&u&&(this._setDefaultPropertiesFromJS(u),u.addEventListener("updatefromsandbox",S=>{this._dispatchEventFromSandbox({},S)})),i}}class t extends a{constructor(i){super(i,{isRenderable:i.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const i=this.annotationStorage,u=this.data.id,S=i.getValue(u,{value:this.data.fieldValue}),R=document.createElement("select");d.add(R),R.setAttribute("data-element-id",u),R.disabled=this.data.readOnly,this._setRequired(R,this.data.required),R.name=this.data.fieldName,R.tabIndex=N;let L=this.data.combo&&this.data.options.length>0;this.data.combo||(R.size=this.data.options.length,this.data.multiSelect&&(R.multiple=!0)),R.addEventListener("resetform",ce=>{const ne=this.data.defaultFieldValue;for(const ue of R.options)ue.selected=ue.value===ne});for(const ce of this.data.options){const ne=document.createElement("option");ne.textContent=ce.displayValue,ne.value=ce.exportValue,S.value.includes(ce.exportValue)&&(ne.setAttribute("selected",!0),L=!1),R.append(ne)}let W=null;if(L){const ce=document.createElement("option");ce.value=" ",ce.setAttribute("hidden",!0),ce.setAttribute("selected",!0),R.prepend(ce),W=()=>{ce.remove(),R.removeEventListener("input",W),W=null},R.addEventListener("input",W)}const me=ce=>{const ne=ce?"value":"textContent",{options:ue,multiple:be}=R;return be?Array.prototype.filter.call(ue,ve=>ve.selected).map(ve=>ve[ne]):ue.selectedIndex===-1?null:ue[ue.selectedIndex][ne]};let B=me(!1);const q=ce=>{const ne=ce.target.options;return Array.prototype.map.call(ne,ue=>({displayValue:ue.textContent,exportValue:ue.value}))};return this.enableScripting&&this.hasJSActions?(R.addEventListener("updatefromsandbox",ce=>{const ne={value(ue){W==null||W();const be=ue.detail.value,ve=new Set(Array.isArray(be)?be:[be]);for(const xe of R.options)xe.selected=ve.has(xe.value);i.setValue(u,{value:me(!0)}),B=me(!1)},multipleSelection(ue){R.multiple=!0},remove(ue){const be=R.options,ve=ue.detail.remove;be[ve].selected=!1,R.remove(ve),be.length>0&&Array.prototype.findIndex.call(be,Pe=>Pe.selected)===-1&&(be[0].selected=!0),i.setValue(u,{value:me(!0),items:q(ue)}),B=me(!1)},clear(ue){for(;R.length!==0;)R.remove(0);i.setValue(u,{value:null,items:[]}),B=me(!1)},insert(ue){const{index:be,displayValue:ve,exportValue:xe}=ue.detail.insert,Pe=R.children[be],Re=document.createElement("option");Re.textContent=ve,Re.value=xe,Pe?Pe.before(Re):R.append(Re),i.setValue(u,{value:me(!0),items:q(ue)}),B=me(!1)},items(ue){const{items:be}=ue.detail;for(;R.length!==0;)R.remove(0);for(const ve of be){const{displayValue:xe,exportValue:Pe}=ve,Re=document.createElement("option");Re.textContent=xe,Re.value=Pe,R.append(Re)}R.options.length>0&&(R.options[0].selected=!0),i.setValue(u,{value:me(!0),items:q(ue)}),B=me(!1)},indices(ue){const be=new Set(ue.detail.indices);for(const ve of ue.target.options)ve.selected=be.has(ve.index);i.setValue(u,{value:me(!0)}),B=me(!1)},editable(ue){ue.target.disabled=!ue.detail.editable}};this._dispatchEventFromSandbox(ne,ce)}),R.addEventListener("input",ce=>{var ue;const ne=me(!0);i.setValue(u,{value:ne}),ce.preventDefault(),(ue=this.linkService.eventBus)==null||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:u,name:"Keystroke",value:B,changeEx:ne,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(R,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ce=>ce.target.value)):R.addEventListener("input",function(ce){i.setValue(u,{value:me(!0)})}),this.data.combo&&this._setTextStyle(R),this._setBackgroundColor(R),this._setDefaultPropertiesFromJS(R),this.container.append(R),this.container}}const F=class extends y{constructor(i){var R,L,W;const{data:u}=i,S=!F.IGNORE_TYPES.has(u.parentType)&&!!((R=u.titleObj)!=null&&R.str||(L=u.contentsObj)!=null&&L.str||(W=u.richText)!=null&&W.str);super(i,{isRenderable:S})}render(){this.container.classList.add("popupAnnotation");const i=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(i.length===0)return this.container;const u=new s({container:this.container,trigger:Array.from(i),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),S=this.page,R=P.Util.normalizeRect([this.data.parentRect[0],S.view[3]-this.data.parentRect[1]+S.view[1],this.data.parentRect[2],S.view[3]-this.data.parentRect[3]+S.view[1]]),L=R[0]+this.data.parentRect[2]-this.data.parentRect[0],W=R[1],{pageWidth:me,pageHeight:B,pageX:q,pageY:ce}=this.viewport.rawDims;return this.container.style.left=`${100*(L-q)/me}%`,this.container.style.top=`${100*(W-ce)/B}%`,this.container.append(u.render()),this.container}};let e=F;je(e,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class s{constructor(i){this.container=i.container,this.trigger=i.trigger,this.color=i.color,this.titleObj=i.titleObj,this.modificationDate=i.modificationDate,this.contentsObj=i.contentsObj,this.richText=i.richText,this.hideWrapper=i.hideWrapper||!1,this.pinned=!1}render(){var me,B;const u=document.createElement("div");u.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?u:this.container,this.hideElement.hidden=!0;const S=document.createElement("div");S.classList.add("popup");const R=this.color;if(R){const q=.7*(255-R[0])+R[0],ce=.7*(255-R[1])+R[1],ne=.7*(255-R[2])+R[2];S.style.backgroundColor=P.Util.makeHexColor(q|0,ce|0,ne|0)}const L=document.createElement("h1");L.dir=this.titleObj.dir,L.textContent=this.titleObj.str,S.append(L);const W=O.PDFDateString.toDateObject(this.modificationDate);if(W){const q=document.createElement("span");q.classList.add("popupDate"),q.textContent="{{date}}, {{time}}",q.dataset.l10nId="annotation_date_string",q.dataset.l10nArgs=JSON.stringify({date:W.toLocaleDateString(),time:W.toLocaleTimeString()}),S.append(q)}if((me=this.richText)!=null&&me.str&&(!((B=this.contentsObj)!=null&&B.str)||this.contentsObj.str===this.richText.str))D.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:S}),S.lastChild.classList.add("richText","popupContent");else{const q=this._formatContents(this.contentsObj);S.append(q)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const q of this.trigger)q.addEventListener("click",this._toggle.bind(this)),q.addEventListener("mouseover",this._show.bind(this,!1)),q.addEventListener("mouseout",this._hide.bind(this,!1));return S.addEventListener("click",this._hide.bind(this,!0)),u.append(S),u}_formatContents({str:i,dir:u}){const S=document.createElement("p");S.classList.add("popupContent"),S.dir=u;const R=i.split(/(?:\r\n?|\n)/);for(let L=0,W=R.length;L<W;++L){const me=R[L];S.append(document.createTextNode(me)),L<W-1&&S.append(document.createElement("br"))}return S}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(i=!1){i&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(i=!0){i&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class n extends y{constructor(i){var S,R,L;const u=!!(i.data.hasPopup||(S=i.data.titleObj)!=null&&S.str||(R=i.data.contentsObj)!=null&&R.str||(L=i.data.richText)!=null&&L.str);super(i,{isRenderable:u,ignoreBorder:!0}),this.textContent=i.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const i=document.createElement("div");i.classList.add("annotationTextContent"),i.setAttribute("role","comment");for(const u of this.textContent){const S=document.createElement("span");S.textContent=u,i.append(S)}this.container.append(i)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class f extends y{constructor(i){var S,R,L;const u=!!(i.data.hasPopup||(S=i.data.titleObj)!=null&&S.str||(R=i.data.contentsObj)!=null&&R.str||(L=i.data.richText)!=null&&L.str);super(i,{isRenderable:u,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const i=this.data,{width:u,height:S}=k(i.rect),R=this.svgFactory.create(u,S,!0),L=this.svgFactory.createElement("svg:line");return L.setAttribute("x1",i.rect[2]-i.lineCoordinates[0]),L.setAttribute("y1",i.rect[3]-i.lineCoordinates[1]),L.setAttribute("x2",i.rect[2]-i.lineCoordinates[2]),L.setAttribute("y2",i.rect[3]-i.lineCoordinates[3]),L.setAttribute("stroke-width",i.borderStyle.width||1),L.setAttribute("stroke","transparent"),L.setAttribute("fill","transparent"),R.append(L),this.container.append(R),this._createPopup(L,i),this.container}}class T extends y{constructor(i){var S,R,L;const u=!!(i.data.hasPopup||(S=i.data.titleObj)!=null&&S.str||(R=i.data.contentsObj)!=null&&R.str||(L=i.data.richText)!=null&&L.str);super(i,{isRenderable:u,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const i=this.data,{width:u,height:S}=k(i.rect),R=this.svgFactory.create(u,S,!0),L=i.borderStyle.width,W=this.svgFactory.createElement("svg:rect");return W.setAttribute("x",L/2),W.setAttribute("y",L/2),W.setAttribute("width",u-L),W.setAttribute("height",S-L),W.setAttribute("stroke-width",L||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),R.append(W),this.container.append(R),this._createPopup(W,i),this.container}}class l extends y{constructor(i){var S,R,L;const u=!!(i.data.hasPopup||(S=i.data.titleObj)!=null&&S.str||(R=i.data.contentsObj)!=null&&R.str||(L=i.data.richText)!=null&&L.str);super(i,{isRenderable:u,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const i=this.data,{width:u,height:S}=k(i.rect),R=this.svgFactory.create(u,S,!0),L=i.borderStyle.width,W=this.svgFactory.createElement("svg:ellipse");return W.setAttribute("cx",u/2),W.setAttribute("cy",S/2),W.setAttribute("rx",u/2-L/2),W.setAttribute("ry",S/2-L/2),W.setAttribute("stroke-width",L||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),R.append(W),this.container.append(R),this._createPopup(W,i),this.container}}class I extends y{constructor(i){var S,R,L;const u=!!(i.data.hasPopup||(S=i.data.titleObj)!=null&&S.str||(R=i.data.contentsObj)!=null&&R.str||(L=i.data.richText)!=null&&L.str);super(i,{isRenderable:u,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const i=this.data,{width:u,height:S}=k(i.rect),R=this.svgFactory.create(u,S,!0);let L=[];for(const me of i.vertices){const B=me.x-i.rect[0],q=i.rect[3]-me.y;L.push(B+","+q)}L=L.join(" ");const W=this.svgFactory.createElement(this.svgElementName);return W.setAttribute("points",L),W.setAttribute("stroke-width",i.borderStyle.width||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),R.append(W),this.container.append(R),this._createPopup(W,i),this.container}}class K extends I{constructor(i){super(i),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class le extends y{constructor(i){var S,R,L;const u=!!(i.data.hasPopup||(S=i.data.titleObj)!=null&&S.str||(R=i.data.contentsObj)!=null&&R.str||(L=i.data.richText)!=null&&L.str);super(i,{isRenderable:u,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class H extends y{constructor(i){var S,R,L;const u=!!(i.data.hasPopup||(S=i.data.titleObj)!=null&&S.str||(R=i.data.contentsObj)!=null&&R.str||(L=i.data.richText)!=null&&L.str);super(i,{isRenderable:u,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const i=this.data,{width:u,height:S}=k(i.rect),R=this.svgFactory.create(u,S,!0);for(const L of i.inkLists){let W=[];for(const B of L){const q=B.x-i.rect[0],ce=i.rect[3]-B.y;W.push(`${q},${ce}`)}W=W.join(" ");const me=this.svgFactory.createElement(this.svgElementName);me.setAttribute("points",W),me.setAttribute("stroke-width",i.borderStyle.width||1),me.setAttribute("stroke","transparent"),me.setAttribute("fill","transparent"),this._createPopup(me,i),R.append(me)}return this.container.append(R),this.container}}class ee extends y{constructor(i){var S,R,L;const u=!!(i.data.hasPopup||(S=i.data.titleObj)!=null&&S.str||(R=i.data.contentsObj)!=null&&R.str||(L=i.data.richText)!=null&&L.str);super(i,{isRenderable:u,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class ae extends y{constructor(i){var S,R,L;const u=!!(i.data.hasPopup||(S=i.data.titleObj)!=null&&S.str||(R=i.data.contentsObj)!=null&&R.str||(L=i.data.richText)!=null&&L.str);super(i,{isRenderable:u,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class te extends y{constructor(i){var S,R,L;const u=!!(i.data.hasPopup||(S=i.data.titleObj)!=null&&S.str||(R=i.data.contentsObj)!=null&&R.str||(L=i.data.richText)!=null&&L.str);super(i,{isRenderable:u,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class ge extends y{constructor(i){var S,R,L;const u=!!(i.data.hasPopup||(S=i.data.titleObj)!=null&&S.str||(R=i.data.contentsObj)!=null&&R.str||(L=i.data.richText)!=null&&L.str);super(i,{isRenderable:u,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class ye extends y{constructor(i){var S,R,L;const u=!!(i.data.hasPopup||(S=i.data.titleObj)!=null&&S.str||(R=i.data.contentsObj)!=null&&R.str||(L=i.data.richText)!=null&&L.str);super(i,{isRenderable:u,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Q extends y{constructor(i){var R;super(i,{isRenderable:!0});const{filename:u,content:S}=this.data.file;this.filename=(0,O.getFilenameFromUrl)(u,!0),this.content=S,(R=this.linkService.eventBus)==null||R.dispatch("fileattachmentannotation",{source:this,filename:u,content:S})}render(){var u,S;this.container.classList.add("fileAttachmentAnnotation");let i;return this.data.hasAppearance?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),i.classList.add("popupTriggerArea"),i.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((u=this.data.titleObj)!=null&&u.str||(S=this.data.contentsObj)!=null&&S.str||this.data.richText)&&this._createPopup(i,this.data),this.container.append(i),this.container}_download(){var i;(i=this.downloadManager)==null||i.openOrDownloadData(this.container,this.content,this.filename)}}const V=class{static render(i){var B,q;const{annotations:u,div:S,viewport:R,accessibilityManager:L}=i;(0,O.setLayerDimensions)(S,R);const W={data:null,layer:S,page:i.page,viewport:R,linkService:i.linkService,downloadManager:i.downloadManager,imageResourcesPath:i.imageResourcesPath||"",renderForms:i.renderForms!==!1,svgFactory:new O.DOMSVGFactory,annotationStorage:i.annotationStorage||new pe.AnnotationStorage,enableScripting:i.enableScripting===!0,hasJSActions:i.hasJSActions,fieldObjects:i.fieldObjects};let me=0;for(const ce of u){if(ce.noHTML)continue;if(ce.annotationType!==P.AnnotationType.POPUP){const{width:be,height:ve}=k(ce.rect);if(be<=0||ve<=0)continue}W.data=ce;const ne=w.create(W);if(!ne.isRenderable)continue;const ue=ne.render();if(ce.hidden&&(ue.style.visibility="hidden"),Array.isArray(ue))for(const be of ue)be.style.zIndex=me++,Z(B=V,Y,Gt).call(B,be,ce.id,S,L);else ue.style.zIndex=me++,ne instanceof e?S.prepend(ue):Z(q=V,Y,Gt).call(q,ue,ce.id,S,L)}Z(this,se,Xt).call(this,S,i.annotationCanvasMap)}static update(i){const{annotationCanvasMap:u,div:S,viewport:R}=i;(0,O.setLayerDimensions)(S,{rotation:R.rotation}),Z(this,se,Xt).call(this,S,u),S.hidden=!1}};let Ce=V;Y=new WeakSet,Gt=function(i,u,S,R){const L=i.firstChild||i;L.id=`${O.AnnotationPrefix}${u}`,S.append(i),R==null||R.moveElementInDOM(S,i,L,!1)},se=new WeakSet,Xt=function(i,u){if(u){for(const[S,R]of u){const L=i.querySelector(`[data-annotation-id="${S}"]`);if(!L)continue;const{firstChild:W}=L;W?W.nodeName==="CANVAS"?W.replaceWith(R):W.before(R):L.append(R)}u.clear()}},$(Ce,Y),$(Ce,se),o.AnnotationLayer=Ce},(x,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorConverters=void 0;function X(O){return Math.floor(Math.max(0,Math.min(1,O))*255).toString(16).padStart(2,"0")}class P{static CMYK_G([pe,G,D,N]){return["G",1-Math.min(1,.3*pe+.59*D+.11*G+N)]}static G_CMYK([pe]){return["CMYK",0,0,0,1-pe]}static G_RGB([pe]){return["RGB",pe,pe,pe]}static G_HTML([pe]){const G=X(pe);return`#${G}${G}${G}`}static RGB_G([pe,G,D]){return["G",.3*pe+.59*G+.11*D]}static RGB_HTML([pe,G,D]){const N=X(pe),b=X(G),d=X(D);return`#${N}${b}${d}`}static T_HTML(){return"#00000000"}static CMYK_RGB([pe,G,D,N]){return["RGB",1-Math.min(1,pe+N),1-Math.min(1,D+N),1-Math.min(1,G+N)]}static CMYK_HTML(pe){const G=this.CMYK_RGB(pe).slice(1);return this.RGB_HTML(G)}static RGB_CMYK([pe,G,D]){const N=1-pe,b=1-G,d=1-D,k=Math.min(N,b,d);return["CMYK",N,b,d,k]}}o.ColorConverters=P},(x,o,X)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.XfaLayer=void 0;var P=X(19);class O{static setupStorage(G,D,N,b,d){const k=b.getValue(D,{value:null});switch(N.name){case"textarea":if(k.value!==null&&(G.textContent=k.value),d==="print")break;G.addEventListener("input",w=>{b.setValue(D,{value:w.target.value})});break;case"input":if(N.attributes.type==="radio"||N.attributes.type==="checkbox"){if(k.value===N.attributes.xfaOn?G.setAttribute("checked",!0):k.value===N.attributes.xfaOff&&G.removeAttribute("checked"),d==="print")break;G.addEventListener("change",w=>{b.setValue(D,{value:w.target.checked?w.target.getAttribute("xfaOn"):w.target.getAttribute("xfaOff")})})}else{if(k.value!==null&&G.setAttribute("value",k.value),d==="print")break;G.addEventListener("input",w=>{b.setValue(D,{value:w.target.value})})}break;case"select":if(k.value!==null)for(const w of N.children)w.attributes.value===k.value&&(w.attributes.selected=!0);G.addEventListener("input",w=>{const y=w.target.options,r=y.selectedIndex===-1?"":y[y.selectedIndex].value;b.setValue(D,{value:r})});break}}static setAttributes({html:G,element:D,storage:N=null,intent:b,linkService:d}){const{attributes:k}=D,w=G instanceof HTMLAnchorElement;k.type==="radio"&&(k.name=`${k.name}-${b}`);for(const[y,r]of Object.entries(k))if(r!=null)switch(y){case"class":r.length&&G.setAttribute(y,r.join(" "));break;case"dataId":break;case"id":G.setAttribute("data-element-id",r);break;case"style":Object.assign(G.style,r);break;case"textContent":G.textContent=r;break;default:(!w||y!=="href"&&y!=="newWindow")&&G.setAttribute(y,r)}w&&d.addLinkAttributes(G,k.href,k.newWindow),N&&k.dataId&&this.setupStorage(G,k.dataId,D,N)}static render(G){var h;const D=G.annotationStorage,N=G.linkService,b=G.xfaHtml,d=G.intent||"display",k=document.createElement(b.name);b.attributes&&this.setAttributes({html:k,element:b,intent:d,linkService:N});const w=[[b,-1,k]],y=G.div;if(y.append(k),G.viewport){const a=`matrix(${G.viewport.transform.join(",")})`;y.style.transform=a}d!=="richText"&&y.setAttribute("class","xfaLayer xfaFont");const r=[];for(;w.length>0;){const[a,g,_]=w.at(-1);if(g+1===a.children.length){w.pop();continue}const v=a.children[++w.at(-1)[1]];if(v===null)continue;const{name:p}=v;if(p==="#text"){const e=document.createTextNode(v.value);r.push(e),_.append(e);continue}let t;if((h=v==null?void 0:v.attributes)!=null&&h.xmlns?t=document.createElementNS(v.attributes.xmlns,p):t=document.createElement(p),_.append(t),v.attributes&&this.setAttributes({html:t,element:v,storage:D,intent:d,linkService:N}),v.children&&v.children.length>0)w.push([v,-1,t]);else if(v.value){const e=document.createTextNode(v.value);P.XfaText.shouldBuildText(p)&&r.push(e),t.append(e)}}for(const a of y.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))a.setAttribute("readOnly",!0);return{textDivs:r}}static update(G){const D=`matrix(${G.viewport.transform.join(",")})`;G.div.style.transform=D,G.div.hidden=!1}}o.XfaLayer=O},(x,o,X)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SVGGraphics=void 0;var P=X(6),O=X(1),pe=X(10);let G=class{constructor(){(0,O.unreachable)("Not implemented: SVGGraphics")}};o.SVGGraphics=G;{let h=function(t){let e=[];const s=[];for(const n of t){if(n.fn==="save"){e.push({fnId:92,fn:"group",items:[]}),s.push(e),e=e.at(-1).items;continue}n.fn==="restore"?e=s.pop():e.push(n)}return e},a=function(t){if(Number.isInteger(t))return t.toString();const e=t.toFixed(10);let s=e.length-1;if(e[s]!=="0")return e;do s--;while(e[s]==="0");return e.substring(0,e[s]==="."?s:s+1)},g=function(t){if(t[4]===0&&t[5]===0){if(t[1]===0&&t[2]===0)return t[0]===1&&t[3]===1?"":`scale(${a(t[0])} ${a(t[3])})`;if(t[0]===t[3]&&t[1]===-t[2]){const e=Math.acos(t[0])*180/Math.PI;return`rotate(${a(e)})`}}else if(t[0]===1&&t[1]===0&&t[2]===0&&t[3]===1)return`translate(${a(t[4])} ${a(t[5])})`;return`matrix(${a(t[0])} ${a(t[1])} ${a(t[2])} ${a(t[3])} ${a(t[4])} ${a(t[5])})`};const D={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},N="http://www.w3.org/XML/1998/namespace",b="http://www.w3.org/1999/xlink",d=["butt","round","square"],k=["miter","round","bevel"],w=function(t,e="",s=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!s)return URL.createObjectURL(new Blob([t],{type:e}));const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let f=`data:${e};base64,`;for(let T=0,l=t.length;T<l;T+=3){const I=t[T]&255,K=t[T+1]&255,le=t[T+2]&255,H=I>>2,ee=(I&3)<<4|K>>4,ae=T+1<l?(K&15)<<2|le>>6:64,te=T+2<l?le&63:64;f+=n[H]+n[ee]+n[ae]+n[te]}return f},y=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),e=12,s=new Int32Array(256);for(let le=0;le<256;le++){let H=le;for(let ee=0;ee<8;ee++)H&1?H=3988292384^H>>1&2147483647:H=H>>1&2147483647;s[le]=H}function n(le,H,ee){let ae=-1;for(let te=H;te<ee;te++){const ge=(ae^le[te])&255,ye=s[ge];ae=ae>>>8^ye}return ae^-1}function f(le,H,ee,ae){let te=ae;const ge=H.length;ee[te]=ge>>24&255,ee[te+1]=ge>>16&255,ee[te+2]=ge>>8&255,ee[te+3]=ge&255,te+=4,ee[te]=le.charCodeAt(0)&255,ee[te+1]=le.charCodeAt(1)&255,ee[te+2]=le.charCodeAt(2)&255,ee[te+3]=le.charCodeAt(3)&255,te+=4,ee.set(H,te),te+=H.length;const ye=n(ee,ae+4,te);ee[te]=ye>>24&255,ee[te+1]=ye>>16&255,ee[te+2]=ye>>8&255,ee[te+3]=ye&255}function T(le,H,ee){let ae=1,te=0;for(let ge=H;ge<ee;++ge)ae=(ae+(le[ge]&255))%65521,te=(te+ae)%65521;return te<<16|ae}function l(le){if(!pe.isNodeJS)return I(le);try{let H;parseInt(process.versions.node)>=8?H=le:H=Buffer.from(le);const ee=require$$5.deflateSync(H,{level:9});return ee instanceof Uint8Array?ee:new Uint8Array(ee)}catch(H){(0,O.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+H)}return I(le)}function I(le){let H=le.length;const ee=65535,ae=Math.ceil(H/ee),te=new Uint8Array(2+H+ae*5+4);let ge=0;te[ge++]=120,te[ge++]=156;let ye=0;for(;H>ee;)te[ge++]=0,te[ge++]=255,te[ge++]=255,te[ge++]=0,te[ge++]=0,te.set(le.subarray(ye,ye+ee),ge),ge+=ee,ye+=ee,H-=ee;te[ge++]=1,te[ge++]=H&255,te[ge++]=H>>8&255,te[ge++]=~H&65535&255,te[ge++]=(~H&65535)>>8&255,te.set(le.subarray(ye),ge),ge+=le.length-ye;const Q=T(le,0,le.length);return te[ge++]=Q>>24&255,te[ge++]=Q>>16&255,te[ge++]=Q>>8&255,te[ge++]=Q&255,te}function K(le,H,ee,ae){const te=le.width,ge=le.height;let ye,Q,Ce;const Ee=le.data;switch(H){case O.ImageKind.GRAYSCALE_1BPP:Q=0,ye=1,Ce=te+7>>3;break;case O.ImageKind.RGB_24BPP:Q=2,ye=8,Ce=te*3;break;case O.ImageKind.RGBA_32BPP:Q=6,ye=8,Ce=te*4;break;default:throw new Error("invalid format")}const J=new Uint8Array((1+Ce)*ge);let A=0,C=0;for(let V=0;V<ge;++V)J[A++]=0,J.set(Ee.subarray(C,C+Ce),A),C+=Ce,A+=Ce;if(H===O.ImageKind.GRAYSCALE_1BPP&&ae){A=0;for(let V=0;V<ge;V++){A++;for(let z=0;z<Ce;z++)J[A++]^=255}}const F=new Uint8Array([te>>24&255,te>>16&255,te>>8&255,te&255,ge>>24&255,ge>>16&255,ge>>8&255,ge&255,ye,Q,0,0,0]),Y=l(J),j=t.length+e*3+F.length+Y.length,se=new Uint8Array(j);let U=0;return se.set(t,U),U+=t.length,f("IHDR",F,se,U),U+=e+F.length,f("IDATA",Y,se,U),U+=e+Y.length,f("IEND",new Uint8Array(0),se,U),w(se,"image/png",ee)}return function(H,ee,ae){const te=H.kind===void 0?O.ImageKind.GRAYSCALE_1BPP:H.kind;return K(H,te,ee,ae)}}();class r{constructor(){this.fontSizeScale=1,this.fontWeight=D.fontWeight,this.fontSize=0,this.textMatrix=O.IDENTITY_MATRIX,this.fontMatrix=O.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=O.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=D.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(e,s){this.x=e,this.y=s}}let _=0,v=0,p=0;o.SVGGraphics=G=class{constructor(t,e,s=!1){(0,P.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new P.DOMSVGFactory,this.current=new r,this.transformMatrix=O.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=e,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!s,this._operatorIdMapping=[];for(const n in O.OPS)this._operatorIdMapping[O.OPS[n]]=n}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){const e=t.fnArray,s=t.argsArray;for(let n=0,f=e.length;n<f;n++)if(e[n]===O.OPS.dependency)for(const T of s[n]){const l=T.startsWith("g_")?this.commonObjs:this.objs,I=new Promise(K=>{l.get(T,K)});this.current.dependencies.push(I)}return Promise.all(this.current.dependencies)}transform(t,e,s,n,f,T){const l=[t,e,s,n,f,T];this.transformMatrix=O.Util.transform(this.transformMatrix,l),this.tgrp=null}getSVG(t,e){this.viewport=e;const s=this._initialize(e);return this.loadDependencies(t).then(()=>(this.transformMatrix=O.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),s))}convertOpList(t){const e=this._operatorIdMapping,s=t.argsArray,n=t.fnArray,f=[];for(let T=0,l=n.length;T<l;T++){const I=n[T];f.push({fnId:I,fn:e[I],args:s[T]})}return h(f)}executeOpTree(t){for(const e of t){const s=e.fn,n=e.fnId,f=e.args;switch(n|0){case O.OPS.beginText:this.beginText();break;case O.OPS.dependency:break;case O.OPS.setLeading:this.setLeading(f);break;case O.OPS.setLeadingMoveText:this.setLeadingMoveText(f[0],f[1]);break;case O.OPS.setFont:this.setFont(f);break;case O.OPS.showText:this.showText(f[0]);break;case O.OPS.showSpacedText:this.showText(f[0]);break;case O.OPS.endText:this.endText();break;case O.OPS.moveText:this.moveText(f[0],f[1]);break;case O.OPS.setCharSpacing:this.setCharSpacing(f[0]);break;case O.OPS.setWordSpacing:this.setWordSpacing(f[0]);break;case O.OPS.setHScale:this.setHScale(f[0]);break;case O.OPS.setTextMatrix:this.setTextMatrix(f[0],f[1],f[2],f[3],f[4],f[5]);break;case O.OPS.setTextRise:this.setTextRise(f[0]);break;case O.OPS.setTextRenderingMode:this.setTextRenderingMode(f[0]);break;case O.OPS.setLineWidth:this.setLineWidth(f[0]);break;case O.OPS.setLineJoin:this.setLineJoin(f[0]);break;case O.OPS.setLineCap:this.setLineCap(f[0]);break;case O.OPS.setMiterLimit:this.setMiterLimit(f[0]);break;case O.OPS.setFillRGBColor:this.setFillRGBColor(f[0],f[1],f[2]);break;case O.OPS.setStrokeRGBColor:this.setStrokeRGBColor(f[0],f[1],f[2]);break;case O.OPS.setStrokeColorN:this.setStrokeColorN(f);break;case O.OPS.setFillColorN:this.setFillColorN(f);break;case O.OPS.shadingFill:this.shadingFill(f[0]);break;case O.OPS.setDash:this.setDash(f[0],f[1]);break;case O.OPS.setRenderingIntent:this.setRenderingIntent(f[0]);break;case O.OPS.setFlatness:this.setFlatness(f[0]);break;case O.OPS.setGState:this.setGState(f[0]);break;case O.OPS.fill:this.fill();break;case O.OPS.eoFill:this.eoFill();break;case O.OPS.stroke:this.stroke();break;case O.OPS.fillStroke:this.fillStroke();break;case O.OPS.eoFillStroke:this.eoFillStroke();break;case O.OPS.clip:this.clip("nonzero");break;case O.OPS.eoClip:this.clip("evenodd");break;case O.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case O.OPS.paintImageXObject:this.paintImageXObject(f[0]);break;case O.OPS.paintInlineImageXObject:this.paintInlineImageXObject(f[0]);break;case O.OPS.paintImageMaskXObject:this.paintImageMaskXObject(f[0]);break;case O.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(f[0],f[1]);break;case O.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case O.OPS.closePath:this.closePath();break;case O.OPS.closeStroke:this.closeStroke();break;case O.OPS.closeFillStroke:this.closeFillStroke();break;case O.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case O.OPS.nextLine:this.nextLine();break;case O.OPS.transform:this.transform(f[0],f[1],f[2],f[3],f[4],f[5]);break;case O.OPS.constructPath:this.constructPath(f[0],f[1]);break;case O.OPS.endPath:this.endPath();break;case 92:this.group(e.items);break;default:(0,O.warn)(`Unimplemented operator ${s}`);break}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,e,s,n,f,T){const l=this.current;l.textMatrix=l.lineMatrix=[t,e,s,n,f,T],l.textMatrixScale=Math.hypot(t,e),l.x=l.lineX=0,l.y=l.lineY=0,l.xcoords=[],l.ycoords=[],l.tspan=this.svgFactory.createElement("svg:tspan"),l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",`${a(l.fontSize)}px`),l.tspan.setAttributeNS(null,"y",a(-l.y)),l.txtElement=this.svgFactory.createElement("svg:text"),l.txtElement.append(l.tspan)}beginText(){const t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=O.IDENTITY_MATRIX,t.lineMatrix=O.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,e){const s=this.current;s.x=s.lineX+=t,s.y=s.lineY+=e,s.xcoords=[],s.ycoords=[],s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${a(s.fontSize)}px`),s.tspan.setAttributeNS(null,"y",a(-s.y))}showText(t){const e=this.current,s=e.font,n=e.fontSize;if(n===0)return;const f=e.fontSizeScale,T=e.charSpacing,l=e.wordSpacing,I=e.fontDirection,K=e.textHScale*I,le=s.vertical,H=le?1:-1,ee=s.defaultVMetrics,ae=n*e.fontMatrix[0];let te=0;for(const Q of t){if(Q===null){te+=I*l;continue}else if(typeof Q=="number"){te+=H*Q*n/1e3;continue}const Ce=(Q.isSpace?l:0)+T,Ee=Q.fontChar;let J,A,C=Q.width;if(le){let Y;const j=Q.vmetric||ee;Y=Q.vmetric?j[1]:C*.5,Y=-Y*ae;const se=j[2]*ae;C=j?-j[0]:C,J=Y/f,A=(te+se)/f}else J=te/f,A=0;(Q.isInFont||s.missingFile)&&(e.xcoords.push(e.x+J),le&&e.ycoords.push(-e.y+A),e.tspan.textContent+=Ee);let F;le?F=C*ae-Ce*I:F=C*ae+Ce*I,te+=F}e.tspan.setAttributeNS(null,"x",e.xcoords.map(a).join(" ")),le?e.tspan.setAttributeNS(null,"y",e.ycoords.map(a).join(" ")):e.tspan.setAttributeNS(null,"y",a(-e.y)),le?e.y-=te:e.x+=te*K,e.tspan.setAttributeNS(null,"font-family",e.fontFamily),e.tspan.setAttributeNS(null,"font-size",`${a(e.fontSize)}px`),e.fontStyle!==D.fontStyle&&e.tspan.setAttributeNS(null,"font-style",e.fontStyle),e.fontWeight!==D.fontWeight&&e.tspan.setAttributeNS(null,"font-weight",e.fontWeight);const ge=e.textRenderingMode&O.TextRenderingMode.FILL_STROKE_MASK;if(ge===O.TextRenderingMode.FILL||ge===O.TextRenderingMode.FILL_STROKE?(e.fillColor!==D.fillColor&&e.tspan.setAttributeNS(null,"fill",e.fillColor),e.fillAlpha<1&&e.tspan.setAttributeNS(null,"fill-opacity",e.fillAlpha)):e.textRenderingMode===O.TextRenderingMode.ADD_TO_PATH?e.tspan.setAttributeNS(null,"fill","transparent"):e.tspan.setAttributeNS(null,"fill","none"),ge===O.TextRenderingMode.STROKE||ge===O.TextRenderingMode.FILL_STROKE){const Q=1/(e.textMatrixScale||1);this._setStrokeAttributes(e.tspan,Q)}let ye=e.textMatrix;e.textRise!==0&&(ye=ye.slice(),ye[5]+=e.textRise),e.txtElement.setAttributeNS(null,"transform",`${g(ye)} scale(${a(K)}, -1)`),e.txtElement.setAttributeNS(N,"xml:space","preserve"),e.txtElement.append(e.tspan),e.txtgrp.append(e.txtElement),this._ensureTransformGroup().append(e.txtElement)}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const e=w(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}"; src: url(${e}); }
`}setFont(t){const e=this.current,s=this.commonObjs.get(t[0]);let n=t[1];e.font=s,this.embedFonts&&!s.missingFile&&!this.embeddedFonts[s.loadedName]&&(this.addFontStyle(s),this.embeddedFonts[s.loadedName]=s),e.fontMatrix=s.fontMatrix||O.FONT_IDENTITY_MATRIX;let f="normal";s.black?f="900":s.bold&&(f="bold");const T=s.italic?"italic":"normal";n<0?(n=-n,e.fontDirection=-1):e.fontDirection=1,e.fontSize=n,e.fontFamily=s.loadedName,e.fontWeight=f,e.fontStyle=T,e.tspan=this.svgFactory.createElement("svg:tspan"),e.tspan.setAttributeNS(null,"y",a(-e.y)),e.xcoords=[],e.ycoords=[]}endText(){var e;const t=this.current;t.textRenderingMode&O.TextRenderingMode.ADD_TO_PATH_FLAG&&((e=t.txtElement)!=null&&e.hasChildNodes())&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=d[t]}setLineJoin(t){this.current.lineJoin=k[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,e,s){this.current.strokeColor=O.Util.makeHexColor(t,e,s)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,e,s){this.current.fillColor=O.Util.makeHexColor(t,e,s),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const e=this.viewport.width,s=this.viewport.height,n=O.Util.inverseTransform(this.transformMatrix),f=O.Util.applyTransform([0,0],n),T=O.Util.applyTransform([0,s],n),l=O.Util.applyTransform([e,0],n),I=O.Util.applyTransform([e,s],n),K=Math.min(f[0],T[0],l[0],I[0]),le=Math.min(f[1],T[1],l[1],I[1]),H=Math.max(f[0],T[0],l[0],I[0]),ee=Math.max(f[1],T[1],l[1],I[1]),ae=this.svgFactory.createElement("svg:rect");ae.setAttributeNS(null,"x",K),ae.setAttributeNS(null,"y",le),ae.setAttributeNS(null,"width",H-K),ae.setAttributeNS(null,"height",ee-le),ae.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&ae.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(ae)}_makeColorN_Pattern(t){return t[0]==="TilingPattern"?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const e=t[1],s=t[2],n=t[3]||O.IDENTITY_MATRIX,[f,T,l,I]=t[4],K=t[5],le=t[6],H=t[7],ee=`shading${p++}`,[ae,te,ge,ye]=O.Util.normalizeRect([...O.Util.applyTransform([f,T],n),...O.Util.applyTransform([l,I],n)]),[Q,Ce]=O.Util.singularValueDecompose2dScale(n),Ee=K*Q,J=le*Ce,A=this.svgFactory.createElement("svg:pattern");A.setAttributeNS(null,"id",ee),A.setAttributeNS(null,"patternUnits","userSpaceOnUse"),A.setAttributeNS(null,"width",Ee),A.setAttributeNS(null,"height",J),A.setAttributeNS(null,"x",`${ae}`),A.setAttributeNS(null,"y",`${te}`);const C=this.svg,F=this.transformMatrix,Y=this.current.fillColor,j=this.current.strokeColor,se=this.svgFactory.create(ge-ae,ye-te);if(this.svg=se,this.transformMatrix=n,H===2){const U=O.Util.makeHexColor(...e);this.current.fillColor=U,this.current.strokeColor=U}return this.executeOpTree(this.convertOpList(s)),this.svg=C,this.transformMatrix=F,this.current.fillColor=Y,this.current.strokeColor=j,A.append(se.childNodes[0]),this.defs.append(A),`url(#${ee})`}_makeShadingPattern(t){switch(typeof t=="string"&&(t=this.objs.get(t)),t[0]){case"RadialAxial":const e=`shading${p++}`,s=t[3];let n;switch(t[1]){case"axial":const f=t[4],T=t[5];n=this.svgFactory.createElement("svg:linearGradient"),n.setAttributeNS(null,"id",e),n.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),n.setAttributeNS(null,"x1",f[0]),n.setAttributeNS(null,"y1",f[1]),n.setAttributeNS(null,"x2",T[0]),n.setAttributeNS(null,"y2",T[1]);break;case"radial":const l=t[4],I=t[5],K=t[6],le=t[7];n=this.svgFactory.createElement("svg:radialGradient"),n.setAttributeNS(null,"id",e),n.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),n.setAttributeNS(null,"cx",I[0]),n.setAttributeNS(null,"cy",I[1]),n.setAttributeNS(null,"r",le),n.setAttributeNS(null,"fx",l[0]),n.setAttributeNS(null,"fy",l[1]),n.setAttributeNS(null,"fr",K);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const f of s){const T=this.svgFactory.createElement("svg:stop");T.setAttributeNS(null,"offset",f[0]),T.setAttributeNS(null,"stop-color",f[1]),n.append(T)}return this.defs.append(n),`url(#${e})`;case"Mesh":return(0,O.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(t,e){this.current.dashArray=t,this.current.dashPhase=e}constructPath(t,e){const s=this.current;let n=s.x,f=s.y,T=[],l=0;for(const I of t)switch(I|0){case O.OPS.rectangle:n=e[l++],f=e[l++];const K=e[l++],le=e[l++],H=n+K,ee=f+le;T.push("M",a(n),a(f),"L",a(H),a(f),"L",a(H),a(ee),"L",a(n),a(ee),"Z");break;case O.OPS.moveTo:n=e[l++],f=e[l++],T.push("M",a(n),a(f));break;case O.OPS.lineTo:n=e[l++],f=e[l++],T.push("L",a(n),a(f));break;case O.OPS.curveTo:n=e[l+4],f=e[l+5],T.push("C",a(e[l]),a(e[l+1]),a(e[l+2]),a(e[l+3]),a(n),a(f)),l+=6;break;case O.OPS.curveTo2:T.push("C",a(n),a(f),a(e[l]),a(e[l+1]),a(e[l+2]),a(e[l+3])),n=e[l+2],f=e[l+3],l+=4;break;case O.OPS.curveTo3:n=e[l+2],f=e[l+3],T.push("C",a(e[l]),a(e[l+1]),a(n),a(f),a(n),a(f)),l+=4;break;case O.OPS.closePath:T.push("Z");break}T=T.join(" "),s.path&&t.length>0&&t[0]!==O.OPS.rectangle&&t[0]!==O.OPS.moveTo?T=s.path.getAttributeNS(null,"d")+T:(s.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(s.path)),s.path.setAttributeNS(null,"d",T),s.path.setAttributeNS(null,"fill","none"),s.element=s.path,s.setCurrentPoint(n,f)}endPath(){const t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element){this.pendingClip=null;return}const e=`clippath${_++}`,s=this.svgFactory.createElement("svg:clipPath");s.setAttributeNS(null,"id",e),s.setAttributeNS(null,"transform",g(this.transformMatrix));const n=t.element.cloneNode(!0);if(this.pendingClip==="evenodd"?n.setAttributeNS(null,"clip-rule","evenodd"):n.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,s.append(n),this.defs.append(s),t.activeClipUrl){t.clipGroup=null;for(const f of this.extraStack)f.clipGroup=null;s.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl=`url(#${e})`,this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const e=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",e)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,s]of t)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s);break;case"CA":this.setStrokeAlpha(s);break;case"ca":this.setFillAlpha(s);break;default:(0,O.warn)(`Unimplemented graphic state operator ${e}`);break}}fill(){const t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){const t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t,e=1){const s=this.current;let n=s.dashArray;e!==1&&n.length>0&&(n=n.map(function(f){return e*f})),t.setAttributeNS(null,"stroke",s.strokeColor),t.setAttributeNS(null,"stroke-opacity",s.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",a(s.miterLimit)),t.setAttributeNS(null,"stroke-linecap",s.lineCap),t.setAttributeNS(null,"stroke-linejoin",s.lineJoin),t.setAttributeNS(null,"stroke-width",a(e*s.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",n.map(a).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",a(e*s.dashPhase)+"px")}eoFill(){var t;(t=this.current.element)==null||t.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var t;(t=this.current.element)==null||t.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(t)}paintImageXObject(t){const e=this.getObject(t);if(!e){(0,O.warn)(`Dependent image with object ID ${t} is not ready yet`);return}this.paintInlineImageXObject(e)}paintInlineImageXObject(t,e){const s=t.width,n=t.height,f=y(t,this.forceDataSchema,!!e),T=this.svgFactory.createElement("svg:rect");T.setAttributeNS(null,"x","0"),T.setAttributeNS(null,"y","0"),T.setAttributeNS(null,"width",a(s)),T.setAttributeNS(null,"height",a(n)),this.current.element=T,this.clip("nonzero");const l=this.svgFactory.createElement("svg:image");l.setAttributeNS(b,"xlink:href",f),l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y",a(-n)),l.setAttributeNS(null,"width",a(s)+"px"),l.setAttributeNS(null,"height",a(n)+"px"),l.setAttributeNS(null,"transform",`scale(${a(1/s)} ${a(-1/n)})`),e?e.append(l):this._ensureTransformGroup().append(l)}paintImageMaskXObject(t){const e=this.getObject(t.data,t);if(e.bitmap){(0,O.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const s=this.current,n=e.width,f=e.height,T=s.fillColor;s.maskId=`mask${v++}`;const l=this.svgFactory.createElement("svg:mask");l.setAttributeNS(null,"id",s.maskId);const I=this.svgFactory.createElement("svg:rect");I.setAttributeNS(null,"x","0"),I.setAttributeNS(null,"y","0"),I.setAttributeNS(null,"width",a(n)),I.setAttributeNS(null,"height",a(f)),I.setAttributeNS(null,"fill",T),I.setAttributeNS(null,"mask",`url(#${s.maskId})`),this.defs.append(l),this._ensureTransformGroup().append(I),this.paintInlineImageXObject(e,l)}paintFormXObjectBegin(t,e){if(Array.isArray(t)&&t.length===6&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e){const s=e[2]-e[0],n=e[3]-e[1],f=this.svgFactory.createElement("svg:rect");f.setAttributeNS(null,"x",e[0]),f.setAttributeNS(null,"y",e[1]),f.setAttributeNS(null,"width",a(s)),f.setAttributeNS(null,"height",a(n)),this.current.element=f,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const e=this.svgFactory.create(t.width,t.height),s=this.svgFactory.createElement("svg:defs");e.append(s),this.defs=s;const n=this.svgFactory.createElement("svg:g");return n.setAttributeNS(null,"transform",g(t.transform)),e.append(n),this.svg=n,e}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",g(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(x){var o=__webpack_module_cache__[x];if(o!==void 0)return o.exports;var X=__webpack_module_cache__[x]={exports:{}};return __webpack_modules__[x](X,X.exports,__w_pdfjs_require__),X.exports}var __webpack_exports__={};return(()=>{var x=__webpack_exports__;Object.defineProperty(x,"__esModule",{value:!0}),Object.defineProperty(x,"AbortException",{enumerable:!0,get:function(){return o.AbortException}}),Object.defineProperty(x,"AnnotationEditorLayer",{enumerable:!0,get:function(){return pe.AnnotationEditorLayer}}),Object.defineProperty(x,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return o.AnnotationEditorParamsType}}),Object.defineProperty(x,"AnnotationEditorType",{enumerable:!0,get:function(){return o.AnnotationEditorType}}),Object.defineProperty(x,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return G.AnnotationEditorUIManager}}),Object.defineProperty(x,"AnnotationLayer",{enumerable:!0,get:function(){return D.AnnotationLayer}}),Object.defineProperty(x,"AnnotationMode",{enumerable:!0,get:function(){return o.AnnotationMode}}),Object.defineProperty(x,"CMapCompressionType",{enumerable:!0,get:function(){return o.CMapCompressionType}}),Object.defineProperty(x,"FeatureTest",{enumerable:!0,get:function(){return o.FeatureTest}}),Object.defineProperty(x,"GlobalWorkerOptions",{enumerable:!0,get:function(){return N.GlobalWorkerOptions}}),Object.defineProperty(x,"InvalidPDFException",{enumerable:!0,get:function(){return o.InvalidPDFException}}),Object.defineProperty(x,"MissingPDFException",{enumerable:!0,get:function(){return o.MissingPDFException}}),Object.defineProperty(x,"OPS",{enumerable:!0,get:function(){return o.OPS}}),Object.defineProperty(x,"PDFDataRangeTransport",{enumerable:!0,get:function(){return X.PDFDataRangeTransport}}),Object.defineProperty(x,"PDFDateString",{enumerable:!0,get:function(){return P.PDFDateString}}),Object.defineProperty(x,"PDFWorker",{enumerable:!0,get:function(){return X.PDFWorker}}),Object.defineProperty(x,"PasswordResponses",{enumerable:!0,get:function(){return o.PasswordResponses}}),Object.defineProperty(x,"PermissionFlag",{enumerable:!0,get:function(){return o.PermissionFlag}}),Object.defineProperty(x,"PixelsPerInch",{enumerable:!0,get:function(){return P.PixelsPerInch}}),Object.defineProperty(x,"PromiseCapability",{enumerable:!0,get:function(){return o.PromiseCapability}}),Object.defineProperty(x,"RenderingCancelledException",{enumerable:!0,get:function(){return P.RenderingCancelledException}}),Object.defineProperty(x,"SVGGraphics",{enumerable:!0,get:function(){return b.SVGGraphics}}),Object.defineProperty(x,"UnexpectedResponseException",{enumerable:!0,get:function(){return o.UnexpectedResponseException}}),Object.defineProperty(x,"Util",{enumerable:!0,get:function(){return o.Util}}),Object.defineProperty(x,"VerbosityLevel",{enumerable:!0,get:function(){return o.VerbosityLevel}}),Object.defineProperty(x,"XfaLayer",{enumerable:!0,get:function(){return d.XfaLayer}}),Object.defineProperty(x,"build",{enumerable:!0,get:function(){return X.build}}),Object.defineProperty(x,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return o.createValidAbsoluteUrl}}),Object.defineProperty(x,"getDocument",{enumerable:!0,get:function(){return X.getDocument}}),Object.defineProperty(x,"getFilenameFromUrl",{enumerable:!0,get:function(){return P.getFilenameFromUrl}}),Object.defineProperty(x,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return P.getPdfFilenameFromUrl}}),Object.defineProperty(x,"getXfaPageViewport",{enumerable:!0,get:function(){return P.getXfaPageViewport}}),Object.defineProperty(x,"isDataScheme",{enumerable:!0,get:function(){return P.isDataScheme}}),Object.defineProperty(x,"isPdfFile",{enumerable:!0,get:function(){return P.isPdfFile}}),Object.defineProperty(x,"loadScript",{enumerable:!0,get:function(){return P.loadScript}}),Object.defineProperty(x,"normalizeUnicode",{enumerable:!0,get:function(){return o.normalizeUnicode}}),Object.defineProperty(x,"renderTextLayer",{enumerable:!0,get:function(){return O.renderTextLayer}}),Object.defineProperty(x,"setLayerDimensions",{enumerable:!0,get:function(){return P.setLayerDimensions}}),Object.defineProperty(x,"shadow",{enumerable:!0,get:function(){return o.shadow}}),Object.defineProperty(x,"updateTextLayer",{enumerable:!0,get:function(){return O.updateTextLayer}}),Object.defineProperty(x,"version",{enumerable:!0,get:function(){return X.version}});var o=__w_pdfjs_require__(1),X=__w_pdfjs_require__(2),P=__w_pdfjs_require__(6),O=__w_pdfjs_require__(26),pe=__w_pdfjs_require__(27),G=__w_pdfjs_require__(5),D=__w_pdfjs_require__(32),N=__w_pdfjs_require__(14),b=__w_pdfjs_require__(35),d=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf);var pdf_viewerExports={},pdf_viewer$1={get exports(){return pdf_viewerExports},set exports(x){pdf_viewerExports=x}};(function(x,o){(function(P,O){x.exports=O()})(globalThis,()=>(()=>{var X=[,(G,D,N)=>{var h,a,qt,_,ji;Object.defineProperty(D,"__esModule",{value:!0}),D.SimpleLinkService=D.PDFLinkService=D.LinkTarget=void 0;var b=N(2);const d="noopener noreferrer nofollow",k={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};D.LinkTarget=k;function w(t,{url:e,target:s,rel:n,enabled:f=!0}={}){if(!e||typeof e!="string")throw new Error('A valid "url" parameter must provided.');const T=(0,b.removeNullCharacters)(e);f?t.href=t.title=T:(t.href="",t.title=`Disabled: ${T}`,t.onclick=()=>!1);let l="";switch(s){case k.NONE:break;case k.SELF:l="_self";break;case k.BLANK:l="_blank";break;case k.PARENT:l="_parent";break;case k.TOP:l="_top";break}t.target=l,t.rel=typeof n=="string"?n:d}const p=class{constructor({eventBus:e,externalLinkTarget:s=null,externalLinkRel:n=null,ignoreDestinationZoom:f=!1}={}){$(this,a);$(this,h,new Map);this.eventBus=e,this.externalLinkTarget=s,this.externalLinkRel=n,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=f,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(e,s=null){this.baseUrl=s,this.pdfDocument=e,c(this,h).clear()}setViewer(e){this.pdfViewer=e}setHistory(e){this.pdfHistory=e}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(e){this.pdfViewer.currentPageNumber=e}get rotation(){return this.pdfViewer.pagesRotation}set rotation(e){this.pdfViewer.pagesRotation=e}get isInPresentationMode(){return this.pdfViewer.isInPresentationMode}async goToDestination(e){if(!this.pdfDocument)return;let s,n;if(typeof e=="string"?(s=e,n=await this.pdfDocument.getDestination(e)):(s=null,n=await e),!Array.isArray(n)){console.error(`PDFLinkService.goToDestination: "${n}" is not a valid destination array, for dest="${e}".`);return}Z(this,a,qt).call(this,e,s,n)}goToPage(e){if(!this.pdfDocument)return;const s=typeof e=="string"&&this.pdfViewer.pageLabelToPageNumber(e)||e|0;if(!(Number.isInteger(s)&&s>0&&s<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${e}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(s)),this.pdfViewer.scrollPageIntoView({pageNumber:s})}addLinkAttributes(e,s,n=!1){w(e,{url:s,target:n?k.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(e){if(typeof e=="string"){if(e.length>0)return this.getAnchorUrl("#"+escape(e))}else if(Array.isArray(e)){const s=JSON.stringify(e);if(s.length>0)return this.getAnchorUrl("#"+escape(s))}return this.getAnchorUrl("")}getAnchorUrl(e){return this.baseUrl?this.baseUrl+e:e}setHash(e){var f;if(!this.pdfDocument)return;let s,n;if(e.includes("=")){const T=(0,b.parseQueryString)(e);if(T.has("search")){const l=T.get("search").replaceAll('"',""),I=T.get("phrase")==="true";this.eventBus.dispatch("findfromurlhash",{source:this,query:I?l:l.match(/\S+/g)})}if(T.has("page")&&(s=T.get("page")|0||1),T.has("zoom")){const l=T.get("zoom").split(","),I=l[0],K=parseFloat(I);I.includes("Fit")?I==="Fit"||I==="FitB"?n=[null,{name:I}]:I==="FitH"||I==="FitBH"||I==="FitV"||I==="FitBV"?n=[null,{name:I},l.length>1?l[1]|0:null]:I==="FitR"?l.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):n=[null,{name:I},l[1]|0,l[2]|0,l[3]|0,l[4]|0]:console.error(`PDFLinkService.setHash: "${I}" is not a valid zoom value.`):n=[null,{name:"XYZ"},l.length>1?l[1]|0:null,l.length>2?l[2]|0:null,K?K/100:I]}n?this.pdfViewer.scrollPageIntoView({pageNumber:s||this.page,destArray:n,allowNegativeOffset:!0}):s&&(this.page=s),T.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:T.get("pagemode")}),T.has("nameddest")&&this.goToDestination(T.get("nameddest"))}else{n=unescape(e);try{n=JSON.parse(n),Array.isArray(n)||(n=n.toString())}catch{}if(typeof n=="string"||Z(f=p,_,ji).call(f,n)){this.goToDestination(n);return}console.error(`PDFLinkService.setHash: "${unescape(e)}" is not a valid destination.`)}}executeNamedAction(e){var s,n;switch(e){case"GoBack":(s=this.pdfHistory)==null||s.back();break;case"GoForward":(n=this.pdfHistory)==null||n.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break}this.eventBus.dispatch("namedaction",{source:this,action:e})}async executeSetOCGState(e){const s=this.pdfDocument,n=await this.pdfViewer.optionalContentConfigPromise;if(s!==this.pdfDocument)return;let f;for(const T of e.state){switch(T){case"ON":case"OFF":case"Toggle":f=T;continue}switch(f){case"ON":n.setVisibility(T,!0);break;case"OFF":n.setVisibility(T,!1);break;case"Toggle":const l=n.getGroup(T);l&&n.setVisibility(T,!l.visible);break}}this.pdfViewer.optionalContentConfigPromise=Promise.resolve(n)}cachePageRef(e,s){if(!s)return;const n=s.gen===0?`${s.num}R`:`${s.num}R${s.gen}`;c(this,h).set(n,e)}_cachedPageNumber(e){if(!e)return null;const s=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return c(this,h).get(s)||null}isPageVisible(e){return this.pdfViewer.isPageVisible(e)}isPageCached(e){return this.pdfViewer.isPageCached(e)}};let y=p;h=new WeakMap,a=new WeakSet,qt=function(e,s=null,n){const f=n[0];let T;if(typeof f=="object"&&f!==null){if(T=this._cachedPageNumber(f),!T){this.pdfDocument.getPageIndex(f).then(l=>{this.cachePageRef(l+1,f),Z(this,a,qt).call(this,e,s,n)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${f}" is not a valid page reference, for dest="${e}".`)});return}}else if(Number.isInteger(f))T=f+1;else{console.error(`PDFLinkService.#goToDestinationHelper: "${f}" is not a valid destination reference, for dest="${e}".`);return}if(!T||T<1||T>this.pagesCount){console.error(`PDFLinkService.#goToDestinationHelper: "${T}" is not a valid page number, for dest="${e}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:s,explicitDest:n,pageNumber:T})),this.pdfViewer.scrollPageIntoView({pageNumber:T,destArray:n,ignoreDestinationZoom:this._ignoreDestinationZoom})},_=new WeakSet,ji=function(e){if(!Array.isArray(e))return!1;const s=e.length;if(s<2)return!1;const n=e[0];if(!(typeof n=="object"&&Number.isInteger(n.num)&&Number.isInteger(n.gen))&&!(Number.isInteger(n)&&n>=0))return!1;const f=e[1];if(!(typeof f=="object"&&typeof f.name=="string"))return!1;let T=!0;switch(f.name){case"XYZ":if(s!==5)return!1;break;case"Fit":case"FitB":return s===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s!==3)return!1;break;case"FitR":if(s!==6)return!1;T=!1;break;default:return!1}for(let l=2;l<s;l++){const I=e[l];if(!(typeof I=="number"||T&&I===null))return!1}return!0},$(y,_),D.PDFLinkService=y;class r{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(e){}get rotation(){return 0}set rotation(e){}get isInPresentationMode(){return!1}async goToDestination(e){}goToPage(e){}addLinkAttributes(e,s,n=!1){w(e,{url:s,enabled:this.externalLinkEnabled})}getDestinationHash(e){return"#"}getAnchorUrl(e){return"#"}setHash(e){}executeNamedAction(e){}executeSetOCGState(e){}cachePageRef(e,s){}isPageVisible(e){return!0}isPageCached(e){return!0}}D.SimpleLinkService=r},(G,D)=>{var S,R,L,W,me;Object.defineProperty(D,"__esModule",{value:!0}),D.animationStarted=D.VERTICAL_PADDING=D.UNKNOWN_SCALE=D.TextLayerMode=D.SpreadMode=D.SidebarView=D.ScrollMode=D.SCROLLBAR_PADDING=D.RenderingStates=D.ProgressBar=D.PresentationModeState=D.OutputScale=D.MIN_SCALE=D.MAX_SCALE=D.MAX_AUTO_SCALE=D.DEFAULT_SCALE_VALUE=D.DEFAULT_SCALE_DELTA=D.DEFAULT_SCALE=D.CursorTool=D.AutoPrintRegExp=void 0,D.apiPageLayoutToViewerModes=z,D.apiPageModeToSidebarView=i,D.approximateFraction=ee,D.backtrackBeforeAllVisibleElements=ge,D.binarySearchFirstItem=H,D.docStyle=void 0,D.getActiveOrFocusedElement=V,D.getPageSizeInches=te,D.getVisibleElements=ye,D.isPortraitOrientation=F,D.isValidRotation=J,D.isValidScrollMode=A,D.isValidSpreadMode=C,D.noContextMenuHandler=Q,D.normalizeWheelEventDelta=Ee,D.normalizeWheelEventDirection=Ce,D.parseQueryString=I,D.removeNullCharacters=le,D.roundToDivide=ae,D.scrollIntoView=T,D.toggleCheckedBtn=u,D.watchScroll=l;const N="auto";D.DEFAULT_SCALE_VALUE=N;const b=1;D.DEFAULT_SCALE=b;const d=1.1;D.DEFAULT_SCALE_DELTA=d;const k=.1;D.MIN_SCALE=k;const w=10;D.MAX_SCALE=w;const y=0;D.UNKNOWN_SCALE=y;const r=1.25;D.MAX_AUTO_SCALE=r;const h=40;D.SCROLLBAR_PADDING=h;const a=5;D.VERTICAL_PADDING=a;const g={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};D.RenderingStates=g;const _={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};D.PresentationModeState=_;const v={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};D.SidebarView=v;const p={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2};D.TextLayerMode=p;const t={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};D.ScrollMode=t;const e={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};D.SpreadMode=e;const s={SELECT:0,HAND:1,ZOOM:2};D.CursorTool=s;const n=/\bprint\s*\(/;D.AutoPrintRegExp=n;class f{constructor(){const q=window.devicePixelRatio||1;this.sx=q,this.sy=q}get scaled(){return this.sx!==1||this.sy!==1}}D.OutputScale=f;function T(B,q,ce=!1){let ne=B.offsetParent;if(!ne){console.error("offsetParent is not set -- cannot scroll");return}let ue=B.offsetTop+B.clientTop,be=B.offsetLeft+B.clientLeft;for(;ne.clientHeight===ne.scrollHeight&&ne.clientWidth===ne.scrollWidth||ce&&(ne.classList.contains("markedContent")||getComputedStyle(ne).overflow==="hidden");)if(ue+=ne.offsetTop,be+=ne.offsetLeft,ne=ne.offsetParent,!ne)return;q&&(q.top!==void 0&&(ue+=q.top),q.left!==void 0&&(be+=q.left,ne.scrollLeft=be)),ne.scrollTop=ue}function l(B,q){const ce=function(be){ue||(ue=window.requestAnimationFrame(function(){ue=null;const xe=B.scrollLeft,Pe=ne.lastX;xe!==Pe&&(ne.right=xe>Pe),ne.lastX=xe;const Re=B.scrollTop,oe=ne.lastY;Re!==oe&&(ne.down=Re>oe),ne.lastY=Re,q(ne)}))},ne={right:!0,down:!0,lastX:B.scrollLeft,lastY:B.scrollTop,_eventHandler:ce};let ue=null;return B.addEventListener("scroll",ce,!0),ne}function I(B){const q=new Map;for(const[ce,ne]of new URLSearchParams(B))q.set(ce.toLowerCase(),ne);return q}const K=/[\x01-\x1F]/g;function le(B,q=!1){return typeof B!="string"?(console.error("The argument must be a string."),B):(q&&(B=B.replaceAll(K," ")),B.replaceAll("\0",""))}function H(B,q,ce=0){let ne=ce,ue=B.length-1;if(ue<0||!q(B[ue]))return B.length;if(q(B[ne]))return ne;for(;ne<ue;){const be=ne+ue>>1,ve=B[be];q(ve)?ue=be:ne=be+1}return ne}function ee(B){if(Math.floor(B)===B)return[B,1];const q=1/B,ce=8;if(q>ce)return[1,ce];if(Math.floor(q)===q)return[1,q];const ne=B>1?q:B;let ue=0,be=1,ve=1,xe=1;for(;;){const Re=ue+ve,oe=be+xe;if(oe>ce)break;ne<=Re/oe?(ve=Re,xe=oe):(ue=Re,be=oe)}let Pe;return ne-ue/be<ve/xe-ne?Pe=ne===B?[ue,be]:[be,ue]:Pe=ne===B?[ve,xe]:[xe,ve],Pe}function ae(B,q){const ce=B%q;return ce===0?B:Math.round(B-ce+q)}function te({view:B,userUnit:q,rotate:ce}){const[ne,ue,be,ve]=B,xe=ce%180!==0,Pe=(be-ne)/72*q,Re=(ve-ue)/72*q;return{width:xe?Re:Pe,height:xe?Pe:Re}}function ge(B,q,ce){if(B<2)return B;let ne=q[B].div,ue=ne.offsetTop+ne.clientTop;ue>=ce&&(ne=q[B-1].div,ue=ne.offsetTop+ne.clientTop);for(let be=B-2;be>=0&&(ne=q[be].div,!(ne.offsetTop+ne.clientTop+ne.clientHeight<=ue));--be)B=be;return B}function ye({scrollEl:B,views:q,sortByVisibility:ce=!1,horizontal:ne=!1,rtl:ue=!1}){const be=B.scrollTop,ve=be+B.clientHeight,xe=B.scrollLeft,Pe=xe+B.clientWidth;function Re(de){const re=de.div;return re.offsetTop+re.clientTop+re.clientHeight>be}function oe(de){const re=de.div,he=re.offsetLeft+re.clientLeft,fe=he+re.clientWidth;return ue?he<Pe:fe>xe}const we=[],Me=new Set,Oe=q.length;let E=H(q,ne?oe:Re);E>0&&E<Oe&&!ne&&(E=ge(E,q,be));let m=ne?Pe:-1;for(let de=E;de<Oe;de++){const re=q[de],he=re.div,fe=he.offsetLeft+he.clientLeft,Ae=he.offsetTop+he.clientTop,Te=he.clientWidth,Se=he.clientHeight,Fe=fe+Te,Ie=Ae+Se;if(m===-1)Ie>=ve&&(m=Ie);else if((ne?fe:Ae)>m)break;if(Ie<=be||Ae>=ve||Fe<=xe||fe>=Pe)continue;const ke=Math.max(0,be-Ae)+Math.max(0,Ie-ve),Le=Math.max(0,xe-fe)+Math.max(0,Fe-Pe),Ne=(Se-ke)/Se,Ve=(Te-Le)/Te,De=Ne*Ve*100|0;we.push({id:re.id,x:fe,y:Ae,view:re,percent:De,widthPercent:Ve*100|0}),Me.add(re.id)}const M=we[0],ie=we.at(-1);return ce&&we.sort(function(de,re){const he=de.percent-re.percent;return Math.abs(he)>.001?-he:de.id-re.id}),{first:M,last:ie,views:we,ids:Me}}function Q(B){B.preventDefault()}function Ce(B){let q=Math.hypot(B.deltaX,B.deltaY);const ce=Math.atan2(B.deltaY,B.deltaX);return-.25*Math.PI<ce&&ce<.75*Math.PI&&(q=-q),q}function Ee(B){const q=B.deltaMode;let ce=Ce(B);const ne=30,ue=30;return q===WheelEvent.DOM_DELTA_PIXEL?ce/=ne*ue:q===WheelEvent.DOM_DELTA_LINE&&(ce/=ue),ce}function J(B){return Number.isInteger(B)&&B%90===0}function A(B){return Number.isInteger(B)&&Object.values(t).includes(B)&&B!==t.UNKNOWN}function C(B){return Number.isInteger(B)&&Object.values(e).includes(B)&&B!==e.UNKNOWN}function F(B){return B.width<=B.height}const Y=new Promise(function(B){window.requestAnimationFrame(B)});D.animationStarted=Y;const j=document.documentElement.style;D.docStyle=j;function se(B,q,ce){return Math.min(Math.max(B,q),ce)}class U{constructor(q){$(this,S,null);$(this,R,null);$(this,L,0);$(this,W,null);$(this,me,!0);_e(this,S,q.classList),_e(this,W,q.style)}get percent(){return c(this,L)}set percent(q){if(_e(this,L,se(q,0,100)),isNaN(q)){c(this,S).add("indeterminate");return}c(this,S).remove("indeterminate"),c(this,W).setProperty("--progressBar-percent",`${c(this,L)}%`)}setWidth(q){if(!q)return;const ne=q.parentNode.offsetWidth-q.offsetWidth;ne>0&&c(this,W).setProperty("--progressBar-end-offset",`${ne}px`)}setDisableAutoFetch(q=5e3){isNaN(c(this,L))||(c(this,R)&&clearTimeout(c(this,R)),this.show(),_e(this,R,setTimeout(()=>{_e(this,R,null),this.hide()},q)))}hide(){c(this,me)&&(_e(this,me,!1),c(this,S).add("hidden"))}show(){c(this,me)||(_e(this,me,!0),c(this,S).remove("hidden"))}}S=new WeakMap,R=new WeakMap,L=new WeakMap,W=new WeakMap,me=new WeakMap,D.ProgressBar=U;function V(){let B=document,q=B.activeElement||B.querySelector(":focus");for(;q!=null&&q.shadowRoot;)B=q.shadowRoot,q=B.activeElement||B.querySelector(":focus");return q}function z(B){let q=t.VERTICAL,ce=e.NONE;switch(B){case"SinglePage":q=t.PAGE;break;case"OneColumn":break;case"TwoPageLeft":q=t.PAGE;case"TwoColumnLeft":ce=e.ODD;break;case"TwoPageRight":q=t.PAGE;case"TwoColumnRight":ce=e.EVEN;break}return{scrollMode:q,spreadMode:ce}}function i(B){switch(B){case"UseNone":return v.NONE;case"UseThumbs":return v.THUMBS;case"UseOutlines":return v.OUTLINE;case"UseAttachments":return v.ATTACHMENTS;case"UseOC":return v.LAYERS}return v.NONE}function u(B,q,ce=null){B.classList.toggle("toggled",q),B.setAttribute("aria-checked",q),ce==null||ce.classList.toggle("hidden",!q)}},(G,D,N)=>{var y,r,h,Kt;Object.defineProperty(D,"__esModule",{value:!0}),D.AnnotationLayerBuilder=void 0;var b=N(4),d=N(5),k=N(2);class w{constructor({pageDiv:_,pdfPage:v,linkService:p,downloadManager:t,annotationStorage:e=null,imageResourcesPath:s="",renderForms:n=!0,l10n:f=d.NullL10n,enableScripting:T=!1,hasJSActionsPromise:l=null,fieldObjectsPromise:I=null,annotationCanvasMap:K=null,accessibilityManager:le=null}){$(this,h);$(this,y,0);$(this,r,null);this.pageDiv=_,this.pdfPage=v,this.linkService=p,this.downloadManager=t,this.imageResourcesPath=s,this.renderForms=n,this.l10n=f,this.annotationStorage=e,this.enableScripting=T,this._hasJSActionsPromise=l||Promise.resolve(!1),this._fieldObjectsPromise=I||Promise.resolve(null),this._annotationCanvasMap=K,this._accessibilityManager=le,this.div=null,this._cancelled=!1,this._eventBus=p.eventBus}async render(_,v="display"){var s;if(this.div){if(this._cancelled||c(this,y)===0)return;b.AnnotationLayer.update({viewport:_.clone({dontFlip:!0}),div:this.div,annotationCanvasMap:this._annotationCanvasMap});return}const[p,t,e]=await Promise.all([this.pdfPage.getAnnotations({intent:v}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(!this._cancelled){if(_e(this,y,p.length),this.div=document.createElement("div"),this.div.className="annotationLayer",this.pageDiv.append(this.div),c(this,y)===0){this.hide();return}b.AnnotationLayer.render({viewport:_.clone({dontFlip:!0}),div:this.div,annotations:p,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:t,fieldObjects:e,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager}),this.l10n.translate(this.div),this.linkService.isInPresentationMode&&Z(this,h,Kt).call(this,k.PresentationModeState.FULLSCREEN),c(this,r)||(_e(this,r,n=>{Z(this,h,Kt).call(this,n.state)}),(s=this._eventBus)==null||s._on("presentationmodechanged",c(this,r)))}}cancel(){var _;this._cancelled=!0,c(this,r)&&((_=this._eventBus)==null||_._off("presentationmodechanged",c(this,r)),_e(this,r,null))}hide(){this.div&&(this.div.hidden=!0)}}y=new WeakMap,r=new WeakMap,h=new WeakSet,Kt=function(_){if(!this.div)return;let v=!1;switch(_){case k.PresentationModeState.FULLSCREEN:v=!0;break;case k.PresentationModeState.NORMAL:break;default:return}for(const p of this.div.childNodes)p.hasAttribute("data-internal-link")||(p.inert=v)},D.AnnotationLayerBuilder=w},G=>{let D;typeof window<"u"&&window["pdfjs-dist/build/pdf"]?D=window["pdfjs-dist/build/pdf"]:D=pdfExports,G.exports=D},(G,D)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.NullL10n=void 0,D.fixupLangCode=k,D.getL10nFallback=b;const N={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image"};N.print_progress_percent="{{progress}}%";function b(r,h){switch(r){case"find_match_count":r=`find_match_count[${h.total===1?"one":"other"}]`;break;case"find_match_count_limit":r=`find_match_count_limit[${h.limit===1?"one":"other"}]`;break}return N[r]||""}const d={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function k(r){return d[r==null?void 0:r.toLowerCase()]||r}function w(r,h){return h?r.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(a,g)=>g in h?h[g]:"{{"+g+"}}"):r}const y={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(r,h=null,a=b(r,h)){return w(a,h)},async translate(r){}};D.NullL10n=y},(G,D,N)=>{var w;Object.defineProperty(D,"__esModule",{value:!0}),D.DownloadManager=void 0;var b=N(4);function d(y,r){const h=document.createElement("a");if(!h.click)throw new Error('DownloadManager: "a.click()" is not supported.');h.href=y,h.target="_parent","download"in h&&(h.download=r),(document.body||document.documentElement).append(h),h.click(),h.remove()}class k{constructor(){$(this,w,new WeakMap)}downloadUrl(r,h,a){if(!(0,b.createValidAbsoluteUrl)(r,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${r}`);return}d(r+"#pdfjs.action=download",h)}downloadData(r,h,a){const g=URL.createObjectURL(new Blob([r],{type:a}));d(g,h)}openOrDownloadData(r,h,a){const _=(0,b.isPdfFile)(a)?"application/pdf":"";return this.downloadData(h,a,_),!1}download(r,h,a,g){const _=URL.createObjectURL(r);d(_,a)}}w=new WeakMap,D.DownloadManager=k},(G,D)=>{var w;Object.defineProperty(D,"__esModule",{value:!0}),D.WaitOnType=D.EventBus=D.AutomationEventBus=void 0,D.waitOnEventOrTimeout=b;const N={EVENT:"event",TIMEOUT:"timeout"};D.WaitOnType=N;function b({target:y,name:r,delay:h=0}){return new Promise(function(a,g){if(typeof y!="object"||!(r&&typeof r=="string")||!(Number.isInteger(h)&&h>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function _(e){y instanceof d?y._off(r,v):y.removeEventListener(r,v),t&&clearTimeout(t),a(e)}const v=_.bind(null,N.EVENT);y instanceof d?y._on(r,v):y.addEventListener(r,v);const p=_.bind(null,N.TIMEOUT),t=setTimeout(p,h)})}class d{constructor(){$(this,w,Object.create(null))}on(r,h,a=null){this._on(r,h,{external:!0,once:a==null?void 0:a.once})}off(r,h,a=null){this._off(r,h,{external:!0,once:a==null?void 0:a.once})}dispatch(r,h){const a=c(this,w)[r];if(!a||a.length===0)return;let g;for(const{listener:_,external:v,once:p}of a.slice(0)){if(p&&this._off(r,_),v){(g||(g=[])).push(_);continue}_(h)}if(g){for(const _ of g)_(h);g=null}}_on(r,h,a=null){var _;((_=c(this,w))[r]||(_[r]=[])).push({listener:h,external:(a==null?void 0:a.external)===!0,once:(a==null?void 0:a.once)===!0})}_off(r,h,a=null){const g=c(this,w)[r];if(g){for(let _=0,v=g.length;_<v;_++)if(g[_].listener===h){g.splice(_,1);return}}}}w=new WeakMap,D.EventBus=d;class k extends d{dispatch(r,h){throw new Error("Not implemented: AutomationEventBus.dispatch")}}D.AutomationEventBus=k},(G,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.GenericL10n=void 0,N(9);var b=N(5);const d=document.webL10n;class k{constructor(y){this._lang=y,this._ready=new Promise((r,h)=>{d.setLanguage((0,b.fixupLangCode)(y),()=>{r(d)})})}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(y,r=null,h=(0,b.getL10nFallback)(y,r)){return(await this._ready).get(y,r,h)}async translate(y){return(await this._ready).translate(y)}}D.GenericL10n=k},()=>{document.webL10n=function(G,D,N){var b={},d="",k="textContent",w="",y={},r="loading",h=!0;function a(){return D.querySelectorAll('link[type="application/l10n"]')}function g(){var H=D.querySelector('script[type="application/l10n"]');return H?JSON.parse(H.innerHTML):null}function _(H){return H?H.querySelectorAll("*[data-l10n-id]"):[]}function v(H){if(!H)return{};var ee=H.getAttribute("data-l10n-id"),ae=H.getAttribute("data-l10n-args"),te={};if(ae)try{te=JSON.parse(ae)}catch{console.warn("could not parse arguments for #"+ee)}return{id:ee,args:te}}function p(H,ee,ae){ee=ee||function(ye){},ae=ae||function(){};var te=new XMLHttpRequest;te.open("GET",H,h),te.overrideMimeType&&te.overrideMimeType("text/plain; charset=utf-8"),te.onreadystatechange=function(){te.readyState==4&&(te.status==200||te.status===0?ee(te.responseText):ae())},te.onerror=ae,te.ontimeout=ae;try{te.send(null)}catch{ae()}}function t(H,ee,ae,te){var ge=H.replace(/[^\/]*$/,"")||"./";function ye(Ce){return Ce.lastIndexOf("\\")<0?Ce:Ce.replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function Q(Ce,Ee){var J={},A=/^\s*|\s*$/,C=/^\s*#|^\s*$/,F=/^\s*\[(.*)\]\s*$/,Y=/^\s*@import\s+url\((.*)\)\s*$/i,j=/^([^=\s]*)\s*=\s*(.+)$/;function se(V,z,i){var u=V.replace(A,"").split(/[\r\n]+/),S="*",R=ee.split("-",1)[0],L=!1,W="";function me(){for(;;){if(!u.length){i();return}var B=u.shift();if(!C.test(B)){if(z){if(W=F.exec(B),W){S=W[1].toLowerCase(),L=S!=="*"&&S!==ee&&S!==R;continue}else if(L)continue;if(W=Y.exec(B),W){U(ge+W[1],me);return}}var q=B.match(j);q&&q.length==3&&(J[q[1]]=ye(q[2]))}}}me()}function U(V,z){p(V,function(i){se(i,!1,z)},function(){console.warn(V+" not found."),z()})}se(Ce,!0,function(){Ee(J)})}p(H,function(Ce){d+=Ce,Q(Ce,function(Ee){for(var J in Ee){var A,C,F=J.lastIndexOf(".");F>0?(A=J.substring(0,F),C=J.substring(F+1)):(A=J,C=k),b[A]||(b[A]={}),b[A][C]=Ee[J]}ae&&ae()})},te)}function e(H,ee){H&&(H=H.toLowerCase()),ee=ee||function(){},s(),w=H;var ae=a(),te=ae.length;if(te===0){var ge=g();if(ge&&ge.locales&&ge.default_locale){if(console.log("using the embedded JSON directory, early way out"),b=ge.locales[H],!b){var ye=ge.default_locale.toLowerCase();for(var Q in ge.locales)if(Q=Q.toLowerCase(),Q===H){b=ge.locales[H];break}else Q===ye&&(b=ge.locales[ye])}ee()}else console.log("no resource to load, early way out");r="complete";return}var Ce=null,Ee=0;Ce=function(){Ee++,Ee>=te&&(ee(),r="complete")};function J(F){var Y=F.href;this.load=function(j,se){t(Y,j,se,function(){console.warn(Y+" not found."),console.warn('"'+j+'" resource not found'),w="",se()})}}for(var A=0;A<te;A++){var C=new J(ae[A]);C.load(H,Ce)}}function s(){b={},d="",w=""}function n(H){var ee={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function ae(Q,Ce){return Ce.indexOf(Q)!==-1}function te(Q,Ce,Ee){return Ce<=Q&&Q<=Ee}var ge={0:function(Q){return"other"},1:function(Q){return te(Q%100,3,10)?"few":Q===0?"zero":te(Q%100,11,99)?"many":Q==2?"two":Q==1?"one":"other"},2:function(Q){return Q!==0&&Q%10===0?"many":Q==2?"two":Q==1?"one":"other"},3:function(Q){return Q==1?"one":"other"},4:function(Q){return te(Q,0,1)?"one":"other"},5:function(Q){return te(Q,0,2)&&Q!=2?"one":"other"},6:function(Q){return Q===0?"zero":Q%10==1&&Q%100!=11?"one":"other"},7:function(Q){return Q==2?"two":Q==1?"one":"other"},8:function(Q){return te(Q,3,6)?"few":te(Q,7,10)?"many":Q==2?"two":Q==1?"one":"other"},9:function(Q){return Q===0||Q!=1&&te(Q%100,1,19)?"few":Q==1?"one":"other"},10:function(Q){return te(Q%10,2,9)&&!te(Q%100,11,19)?"few":Q%10==1&&!te(Q%100,11,19)?"one":"other"},11:function(Q){return te(Q%10,2,4)&&!te(Q%100,12,14)?"few":Q%10===0||te(Q%10,5,9)||te(Q%100,11,14)?"many":Q%10==1&&Q%100!=11?"one":"other"},12:function(Q){return te(Q,2,4)?"few":Q==1?"one":"other"},13:function(Q){return te(Q%10,2,4)&&!te(Q%100,12,14)?"few":Q!=1&&te(Q%10,0,1)||te(Q%10,5,9)||te(Q%100,12,14)?"many":Q==1?"one":"other"},14:function(Q){return te(Q%100,3,4)?"few":Q%100==2?"two":Q%100==1?"one":"other"},15:function(Q){return Q===0||te(Q%100,2,10)?"few":te(Q%100,11,19)?"many":Q==1?"one":"other"},16:function(Q){return Q%10==1&&Q!=11?"one":"other"},17:function(Q){return Q==3?"few":Q===0?"zero":Q==6?"many":Q==2?"two":Q==1?"one":"other"},18:function(Q){return Q===0?"zero":te(Q,0,2)&&Q!==0&&Q!=2?"one":"other"},19:function(Q){return te(Q,2,10)?"few":te(Q,0,1)?"one":"other"},20:function(Q){return(te(Q%10,3,4)||Q%10==9)&&!(te(Q%100,10,19)||te(Q%100,70,79)||te(Q%100,90,99))?"few":Q%1e6===0&&Q!==0?"many":Q%10==2&&!ae(Q%100,[12,72,92])?"two":Q%10==1&&!ae(Q%100,[11,71,91])?"one":"other"},21:function(Q){return Q===0?"zero":Q==1?"one":"other"},22:function(Q){return te(Q,0,1)||te(Q,11,99)?"one":"other"},23:function(Q){return te(Q%10,1,2)||Q%20===0?"one":"other"},24:function(Q){return te(Q,3,10)||te(Q,13,19)?"few":ae(Q,[2,12])?"two":ae(Q,[1,11])?"one":"other"}},ye=ee[H.replace(/-.*$/,"")];return ye in ge?ge[ye]:(console.warn("plural form unknown for ["+H+"]"),function(){return"other"})}y.plural=function(H,ee,ae,te){var ge=parseFloat(ee);if(isNaN(ge)||te!=k)return H;y._pluralRules||(y._pluralRules=n(w));var ye="["+y._pluralRules(ge)+"]";return ge===0&&ae+"[zero]"in b?H=b[ae+"[zero]"][te]:ge==1&&ae+"[one]"in b?H=b[ae+"[one]"][te]:ge==2&&ae+"[two]"in b?H=b[ae+"[two]"][te]:ae+ye in b?H=b[ae+ye][te]:ae+"[other]"in b&&(H=b[ae+"[other]"][te]),H};function f(H,ee,ae){var te=b[H];if(!te){if(console.warn("#"+H+" is undefined."),!ae)return null;te=ae}var ge={};for(var ye in te){var Q=te[ye];Q=T(Q,ee,H,ye),Q=l(Q,ee,H),ge[ye]=Q}return ge}function T(H,ee,ae,te){var ge=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,ye=ge.exec(H);if(!ye||!ye.length)return H;var Q=ye[1],Ce=ye[2],Ee;if(ee&&Ce in ee?Ee=ee[Ce]:Ce in b&&(Ee=b[Ce]),Q in y){var J=y[Q];H=J(H,Ee,ae,te)}return H}function l(H,ee,ae){var te=/\{\{\s*(.+?)\s*\}\}/g;return H.replace(te,function(ge,ye){return ee&&ye in ee?ee[ye]:ye in b?b[ye]:(console.log("argument {{"+ye+"}} for #"+ae+" is undefined."),ge)})}function I(H){var ee=v(H);if(ee.id){var ae=f(ee.id,ee.args);if(!ae){console.warn("#"+ee.id+" is undefined.");return}if(ae[k]){if(K(H)===0)H[k]=ae[k];else{for(var te=H.childNodes,ge=!1,ye=0,Q=te.length;ye<Q;ye++)te[ye].nodeType===3&&/\S/.test(te[ye].nodeValue)&&(ge?te[ye].nodeValue="":(te[ye].nodeValue=ae[k],ge=!0));if(!ge){var Ce=D.createTextNode(ae[k]);H.prepend(Ce)}}delete ae[k]}for(var Ee in ae)H[Ee]=ae[Ee]}}function K(H){if(H.children)return H.children.length;if(typeof H.childElementCount<"u")return H.childElementCount;for(var ee=0,ae=0;ae<H.childNodes.length;ae++)ee+=H.nodeType===1?1:0;return ee}function le(H){H=H||D.documentElement;for(var ee=_(H),ae=ee.length,te=0;te<ae;te++)I(ee[te]);I(H)}return{get:function(H,ee,ae){var te=H.lastIndexOf("."),ge=k;te>0&&(ge=H.substring(te+1),H=H.substring(0,te));var ye;ae&&(ye={},ye[ge]=ae);var Q=f(H,ee,ye);return Q&&ge in Q?Q[ge]:"{{"+H+"}}"},getData:function(){return b},getText:function(){return d},getLanguage:function(){return w},setLanguage:function(H,ee){e(H,function(){ee&&ee()})},getDirection:function(){var H=["ar","he","fa","ps","ur"],ee=w.split("-",1)[0];return H.indexOf(ee)>=0?"rtl":"ltr"},translate:le,getReadyState:function(){return r},ready:function(H){if(H)r=="complete"||r=="interactive"?G.setTimeout(function(){H()}):D.addEventListener&&D.addEventListener("localized",function ee(){D.removeEventListener("localized",ee),H()});else return}}}(window,document)},(G,D,N)=>{var ee,ae,te,ge,Hi,Q,Yt,Ee,Zt,A,Wi,F,$i,j,Gi,U,Qt,z,Xi,u,qi,R,St,W,ut,B,ot,ce,Ki,ue,Jt,ve,ei,Pe,Et,oe,Yi,Me,ti,E,ii,M,dt;Object.defineProperty(D,"__esModule",{value:!0}),D.PDFFindController=D.FindState=void 0;var b=N(2),d=N(11),k=N(4);const w={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};D.FindState=w;const y=250,r=-50,h=-400,a={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4"},g=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]);let _;const v=/\p{M}+/gu,p=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,t=/([^\p{M}])\p{M}*$/u,e=/^\p{M}*([^\p{M}])/u,s=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,n=new Map,f="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",T=new Map;let l=null,I=null;function K(de){const re=[];let he;for(;(he=s.exec(de))!==null;){let{index:De}=he;for(const Ue of he[0]){let Be=n.get(Ue);Be||(Be=Ue.normalize("NFD").length,n.set(Ue,Be)),re.push([Be,De++])}}let fe;if(re.length===0&&l)fe=l;else if(re.length>0&&I)fe=I;else{const De=Object.keys(a).join(""),Ue=(0,d.getNormalizeWithNFKC)(),He=`([${De}])|([${Ue}])|((?:゙|゚)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[぀-ヿ])\\n)|(\\n)`;re.length===0?fe=l=new RegExp(He+"|(\\u0000)","gum"):fe=I=new RegExp(He+`|(${f})`,"gum")}const Ae=[];for(;(he=v.exec(de))!==null;)Ae.push([he[0].length,he.index]);let Te=de.normalize("NFD");const Se=[[0,0]];let Fe=0,Ie=0,ke=0,Le=0,Ne=0,Ve=!1;return Te=Te.replace(fe,(De,Ue,Be,ze,He,Ge,Ye,it,pt,$e)=>{var gi,mi,_i;if($e-=Le,Ue){const We=a[Ue],Xe=We.length;for(let qe=1;qe<Xe;qe++)Se.push([$e-ke+qe,ke-qe]);return ke-=Xe-1,We}if(Be){let We=T.get(Be);We||(We=Be.normalize("NFKC"),T.set(Be,We));const Xe=We.length;for(let qe=1;qe<Xe;qe++)Se.push([$e-ke+qe,ke-qe]);return ke-=Xe-1,We}if(ze)return Ve=!0,$e+Ne===((gi=Ae[Fe])==null?void 0:gi[1])?++Fe:(Se.push([$e-1-ke+1,ke-1]),ke-=1,Le+=1),Se.push([$e-ke+1,ke]),Le+=1,Ne+=1,ze.charAt(0);if(He){const We=He.endsWith(`
`),Xe=We?He.length-2:He.length;Ve=!0;let qe=Xe;$e+Ne===((mi=Ae[Fe])==null?void 0:mi[1])&&(qe-=Ae[Fe][0],++Fe);for(let gt=1;gt<=qe;gt++)Se.push([$e-1-ke+gt,ke-gt]);return ke-=qe,Le+=qe,We?($e+=Xe-1,Se.push([$e-ke+1,1+ke]),ke+=1,Le+=1,Ne+=1,He.slice(0,Xe)):He}if(Ge){const We=Ge.length-2;return Se.push([$e-ke+We,1+ke]),ke+=1,Le+=1,Ne+=1,Ge.slice(0,-2)}if(Ye){const We=Ye.length-1;return Se.push([$e-ke+We,ke]),Le+=1,Ne+=1,Ye.slice(0,-1)}if(it)return Se.push([$e-ke+1,ke-1]),ke-=1,Le+=1,Ne+=1," ";if($e+Ne===((_i=re[Ie])==null?void 0:_i[1])){const We=re[Ie][0]-1;++Ie;for(let Xe=1;Xe<=We;Xe++)Se.push([$e-(ke-Xe),ke-Xe]);ke-=We,Le+=We}return pt}),Se.push([Te.length,ke]),[Te,Se,Ve]}function le(de,re,he){if(!de)return[re,he];const fe=re,Ae=re+he-1;let Te=(0,b.binarySearchFirstItem)(de,Le=>Le[0]>=fe);de[Te][0]>fe&&--Te;let Se=(0,b.binarySearchFirstItem)(de,Le=>Le[0]>=Ae,Te);de[Se][0]>Ae&&--Se;const Fe=fe+de[Te][1],ke=Ae+de[Se][1]+1-Fe;return[Fe,ke]}class H{constructor({linkService:re,eventBus:he,updateMatchesCountOnProgress:fe=!0}){$(this,ge);$(this,Q);$(this,Ee);$(this,A);$(this,F);$(this,j);$(this,U);$(this,z);$(this,u);$(this,R);$(this,W);$(this,B);$(this,ce);$(this,ue);$(this,ve);$(this,Pe);$(this,oe);$(this,Me);$(this,E);$(this,M);$(this,ee,null);$(this,ae,!0);$(this,te,0);this._linkService=re,this._eventBus=he,_e(this,ae,fe),Z(this,Q,Yt).call(this),he._on("find",Z(this,ge,Hi).bind(this)),he._on("findbarclose",Z(this,oe,Yi).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return c(this,ee)}setDocument(re){this._pdfDocument&&Z(this,Q,Yt).call(this),re&&(this._pdfDocument=re,this._firstPageCapability.resolve())}scrollMatchIntoView({element:re=null,selectedLeft:he=0,pageIndex:fe=-1,matchIndex:Ae=-1}){if(!this._scrollMatches||!re)return;if(Ae===-1||Ae!==this._selected.matchIdx)return;if(fe===-1||fe!==this._selected.pageIdx)return;this._scrollMatches=!1;const Te={top:r,left:he+h};(0,b.scrollIntoView)(re,Te,!0)}}ee=new WeakMap,ae=new WeakMap,te=new WeakMap,ge=new WeakSet,Hi=function(re){if(!re)return;re.phraseSearch===!1&&(console.error("The `phraseSearch`-parameter was removed, please provide an Array of strings in the `query`-parameter instead."),typeof re.query=="string"&&(re.query=re.query.match(/\S+/g)));const he=this._pdfDocument,{type:fe}=re;(c(this,ee)===null||Z(this,A,Wi).call(this,re))&&(this._dirtyMatch=!0),_e(this,ee,re),fe!=="highlightallchange"&&Z(this,M,dt).call(this,w.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||he&&this._pdfDocument!==he)return;Z(this,u,qi).call(this);const Ae=!this._highlightMatches,Te=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),fe?this._dirtyMatch?Z(this,B,ot).call(this):fe==="again"?(Z(this,B,ot).call(this),Ae&&c(this,ee).highlightAll&&Z(this,W,ut).call(this)):fe==="highlightallchange"?(Te?Z(this,B,ot).call(this):this._highlightMatches=!0,Z(this,W,ut).call(this)):Z(this,B,ot).call(this):this._findTimeout=setTimeout(()=>{Z(this,B,ot).call(this),this._findTimeout=null},y)})},Q=new WeakSet,Yt=function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],_e(this,te,0),_e(this,ee,null),this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=new k.PromiseCapability},Ee=new WeakSet,Zt=function(){const{query:re}=c(this,ee);return typeof re=="string"?(re!==this._rawQuery&&(this._rawQuery=re,[this._normalizedQuery]=K(re)),this._normalizedQuery):(re||[]).filter(he=>!!he).map(he=>K(he)[0])},A=new WeakSet,Wi=function(re){const he=re.query,fe=c(this,ee).query,Ae=typeof he;if(Ae!==typeof fe)return!0;if(Ae==="string"){if(he!==fe)return!0}else if(JSON.stringify(he)!==JSON.stringify(fe))return!0;switch(re.type){case"again":const Se=this._selected.pageIdx+1,Fe=this._linkService;return Se>=1&&Se<=Fe.pagesCount&&Se!==Fe.page&&!Fe.isPageVisible(Se);case"highlightallchange":return!1}return!0},F=new WeakSet,$i=function(re,he,fe){let Ae=re.slice(0,he).match(t);if(Ae){const Te=re.charCodeAt(he),Se=Ae[1].charCodeAt(0);if((0,d.getCharacterType)(Te)===(0,d.getCharacterType)(Se))return!1}if(Ae=re.slice(he+fe).match(e),Ae){const Te=re.charCodeAt(he+fe-1),Se=Ae[1].charCodeAt(0);if((0,d.getCharacterType)(Te)===(0,d.getCharacterType)(Se))return!1}return!0},j=new WeakSet,Gi=function(re,he,fe,Ae){const Te=this._pageMatches[fe]=[],Se=this._pageMatchesLength[fe]=[];if(!re)return;const Fe=this._pageDiffs[fe];let Ie;for(;(Ie=re.exec(Ae))!==null;){if(he&&!Z(this,F,$i).call(this,Ae,Ie.index,Ie[0].length))continue;const[ke,Le]=le(Fe,Ie.index,Ie[0].length);Le&&(Te.push(ke),Se.push(Le))}},U=new WeakSet,Qt=function(re,he){const{matchDiacritics:fe}=c(this,ee);let Ae=!1;re=re.replaceAll(p,(Se,Fe,Ie,ke,Le,Ne)=>Fe?`[ ]*\\${Fe}[ ]*`:Ie?`[ ]*${Ie}[ ]*`:ke?"[ ]+":fe?Le||Ne:Le?g.has(Le.charCodeAt(0))?Le:"":he?(Ae=!0,`${Ne}\\p{M}*`):Ne);const Te="[ ]*";return re.endsWith(Te)&&(re=re.slice(0,re.length-Te.length)),fe&&he&&(_||(_=String.fromCharCode(...g)),Ae=!0,re=`${re}(?=[${_}]|[^\\p{M}]|$)`),[Ae,re]},z=new WeakSet,Xi=function(re){let he=c(this,Ee,Zt);if(he.length===0)return;const{caseSensitive:fe,entireWord:Ae}=c(this,ee),Te=this._pageContents[re],Se=this._hasDiacritics[re];let Fe=!1;typeof he=="string"?[Fe,he]=Z(this,U,Qt).call(this,he,Se):he=he.sort().reverse().map(Le=>{const[Ne,Ve]=Z(this,U,Qt).call(this,Le,Se);return Fe||(Fe=Ne),`(${Ve})`}).join("|");const Ie=`g${Fe?"u":""}${fe?"":"i"}`;he=he?new RegExp(he,Ie):null,Z(this,j,Gi).call(this,he,Ae,re,Te),c(this,ee).highlightAll&&Z(this,R,St).call(this,re),this._resumePageIdx===re&&(this._resumePageIdx=null,Z(this,ue,Jt).call(this));const ke=this._pageMatches[re].length;this._matchesCountTotal+=ke,c(this,ae)?ke>0&&Z(this,E,ii).call(this):++lt(this,te)._===this._linkService.pagesCount&&Z(this,E,ii).call(this)},u=new WeakSet,qi=function(){if(this._extractTextPromises.length>0)return;let re=Promise.resolve();const he={disableNormalization:!0};for(let fe=0,Ae=this._linkService.pagesCount;fe<Ae;fe++){const Te=new k.PromiseCapability;this._extractTextPromises[fe]=Te.promise,re=re.then(()=>this._pdfDocument.getPage(fe+1).then(Se=>Se.getTextContent(he)).then(Se=>{const Fe=[];for(const Ie of Se.items)Fe.push(Ie.str),Ie.hasEOL&&Fe.push(`
`);[this._pageContents[fe],this._pageDiffs[fe],this._hasDiacritics[fe]]=K(Fe.join("")),Te.resolve()},Se=>{console.error(`Unable to get text content for page ${fe+1}`,Se),this._pageContents[fe]="",this._pageDiffs[fe]=null,this._hasDiacritics[fe]=!1,Te.resolve()}))}},R=new WeakSet,St=function(re){this._scrollMatches&&this._selected.pageIdx===re&&(this._linkService.page=re+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:re})},W=new WeakSet,ut=function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})},B=new WeakSet,ot=function(){const re=c(this,ee).findPrevious,he=this._linkService.page-1,fe=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=he,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,_e(this,te,0),this._matchesCountTotal=0,Z(this,W,ut).call(this);for(let Se=0;Se<fe;Se++)this._pendingFindMatches.has(Se)||(this._pendingFindMatches.add(Se),this._extractTextPromises[Se].then(()=>{this._pendingFindMatches.delete(Se),Z(this,z,Xi).call(this,Se)}))}if(c(this,Ee,Zt).length===0){Z(this,M,dt).call(this,w.FOUND);return}if(this._resumePageIdx)return;const Te=this._offset;if(this._pagesToSearch=fe,Te.matchIdx!==null){const Se=this._pageMatches[Te.pageIdx].length;if(!re&&Te.matchIdx+1<Se||re&&Te.matchIdx>0){Te.matchIdx=re?Te.matchIdx-1:Te.matchIdx+1,Z(this,Pe,Et).call(this,!0);return}Z(this,ve,ei).call(this,re)}Z(this,ue,Jt).call(this)},ce=new WeakSet,Ki=function(re){const he=this._offset,fe=re.length,Ae=c(this,ee).findPrevious;return fe?(he.matchIdx=Ae?fe-1:0,Z(this,Pe,Et).call(this,!0),!0):(Z(this,ve,ei).call(this,Ae),he.wrapped&&(he.matchIdx=null,this._pagesToSearch<0)?(Z(this,Pe,Et).call(this,!1),!0):!1)},ue=new WeakSet,Jt=function(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let re=null;do{const he=this._offset.pageIdx;if(re=this._pageMatches[he],!re){this._resumePageIdx=he;break}}while(!Z(this,ce,Ki).call(this,re))},ve=new WeakSet,ei=function(re){const he=this._offset,fe=this._linkService.pagesCount;he.pageIdx=re?he.pageIdx-1:he.pageIdx+1,he.matchIdx=null,this._pagesToSearch--,(he.pageIdx>=fe||he.pageIdx<0)&&(he.pageIdx=re?fe-1:0,he.wrapped=!0)},Pe=new WeakSet,Et=function(re=!1){let he=w.NOT_FOUND;const fe=this._offset.wrapped;if(this._offset.wrapped=!1,re){const Ae=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,he=fe?w.WRAPPED:w.FOUND,Ae!==-1&&Ae!==this._selected.pageIdx&&Z(this,R,St).call(this,Ae)}Z(this,M,dt).call(this,he,c(this,ee).findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,Z(this,R,St).call(this,this._selected.pageIdx))},oe=new WeakSet,Yi=function(re){const he=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||he&&this._pdfDocument!==he||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),Z(this,M,dt).call(this,w.FOUND),this._highlightMatches=!1,Z(this,W,ut).call(this))})},Me=new WeakSet,ti=function(){var Te;const{pageIdx:re,matchIdx:he}=this._selected;let fe=0,Ae=this._matchesCountTotal;if(he!==-1){for(let Se=0;Se<re;Se++)fe+=((Te=this._pageMatches[Se])==null?void 0:Te.length)||0;fe+=he+1}return(fe<1||fe>Ae)&&(fe=Ae=0),{current:fe,total:Ae}},E=new WeakSet,ii=function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:Z(this,Me,ti).call(this)})},M=new WeakSet,dt=function(re,he=!1){var fe;!c(this,ae)&&(c(this,te)!==this._linkService.pagesCount||re===w.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:re,previous:he,matchesCount:Z(this,Me,ti).call(this),rawQuery:((fe=c(this,ee))==null?void 0:fe.query)??null})},D.PDFFindController=H},(G,D)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.CharacterType=void 0,D.getCharacterType=v,D.getNormalizeWithNFKC=t;const N={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};D.CharacterType=N;function b(e){return e<11904}function d(e){return(e&65408)===0}function k(e){return e>=97&&e<=122||e>=65&&e<=90}function w(e){return e>=48&&e<=57}function y(e){return e===32||e===9||e===13||e===10}function r(e){return e>=13312&&e<=40959||e>=63744&&e<=64255}function h(e){return e>=12448&&e<=12543}function a(e){return e>=12352&&e<=12447}function g(e){return e>=65376&&e<=65439}function _(e){return(e&65408)===3584}function v(e){return b(e)?d(e)?y(e)?N.SPACE:k(e)||w(e)||e===95?N.ALPHA_LETTER:N.PUNCT:_(e)?N.THAI_LETTER:e===160?N.SPACE:N.ALPHA_LETTER:r(e)?N.HAN_LETTER:h(e)?N.KATAKANA_LETTER:a(e)?N.HIRAGANA_LETTER:g(e)?N.HALFWIDTH_KATAKANA_LETTER:N.ALPHA_LETTER}let p;function t(){return p||(p=" ¨ª¯²-µ¸-º¼-¾Ĳ-ĳĿ-ŀŉſǄ-ǌǱ-ǳʰ-ʸ˘-˝ˠ-ˤʹͺ;΄-΅·ϐ-ϖϰ-ϲϴ-ϵϹևٵ-ٸक़-य़ড়-ঢ়য়ਲ਼ਸ਼ਖ਼-ਜ਼ਫ਼ଡ଼-ଢ଼ำຳໜ-ໝ༌གྷཌྷདྷབྷཛྷཀྵჼᴬ-ᴮᴰ-ᴺᴼ-ᵍᵏ-ᵪᵸᶛ-ᶿẚ-ẛάέήίόύώΆ᾽-῁ΈΉ῍-῏ΐΊ῝-῟ΰΎ῭-`ΌΏ´-῾ - ‑‗․-… ″-‴‶-‷‼‾⁇-⁉⁗ ⁰-ⁱ⁴-₎ₐ-ₜ₨℀-℃℅-ℇ℉-ℓℕ-№ℙ-ℝ℠-™ℤΩℨK-ℭℯ-ℱℳ-ℹ℻-⅀ⅅ-ⅉ⅐-ⅿ↉∬-∭∯-∰〈-〉①-⓪⨌⩴-⩶⫝̸ⱼ-ⱽⵯ⺟⻳⼀-⿕　〶〸-〺゛-゜ゟヿㄱ-ㆎ㆒-㆟㈀-㈞㈠-㉇㉐-㉾㊀-㏿ꚜ-ꚝꝰꟲ-ꟴꟸ-ꟹꭜ-ꭟꭩ豈-嗀塚晴凞-羽蘒諸逸-都飯-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-זּטּ-לּמּנּ-סּףּ-פּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷼︐-︙︰-﹄﹇-﹒﹔-﹦﹨-﹫ﹰ-ﹲﹴﹶ-ﻼ！-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ￠-￦"),p}},(G,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.PDFHistory=void 0,D.isDestArraysEqual=g,D.isDestHashesEqual=a;var b=N(2),d=N(7);const k=1e3,w=50,y=1e3;function r(){return document.location.hash}class h{constructor({linkService:v,eventBus:p}){this.linkService=v,this.eventBus=p,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",t=>{this._isPagesLoaded=!!t.pagesCount},{once:!0})})}initialize({fingerprint:v,resetHistory:p=!1,updateUrl:t=!1}){if(!v||typeof v!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const e=this._fingerprint!==""&&this._fingerprint!==v;this._fingerprint=v,this._updateUrl=t===!0,this._initialized=!0,this._bindEvents();const s=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=r(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(s,!0)||p){const{hash:f,page:T,rotation:l}=this._parseCurrentHash(!0);if(!f||e||p){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:f,page:T,rotation:l},!0);return}const n=s.destination;this._updateInternalState(n,s.uid,!0),n.rotation!==void 0&&(this._initialRotation=n.rotation),n.dest?(this._initialBookmark=JSON.stringify(n.dest),this._destination.page=null):n.hash?this._initialBookmark=n.hash:n.page&&(this._initialBookmark=`page=${n.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:v=null,explicitDest:p,pageNumber:t}){if(!this._initialized)return;if(v&&typeof v!="string"){console.error(`PDFHistory.push: "${v}" is not a valid namedDest parameter.`);return}else if(Array.isArray(p)){if(!this._isValidPage(t)&&(t!==null||this._destination)){console.error(`PDFHistory.push: "${t}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${p}" is not a valid explicitDest parameter.`);return}const e=v||JSON.stringify(p);if(!e)return;let s=!1;if(this._destination&&(a(this._destination.hash,e)||g(this._destination.dest,p))){if(this._destination.page)return;s=!0}this._popStateInProgress&&!s||(this._pushOrReplaceState({dest:p,hash:e,page:t,rotation:this.linkService.rotation},s),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(v){var p;if(this._initialized){if(!this._isValidPage(v)){console.error(`PDFHistory.pushPage: "${v}" is not a valid page number.`);return}((p=this._destination)==null?void 0:p.page)!==v&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${v}`,page:v,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const v=window.history.state;this._isValidState(v)&&v.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const v=window.history.state;this._isValidState(v)&&v.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(v,p=!1){const t=p||!this._destination,e={fingerprint:this._fingerprint,uid:t?this._uid:this._uid+1,destination:v};this._updateInternalState(v,e.uid);let s;if(this._updateUrl&&(v!=null&&v.hash)){const n=document.location.href.split("#")[0];n.startsWith("file://")||(s=`${n}#${v.hash}`)}t?window.history.replaceState(e,"",s):window.history.pushState(e,"",s)}_tryPushCurrentPosition(v=!1){if(!this._position)return;let p=this._position;if(v&&(p=Object.assign(Object.create(null),this._position),p.temporary=!0),!this._destination){this._pushOrReplaceState(p);return}if(this._destination.temporary){this._pushOrReplaceState(p,!0);return}if(this._destination.hash===p.hash||!this._destination.page&&this._numPositionUpdates<=w)return;let t=!1;if(this._destination.page>=p.first&&this._destination.page<=p.page){if(this._destination.dest!==void 0||!this._destination.first)return;t=!0}this._pushOrReplaceState(p,t)}_isValidPage(v){return Number.isInteger(v)&&v>0&&v<=this.linkService.pagesCount}_isValidState(v,p=!1){if(!v)return!1;if(v.fingerprint!==this._fingerprint)if(p){if(typeof v.fingerprint!="string"||v.fingerprint.length!==this._fingerprint.length)return!1;const[t]=performance.getEntriesByType("navigation");if((t==null?void 0:t.type)!=="reload")return!1}else return!1;return!(!Number.isInteger(v.uid)||v.uid<0||v.destination===null||typeof v.destination!="object")}_updateInternalState(v,p,t=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),t&&(v!=null&&v.temporary)&&delete v.temporary,this._destination=v,this._uid=p,this._maxUid=Math.max(this._maxUid,p),this._numPositionUpdates=0}_parseCurrentHash(v=!1){const p=unescape(r()).substring(1),t=(0,b.parseQueryString)(p),e=t.get("nameddest")||"";let s=t.get("page")|0;return(!this._isValidPage(s)||v&&e.length>0)&&(s=null),{hash:p,page:s,rotation:this.linkService.rotation}}_updateViewarea({location:v}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:v.pdfOpenParams.substring(1),page:this.linkService.page,first:v.pageNumber,rotation:v.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},y))}_popState({state:v}){const p=r(),t=this._currentHash!==p;if(this._currentHash=p,!v){this._uid++;const{hash:s,page:n,rotation:f}=this._parseCurrentHash();this._pushOrReplaceState({hash:s,page:n,rotation:f},!0);return}if(!this._isValidState(v))return;this._popStateInProgress=!0,t&&(this._blockHashChange++,(0,d.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:k}).then(()=>{this._blockHashChange--}));const e=v.destination;this._updateInternalState(e,v.uid,!0),(0,b.isValidRotation)(e.rotation)&&(this.linkService.rotation=e.rotation),e.dest?this.linkService.goToDestination(e.dest):e.hash?this.linkService.setHash(e.hash):e.page&&(this.linkService.page=e.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}D.PDFHistory=h;function a(_,v){return typeof _!="string"||typeof v!="string"?!1:_===v||(0,b.parseQueryString)(_).get("nameddest")===v}function g(_,v){function p(t,e){if(typeof t!=typeof e||Array.isArray(t)||Array.isArray(e))return!1;if(t!==null&&typeof t=="object"&&e!==null){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!p(t[s],e[s]))return!1;return!0}return t===e||Number.isNaN(t)&&Number.isNaN(e)}if(!(Array.isArray(_)&&Array.isArray(v))||_.length!==v.length)return!1;for(let t=0,e=_.length;t<e;t++)if(!p(_[t],v[t]))return!1;return!0}},(G,D,N)=>{var n,f,T,l,I,K,le,H,ee,ae,Pt,ge,ni,Q,si,Ee,ri,A,ai,F,Zi,j,Qi,U,oi;Object.defineProperty(D,"__esModule",{value:!0}),D.PDFPageView=void 0;var b=N(4),d=N(2),k=N(14),w=N(3),y=N(15),r=N(5),h=N(1),a=N(16),g=N(17),_=N(18),v=N(19),p=N(20);const t=y.compatibilityParams.maxCanvasPixels||16777216,e=()=>({annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new h.SimpleLinkService}});class s{constructor(i){$(this,ae);$(this,ge);$(this,Q);$(this,Ee);$(this,A);$(this,F);$(this,j);$(this,U);$(this,n,b.AnnotationMode.ENABLE_FORMS);$(this,f,null);$(this,T,null);$(this,l,null);$(this,I,null);$(this,K,d.RenderingStates.INITIAL);$(this,le,d.TextLayerMode.ENABLE);$(this,H,{initialOptionalContent:!0,regularAnnotations:!0});$(this,ee,new WeakMap);var L;const u=i.container,S=i.defaultViewport;this.id=i.id,this.renderingId="page"+this.id,_e(this,f,i.layerProperties||e),this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=i.scale||d.DEFAULT_SCALE,this.viewport=S,this.pdfPageRotate=S.rotation,this._optionalContentConfigPromise=i.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,_e(this,le,i.textLayerMode??d.TextLayerMode.ENABLE),_e(this,n,i.annotationMode??b.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=i.imageResourcesPath||"",this.useOnlyCssZoom=i.useOnlyCssZoom||!1,this.isOffscreenCanvasSupported=i.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=i.maxCanvasPixels||t,this.pageColors=i.pageColors||null,this.eventBus=i.eventBus,this.renderingQueue=i.renderingQueue,this.l10n=i.l10n||r.NullL10n,this.renderTask=null,this.resume=null,this._isStandalone=!((L=this.renderingQueue)!=null&&L.hasViewer()),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const R=document.createElement("div");if(R.className="page",R.setAttribute("data-page-number",this.id),R.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(W=>{R.setAttribute("aria-label",W)}),this.div=R,Z(this,ae,Pt).call(this),u==null||u.append(R),this._isStandalone){u==null||u.style.setProperty("--scale-factor",this.scale*b.PixelsPerInch.PDF_TO_CSS_UNITS);const{optionalContentConfigPromise:W}=i;W&&W.then(me=>{W===this._optionalContentConfigPromise&&(c(this,H).initialOptionalContent=me.hasInitialVisibility)})}}get renderingState(){return c(this,K)}set renderingState(i){if(i!==c(this,K))switch(_e(this,K,i),c(this,T)&&(clearTimeout(c(this,T)),_e(this,T,null)),i){case d.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case d.RenderingStates.RUNNING:this.div.classList.add("loadingIcon"),_e(this,T,setTimeout(()=>{this.div.classList.add("loading"),_e(this,T,null)},0));break;case d.RenderingStates.INITIAL:case d.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}setPdfPage(i){this.pdfPage=i,this.pdfPageRotate=i.rotate;const u=(this.rotation+this.pdfPageRotate)%360;this.viewport=i.getViewport({scale:this.scale*b.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:u}),Z(this,ae,Pt).call(this),this.reset()}destroy(){var i;this.reset(),(i=this.pdfPage)==null||i.cleanup()}get _textHighlighter(){return(0,b.shadow)(this,"_textHighlighter",new _.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:c(this,f).call(this).findController}))}_resetZoomLayer(i=!1){if(!this.zoomLayer)return;const u=this.zoomLayer.firstChild;c(this,ee).delete(u),u.width=0,u.height=0,i&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:i=!1,keepAnnotationLayer:u=!1,keepAnnotationEditorLayer:S=!1,keepXfaLayer:R=!1,keepTextLayer:L=!1}={}){var be,ve,xe,Pe,Re;this.cancelRendering({keepAnnotationLayer:u,keepAnnotationEditorLayer:S,keepXfaLayer:R,keepTextLayer:L}),this.renderingState=d.RenderingStates.INITIAL;const W=this.div,me=W.childNodes,B=i&&this.zoomLayer||null,q=u&&((be=this.annotationLayer)==null?void 0:be.div)||null,ce=S&&((ve=this.annotationEditorLayer)==null?void 0:ve.div)||null,ne=R&&((xe=this.xfaLayer)==null?void 0:xe.div)||null,ue=L&&((Pe=this.textLayer)==null?void 0:Pe.div)||null;for(let oe=me.length-1;oe>=0;oe--){const we=me[oe];switch(we){case B:case q:case ce:case ne:case ue:continue}we.remove()}W.removeAttribute("data-loaded"),q&&this.annotationLayer.hide(),ce&&this.annotationEditorLayer.hide(),ne&&this.xfaLayer.hide(),ue&&this.textLayer.hide(),(Re=this.structTreeLayer)==null||Re.hide(),B||(this.canvas&&(c(this,ee).delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}update({scale:i=0,rotation:u=null,optionalContentConfigPromise:S=null,drawingDelay:R=-1}){var q;this.scale=i||this.scale,typeof u=="number"&&(this.rotation=u),S instanceof Promise&&(this._optionalContentConfigPromise=S,S.then(ce=>{S===this._optionalContentConfigPromise&&(c(this,H).initialOptionalContent=ce.hasInitialVisibility)}));const L=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*b.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:L}),Z(this,ae,Pt).call(this),this._isStandalone&&((q=this.div.parentNode)==null||q.style.setProperty("--scale-factor",this.viewport.scale));let W=!1;if(this.canvas&&this.maxCanvasPixels>0){const{width:ce,height:ne}=this.viewport,{sx:ue,sy:be}=this.outputScale;(Math.floor(ce)*ue|0)*(Math.floor(ne)*be|0)>this.maxCanvasPixels&&(W=!0)}const me=this.useOnlyCssZoom||this.hasRestrictedScaling&&W,B=!me&&R>=0&&R<1e3;if(this.canvas){if(B||me){B&&this.renderingState!==d.RenderingStates.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:R}),this.renderingState=d.RenderingStates.FINISHED),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!B,hideTextLayer:B}),this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:c(this,I)});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:i=!1,keepAnnotationEditorLayer:u=!1,keepXfaLayer:S=!1,keepTextLayer:R=!1,cancelExtraDelay:L=0}={}){var W;this.renderTask&&(this.renderTask.cancel(L),this.renderTask=null),this.resume=null,this.textLayer&&(!R||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!i||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!u||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!S||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,(W=this._textHighlighter)==null||W.disable())}cssTransform({target:i,redrawAnnotationLayer:u=!1,redrawAnnotationEditorLayer:S=!1,redrawXfaLayer:R=!1,redrawTextLayer:L=!1,hideTextLayer:W=!1}){var B;if(!i.hasAttribute("zooming")){i.setAttribute("zooming",!0);const{style:q}=i;q.width=q.height=""}const me=c(this,ee).get(i);if(this.viewport!==me){const q=this.viewport.rotation-me.rotation,ce=Math.abs(q);let ne=1,ue=1;if(ce===90||ce===270){const{width:be,height:ve}=this.viewport;ne=ve/be,ue=be/ve}i.style.transform=`rotate(${q}deg) scale(${ne}, ${ue})`}u&&this.annotationLayer&&Z(this,ge,ni).call(this),S&&this.annotationEditorLayer&&Z(this,Q,si).call(this),R&&this.xfaLayer&&Z(this,Ee,ri).call(this),this.textLayer&&(W?(this.textLayer.hide(),(B=this.structTreeLayer)==null||B.hide()):L&&Z(this,A,ai).call(this))}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(i,u){return this.viewport.convertToPdfPoint(i,u)}async draw(){this.renderingState!==d.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:i,l10n:u,pageColors:S,pdfPage:R,viewport:L}=this;if(!R)throw this.renderingState=d.RenderingStates.FINISHED,new Error("pdfPage is not loaded");this.renderingState=d.RenderingStates.RUNNING;const W=document.createElement("div");if(W.classList.add("canvasWrapper"),i.append(W),!this.textLayer&&c(this,le)!==d.TextLayerMode.DISABLE&&!R.isPureXfa&&(this._accessibilityManager||(this._accessibilityManager=new g.TextAccessibilityManager),this.textLayer=new v.TextLayerBuilder({highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,enablePermissions:c(this,le)===d.TextLayerMode.ENABLE_PERMISSIONS}),i.append(this.textLayer.div)),!this.annotationLayer&&c(this,n)!==b.AnnotationMode.DISABLE){const{annotationStorage:E,downloadManager:m,enableScripting:M,fieldObjectsPromise:ie,hasJSActionsPromise:de,linkService:re}=c(this,f).call(this);this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer=new w.AnnotationLayerBuilder({pageDiv:i,pdfPage:R,annotationStorage:E,imageResourcesPath:this.imageResourcesPath,renderForms:c(this,n)===b.AnnotationMode.ENABLE_FORMS,linkService:re,downloadManager:m,l10n:u,enableScripting:M,hasJSActionsPromise:de,fieldObjectsPromise:ie,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})}const me=E=>{if(ue==null||ue(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this)){this.renderingState=d.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=d.RenderingStates.RUNNING,E()};return}E()},{width:B,height:q}=L,ce=document.createElement("canvas");ce.setAttribute("role","presentation"),ce.hidden=!0;const ne=!!(S!=null&&S.background&&(S!=null&&S.foreground));let ue=E=>{(!ne||E)&&(ce.hidden=!1,ue=null)};W.append(ce),this.canvas=ce;const be=ce.getContext("2d",{alpha:!1}),ve=this.outputScale=new d.OutputScale;if(this.useOnlyCssZoom){const E=L.clone({scale:b.PixelsPerInch.PDF_TO_CSS_UNITS});ve.sx*=E.width/B,ve.sy*=E.height/q}if(this.maxCanvasPixels>0){const E=B*q,m=Math.sqrt(this.maxCanvasPixels/E);ve.sx>m||ve.sy>m?(ve.sx=m,ve.sy=m,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const xe=(0,d.approximateFraction)(ve.sx),Pe=(0,d.approximateFraction)(ve.sy);ce.width=(0,d.roundToDivide)(B*ve.sx,xe[0]),ce.height=(0,d.roundToDivide)(q*ve.sy,Pe[0]);const{style:Re}=ce;Re.width=(0,d.roundToDivide)(B,xe[1])+"px",Re.height=(0,d.roundToDivide)(q,Pe[1])+"px",c(this,ee).set(ce,L);const oe=ve.scaled?[ve.sx,0,0,ve.sy,0,0]:null,we={canvasContext:be,transform:oe,viewport:L,annotationMode:c(this,n),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:S},Me=this.renderTask=this.pdfPage.render(we);Me.onContinue=me;const Oe=Me.promise.then(async()=>{if(ue==null||ue(!0),await Z(this,U,oi).call(this,Me),Z(this,A,ai).call(this),this.annotationLayer&&await Z(this,ge,ni).call(this),!this.annotationEditorLayer){const{annotationEditorUIManager:E}=c(this,f).call(this);if(!E)return;this.annotationEditorLayer=new k.AnnotationEditorLayerBuilder({uiManager:E,pageDiv:i,pdfPage:R,l10n:u,accessibilityManager:this._accessibilityManager})}Z(this,Q,si).call(this)},E=>(E instanceof b.RenderingCancelledException||ue==null||ue(!0),Z(this,U,oi).call(this,Me,E)));if(R.isPureXfa){if(this.xfaLayer)this.xfaLayer.div&&i.append(this.xfaLayer.div);else{const{annotationStorage:E,linkService:m}=c(this,f).call(this);this.xfaLayer=new p.XfaLayerBuilder({pageDiv:i,pdfPage:R,annotationStorage:E,linkService:m})}Z(this,Ee,ri).call(this)}return i.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),Oe}setPageLabel(i){this.pageLabel=typeof i=="string"?i:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{initialOptionalContent:i,regularAnnotations:u}=c(this,H);return i&&u?this.canvas:null}}n=new WeakMap,f=new WeakMap,T=new WeakMap,l=new WeakMap,I=new WeakMap,K=new WeakMap,le=new WeakMap,H=new WeakMap,ee=new WeakMap,ae=new WeakSet,Pt=function(){const{viewport:i}=this;if(this.pdfPage){if(c(this,l)===i.rotation)return;_e(this,l,i.rotation)}(0,b.setLayerDimensions)(this.div,i,!0,!1)},ge=new WeakSet,ni=async function(){let i=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(u){console.error(`#renderAnnotationLayer: "${u}".`),i=u}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:i})}},Q=new WeakSet,si=async function(){let i=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(u){console.error(`#renderAnnotationEditorLayer: "${u}".`),i=u}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:i})}},Ee=new WeakSet,ri=async function(){let i=null;try{const u=await this.xfaLayer.render(this.viewport,"display");u!=null&&u.textDivs&&this._textHighlighter&&Z(this,j,Qi).call(this,u.textDivs)}catch(u){console.error(`#renderXfaLayer: "${u}".`),i=u}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:i})}},A=new WeakSet,ai=async function(){const{pdfPage:i,textLayer:u,viewport:S}=this;if(!u)return;let R=null;try{if(!u.renderingDone){const L=i.streamTextContent({includeMarkedContent:!0,disableNormalization:!0});u.setTextContentSource(L)}await u.render(S)}catch(L){if(L instanceof b.AbortException)return;console.error(`#renderTextLayer: "${L}".`),R=L}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:u.numTextDivs,error:R}),Z(this,F,Zi).call(this)},F=new WeakSet,Zi=async function(){var S,R,L;if(!this.textLayer)return;this.structTreeLayer||(this.structTreeLayer=new a.StructTreeLayerBuilder);const i=await(this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree()),u=(S=this.structTreeLayer)==null?void 0:S.render(i);u&&((R=this.canvas)==null||R.append(u)),(L=this.structTreeLayer)==null||L.show()},j=new WeakSet,Qi=async function(i){const u=await this.pdfPage.getTextContent(),S=[];for(const R of u.items)S.push(R.str);this._textHighlighter.setTextMapping(i,S),this._textHighlighter.enable()},U=new WeakSet,oi=async function(i,u=null){if(i===this.renderTask&&(this.renderTask=null),u instanceof b.RenderingCancelledException){_e(this,I,null);return}if(_e(this,I,u),this.renderingState=d.RenderingStates.FINISHED,this._resetZoomLayer(!0),c(this,H).regularAnnotations=!i.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:c(this,I)}),u)throw u},D.PDFPageView=s},(G,D,N)=>{var w;Object.defineProperty(D,"__esModule",{value:!0}),D.AnnotationEditorLayerBuilder=void 0;var b=N(4),d=N(5);class k{constructor(r){$(this,w,void 0);this.pageDiv=r.pageDiv,this.pdfPage=r.pdfPage,this.accessibilityManager=r.accessibilityManager,this.l10n=r.l10n||d.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,_e(this,w,r.uiManager)}async render(r,h="display"){if(h!=="display"||this._cancelled)return;const a=r.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:a}),this.show();return}const g=this.div=document.createElement("div");g.className="annotationEditorLayer",g.tabIndex=0,g.hidden=!0,this.pageDiv.append(g),this.annotationEditorLayer=new b.AnnotationEditorLayer({uiManager:c(this,w),div:g,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:a});const _={viewport:a,div:g,annotations:null,intent:h};this.annotationEditorLayer.render(_),this.show()}cancel(){this._cancelled=!0,this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isEmpty||(this.div.hidden=!1)}}w=new WeakMap,D.AnnotationEditorLayerBuilder=k},(G,D)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.compatibilityParams=D.OptionKind=D.AppOptions=void 0;const N=Object.create(null);D.compatibilityParams=N;{const y=navigator.userAgent||"",r=navigator.platform||"",h=navigator.maxTouchPoints||1,a=/Android/.test(y),g=/\b(iPad|iPhone|iPod)(?=;)/.test(y)||r==="MacIntel"&&h>1;(function(){(g||a)&&(N.maxCanvasPixels=5242880)})()}const b={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};D.OptionKind=b;const d={annotationEditorMode:{value:0,kind:b.VIEWER+b.PREFERENCE},annotationMode:{value:2,kind:b.VIEWER+b.PREFERENCE},cursorToolOnLoad:{value:0,kind:b.VIEWER+b.PREFERENCE},defaultZoomDelay:{value:400,kind:b.VIEWER+b.PREFERENCE},defaultZoomValue:{value:"",kind:b.VIEWER+b.PREFERENCE},disableHistory:{value:!1,kind:b.VIEWER},disablePageLabels:{value:!1,kind:b.VIEWER+b.PREFERENCE},enableFloatingToolbar:{value:!1,kind:b.VIEWER+b.PREFERENCE},enablePermissions:{value:!1,kind:b.VIEWER+b.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:b.VIEWER+b.PREFERENCE},enableScripting:{value:!0,kind:b.VIEWER+b.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:b.VIEWER},externalLinkTarget:{value:0,kind:b.VIEWER+b.PREFERENCE},historyUpdateUrl:{value:!1,kind:b.VIEWER+b.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:b.VIEWER+b.PREFERENCE},imageResourcesPath:{value:"./images/",kind:b.VIEWER},maxCanvasPixels:{value:16777216,kind:b.VIEWER},forcePageColors:{value:!1,kind:b.VIEWER+b.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:b.VIEWER+b.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:b.VIEWER+b.PREFERENCE},pdfBugEnabled:{value:!1,kind:b.VIEWER+b.PREFERENCE},printResolution:{value:150,kind:b.VIEWER},sidebarViewOnLoad:{value:-1,kind:b.VIEWER+b.PREFERENCE},scrollModeOnLoad:{value:-1,kind:b.VIEWER+b.PREFERENCE},spreadModeOnLoad:{value:-1,kind:b.VIEWER+b.PREFERENCE},textLayerMode:{value:1,kind:b.VIEWER+b.PREFERENCE},useOnlyCssZoom:{value:!1,kind:b.VIEWER+b.PREFERENCE},viewerCssTheme:{value:0,kind:b.VIEWER+b.PREFERENCE},viewOnLoad:{value:0,kind:b.VIEWER+b.PREFERENCE},cMapPacked:{value:!0,kind:b.API},cMapUrl:{value:"../web/cmaps/",kind:b.API},disableAutoFetch:{value:!1,kind:b.API+b.PREFERENCE},disableFontFace:{value:!1,kind:b.API+b.PREFERENCE},disableRange:{value:!1,kind:b.API+b.PREFERENCE},disableStream:{value:!1,kind:b.API+b.PREFERENCE},docBaseUrl:{value:"",kind:b.API},enableXfa:{value:!0,kind:b.API+b.PREFERENCE},fontExtraProperties:{value:!1,kind:b.API},isEvalSupported:{value:!0,kind:b.API},isOffscreenCanvasSupported:{value:!0,kind:b.API},maxImageSize:{value:-1,kind:b.API},pdfBug:{value:!1,kind:b.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:b.API},verbosity:{value:1,kind:b.API},workerPort:{value:null,kind:b.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:b.WORKER}};d.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:b.VIEWER},d.disablePreferences={value:!1,kind:b.VIEWER},d.locale={value:navigator.language||"en-US",kind:b.VIEWER},d.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:b.VIEWER};const k=Object.create(null);class w{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(r){const h=k[r];if(h!==void 0)return h;const a=d[r];if(a!==void 0)return N[r]??a.value}static getAll(r=null){const h=Object.create(null);for(const a in d){const g=d[a];if(r){if(!(r&g.kind))continue;if(r===b.PREFERENCE){const v=g.value,p=typeof v;if(p==="boolean"||p==="string"||p==="number"&&Number.isInteger(v)){h[a]=v;continue}throw new Error(`Invalid type for preference: ${a}`)}}const _=k[a];h[a]=_!==void 0?_:N[a]??g.value}return h}static set(r,h){k[r]=h}static setAll(r){for(const h in r)k[h]=r[h]}static remove(r){delete k[r]}}D.AppOptions=w,w._hasUserOptions=function(){return Object.keys(k).length>0}},(G,D)=>{var k,w,li,r,ci;Object.defineProperty(D,"__esModule",{value:!0}),D.StructTreeLayerBuilder=void 0;const N={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},b=/^H(\d+)$/;class d{constructor(){$(this,w);$(this,r);$(this,k,void 0)}get renderingDone(){return c(this,k)!==void 0}render(g){if(c(this,k)!==void 0)return c(this,k);const _=Z(this,r,ci).call(this,g);return _==null||_.classList.add("structTree"),_e(this,k,_)}hide(){c(this,k)&&!c(this,k).hidden&&(c(this,k).hidden=!0)}show(){var g;(g=c(this,k))!=null&&g.hidden&&(c(this,k).hidden=!1)}}k=new WeakMap,w=new WeakSet,li=function(g,_){g.alt!==void 0&&_.setAttribute("aria-label",g.alt),g.id!==void 0&&_.setAttribute("aria-owns",g.id),g.lang!==void 0&&_.setAttribute("lang",g.lang)},r=new WeakSet,ci=function(g){if(!g)return null;const _=document.createElement("span");if("role"in g){const{role:v}=g,p=v.match(b);p?(_.setAttribute("role","heading"),_.setAttribute("aria-level",p[1])):N[v]&&_.setAttribute("role",N[v])}if(Z(this,w,li).call(this,g,_),g.children)if(g.children.length===1&&"id"in g.children[0])Z(this,w,li).call(this,g.children[0],_);else for(const v of g.children)_.append(Z(this,r,ci).call(this,v));return _},D.StructTreeLayerBuilder=d},(G,D,N)=>{var k,w,y,r,h,Ct,g,hi;Object.defineProperty(D,"__esModule",{value:!0}),D.TextAccessibilityManager=void 0;var b=N(2);const v=class{constructor(){$(this,g);$(this,k,!1);$(this,w,null);$(this,y,new Map);$(this,r,new Map)}setTextMapping(t){_e(this,w,t)}enable(){if(c(this,k))throw new Error("TextAccessibilityManager is already enabled.");if(!c(this,w))throw new Error("Text divs and strings have not been set.");if(_e(this,k,!0),_e(this,w,c(this,w).slice()),c(this,w).sort(Z(v,h,Ct)),c(this,y).size>0){const t=c(this,w);for(const[e,s]of c(this,y)){if(!document.getElementById(e)){c(this,y).delete(e);continue}Z(this,g,hi).call(this,e,t[s])}}for(const[t,e]of c(this,r))this.addPointerInTextLayer(t,e);c(this,r).clear()}disable(){c(this,k)&&(c(this,r).clear(),_e(this,w,null),_e(this,k,!1))}removePointerInTextLayer(t){if(!c(this,k)){c(this,r).delete(t);return}const e=c(this,w);if(!e||e.length===0)return;const{id:s}=t,n=c(this,y).get(s);if(n===void 0)return;const f=e[n];c(this,y).delete(s);let T=f.getAttribute("aria-owns");T!=null&&T.includes(s)&&(T=T.split(" ").filter(l=>l!==s).join(" "),T?f.setAttribute("aria-owns",T):(f.removeAttribute("aria-owns"),f.setAttribute("role","presentation")))}addPointerInTextLayer(t,e){const{id:s}=t;if(!s)return;if(!c(this,k)){c(this,r).set(t,e);return}e&&this.removePointerInTextLayer(t);const n=c(this,w);if(!n||n.length===0)return;const f=(0,b.binarySearchFirstItem)(n,l=>{var I;return Z(I=v,h,Ct).call(I,t,l)<0}),T=Math.max(0,f-1);Z(this,g,hi).call(this,s,n[T]),c(this,y).set(s,T)}moveElementInDOM(t,e,s,n){if(this.addPointerInTextLayer(s,n),!t.hasChildNodes()){t.append(e);return}const f=Array.from(t.childNodes).filter(I=>I!==e);if(f.length===0)return;const T=s||e,l=(0,b.binarySearchFirstItem)(f,I=>{var K;return Z(K=v,h,Ct).call(K,T,I)<0});l===0?f[0].before(e):f[l-1].after(e)}};let d=v;k=new WeakMap,w=new WeakMap,y=new WeakMap,r=new WeakMap,h=new WeakSet,Ct=function(t,e){const s=t.getBoundingClientRect(),n=e.getBoundingClientRect();if(s.width===0&&s.height===0)return 1;if(n.width===0&&n.height===0)return-1;const f=s.y,T=s.y+s.height,l=s.y+s.height/2,I=n.y,K=n.y+n.height,le=n.y+n.height/2;if(l<=I&&le>=T)return-1;if(le<=f&&l>=K)return 1;const H=s.x+s.width/2,ee=n.x+n.width/2;return H-ee},g=new WeakSet,hi=function(t,e){const s=e.getAttribute("aria-owns");s!=null&&s.includes(t)||e.setAttribute("aria-owns",s?`${s} ${t}`:t),e.removeAttribute("role")},$(d,h),D.TextAccessibilityManager=d},(G,D)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.TextHighlighter=void 0;class N{constructor({findController:d,eventBus:k,pageIndex:w}){this.findController=d,this.matches=[],this.eventBus=k,this.pageIdx=w,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(d,k){this.textDivs=d,this.textContentItemsStr=k}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=d=>{(d.pageIndex===this.pageIdx||d.pageIndex===-1)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null),this._updateMatches(!0))}_convertMatches(d,k){if(!d)return[];const{textContentItemsStr:w}=this;let y=0,r=0;const h=w.length-1,a=[];for(let g=0,_=d.length;g<_;g++){let v=d[g];for(;y!==h&&v>=r+w[y].length;)r+=w[y].length,y++;y===w.length&&console.error("Could not find a matching mapping");const p={begin:{divIdx:y,offset:v-r}};for(v+=k[g];y!==h&&v>r+w[y].length;)r+=w[y].length,y++;p.end={divIdx:y,offset:v-r},a.push(p)}return a}_renderMatches(d){if(d.length===0)return;const{findController:k,pageIdx:w}=this,{textContentItemsStr:y,textDivs:r}=this,h=w===k.selected.pageIdx,a=k.selected.matchIdx,g=k.state.highlightAll;let _=null;const v={divIdx:-1,offset:void 0};function p(T,l){const I=T.divIdx;return r[I].textContent="",t(I,0,T.offset,l)}function t(T,l,I,K){let le=r[T];if(le.nodeType===Node.TEXT_NODE){const ae=document.createElement("span");le.before(ae),ae.append(le),r[T]=ae,le=ae}const H=y[T].substring(l,I),ee=document.createTextNode(H);if(K){const ae=document.createElement("span");return ae.className=`${K} appended`,ae.append(ee),le.append(ae),K.includes("selected")?ae.offsetLeft:0}return le.append(ee),0}let e=a,s=e+1;if(g)e=0,s=d.length;else if(!h)return;let n=-1,f=-1;for(let T=e;T<s;T++){const l=d[T],I=l.begin;if(I.divIdx===n&&I.offset===f)continue;n=I.divIdx,f=I.offset;const K=l.end,le=h&&T===a,H=le?" selected":"";let ee=0;if(!_||I.divIdx!==_.divIdx?(_!==null&&t(_.divIdx,_.offset,v.offset),p(I)):t(_.divIdx,_.offset,I.offset),I.divIdx===K.divIdx)ee=t(I.divIdx,I.offset,K.offset,"highlight"+H);else{ee=t(I.divIdx,I.offset,v.offset,"highlight begin"+H);for(let ae=I.divIdx+1,te=K.divIdx;ae<te;ae++)r[ae].className="highlight middle"+H;p(K,"highlight end"+H)}_=K,le&&k.scrollMatchIntoView({element:r[I.divIdx],selectedLeft:ee,pageIndex:w,matchIndex:a})}_&&t(_.divIdx,_.offset,v.offset)}_updateMatches(d=!1){if(!this.enabled&&!d)return;const{findController:k,matches:w,pageIdx:y}=this,{textContentItemsStr:r,textDivs:h}=this;let a=-1;for(const v of w){const p=Math.max(a,v.begin.divIdx);for(let t=p,e=v.end.divIdx;t<=e;t++){const s=h[t];s.textContent=r[t],s.className=""}a=v.end.divIdx+1}if(!(k!=null&&k.highlightMatches)||d)return;const g=k.pageMatches[y]||null,_=k.pageMatchesLength[y]||null;this.matches=this._convertMatches(g,_),this._renderMatches(this.matches)}}D.TextHighlighter=N},(G,D,N)=>{var w,y,r,h,a,Ji,_,en;Object.defineProperty(D,"__esModule",{value:!0}),D.TextLayerBuilder=void 0;var b=N(4),d=N(2);class k{constructor({highlighter:t=null,accessibilityManager:e=null,isOffscreenCanvasSupported:s=!0,enablePermissions:n=!1}){$(this,a);$(this,_);$(this,w,!1);$(this,y,0);$(this,r,0);$(this,h,null);this.textContentItemsStr=[],this.renderingDone=!1,this.textDivs=[],this.textDivProperties=new WeakMap,this.textLayerRenderTask=null,this.highlighter=t,this.accessibilityManager=e,this.isOffscreenCanvasSupported=s,_e(this,w,n===!0),this.div=document.createElement("div"),this.div.className="textLayer",this.hide()}get numTextDivs(){return this.textDivs.length}async render(t){var n,f,T;if(!c(this,h))throw new Error('No "textContentSource" parameter specified.');const e=t.scale*(globalThis.devicePixelRatio||1),{rotation:s}=t;if(this.renderingDone){const l=s!==c(this,y),I=e!==c(this,r);(l||I)&&(this.hide(),(0,b.updateTextLayer)({container:this.div,viewport:t,textDivs:this.textDivs,textDivProperties:this.textDivProperties,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,mustRescale:I,mustRotate:l}),_e(this,r,e),_e(this,y,s)),this.show();return}this.cancel(),(n=this.highlighter)==null||n.setTextMapping(this.textDivs,this.textContentItemsStr),(f=this.accessibilityManager)==null||f.setTextMapping(this.textDivs),this.textLayerRenderTask=(0,b.renderTextLayer)({textContentSource:c(this,h),container:this.div,viewport:t,textDivs:this.textDivs,textDivProperties:this.textDivProperties,textContentItemsStr:this.textContentItemsStr,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported}),await this.textLayerRenderTask.promise,Z(this,a,Ji).call(this),_e(this,r,e),_e(this,y,s),this.show(),(T=this.accessibilityManager)==null||T.enable()}hide(){var t;this.div.hidden||((t=this.highlighter)==null||t.disable(),this.div.hidden=!0)}show(){var t;this.div.hidden&&this.renderingDone&&(this.div.hidden=!1,(t=this.highlighter)==null||t.enable())}cancel(){var t,e;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),(t=this.highlighter)==null||t.disable(),(e=this.accessibilityManager)==null||e.disable(),this.textContentItemsStr.length=0,this.textDivs.length=0,this.textDivProperties=new WeakMap}setTextContentSource(t){this.cancel(),_e(this,h,t)}}w=new WeakMap,y=new WeakMap,r=new WeakMap,h=new WeakMap,a=new WeakSet,Ji=function(){this.renderingDone=!0;const t=document.createElement("div");t.className="endOfContent",this.div.append(t),Z(this,_,en).call(this)},_=new WeakSet,en=function(){const{div:t}=this;t.addEventListener("mousedown",e=>{const s=t.querySelector(".endOfContent");if(!s)return;let n=e.target!==t;if(n&&(n=getComputedStyle(s).getPropertyValue("-moz-user-select")!=="none"),n){const f=t.getBoundingClientRect(),T=Math.max(0,(e.pageY-f.top)/f.height);s.style.top=(T*100).toFixed(2)+"%"}s.classList.add("active")}),t.addEventListener("mouseup",()=>{const e=t.querySelector(".endOfContent");e&&(e.style.top="",e.classList.remove("active"))}),t.addEventListener("copy",e=>{if(!c(this,w)){const s=document.getSelection();e.clipboardData.setData("text/plain",(0,d.removeNullCharacters)((0,b.normalizeUnicode)(s.toString())))}e.preventDefault(),e.stopPropagation()})},D.TextLayerBuilder=k},(G,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.XfaLayerBuilder=void 0;var b=N(4);class d{constructor({pageDiv:w,pdfPage:y,annotationStorage:r=null,linkService:h,xfaHtml:a=null}){this.pageDiv=w,this.pdfPage=y,this.annotationStorage=r,this.linkService=h,this.xfaHtml=a,this.div=null,this._cancelled=!1}async render(w,y="display"){if(y==="print"){const a={viewport:w.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:y},g=document.createElement("div");return this.pageDiv.append(g),a.div=g,b.XfaLayer.render(a)}const r=await this.pdfPage.getXfa();if(this._cancelled||!r)return{textDivs:[]};const h={viewport:w.clone({dontFlip:!0}),div:this.div,xfaHtml:r,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:y};return this.div?b.XfaLayer.update(h):(this.div=document.createElement("div"),this.pageDiv.append(this.div),h.div=this.div,b.XfaLayer.render(h))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}D.XfaLayerBuilder=d},(G,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.PDFScriptingManager=void 0;var b=N(2),d=N(4);class k{constructor({eventBus:y,sandboxBundleSrc:r=null,scriptingFactory:h=null,docPropertiesLookup:a=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._ready=!1,this._eventBus=y,this._sandboxBundleSrc=r,this._scriptingFactory=h,this._docPropertiesLookup=a,this._scriptingFactory||window.addEventListener("updatefromsandbox",g=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:g.detail})})}setViewer(y){this._pdfViewer=y}async setDocument(y){var g;if(this._pdfDocument&&await this._destroyScripting(),this._pdfDocument=y,!y)return;const[r,h,a]=await Promise.all([y.getFieldObjects(),y.getCalculationOrderIds(),y.getJSActions()]);if(!r&&!a){await this._destroyScripting();return}if(y===this._pdfDocument){try{this._scripting=this._createScripting()}catch(_){console.error(`PDFScriptingManager.setDocument: "${_==null?void 0:_.message}".`),await this._destroyScripting();return}this._internalEvents.set("updatefromsandbox",_=>{(_==null?void 0:_.source)===window&&this._updateFromSandbox(_.detail)}),this._internalEvents.set("dispatcheventinsandbox",_=>{var v;(v=this._scripting)==null||v.dispatchEventInSandbox(_.detail)}),this._internalEvents.set("pagechanging",({pageNumber:_,previous:v})=>{_!==v&&(this._dispatchPageClose(v),this._dispatchPageOpen(_))}),this._internalEvents.set("pagerendered",({pageNumber:_})=>{this._pageOpenPending.has(_)&&_===this._pdfViewer.currentPageNumber&&this._dispatchPageOpen(_)}),this._internalEvents.set("pagesdestroy",async _=>{var v,p;await this._dispatchPageClose(this._pdfViewer.currentPageNumber),await((v=this._scripting)==null?void 0:v.dispatchEventInSandbox({id:"doc",name:"WillClose"})),(p=this._closeCapability)==null||p.resolve()});for(const[_,v]of this._internalEvents)this._eventBus._on(_,v);try{const _=await this._getDocProperties();if(y!==this._pdfDocument)return;await this._scripting.createSandbox({objects:r,calculationOrder:h,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{..._,actions:a}}),this._eventBus.dispatch("sandboxcreated",{source:this})}catch(_){console.error(`PDFScriptingManager.setDocument: "${_==null?void 0:_.message}".`),await this._destroyScripting();return}await((g=this._scripting)==null?void 0:g.dispatchEventInSandbox({id:"doc",name:"Open"})),await this._dispatchPageOpen(this._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{y===this._pdfDocument&&(this._ready=!0)})}}async dispatchWillSave(y){var r;return(r=this._scripting)==null?void 0:r.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(y){var r;return(r=this._scripting)==null?void 0:r.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(y){var r;return(r=this._scripting)==null?void 0:r.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}async dispatchDidPrint(y){var r;return(r=this._scripting)==null?void 0:r.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get destroyPromise(){var y;return((y=this._destroyCapability)==null?void 0:y.promise)||null}get ready(){return this._ready}get _internalEvents(){return(0,d.shadow)(this,"_internalEvents",new Map)}get _pageOpenPending(){return(0,d.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,d.shadow)(this,"_visitedPages",new Map)}async _updateFromSandbox(y){var p;const r=this._pdfViewer.isInPresentationMode||this._pdfViewer.isChangingPresentationMode,{id:h,siblings:a,command:g,value:_}=y;if(!h){switch(g){case"clear":console.clear();break;case"error":console.error(_);break;case"layout":{if(r)return;const t=(0,b.apiPageLayoutToViewerModes)(_);this._pdfViewer.spreadMode=t.spreadMode;break}case"page-num":this._pdfViewer.currentPageNumber=_+1;break;case"print":await this._pdfViewer.pagesPromise,this._eventBus.dispatch("print",{source:this});break;case"println":console.log(_);break;case"zoom":if(r)return;this._pdfViewer.currentScaleValue=_;break;case"SaveAs":this._eventBus.dispatch("download",{source:this});break;case"FirstPage":this._pdfViewer.currentPageNumber=1;break;case"LastPage":this._pdfViewer.currentPageNumber=this._pdfViewer.pagesCount;break;case"NextPage":this._pdfViewer.nextPage();break;case"PrevPage":this._pdfViewer.previousPage();break;case"ZoomViewIn":if(r)return;this._pdfViewer.increaseScale();break;case"ZoomViewOut":if(r)return;this._pdfViewer.decreaseScale();break}return}if(r&&y.focus)return;delete y.id,delete y.siblings;const v=a?[h,...a]:[h];for(const t of v){const e=document.querySelector(`[data-element-id="${t}"]`);e?e.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:y})):(p=this._pdfDocument)==null||p.annotationStorage.setValue(t,y)}}async _dispatchPageOpen(y,r=!1){const h=this._pdfDocument,a=this._visitedPages;if(r&&(this._closeCapability=new d.PromiseCapability),!this._closeCapability)return;const g=this._pdfViewer.getPageView(y-1);if((g==null?void 0:g.renderingState)!==b.RenderingStates.FINISHED){this._pageOpenPending.add(y);return}this._pageOpenPending.delete(y);const _=(async()=>{var p,t;const v=await(a.has(y)?null:(p=g.pdfPage)==null?void 0:p.getJSActions());h===this._pdfDocument&&await((t=this._scripting)==null?void 0:t.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:y,actions:v}))})();a.set(y,_)}async _dispatchPageClose(y){var g;const r=this._pdfDocument,h=this._visitedPages;if(!this._closeCapability||this._pageOpenPending.has(y))return;const a=h.get(y);a&&(h.set(y,null),await a,r===this._pdfDocument&&await((g=this._scripting)==null?void 0:g.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:y})))}async _getDocProperties(){if(this._docPropertiesLookup)return this._docPropertiesLookup(this._pdfDocument);const{docPropertiesLookup:y}=N(22);return y(this._pdfDocument)}_createScripting(){if(this._destroyCapability=new d.PromiseCapability,this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:y}=N(22);return new y(this._sandboxBundleSrc)}async _destroyScripting(){var y,r;if(!this._scripting){this._pdfDocument=null,(y=this._destroyCapability)==null||y.resolve();return}this._closeCapability&&(await Promise.race([this._closeCapability.promise,new Promise(h=>{setTimeout(h,1e3)})]).catch(h=>{}),this._closeCapability=null),this._pdfDocument=null;try{await this._scripting.destroySandbox()}catch{}for(const[h,a]of this._internalEvents)this._eventBus._off(h,a);this._internalEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),this._scripting=null,this._ready=!1,(r=this._destroyCapability)==null||r.resolve()}}D.PDFScriptingManager=k},(G,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.GenericScripting=void 0,D.docPropertiesLookup=d;var b=N(4);async function d(w){const y="",r=y.split("#")[0];let{info:h,metadata:a,contentDispositionFilename:g,contentLength:_}=await w.getMetadata();if(!_){const{length:v}=await w.getDownloadInfo();_=v}return{...h,baseURL:r,filesize:_,filename:g||(0,b.getPdfFilenameFromUrl)(y),metadata:a==null?void 0:a.getRaw(),authors:a==null?void 0:a.get("dc:creator"),numPages:w.numPages,URL:y}}class k{constructor(y){this._ready=(0,b.loadScript)(y,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}async createSandbox(y){(await this._ready).create(y)}async dispatchEventInSandbox(y){const r=await this._ready;setTimeout(()=>r.dispatchEvent(y),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}D.GenericScripting=k},(G,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.PDFSinglePageViewer=void 0;var b=N(2),d=N(24);class k extends d.PDFViewer{_resetView(){super._resetView(),this._scrollMode=b.ScrollMode.PAGE,this._spreadMode=b.SpreadMode.NONE}set scrollMode(y){}_updateScrollMode(){}set spreadMode(y){}_updateSpreadMode(){}}D.PDFSinglePageViewer=k},(G,D,N)=>{var p,t,e,ui,n,f,T,l,I,K,le,H,ee,ae,te,ge,ye,Q,Ce,Ee,J,tn,C,nn,Y,sn,se,rn,V,ft,i,wt,S,an,L,di,me,on,q,Je,ne,fi,be,ln,xe,cn,Re,pi,we,hn;Object.defineProperty(D,"__esModule",{value:!0}),D.PagesCountLimit=D.PDFViewer=D.PDFPageViewBuffer=void 0;var b=N(4),d=N(2),k=N(5),w=N(13),y=N(25),r=N(1);const h=10,a={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};D.PagesCountLimit=a;function g(Oe){return Object.values(b.AnnotationEditorType).includes(Oe)&&Oe!==b.AnnotationEditorType.DISABLE}class _{constructor(E){$(this,e);$(this,p,new Set);$(this,t,0);_e(this,t,E)}push(E){const m=c(this,p);m.has(E)&&m.delete(E),m.add(E),m.size>c(this,t)&&Z(this,e,ui).call(this)}resize(E,m=null){_e(this,t,E);const M=c(this,p);if(m){const ie=M.size;let de=1;for(const re of M)if(m.has(re.id)&&(M.delete(re),M.add(re)),++de>ie)break}for(;M.size>c(this,t);)Z(this,e,ui).call(this)}has(E){return c(this,p).has(E)}[Symbol.iterator](){return c(this,p).keys()}}p=new WeakMap,t=new WeakMap,e=new WeakSet,ui=function(){const E=c(this,p).keys().next().value;E==null||E.destroy(),c(this,p).delete(E)},D.PDFPageViewBuffer=_;class v{constructor(E){$(this,J);$(this,C);$(this,Y);$(this,se);$(this,V);$(this,i);$(this,S);$(this,L);$(this,me);$(this,q);$(this,ne);$(this,be);$(this,xe);$(this,Re);$(this,we);$(this,n,null);$(this,f,b.AnnotationEditorType.NONE);$(this,T,null);$(this,l,b.AnnotationMode.ENABLE_FORMS);$(this,I,null);$(this,K,null);$(this,le,!1);$(this,H,!1);$(this,ee,null);$(this,ae,!1);$(this,te,0);$(this,ge,new ResizeObserver(Z(this,we,hn).bind(this)));$(this,ye,null);$(this,Q,null);$(this,Ce,null);$(this,Ee,d.TextLayerMode.ENABLE);var M,ie;const m="3.6.172";if(b.version!==m)throw new Error(`The API version "${b.version}" does not match the Viewer version "${m}".`);if(this.container=E.container,this.viewer=E.viewer||E.container.firstElementChild,((M=this.container)==null?void 0:M.tagName)!=="DIV"||((ie=this.viewer)==null?void 0:ie.tagName)!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");c(this,ge).observe(this.container),this.eventBus=E.eventBus,this.linkService=E.linkService||new r.SimpleLinkService,this.downloadManager=E.downloadManager||null,this.findController=E.findController||null,this._scriptingManager=E.scriptingManager||null,_e(this,Ee,E.textLayerMode??d.TextLayerMode.ENABLE),_e(this,l,E.annotationMode??b.AnnotationMode.ENABLE_FORMS),_e(this,f,E.annotationEditorMode??b.AnnotationEditorType.NONE),this.imageResourcesPath=E.imageResourcesPath||"",this.enablePrintAutoRotate=E.enablePrintAutoRotate||!1,this.removePageBorders=E.removePageBorders||!1,this.useOnlyCssZoom=E.useOnlyCssZoom||!1,this.isOffscreenCanvasSupported=E.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=E.maxCanvasPixels,this.l10n=E.l10n||k.NullL10n,_e(this,le,E.enablePermissions||!1),this.pageColors=E.pageColors||null,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("PDFViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!E.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new y.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=E.renderingQueue,this.scroll=(0,d.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=d.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),Z(this,Re,pi).call(this)}get pagesCount(){return this._pages.length}getPageView(E){return this._pages[E]}get pageViewsReady(){return this._pagesCapability.settled&&this._pages.every(E=>E==null?void 0:E.pdfPage)}get renderForms(){return c(this,l)===b.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(E){if(!Number.isInteger(E))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(E,!0)||console.error(`currentPageNumber: "${E}" is not a valid page.`))}_setCurrentPageNumber(E,m=!1){var ie;if(this._currentPageNumber===E)return m&&Z(this,ne,fi).call(this),!0;if(!(0<E&&E<=this.pagesCount))return!1;const M=this._currentPageNumber;return this._currentPageNumber=E,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:E,pageLabel:((ie=this._pageLabels)==null?void 0:ie[E-1])??null,previous:M}),m&&Z(this,ne,fi).call(this),!0}get currentPageLabel(){var E;return((E=this._pageLabels)==null?void 0:E[this._currentPageNumber-1])??null}set currentPageLabel(E){if(!this.pdfDocument)return;let m=E|0;if(this._pageLabels){const M=this._pageLabels.indexOf(E);M>=0&&(m=M+1)}this._setCurrentPageNumber(m,!0)||console.error(`currentPageLabel: "${E}" is not a valid page.`)}get currentScale(){return this._currentScale!==d.UNKNOWN_SCALE?this._currentScale:d.DEFAULT_SCALE}set currentScale(E){if(isNaN(E))throw new Error("Invalid numeric scale.");this.pdfDocument&&Z(this,q,Je).call(this,E,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(E){this.pdfDocument&&Z(this,q,Je).call(this,E,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(E){if(!(0,d.isValidRotation)(E))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(E%=360,E<0&&(E+=360),this._pagesRotation===E))return;this._pagesRotation=E;const m=this._currentPageNumber;this.refresh(!0,{rotation:E}),this._currentScaleValue&&Z(this,q,Je).call(this,this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:E,pageNumber:m}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}async getAllText(){const E=[],m=[];for(let M=1,ie=this.pdfDocument.numPages;M<=ie;++M){if(c(this,ae))return null;m.length=0;const de=await this.pdfDocument.getPage(M),{items:re}=await de.getTextContent();for(const he of re)he.str&&m.push(he.str),he.hasEOL&&m.push(`
`);E.push((0,d.removeNullCharacters)(m.join("")))}return E.join(`
`)}setDocument(E){var re,he;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),(re=this.findController)==null||re.setDocument(null),(he=this._scriptingManager)==null||he.setDocument(null),c(this,T)&&(c(this,T).destroy(),_e(this,T,null))),this.pdfDocument=E,!E)return;const m=E.numPages,M=E.getPage(1),ie=E.getOptionalContentConfig(),de=c(this,le)?E.getPermissions():Promise.resolve();if(m>a.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const fe=this._scrollMode=d.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:fe})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:m})},()=>{}),this._onBeforeDraw=fe=>{const Ae=this._pages[fe.pageNumber-1];Ae&&c(this,n).push(Ae)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=fe=>{fe.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:fe.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,c(this,Q)&&(document.removeEventListener("visibilitychange",c(this,Q)),_e(this,Q,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([M,de]).then(([fe,Ae])=>{if(E!==this.pdfDocument)return;this._firstPageCapability.resolve(fe),this._optionalContentConfigPromise=ie;const{annotationEditorMode:Te,annotationMode:Se,textLayerMode:Fe}=Z(this,C,nn).call(this,Ae);if(Fe!==d.TextLayerMode.DISABLE){const De=_e(this,ee,document.createElement("div"));De.id="hiddenCopyElement",this.viewer.before(De)}if(Te!==b.AnnotationEditorType.DISABLE){const De=Te;E.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):g(De)?(_e(this,T,new b.AnnotationEditorUIManager(this.container,this.eventBus,E==null?void 0:E.annotationStorage)),De!==b.AnnotationEditorType.NONE&&c(this,T).updateMode(De)):console.error(`Invalid AnnotationEditor mode: ${De}`)}const Ie=Z(this,J,tn).bind(this),ke=this._scrollMode===d.ScrollMode.PAGE?null:this.viewer,Le=this.currentScale,Ne=fe.getViewport({scale:Le*b.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",Ne.scale);for(let De=1;De<=m;++De){const Ue=new w.PDFPageView({container:ke,eventBus:this.eventBus,id:De,scale:Le,defaultViewport:Ne.clone(),optionalContentConfigPromise:ie,renderingQueue:this.renderingQueue,textLayerMode:Fe,annotationMode:Se,imageResourcesPath:this.imageResourcesPath,useOnlyCssZoom:this.useOnlyCssZoom,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties:Ie});this._pages.push(Ue)}const Ve=this._pages[0];Ve&&(Ve.setPdfPage(fe),this.linkService.cachePageRef(1,fe.ref)),this._scrollMode===d.ScrollMode.PAGE?Z(this,V,ft).call(this):this._spreadMode!==d.SpreadMode.NONE&&this._updateSpreadMode(),Z(this,Y,sn).call(this).then(async()=>{var Ue,Be;if((Ue=this.findController)==null||Ue.setDocument(E),(Be=this._scriptingManager)==null||Be.setDocument(E),c(this,ee)&&(_e(this,K,Z(this,se,rn).bind(this,Fe)),document.addEventListener("copy",c(this,K))),c(this,T)&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:c(this,f)}),E.loadingParams.disableAutoFetch||m>a.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let De=m-1;if(De<=0){this._pagesCapability.resolve();return}for(let ze=2;ze<=m;++ze){const He=E.getPage(ze).then(Ge=>{const Ye=this._pages[ze-1];Ye.pdfPage||Ye.setPdfPage(Ge),this.linkService.cachePageRef(ze,Ge.ref),--De===0&&this._pagesCapability.resolve()},Ge=>{console.error(`Unable to get page ${ze} to initialize viewer`,Ge),--De===0&&this._pagesCapability.resolve()});ze%a.PAUSE_EAGER_PAGE_INIT===0&&await He}}),this.eventBus.dispatch("pagesinit",{source:this}),E.getMetadata().then(({info:De})=>{E===this.pdfDocument&&De.Language&&(this.viewer.lang=De.Language)}),this.defaultRenderingQueue&&this.update()}).catch(fe=>{console.error("Unable to initialize viewer",fe),this._pagesCapability.reject(fe)})}setPageLabels(E){var m;if(this.pdfDocument){E?Array.isArray(E)&&this.pdfDocument.numPages===E.length?this._pageLabels=E:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let M=0,ie=this._pages.length;M<ie;M++)this._pages[M].setPageLabel(((m=this._pageLabels)==null?void 0:m[M])??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=d.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,_e(this,n,new _(h)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=new b.PromiseCapability,this._onePageRenderedCapability=new b.PromiseCapability,this._pagesCapability=new b.PromiseCapability,this._scrollMode=d.ScrollMode.VERTICAL,this._previousScrollMode=d.ScrollMode.UNKNOWN,this._spreadMode=d.SpreadMode.NONE,_e(this,ye,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),c(this,Q)&&(document.removeEventListener("visibilitychange",c(this,Q)),_e(this,Q,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),c(this,ee)&&(document.removeEventListener("copy",c(this,K)),_e(this,K,null),c(this,ee).remove(),_e(this,ee,null))}_scrollUpdate(){this.pagesCount!==0&&this.update()}pageLabelToPageNumber(E){if(!this._pageLabels)return null;const m=this._pageLabels.indexOf(E);return m<0?null:m+1}scrollPageIntoView({pageNumber:E,destArray:m=null,allowNegativeOffset:M=!1,ignoreDestinationZoom:ie=!1}){if(!this.pdfDocument)return;const de=Number.isInteger(E)&&this._pages[E-1];if(!de){console.error(`scrollPageIntoView: "${E}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!m){this._setCurrentPageNumber(E,!0);return}let re=0,he=0,fe=0,Ae=0,Te,Se;const Fe=de.rotation%180!==0,Ie=(Fe?de.height:de.width)/de.scale/b.PixelsPerInch.PDF_TO_CSS_UNITS,ke=(Fe?de.width:de.height)/de.scale/b.PixelsPerInch.PDF_TO_CSS_UNITS;let Le=0;switch(m[1].name){case"XYZ":re=m[2],he=m[3],Le=m[4],re=re!==null?re:0,he=he!==null?he:ke;break;case"Fit":case"FitB":Le="page-fit";break;case"FitH":case"FitBH":he=m[2],Le="page-width",he===null&&this._location?(re=this._location.left,he=this._location.top):(typeof he!="number"||he<0)&&(he=ke);break;case"FitV":case"FitBV":re=m[2],fe=Ie,Ae=ke,Le="page-height";break;case"FitR":re=m[2],he=m[3],fe=m[4]-re,Ae=m[5]-he;let Ue=d.SCROLLBAR_PADDING,Be=d.VERTICAL_PADDING;this.removePageBorders&&(Ue=Be=0),Te=(this.container.clientWidth-Ue)/fe/b.PixelsPerInch.PDF_TO_CSS_UNITS,Se=(this.container.clientHeight-Be)/Ae/b.PixelsPerInch.PDF_TO_CSS_UNITS,Le=Math.min(Math.abs(Te),Math.abs(Se));break;default:console.error(`scrollPageIntoView: "${m[1].name}" is not a valid destination type.`);return}if(ie||(Le&&Le!==this._currentScale?this.currentScaleValue=Le:this._currentScale===d.UNKNOWN_SCALE&&(this.currentScaleValue=d.DEFAULT_SCALE_VALUE)),Le==="page-fit"&&!m[4]){Z(this,i,wt).call(this,de);return}const Ne=[de.viewport.convertToViewportPoint(re,he),de.viewport.convertToViewportPoint(re+fe,he+Ae)];let Ve=Math.min(Ne[0][0],Ne[1][0]),De=Math.min(Ne[0][1],Ne[1][1]);M||(Ve=Math.max(Ve,0),De=Math.max(De,0)),Z(this,i,wt).call(this,de,{left:Ve,top:De})}_updateLocation(E){const m=this._currentScale,M=this._currentScaleValue,ie=parseFloat(M)===m?Math.round(m*1e4)/100:M,de=E.id,re=this._pages[de-1],he=this.container,fe=re.getPagePoint(he.scrollLeft-E.x,he.scrollTop-E.y),Ae=Math.round(fe[0]),Te=Math.round(fe[1]);let Se=`#page=${de}`;this.isInPresentationMode||(Se+=`&zoom=${ie},${Ae},${Te}`),this._location={pageNumber:de,scale:ie,top:Te,left:Ae,rotation:this._pagesRotation,pdfOpenParams:Se}}update(){const E=this._getVisiblePages(),m=E.views,M=m.length;if(M===0)return;const ie=Math.max(h,2*M+1);c(this,n).resize(ie,E.ids),this.renderingQueue.renderHighestPriority(E);const de=this._spreadMode===d.SpreadMode.NONE&&(this._scrollMode===d.ScrollMode.PAGE||this._scrollMode===d.ScrollMode.VERTICAL),re=this._currentPageNumber;let he=!1;for(const fe of m){if(fe.percent<100)break;if(fe.id===re&&de){he=!0;break}}this._setCurrentPageNumber(he?re:m[0].id),this._updateLocation(E.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(E){return this.container.contains(E)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===d.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===d.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const E=this._scrollMode===d.ScrollMode.PAGE?c(this,ye).pages:this._pages,m=this._scrollMode===d.ScrollMode.HORIZONTAL,M=m&&this._isContainerRtl;return(0,d.getVisibleElements)({scrollEl:this.container,views:E,sortByVisibility:!0,horizontal:m,rtl:M})}isPageVisible(E){return this.pdfDocument?Number.isInteger(E)&&E>0&&E<=this.pagesCount?this._getVisiblePages().ids.has(E):(console.error(`isPageVisible: "${E}" is not a valid page.`),!1):!1}isPageCached(E){if(!this.pdfDocument)return!1;if(!(Number.isInteger(E)&&E>0&&E<=this.pagesCount))return console.error(`isPageCached: "${E}" is not a valid page.`),!1;const m=this._pages[E-1];return c(this,n).has(m)}cleanup(){for(const E of this._pages)E.renderingState!==d.RenderingStates.FINISHED&&E.reset()}_cancelRendering(){for(const E of this._pages)E.cancelRendering()}forceRendering(E){const m=E||this._getVisiblePages(),M=Z(this,xe,cn).call(this,m),ie=this._spreadMode!==d.SpreadMode.NONE&&this._scrollMode!==d.ScrollMode.HORIZONTAL,de=this.renderingQueue.getHighestPriority(m,this._pages,M,ie);return de?(Z(this,be,ln).call(this,de).then(()=>{this.renderingQueue.renderView(de)}),!0):!1}get hasEqualPageSizes(){const E=this._pages[0];for(let m=1,M=this._pages.length;m<M;++m){const ie=this._pages[m];if(ie.width!==E.width||ie.height!==E.height)return!1}return!0}getPagesOverview(){let E;return this._pages.map(m=>{const M=m.pdfPage.getViewport({scale:1}),ie=(0,d.isPortraitOrientation)(M);if(E===void 0)E=ie;else if(this.enablePrintAutoRotate&&ie!==E)return{width:M.height,height:M.width,rotation:(M.rotation-90)%360};return{width:M.width,height:M.height,rotation:M.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(E){if(!(E instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${E}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=E,this.refresh(!1,{optionalContentConfigPromise:E}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:E}))}get scrollMode(){return this._scrollMode}set scrollMode(E){if(this._scrollMode!==E){if(!(0,d.isValidScrollMode)(E))throw new Error(`Invalid scroll mode: ${E}`);this.pagesCount>a.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=E,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:E}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(E=null){const m=this._scrollMode,M=this.viewer;M.classList.toggle("scrollHorizontal",m===d.ScrollMode.HORIZONTAL),M.classList.toggle("scrollWrapped",m===d.ScrollMode.WRAPPED),!(!this.pdfDocument||!E)&&(m===d.ScrollMode.PAGE?Z(this,V,ft).call(this):this._previousScrollMode===d.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&Z(this,q,Je).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(E,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(E){if(this._spreadMode!==E){if(!(0,d.isValidSpreadMode)(E))throw new Error(`Invalid spread mode: ${E}`);this._spreadMode=E,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:E}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(E=null){if(!this.pdfDocument)return;const m=this.viewer,M=this._pages;if(this._scrollMode===d.ScrollMode.PAGE)Z(this,V,ft).call(this);else if(m.textContent="",this._spreadMode===d.SpreadMode.NONE)for(const ie of this._pages)m.append(ie.div);else{const ie=this._spreadMode-1;let de=null;for(let re=0,he=M.length;re<he;++re)de===null?(de=document.createElement("div"),de.className="spread",m.append(de)):re%2===ie&&(de=de.cloneNode(!1),m.append(de)),de.append(M[re].div)}E&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&Z(this,q,Je).call(this,this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(E,!0),this.update())}_getPageAdvance(E,m=!1){switch(this._scrollMode){case d.ScrollMode.WRAPPED:{const{views:M}=this._getVisiblePages(),ie=new Map;for(const{id:de,y:re,percent:he,widthPercent:fe}of M){if(he===0||fe<100)continue;let Ae=ie.get(re);Ae||ie.set(re,Ae||(Ae=[])),Ae.push(de)}for(const de of ie.values()){const re=de.indexOf(E);if(re===-1)continue;const he=de.length;if(he===1)break;if(m)for(let fe=re-1,Ae=0;fe>=Ae;fe--){const Te=de[fe],Se=de[fe+1]-1;if(Te<Se)return E-Se}else for(let fe=re+1,Ae=he;fe<Ae;fe++){const Te=de[fe],Se=de[fe-1]+1;if(Te>Se)return Se-E}if(m){const fe=de[0];if(fe<E)return E-fe+1}else{const fe=de[he-1];if(fe>E)return fe-E+1}break}break}case d.ScrollMode.HORIZONTAL:break;case d.ScrollMode.PAGE:case d.ScrollMode.VERTICAL:{if(this._spreadMode===d.SpreadMode.NONE)break;const M=this._spreadMode-1;if(m&&E%2!==M)break;if(!m&&E%2===M)break;const{views:ie}=this._getVisiblePages(),de=m?E-1:E+1;for(const{id:re,percent:he,widthPercent:fe}of ie)if(re===de){if(he>0&&fe===100)return 2;break}break}}return 1}nextPage(){const E=this._currentPageNumber,m=this.pagesCount;if(E>=m)return!1;const M=this._getPageAdvance(E,!1)||1;return this.currentPageNumber=Math.min(E+M,m),!0}previousPage(){const E=this._currentPageNumber;if(E<=1)return!1;const m=this._getPageAdvance(E,!0)||1;return this.currentPageNumber=Math.max(E-m,1),!0}increaseScale({drawingDelay:E,scaleFactor:m,steps:M}={}){if(!this.pdfDocument)return;let ie=this._currentScale;if(m>1)ie=Math.round(ie*m*100)/100;else{M??(M=1);do ie=Math.ceil((ie*d.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--M>0&&ie<d.MAX_SCALE)}Z(this,q,Je).call(this,Math.min(d.MAX_SCALE,ie),{noScroll:!1,drawingDelay:E})}decreaseScale({drawingDelay:E,scaleFactor:m,steps:M}={}){if(!this.pdfDocument)return;let ie=this._currentScale;if(m>0&&m<1)ie=Math.round(ie*m*100)/100;else{M??(M=1);do ie=Math.floor((ie/d.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--M>0&&ie>d.MIN_SCALE)}Z(this,q,Je).call(this,Math.max(d.MIN_SCALE,ie),{noScroll:!1,drawingDelay:E})}get containerTopLeft(){return c(this,I)||_e(this,I,[this.container.offsetTop,this.container.offsetLeft])}get annotationEditorMode(){return c(this,T)?c(this,f):b.AnnotationEditorType.DISABLE}set annotationEditorMode(E){if(!c(this,T))throw new Error("The AnnotationEditor is not enabled.");if(c(this,f)!==E){if(!g(E))throw new Error(`Invalid AnnotationEditor mode: ${E}`);this.pdfDocument&&(_e(this,f,E),this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:E}),c(this,T).updateMode(E))}}set annotationEditorParams({type:E,value:m}){if(!c(this,T))throw new Error("The AnnotationEditor is not enabled.");c(this,T).updateParams(E,m)}refresh(E=!1,m=Object.create(null)){if(this.pdfDocument){for(const M of this._pages)M.update(m);c(this,Ce)!==null&&(clearTimeout(c(this,Ce)),_e(this,Ce,null)),E||this.update()}}}n=new WeakMap,f=new WeakMap,T=new WeakMap,l=new WeakMap,I=new WeakMap,K=new WeakMap,le=new WeakMap,H=new WeakMap,ee=new WeakMap,ae=new WeakMap,te=new WeakMap,ge=new WeakMap,ye=new WeakMap,Q=new WeakMap,Ce=new WeakMap,Ee=new WeakMap,J=new WeakSet,tn=function(){const E=this;return{get annotationEditorUIManager(){return c(E,T)},get annotationStorage(){var m;return(m=E.pdfDocument)==null?void 0:m.annotationStorage},get downloadManager(){return E.downloadManager},get enableScripting(){return!!E._scriptingManager},get fieldObjectsPromise(){var m;return(m=E.pdfDocument)==null?void 0:m.getFieldObjects()},get findController(){return E.findController},get hasJSActionsPromise(){var m;return(m=E.pdfDocument)==null?void 0:m.hasJSActions()},get linkService(){return E.linkService}}},C=new WeakSet,nn=function(E){const m={annotationEditorMode:c(this,f),annotationMode:c(this,l),textLayerMode:c(this,Ee)};return E&&(!E.includes(b.PermissionFlag.COPY)&&c(this,Ee)===d.TextLayerMode.ENABLE&&(m.textLayerMode=d.TextLayerMode.ENABLE_PERMISSIONS),E.includes(b.PermissionFlag.MODIFY_CONTENTS)||(m.annotationEditorMode=b.AnnotationEditorType.DISABLE),!E.includes(b.PermissionFlag.MODIFY_ANNOTATIONS)&&!E.includes(b.PermissionFlag.FILL_INTERACTIVE_FORMS)&&c(this,l)===b.AnnotationMode.ENABLE_FORMS&&(m.annotationMode=b.AnnotationMode.ENABLE)),m},Y=new WeakSet,sn=function(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();const E=new Promise(m=>{_e(this,Q,()=>{document.visibilityState==="hidden"&&(m(),document.removeEventListener("visibilitychange",c(this,Q)),_e(this,Q,null))}),document.addEventListener("visibilitychange",c(this,Q))});return Promise.race([this._onePageRenderedCapability.promise,E])},se=new WeakSet,rn=function(E,m){const M=document.getSelection(),{focusNode:ie,anchorNode:de}=M;if(de&&ie&&M.containsNode(c(this,ee))){if(c(this,H)||E===d.TextLayerMode.ENABLE_PERMISSIONS){m.preventDefault(),m.stopPropagation();return}_e(this,H,!0);const re=this.container.style.cursor;this.container.style.cursor="wait";const he=fe=>_e(this,ae,fe.key==="Escape");window.addEventListener("keydown",he),this.getAllText().then(async fe=>{fe!==null&&await navigator.clipboard.writeText(fe)}).catch(fe=>{console.warn(`Something goes wrong when extracting the text: ${fe.message}`)}).finally(()=>{_e(this,H,!1),_e(this,ae,!1),window.removeEventListener("keydown",he),this.container.style.cursor=re}),m.preventDefault(),m.stopPropagation()}},V=new WeakSet,ft=function(){if(this._scrollMode!==d.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const E=this._currentPageNumber,m=c(this,ye),M=this.viewer;if(M.textContent="",m.pages.length=0,this._spreadMode===d.SpreadMode.NONE&&!this.isInPresentationMode){const ie=this._pages[E-1];M.append(ie.div),m.pages.push(ie)}else{const ie=new Set,de=this._spreadMode-1;de===-1?ie.add(E-1):E%2!==de?(ie.add(E-1),ie.add(E)):(ie.add(E-2),ie.add(E-1));const re=document.createElement("div");if(re.className="spread",this.isInPresentationMode){const he=document.createElement("div");he.className="dummyPage",re.append(he)}for(const he of ie){const fe=this._pages[he];fe&&(re.append(fe.div),m.pages.push(fe))}M.append(re)}m.scrollDown=E>=m.previousPageNumber,m.previousPageNumber=E},i=new WeakSet,wt=function(E,m=null){const{div:M,id:ie}=E;if(this._currentPageNumber!==ie&&this._setCurrentPageNumber(ie),this._scrollMode===d.ScrollMode.PAGE&&(Z(this,V,ft).call(this),this.update()),!m&&!this.isInPresentationMode){const de=M.offsetLeft+M.clientLeft,re=de+M.clientWidth,{scrollLeft:he,clientWidth:fe}=this.container;(this._scrollMode===d.ScrollMode.HORIZONTAL||de<he||re>he+fe)&&(m={left:0,top:0})}(0,d.scrollIntoView)(M,m),!this._currentScaleValue&&this._location&&(this._location=null)},S=new WeakSet,an=function(E){return E===this._currentScale||Math.abs(E-this._currentScale)<1e-15},L=new WeakSet,di=function(E,m,{noScroll:M=!1,preset:ie=!1,drawingDelay:de=-1}){if(this._currentScaleValue=m.toString(),Z(this,S,an).call(this,E)){ie&&this.eventBus.dispatch("scalechanging",{source:this,scale:E,presetValue:m});return}this.viewer.style.setProperty("--scale-factor",E*b.PixelsPerInch.PDF_TO_CSS_UNITS);const re=de>=0&&de<1e3;if(this.refresh(!0,{scale:E,drawingDelay:re?de:-1}),re&&_e(this,Ce,setTimeout(()=>{_e(this,Ce,null),this.refresh()},de)),this._currentScale=E,!M){let he=this._currentPageNumber,fe;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(he=this._location.pageNumber,fe=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:he,destArray:fe,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:E,presetValue:ie?m:void 0}),this.defaultRenderingQueue&&this.update()},me=new WeakSet,on=function(){return this._spreadMode!==d.SpreadMode.NONE&&this._scrollMode!==d.ScrollMode.HORIZONTAL?2:1},q=new WeakSet,Je=function(E,m){let M=parseFloat(E);if(M>0)m.preset=!1,Z(this,L,di).call(this,M,E,m);else{const ie=this._pages[this._currentPageNumber-1];if(!ie)return;let de=d.SCROLLBAR_PADDING,re=d.VERTICAL_PADDING;this.isInPresentationMode?(de=re=4,this._spreadMode!==d.SpreadMode.NONE&&(de*=2)):this.removePageBorders?de=re=0:this._scrollMode===d.ScrollMode.HORIZONTAL&&([de,re]=[re,de]);const he=(this.container.clientWidth-de)/ie.width*ie.scale/c(this,me,on),fe=(this.container.clientHeight-re)/ie.height*ie.scale;switch(E){case"page-actual":M=1;break;case"page-width":M=he;break;case"page-height":M=fe;break;case"page-fit":M=Math.min(he,fe);break;case"auto":const Ae=(0,d.isPortraitOrientation)(ie)?he:Math.min(fe,he);M=Math.min(d.MAX_AUTO_SCALE,Ae);break;default:console.error(`#setScale: "${E}" is an unknown zoom value.`);return}m.preset=!0,Z(this,L,di).call(this,M,E,m)}},ne=new WeakSet,fi=function(){const E=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&Z(this,q,Je).call(this,this._currentScaleValue,{noScroll:!0}),Z(this,i,wt).call(this,E)},be=new WeakSet,ln=async function(E){var m,M;if(E.pdfPage)return E.pdfPage;try{const ie=await this.pdfDocument.getPage(E.id);return E.pdfPage||E.setPdfPage(ie),(M=(m=this.linkService)._cachedPageNumber)!=null&&M.call(m,ie.ref)||this.linkService.cachePageRef(E.id,ie.ref),ie}catch(ie){return console.error("Unable to get page for page view",ie),null}},xe=new WeakSet,cn=function(E){var m,M;if(((m=E.first)==null?void 0:m.id)===1)return!0;if(((M=E.last)==null?void 0:M.id)===this.pagesCount)return!1;switch(this._scrollMode){case d.ScrollMode.PAGE:return c(this,ye).scrollDown;case d.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down},Re=new WeakSet,pi=function(E=this.container.clientHeight){E!==c(this,te)&&(_e(this,te,E),d.docStyle.setProperty("--viewer-container-height",`${E}px`))},we=new WeakSet,hn=function(E){for(const m of E)if(m.target===this.container){Z(this,Re,pi).call(this,Math.floor(m.borderBoxSize[0].blockSize)),_e(this,I,null);break}},D.PDFViewer=v},(G,D,N)=>{Object.defineProperty(D,"__esModule",{value:!0}),D.PDFRenderingQueue=void 0;var b=N(4),d=N(2);const k=3e4;class w{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(r){this.pdfViewer=r}setThumbnailViewer(r){this.pdfThumbnailViewer=r}isHighestPriority(r){return this.highestPriorityPage===r.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(r){var h;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(r)&&(this.isThumbnailViewEnabled&&((h=this.pdfThumbnailViewer)!=null&&h.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),k)))}getHighestPriority(r,h,a,g=!1){const _=r.views,v=_.length;if(v===0)return null;for(let n=0;n<v;n++){const f=_[n].view;if(!this.isViewFinished(f))return f}const p=r.first.id,t=r.last.id;if(t-p+1>v){const n=r.ids;for(let f=1,T=t-p;f<T;f++){const l=a?p+f:t-f;if(n.has(l))continue;const I=h[l-1];if(!this.isViewFinished(I))return I}}let e=a?t:p-2,s=h[e];return s&&!this.isViewFinished(s)||g&&(e+=a?1:-1,s=h[e],s&&!this.isViewFinished(s))?s:null}isViewFinished(r){return r.renderingState===d.RenderingStates.FINISHED}renderView(r){switch(r.renderingState){case d.RenderingStates.FINISHED:return!1;case d.RenderingStates.PAUSED:this.highestPriorityPage=r.renderingId,r.resume();break;case d.RenderingStates.RUNNING:this.highestPriorityPage=r.renderingId;break;case d.RenderingStates.INITIAL:this.highestPriorityPage=r.renderingId,r.draw().finally(()=>{this.renderHighestPriority()}).catch(h=>{h instanceof b.RenderingCancelledException||console.error(`renderView: "${h}"`)});break}return!0}}D.PDFRenderingQueue=w}],P={};function O(G){var D=P[G];if(D!==void 0)return D.exports;var N=P[G]={exports:{}};return X[G](N,N.exports,O),N.exports}var pe={};return(()=>{var G=pe;Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return b.AnnotationLayerBuilder}}),G.DefaultXfaLayerFactory=G.DefaultTextLayerFactory=G.DefaultStructTreeLayerFactory=G.DefaultAnnotationLayerFactory=void 0,Object.defineProperty(G,"DownloadManager",{enumerable:!0,get:function(){return d.DownloadManager}}),Object.defineProperty(G,"EventBus",{enumerable:!0,get:function(){return k.EventBus}}),Object.defineProperty(G,"GenericL10n",{enumerable:!0,get:function(){return w.GenericL10n}}),Object.defineProperty(G,"LinkTarget",{enumerable:!0,get:function(){return D.LinkTarget}}),Object.defineProperty(G,"NullL10n",{enumerable:!0,get:function(){return y.NullL10n}}),Object.defineProperty(G,"PDFFindController",{enumerable:!0,get:function(){return r.PDFFindController}}),Object.defineProperty(G,"PDFHistory",{enumerable:!0,get:function(){return h.PDFHistory}}),Object.defineProperty(G,"PDFLinkService",{enumerable:!0,get:function(){return D.PDFLinkService}}),Object.defineProperty(G,"PDFPageView",{enumerable:!0,get:function(){return a.PDFPageView}}),Object.defineProperty(G,"PDFScriptingManager",{enumerable:!0,get:function(){return g.PDFScriptingManager}}),Object.defineProperty(G,"PDFSinglePageViewer",{enumerable:!0,get:function(){return _.PDFSinglePageViewer}}),Object.defineProperty(G,"PDFViewer",{enumerable:!0,get:function(){return v.PDFViewer}}),Object.defineProperty(G,"ProgressBar",{enumerable:!0,get:function(){return N.ProgressBar}}),Object.defineProperty(G,"RenderingStates",{enumerable:!0,get:function(){return N.RenderingStates}}),Object.defineProperty(G,"ScrollMode",{enumerable:!0,get:function(){return N.ScrollMode}}),Object.defineProperty(G,"SimpleLinkService",{enumerable:!0,get:function(){return D.SimpleLinkService}}),Object.defineProperty(G,"SpreadMode",{enumerable:!0,get:function(){return N.SpreadMode}}),Object.defineProperty(G,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return p.StructTreeLayerBuilder}}),Object.defineProperty(G,"TextLayerBuilder",{enumerable:!0,get:function(){return t.TextLayerBuilder}}),Object.defineProperty(G,"XfaLayerBuilder",{enumerable:!0,get:function(){return e.XfaLayerBuilder}}),Object.defineProperty(G,"parseQueryString",{enumerable:!0,get:function(){return N.parseQueryString}});var D=O(1),N=O(2),b=O(3),d=O(6),k=O(7),w=O(8),y=O(5),r=O(10),h=O(12),a=O(13),g=O(21),_=O(23),v=O(24),p=O(16),t=O(19),e=O(20);class s{constructor(){throw new Error("The `DefaultAnnotationLayerFactory` has been removed, please use the `annotationMode` option when initializing the `PDFPageView`-instance to control AnnotationLayer rendering.")}}G.DefaultAnnotationLayerFactory=s;class n{constructor(){throw new Error("The `DefaultStructTreeLayerFactory` has been removed, this functionality is automatically enabled when the TextLayer is used.")}}G.DefaultStructTreeLayerFactory=n;class f{constructor(){throw new Error("The `DefaultTextLayerFactory` has been removed, please use the `textLayerMode` option when initializing the `PDFPageView`-instance to control TextLayer rendering.")}}G.DefaultTextLayerFactory=f;class T{constructor(){throw new Error("The `DefaultXfaLayerFactory` has been removed, please use the `enableXfa` option when calling the `getDocument`-function to control XfaLayer rendering.")}}G.DefaultXfaLayerFactory=T})(),pe})())})(pdf_viewer$1);const pdf_viewer="";pdfExports.GlobalWorkerOptions.workerSrc="/static/pdfjs/pdf.worker.min.js";const _sfc_main=vue.defineComponent({name:"DocumentEditor",components:{ToolbarPagination:_sfc_main$1,ToolbarRotation:_sfc_main$2,ToolbarZoom:_sfc_main$3,ToolbarAnnotation:_sfc_main$4},props:{value:{type:String,required:!0},baseUrl:{type:String,required:!0},pagination:{type:Boolean,default:!0},zoom:{type:Boolean,default:!0},comment:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0},rotation:{type:Boolean,default:!0}},data(){return{token:this.value,rotations:{},highlightingColor:"",commentingColor:"",loading:!0,error:"",currentPage:1,currentZoom:"",hasAnnotations:!1,savingInProgress:!1,interval:null,pages:1,pdfDocument:void 0,viewer:void 0}},computed:{hasBeenRotated(){return this.rotations&&Object.keys(this.rotations).length!==0},needsToBeSaved(){return this.hasBeenRotated||this.hasAnnotations}},mounted(){this.pdfDocument=void 0,this.getFile();const x=["changeCurrentPage","rotate","zoomIn","zoomOut","setScale","setHighlight","setCommenting","save"];for(const o of x)this.$el.addEventListener(o,X=>{this[o](X.detail)})},unmounted(){this.stopWatchingAnnotations()},methods:{getFile:async function(){if(this.token==="FileInfectedException")this.error=this.$t("view_entry.file_infected");else try{const x=await doRequest(`${this.baseUrl}metadata/${this.token}`),o=await pdfExports.getDocument(x.url).promise,X=new pdf_viewerExports.PDFViewer({container:this.$refs.viewerContainer,eventBus:new pdf_viewerExports.EventBus,viewer:this.$refs.pdfViewer});X.setDocument(o),X.eventBus.on("pagechanging",O=>{this.currentPage=O.pageNumber;const pe=new CustomEvent("pageChange",{detail:{pageNumber:O.pageNumber}});this.$el.dispatchEvent(pe)}),X.eventBus.on("pagesinit",()=>{this.currentZoom=X.currentScaleValue="auto"}),this.pages=o.numPages;const P=new CustomEvent("numPages",{detail:{numPages:o.numPages}});this.$el.dispatchEvent(P),this.pdfDocument=vue.markRaw(o),this.viewer=vue.markRaw(X)}catch(x){this.error=x.message}this.loading=!1},rotate(x){var o,X;((o=this.viewer)==null?void 0:o.getPageView(this.currentPage-1)).update({rotation:x}),(X=this.viewer)==null||X.update(),x!==0?this.rotations[this.currentPage-1]=x:delete this.rotations[this.currentPage-1]},changeCurrentPage(x){this.viewer.currentPageNumber=x},zoomIn(){const x=this.viewer;x.increaseScale({scaleFactor:1.1}),this.currentZoom=x.currentScale.toString()},zoomOut(){const x=this.viewer;x.decreaseScale({scaleFactor:1.1}),this.currentZoom=x.currentScale.toString()},setScale(x){this.viewer.currentScaleValue=x,this.currentZoom=x},startWatchingAnnotations:function(){this.interval||(this.interval=window.setInterval(()=>this.updateNeedsToBeSaved(),500))},stopWatchingAnnotations:function(){this.interval&&window.clearInterval(this.interval),this.interval=null},setHighlight(x){const o=this.viewer;this.commentingColor="",this.highlightingColor=x,x?(this.startWatchingAnnotations(),o.annotationEditorMode=pdfExports.AnnotationEditorType.INK,o.annotationEditorParams={type:pdfExports.AnnotationEditorParamsType.INK_THICKNESS,value:10},o.annotationEditorParams={type:pdfExports.AnnotationEditorParamsType.INK_OPACITY,value:50},o.annotationEditorParams={type:pdfExports.AnnotationEditorParamsType.INK_COLOR,value:x}):(this.stopWatchingAnnotations(),o.annotationEditorMode=pdfExports.AnnotationEditorType.NONE)},setCommenting(x){const o=this.viewer;this.highlightingColor="",this.commentingColor=x,x?(this.startWatchingAnnotations(),o.annotationEditorMode=pdfExports.AnnotationEditorType.FREETEXT,o.annotationEditorParams={type:pdfExports.AnnotationEditorParamsType.FREETEXT_SIZE,value:10},o.annotationEditorParams={type:pdfExports.AnnotationEditorParamsType.FREETEXT_COLOR,value:x}):(this.stopWatchingAnnotations(),o.annotationEditorMode=pdfExports.AnnotationEditorType.NONE)},updateNeedsToBeSaved(){this.hasAnnotations=!!this.pdfDocument&&this.pdfDocument.annotationStorage.size>0},async save(){if(!this.needsToBeSaved)return!1;this.savingInProgress=!0,this.setCommenting("");const x=await this.pdfDocument.saveDocument(),o=new Blob([x],{type:"application/pdf"}),X=new FormData;X.append("file",o),X.append("rotations",JSON.stringify(vue.toRaw(this.rotations)));try{const P=await doRequest(`${this.baseUrl}save-editor/${this.token}`,{method:"POST",headers:void 0,body:X});this.rotations={},this.hasAnnotations=!1,this.token=P.token,this.getFile()}catch(P){this.error=P.message}this.savingInProgress=!1}}}),DocumentEditor_vue_vue_type_style_index_0_lang="",_export_sfc=(x,o)=>{const X=x.__vccOpts||x;for(const[P,O]of o)X[P]=O;return X},_hoisted_1={class:"editor-container"},_hoisted_2={class:"wrapper"},_hoisted_3={ref:"viewerContainer",class:"viewerContainer",tabindex:"0"},_hoisted_4={class:"pdfViewer",ref:"pdfViewer"},_hoisted_5={class:"btn-toolbar",role:"toolbar"},_hoisted_6={key:0,class:"text-danger"};function _sfc_render(x,o,X,P,O,pe){const G=vue.resolveComponent("ToolbarPagination"),D=vue.resolveComponent("ToolbarRotation"),N=vue.resolveComponent("ToolbarZoom"),b=vue.resolveComponent("ToolbarAnnotation");return vue.openBlock(),vue.createElementBlock("div",_hoisted_1,[vue.createElementVNode("div",_hoisted_2,[vue.createElementVNode("div",_hoisted_3,[vue.createElementVNode("div",_hoisted_4,null,512)],512)]),vue.createElementVNode("div",_hoisted_5,[x.pages&&x.pagination?(vue.openBlock(),vue.createBlock(G,{key:0,"current-page":x.currentPage,pages:x.pages,onOnChangeCurrentPage:x.changeCurrentPage},null,8,["current-page","pages","onOnChangeCurrentPage"])):vue.createCommentVNode("",!0),x.rotation?(vue.openBlock(),vue.createBlock(D,{key:1,"current-rotation":x.rotations[x.currentPage-1]||0,onOnRotate:x.rotate},null,8,["current-rotation","onOnRotate"])):vue.createCommentVNode("",!0),x.zoom&&x.currentZoom?(vue.openBlock(),vue.createBlock(N,{key:2,"current-zoom":x.currentZoom,onOnZoomIn:x.zoomIn,onOnZoomOut:x.zoomOut,onOnSetScale:x.setScale},null,8,["current-zoom","onOnZoomIn","onOnZoomOut","onOnSetScale"])):vue.createCommentVNode("",!0),x.highlight?(vue.openBlock(),vue.createBlock(b,{key:3,icon:"fa-highlighter","is-activated":x.highlightingColor!="",color:x.highlightingColor,"class-prefix":"bg",colors:{warning:"#ffff00",danger:"#ff0000",info:"#0000ff",success:"#00ff00"},onOnChange:x.setHighlight},null,8,["is-activated","color","onOnChange"])):vue.createCommentVNode("",!0),x.comment?(vue.openBlock(),vue.createBlock(b,{key:4,icon:"fa-message","is-activated":x.commentingColor!="",color:x.commentingColor,"class-prefix":"text",colors:{danger:"#a94442",warning:"#ffff00",info:"#31708f",success:"#3c763d",muted:"#ffffff"},onOnChange:x.setCommenting},null,8,["is-activated","color","onOnChange"])):vue.createCommentVNode("",!0),vue.createElementVNode("button",{type:"button",class:vue.normalizeClass(["btn",x.needsToBeSaved?"btn-primary":"btn-default disabled"]),onClick:o[0]||(o[0]=(...d)=>x.save&&x.save(...d))},[vue.createElementVNode("span",{class:vue.normalizeClass(["fas",x.savingInProgress?"fa-spinner fa-spin-pulse":`fa-save ${x.needsToBeSaved&&"fa-beat-fade"}`])},null,2)],2)]),x.error?(vue.openBlock(),vue.createElementBlock("p",_hoisted_6,vue.toDisplayString(x.error),1)):vue.createCommentVNode("",!0)])}const Editor=_export_sfc(_sfc_main,[["render",_sfc_render]]);function initEditors(){document.querySelectorAll(".osis-document-editor:not([data-v-app])").forEach(x=>{const o={baseUrl:"",value:"",...x.dataset};for(const X of["pagination","zoom","comment","highlight","rotation"])typeof x.dataset[X]<"u"&&(o[X]=x.dataset[X]==="true");runtimeDom.createApp(Editor,o).use(i18n).mount(x)})}initEditors();const observer=new MutationObserver(initEditors);observer.observe(document,{childList:!0,subtree:!0})});
//# sourceMappingURL=osis-document-editor.umd.min.js.map
