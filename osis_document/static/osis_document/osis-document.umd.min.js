(function(c,p){typeof exports=="object"&&typeof module<"u"?p(require("@vue/runtime-dom"),require("vue-i18n"),require("vue")):typeof define=="function"&&define.amd?define(["@vue/runtime-dom","vue-i18n","vue"],p):(c=typeof globalThis<"u"?globalThis:c||self,p(c.Vue,c.VueI18n,c.Vue))})(this,function(c,p,t){"use strict";const N={en:{uploader:{specific_nb_drag_n_drop_label:"Drag and drop one file here | Drag and drop {count} files here",min_max_drag_n_drop_label:"Drag and drop between {min} and {max} files here",min_drag_n_drop_label:"Drag and drop at least one file here | Drag and drop at least {count} files here",max_drag_n_drop_label:"Drag and drop your file here | Drag and drop your files here (maximum {count})",drag_n_drop_label:"Drag and drop your files here",add_file_label:"or click here",max_size_label:"(max size {size})",trigger_upload:"Upload"},upload_entry:{completion:"{progress}% uploaded",too_large:"File is too large",wrong_type:'The file must have the following type: "{types}" | The file must have one of the following types: "{types}"'},view_entry:{rotate_left:"Rotate image left",rotate_right:"Rotate image right",loading:"Loading...",close:"Close",save:"Save",file_infected:"The referenced file appears to be infected with a virus"},error:"Error: {error}",request_error:"Request error: {error}",units:["B","KB","MB","GB","TB"]},"fr-be":{uploader:{specific_nb_drag_n_drop_label:"Glissez-déposez ici un fichier | Glissez-déposez ici {count} fichiers",min_max_drag_n_drop_label:"Glissez-déposez ici entre {min} et {max} fichiers",min_drag_n_drop_label:"Glissez-déposez ici au-moins un fichier | Glissez-déposez ici au-moins {count} fichiers",max_drag_n_drop_label:"Glissez-déposez ici votre fichier | Glissez-déposez ici vos fichiers (maximum {count})",drag_n_drop_label:"Glissez-déposez ici vos fichiers",add_file_label:"ou cliquez-ici",max_size_label:"(taille maximum {size})",trigger_upload:"Transférer"},upload_entry:{completion:"{progress}% transférés",too_large:"Le fichier est trop lourd",wrong_type:`Le fichier doit être du type "{types}" | Le fichier doit être d'un des types suivants : "{types}"`},view_entry:{rotate_left:"Faire pivoter l'image à gauche",rotate_right:"Faire pivoter l'image à droite",loading:"Chargement...",close:"Fermer",save:"Enregistrer",file_infected:"Le fichier référencé semble infecté par un virus"},error:"Erreur : {error}",request_error:"Erreur lors de la requête : {error}",units:["o","Ko","Mo","Go","To"]}},u=p.createI18n({locale:document.documentElement.lang||"en",messages:N});function g(e){let i=0;for(;e>=1024;)e/=1024,++i;const o=u.global.t(`units[${i}]`);return`${e.toFixed(2)} ${o}`}async function y(e,i){const o=await fetch(e,{headers:{"Content-Type":"application/json"},...i});if(o.status>=200&&o.status<300)return o.json();throw new Error(o.statusText)}var b={},V={get exports(){return b},set exports(e){b=e}};function _(){}_.prototype={on:function(e,i,o){var n=this.e||(this.e={});return(n[e]||(n[e]=[])).push({fn:i,ctx:o}),this},once:function(e,i,o){var n=this;function s(){n.off(e,s),i.apply(o,arguments)}return s._=i,this.on(e,s,o)},emit:function(e){var i=[].slice.call(arguments,1),o=((this.e||(this.e={}))[e]||[]).slice(),n=0,s=o.length;for(n;n<s;n++)o[n].fn.apply(o[n].ctx,i);return this},off:function(e,i){var o=this.e||(this.e={}),n=o[e],s=[];if(n&&i)for(var m=0,a=n.length;m<a;m++)n[m].fn!==i&&n[m].fn._!==i&&s.push(n[m]);return s.length?o[e]=s:delete o[e],this}},V.exports=_;var B=b.TinyEmitter=_;const $=new B,S=t.defineComponent({name:"UploadEntry",props:{file:{type:File,required:!0},baseUrl:{type:String,required:!0},maxSize:{type:Number,default:0},mimetypes:{type:Array,default:()=>[]},automatic:{type:Boolean,default:!0}},emits:{setToken(e){return e.length>0},delete(){return!0}},data(){return{progress:0,token:"",error:""}},computed:{isImage:function(){return this.file.type.split("/")[0]==="image"},fileUrl:function(){return URL.createObjectURL(this.file)},humanizedSize:function(){return g(this.file.size)}},mounted(){this.maxSize&&this.file.size>this.maxSize?this.error=this.$t("upload_entry.too_large"):this.mimetypes.length&&!this.mimetypes.includes(this.file.type)?this.error=this.$tc("upload_entry.wrong_type",this.mimetypes.length,{types:this.mimetypes.join(", ")}):this.automatic?this.sendFile():$.on("upload",this.sendFile)},methods:{revokeUrl:function(e){URL.revokeObjectURL(e)},sendFile:function(){const e=new XMLHttpRequest;e.upload.addEventListener("progress",o=>{this.progress=Math.round(o.loaded*100/o.total)},!1),e.open("POST",`${this.baseUrl}request-upload`,!0),e.addEventListener("readystatechange",()=>{if(e.readyState===4&&e.status>=200&&e.status<=300){const o=JSON.parse(e.responseText);this.$emit("setToken",o.token)}else{let o;try{o=JSON.parse(e.responseText).detail}catch{o=e.statusText}this.error=this.$t("request_error",{error:o})}});const i=new FormData;i.append("file",this.file),e.send(i)}}}),h=(e,i)=>{const o=e.__vccOpts||e;for(const[n,s]of i)o[n]=s;return o},w={class:"media"},z={key:0,class:"media-left"},F=["src","alt"],D={class:"media-body"},U={class:"media-heading"},T={class:"text-nowrap"},C={key:0,class:"progress"},L=["aria-valuenow"],q={class:"sr-only"},j={key:1,class:"text-danger"},O={class:"media-right"},R=[t.createElementVNode("span",{class:"fas fa-trash-alt"},null,-1)];function H(e,i,o,n,s,m){return t.openBlock(),t.createElementBlock("li",w,[e.isImage?(t.openBlock(),t.createElementBlock("div",z,[t.createElementVNode("img",{class:"media-object img-thumbnail",src:e.fileUrl,alt:e.file.name,width:"80",onLoad:i[0]||(i[0]=a=>e.revokeUrl(e.fileUrl))},null,40,F)])):t.createCommentVNode("",!0),t.createElementVNode("div",D,[t.createElementVNode("h4",U,[t.createTextVNode(t.toDisplayString(e.file.name)+" ",1),t.createElementVNode("small",null,[t.createElementVNode("span",T,t.toDisplayString(e.humanizedSize),1),t.createTextVNode(" ("+t.toDisplayString(e.file.type)+")",1)])]),e.error?(t.openBlock(),t.createElementBlock("span",j,t.toDisplayString(e.error),1)):(t.openBlock(),t.createElementBlock("div",C,[t.createElementVNode("div",{class:"progress-bar progress-bar-striped active",role:"progressbar","aria-valuenow":e.progress,"aria-valuemin":"0","aria-valuemax":"100",style:t.normalizeStyle({width:`${e.progress}%`})},[t.createElementVNode("span",q,t.toDisplayString(e.$t("upload_entry.completion",{progress:e.progress})),1)],12,L)]))]),t.createElementVNode("div",O,[t.createElementVNode("button",{type:"button",class:"btn btn-danger",onClick:i[1]||(i[1]=a=>e.$emit("delete"))},R)])])}const I=h(S,[["render",H]]),M=t.defineComponent({name:"ViewingModal",props:{baseUrl:{type:String,required:!0},value:{type:String,required:!0},id:{type:String,required:!0},file:{type:Object,required:!0},isEditable:{type:Boolean,default:!0},openOnMount:{type:Boolean,default:!1}},emits:{updateToken(e){return e.length>0}},data:function(){return{rotation:0,originalHeight:null,originalWidth:null,modalHeight:"auto",modalWidth:"auto",error:"",saved:!1}},computed:{isImage:function(){return this.file.mimetype.split("/")[0]==="image"},imageStyle:function(){let e=`rotate(${this.rotation}deg)`;this.isQuarterRotated?e+=` translate(${this.isRotated90CounterClockwise?"-50%":"50%"}, -50%)`:this.isRotated&&(e+=" translate(0, -100%)");const i=this.$refs.modal,o=this.originalHeight&&this.isQuarterRotated&&i.clientWidth<this.originalHeight?`${i.clientWidth-30}px`:"auto";return{transform:e,height:o}},isRotated:function(){return this.rotation%360},isQuarterRotated:function(){return this.rotation%180},isRotated90CounterClockwise:function(){return[-90,270].includes(this.rotation%360)}},watch:{rotation:"changeModalHeight"},mounted(){jQuery(this.$el).on("shown.bs.modal",()=>{this.originalHeight||this.imageLoaded(this.$refs.img),this.changeModalHeight()}),this.openOnMount&&jQuery(this.$el).modal("show")},beforeUnmount(){jQuery(this.$el).modal("hide")},methods:{imageLoaded:async function(e){await t.nextTick(),this.originalHeight=e.clientHeight,this.originalWidth=e.clientWidth,this.changeModalHeight()},changeModalHeight:function(){if(!this.originalWidth||!this.originalHeight)return"auto";const e=this.$refs.modal;this.isQuarterRotated&&e.clientWidth<this.originalHeight?this.modalHeight=`${e.clientWidth*this.originalWidth/this.originalHeight+30}px`:this.modalHeight=`${(this.isQuarterRotated?this.originalWidth:this.originalHeight)+30}px`},saveRotation:async function(){try{const e=await y(`${this.baseUrl}rotate-image/${this.value}`,{method:"POST",body:JSON.stringify({rotate:this.rotation})});this.saved=!0,this.rotation=0,this.$emit("updateToken",e.token),this.error=""}catch(e){this.error=e.message}}}}),G=["id"],A={class:"modal-dialog modal-lg",role:"document"},W={class:"modal-content"},Q={class:"modal-header"},P=["aria-label"],J=[t.createElementVNode("span",{"aria-hidden":"true"},"×",-1)],K={class:"modal-title"},X=["src","alt"],Y={key:1,class:"embed-responsive embed-responsive-16by9"},Z=["data"],v=["src"],x={class:"modal-footer"},ee={class:"row"},te={key:0,class:"col-sm-10 text-left"},ie=[t.createElementVNode("i",{class:"fas fa-undo"},null,-1)],oe=[t.createElementVNode("i",{class:"fas fa-redo"},null,-1)],ne=["disabled"],se={key:0,class:"text-danger"},ae={class:"col-sm-2 pull-right"},re={type:"button",class:"btn btn-default","data-dismiss":"modal"};function le(e,i,o,n,s,m){return t.openBlock(),t.createElementBlock("div",{id:`modal-${e.id}`,class:"modal fade",tabindex:"-1",role:"dialog"},[t.createElementVNode("div",A,[t.createElementVNode("div",W,[t.createElementVNode("div",Q,[t.createElementVNode("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":e.$t("view_entry.close")},J,8,P),t.createElementVNode("h4",K,t.toDisplayString(e.file.name),1)]),t.createElementVNode("div",{ref:"modal",class:"modal-body",style:t.normalizeStyle([{transition:"500ms",overflow:"hidden","max-width":"100%"},{height:e.modalHeight}])},[e.isImage?(t.openBlock(),t.createElementBlock("img",{key:0,ref:"img",src:e.file.url,alt:e.file.name,class:"img-responsive",style:t.normalizeStyle([{transition:"500ms","transform-origin":"top center",margin:"0 auto"},e.imageStyle]),onLoad:i[0]||(i[0]=a=>e.imageLoaded(a.target))},null,44,X)):(t.openBlock(),t.createElementBlock("div",Y,[t.createElementVNode("object",{data:e.file.url,type:"application/pdf",class:"embed-responsive-item"},[t.createElementVNode("embed",{src:e.file.url,type:"application/pdf"},null,8,v)],8,Z)]))],4),t.createElementVNode("div",x,[t.createElementVNode("div",ee,[e.isImage&&e.isEditable?(t.openBlock(),t.createElementBlock("div",te,[t.createElementVNode("button",{type:"button",class:"btn btn-default",onClick:i[1]||(i[1]=a=>e.rotation-=90)},ie),t.createElementVNode("button",{type:"button",class:"btn btn-default",onClick:i[2]||(i[2]=a=>e.rotation+=90)},oe),t.createElementVNode("button",{type:"button",class:"btn btn-default",disabled:!e.isRotated,onClick:i[3]||(i[3]=(...a)=>e.saveRotation&&e.saveRotation(...a))},[t.createElementVNode("i",{class:t.normalizeClass(`fas fa-${e.saved?"check":"save"}`)},null,2),t.createTextVNode(" "+t.toDisplayString(e.$t("view_entry.save")),1)],8,ne),e.error?(t.openBlock(),t.createElementBlock("span",se,t.toDisplayString(e.$t("error",{error:e.error})),1)):t.createCommentVNode("",!0)])):t.createCommentVNode("",!0),t.createElementVNode("div",ae,[t.createElementVNode("button",re,t.toDisplayString(e.$t("view_entry.close")),1)])])])])])],8,G)}const de=h(M,[["render",le]]),me=t.defineComponent({name:"ViewEntry",components:{ViewingModal:de},props:{value:{type:String,required:!0},id:{type:String,required:!0},baseUrl:{type:String,required:!0},isEditable:{type:Boolean,default:!0},editableFilename:{type:Boolean,default:!0}},emits:{updateToken(e){return e.length>0},delete(){return!0}},data(){return{file:null,loading:!0,error:"",name:"",extension:"",saved:!1}},computed:{isImage:function(){var e;return((e=this.file)==null?void 0:e.mimetype.split("/")[0])==="image"},isViewableDocument:function(){const e=this.file.mimetype;return e.split("/")[0]==="image"||e==="application/pdf"},formattedValue:function(){return this.value.replace(/:/g,"-")},fullName:{get(){return`${this.name}${this.extension}`},set:function(e){const i=/^(.+)(\.[^.]+)$/.exec(e);(i==null?void 0:i.length)===3?(this.name=i[1],this.extension=i[2]):(this.name=e,this.extension="")}}},watch:{value:"getFile"},mounted(){this.getFile()},methods:{humanizedSize:g,getFile:async function(){if(this.value==="FileInfectedException")this.error=this.$t("view_entry.file_infected");else try{this.file=await y(`${this.baseUrl}metadata/${this.value}`),this.fullName=this.file.name}catch(e){this.error=e.message}this.loading=!1},saveName:async function(){try{await y(`${this.baseUrl}change-metadata/${this.value}`,{method:"POST",body:JSON.stringify({name:this.fullName})}),this.saved=!0,this.file.name=this.fullName}catch(e){this.error=e.message}}}}),ce={class:"media"},pe={key:0,class:"media-body"},he={class:"progress"},fe={class:"progress-bar progress-bar-striped active",role:"progressbar","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100",style:{width:"100%"}},ue={class:"sr-only"},ge={class:"media-body"},ye={class:"text-danger"},be={class:"media-right text-right"},_e=[t.createElementVNode("span",{class:"fas fa-trash-alt"},null,-1)],$e={key:0,class:"media-left"},ke=["src","alt"],Ee={class:"media-body"},Ne={class:"media-heading"},Ve={key:0,class:"input-group"},Be={key:0,class:"input-group-addon"},Se={class:"input-group-btn"},we=["disabled"],ze={key:1},Fe={class:"text-nowrap"},De={class:"btn-group"},Ue=["data-target"],Te=[t.createElementVNode("span",{class:"fas fa-eye"},null,-1)],Ce=["href"],Le=[t.createElementVNode("span",{class:"fas fa-download"},null,-1)],qe=[t.createElementVNode("span",{class:"fas fa-trash-alt"},null,-1)];function je(e,i,o,n,s,m){const a=t.resolveComponent("ViewingModal");return t.openBlock(),t.createElementBlock("li",ce,[e.loading?(t.openBlock(),t.createElementBlock("div",pe,[t.createElementVNode("div",he,[t.createElementVNode("div",fe,[t.createElementVNode("span",ue,t.toDisplayString(e.$t("view_entry.loading")),1)])])])):e.error?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.createElementVNode("div",ge,[t.createElementVNode("span",ye,t.toDisplayString(e.$t("error",{error:e.error})),1)]),t.createElementVNode("div",be,[e.isEditable?(t.openBlock(),t.createElementBlock("button",{key:0,class:"btn btn-danger",type:"button",onClick:i[0]||(i[0]=d=>e.$emit("delete"))},_e)):t.createCommentVNode("",!0)])],64)):e.file?(t.openBlock(),t.createElementBlock(t.Fragment,{key:2},[e.isImage?(t.openBlock(),t.createElementBlock("div",$e,[t.createElementVNode("img",{class:"media-object img-thumbnail",src:e.file.url,alt:e.file.name,width:"80"},null,8,ke)])):t.createCommentVNode("",!0),t.createElementVNode("div",Ee,[t.createElementVNode("h4",Ne,[e.isEditable&&e.editableFilename?(t.openBlock(),t.createElementBlock("div",Ve,[t.withDirectives(t.createElementVNode("input",{"onUpdate:modelValue":i[1]||(i[1]=d=>e.name=d),type:"text",class:"form-control",onInput:i[2]||(i[2]=d=>e.saved=!1)},null,544),[[t.vModelText,e.name]]),e.extension?(t.openBlock(),t.createElementBlock("span",Be,t.toDisplayString(e.extension),1)):t.createCommentVNode("",!0),t.createElementVNode("span",Se,[t.createElementVNode("button",{type:"button",disabled:e.file.name===e.fullName,class:"btn btn-default",onClick:i[3]||(i[3]=(...d)=>e.saveName&&e.saveName(...d))},[t.createElementVNode("i",{class:t.normalizeClass(`fas fa-${e.saved?"check":"save"}`)},null,2)],8,we)])])):(t.openBlock(),t.createElementBlock("div",ze,t.toDisplayString(e.file.name),1)),t.createElementVNode("small",null,[t.createElementVNode("span",Fe,t.toDisplayString(e.humanizedSize(e.file.size)),1),t.createTextVNode(" ("+t.toDisplayString(e.file.mimetype)+")",1)])])]),t.createElementVNode("div",{class:"media-right text-right",style:t.normalizeStyle({"min-width":e.isViewableDocument?"9.5em":"7em"})},[t.createElementVNode("div",De,[e.isViewableDocument?(t.openBlock(),t.createElementBlock("a",{key:0,class:"btn btn-default","data-toggle":"modal","data-target":`#modal-${e.formattedValue}`},Te,8,Ue)):t.createCommentVNode("",!0),t.createElementVNode("a",{class:"btn btn-default",target:"_blank",href:`${e.file.url}?dl=1`},Le,8,Ce),e.isEditable?(t.openBlock(),t.createElementBlock("button",{key:1,class:"btn btn-danger",type:"button",onClick:i[4]||(i[4]=d=>e.$emit("delete"))},qe)):t.createCommentVNode("",!0)])],4),e.isViewableDocument?(t.openBlock(),t.createBlock(a,{key:1,id:e.formattedValue,file:e.file,"is-editable":e.isEditable,value:e.value,"base-url":e.baseUrl,onUpdateToken:i[5]||(i[5]=d=>e.$emit("updateToken",d))},null,8,["id","file","is-editable","value","base-url"])):t.createCommentVNode("",!0)],64)):t.createCommentVNode("",!0)])}const k=h(me,[["render",je]]),Oe="osisdocument:",Re="add",He="delete",Ie=t.defineComponent({name:"DocumentUploader",components:{UploadEntry:I,ViewEntry:k},props:{name:{type:String,required:!0},baseUrl:{type:String,required:!0},uploadText:{type:String,default:null},uploadButtonText:{type:String,default:null},maxSize:{type:Number,default:0},automaticUpload:{type:Boolean,default:!0},editableFilename:{type:Boolean,default:!0},values:{type:Array,default:()=>[]},mimetypes:{type:Array,default:()=>[]},minFiles:{type:Number,default:0},maxFiles:{type:Number,default:0}},data(){let e=0;return{isDragging:!1,fileList:{},tokens:Object.fromEntries(this.values.map(i=>(e++,[e,i]))),indexGenerated:e}},computed:{filteredTokens:function(){return Object.fromEntries(Object.entries(this.tokens).filter(e=>!!e[1]))},cleanedTokens:function(){return Object.fromEntries(Object.entries(this.tokens).filter(e=>!!e[1]&&!["FileInfectedException","UploadInvalidException"].includes(e[1])))},nbUploadedFiles:function(){return Object.values(this.cleanedTokens).length},dragNDropLabel:function(){return this.minFiles?this.minFiles===this.maxFiles?this.$tc("uploader.specific_nb_drag_n_drop_label",this.minFiles):this.maxFiles?this.$t("uploader.min_max_drag_n_drop_label",{min:this.minFiles,max:this.maxFiles}):this.$tc("uploader.min_drag_n_drop_label",this.minFiles):this.maxFiles?this.$tc("uploader.max_drag_n_drop_label",this.maxFiles):this.$t("uploader.drag_n_drop_label")}},watch:{cleanedTokens:{handler(e,i){if(JSON.stringify(i)!==JSON.stringify(e)){const o=Object.keys(i).length>Object.keys(e).length?He:Re,n=new CustomEvent(Oe+o,{bubbles:!0,detail:{newTokens:e,oldTokens:i}});this.$el.dispatchEvent(n)}}}},mounted(){jQuery("> input",this.$el).on("change",e=>{jQuery(e.target).val()||(this.tokens={})})},methods:{humanizedSize:g,triggerUpload(){$.emit("upload")},onFilePicked(e){const i=e.target.files;i&&Array.from(i).forEach(o=>{this.indexGenerated++,this.fileList[this.indexGenerated]=o,this.tokens[this.indexGenerated]=null}),this.isDragging=!1}}}),lt="",Me=["accept"],Ge=t.createElementVNode("span",{class:"glyphicon glyphicon-plus"},null,-1),Ae={key:0},We={key:1,class:"media-list"},Qe={key:2,class:"text-right form-group"},Pe={class:"media-list"},Je=["name","value"];function Ke(e,i,o,n,s,m){const a=t.resolveComponent("UploadEntry"),d=t.resolveComponent("ViewEntry");return t.openBlock(),t.createElementBlock(t.Fragment,null,[e.maxFiles===0||e.nbUploadedFiles<e.maxFiles?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(["dropzone form-group",{hovering:e.isDragging}]),onDragenter:i[3]||(i[3]=r=>e.isDragging=!0)},[t.createElementVNode("input",{ref:"fileInput",type:"file",multiple:"",accept:e.mimetypes.length?e.mimetypes.join(","):void 0,onDragleave:i[0]||(i[0]=r=>e.isDragging=!1),onChange:i[1]||(i[1]=(...r)=>e.onFilePicked&&e.onFilePicked(...r))},null,40,Me),t.createTextVNode(" "+t.toDisplayString(e.uploadText||e.dragNDropLabel)+" ",1),t.createElementVNode("button",{class:"btn btn-default",type:"button",onClick:i[2]||(i[2]=r=>e.$refs.fileInput.click())},[Ge,t.createTextVNode(" "+t.toDisplayString(e.uploadButtonText||e.$t("uploader.add_file_label")),1)]),e.maxSize?(t.openBlock(),t.createElementBlock("span",Ae,t.toDisplayString(e.$t("uploader.max_size_label",{size:e.humanizedSize(e.maxSize)})),1)):t.createCommentVNode("",!0)],34)):t.createCommentVNode("",!0),e.fileList?(t.openBlock(),t.createElementBlock("ul",We,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.fileList,(r,l)=>(t.openBlock(),t.createBlock(a,{key:l,file:r,"base-url":e.baseUrl,"max-size":e.maxSize,mimetypes:e.mimetypes,automatic:e.automaticUpload,onDelete:f=>{delete e.fileList[l],delete e.tokens[l]},onSetToken:f=>{e.tokens[l]=f,delete e.fileList[l]}},null,8,["file","base-url","max-size","mimetypes","automatic","onDelete","onSetToken"]))),128))])):t.createCommentVNode("",!0),!e.automaticUpload&&Object.values(e.fileList).length?(t.openBlock(),t.createElementBlock("div",Qe,[t.createElementVNode("button",{class:"btn btn-default",type:"button",onClick:i[4]||(i[4]=(...r)=>e.triggerUpload&&e.triggerUpload(...r))},t.toDisplayString(e.$t("uploader.trigger_upload")),1)])):t.createCommentVNode("",!0),t.createElementVNode("ul",Pe,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.filteredTokens,(r,l)=>(t.openBlock(),t.createBlock(d,{id:`${e.name}-${l}`,key:l,value:r,"base-url":e.baseUrl,editable:!0,"editable-filename":e.editableFilename,onDelete:f=>delete e.tokens[l],onUpdateToken:f=>e.tokens[l]=f},null,8,["id","value","base-url","editable-filename","onDelete","onUpdateToken"]))),128))]),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(Object.values(e.cleanedTokens),(r,l)=>(t.openBlock(),t.createElementBlock("input",{key:`${e.name}_${l}`,type:"hidden",name:`${e.name}_${l}`,value:r},null,8,Je))),128))],64)}const Xe=h(Ie,[["render",Ke]]),Ye=t.defineComponent({name:"DocumentVisualizer",components:{ViewEntry:k},props:{baseUrl:{type:String,required:!0},values:{type:Array,required:!0}}}),Ze={class:"media-list"};function ve(e,i,o,n,s,m){const a=t.resolveComponent("ViewEntry");return t.openBlock(),t.createElementBlock("ul",Ze,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.values,(d,r)=>(t.openBlock(),t.createBlock(a,{id:r.toString(),key:r,value:d,"base-url":e.baseUrl,"is-editable":!1},null,8,["id","value","base-url"]))),128))])}const xe=h(Ye,[["render",ve]]);function E(){document.querySelectorAll(".osis-document-uploader:not([data-v-app])").forEach(e=>{const i={baseUrl:"",...e.dataset};typeof e.dataset.maxSize<"u"&&(i.maxSize=Number.parseInt(e.dataset.maxSize)),typeof e.dataset.minFiles<"u"&&(i.minFiles=Number.parseInt(e.dataset.minFiles)),typeof e.dataset.maxFiles<"u"&&(i.maxFiles=Number.parseInt(e.dataset.maxFiles)),typeof e.dataset.mimetypes<"u"&&(i.mimetypes=e.dataset.mimetypes.split(",")),typeof e.dataset.values<"u"&&(i.values=e.dataset.values.split(",")),typeof e.dataset.automaticUpload<"u"&&(i.automaticUpload=e.dataset.automaticUpload==="true"),typeof e.dataset.editableFilename<"u"&&(i.editableFilename=e.dataset.editableFilename==="true"),c.createApp(Xe,i).use(u).mount(e)}),document.querySelectorAll(".osis-document-visualizer:not([data-v-app])").forEach(e=>{const i={baseUrl:"",values:[],...e.dataset};typeof e.dataset.values<"u"&&(i.values=e.dataset.values.split(",")),c.createApp(xe,i).use(u).mount(e)})}E(),new MutationObserver(E).observe(document,{childList:!0,subtree:!0})});
//# sourceMappingURL=osis-document.umd.min.js.map
